<html><head><TITLE>StationAPI</TITLE></head>
<body>
<H2><A HREF ="#DOC.DOCU" > <IMG BORDER=0 SRC=down.gif></A>  class  StationAPI  </H2><BLOCKQUOTE>

Client Station API -- connects to the API Server
</BLOCKQUOTE>
<hr>

<DL>
<DL>
<DT><h3>Public</h3><DD><DT><A HREF="#DOC.3.1"> <IMG BORDER=0 SRC=icon1.gif></A>  <B>Control Requests</B> </B>
 <DD><I></I>

<DL>
<DT><A HREF="#DOC.3.1.1"> <IMG BORDER=0 SRC=icon1.gif></A> void  <B>SetIdentity</B>(<!1><A HREF="StationAPIApplication.html">StationAPIApplication</A> applicationid, <!2><A HREF="C.html#DOC.2.11">StationAPIInstance</A> instanceid = 0) </B>
 <DD><I>Set identity -- call before connecting</I>
<DT><A HREF="#DOC.3.1.2"> <IMG BORDER=0 SRC=icon1.gif></A> void  <B>SetProtocol</B>(<!1><A HREF="StationAPIProtocol.html">StationAPIProtocol</A> protocol) </B>
 <DD><I>Specify communications protocol (optional) -- call before connecting</I>
<DT><A HREF="#DOC.3.1.3"> <IMG BORDER=0 SRC=icon1.gif></A> int32  <B>Connect</B>(char * dns = SAPI_DEFAULT_SERVER, int port = SAPI_DEFAULT_PORT) </B>
 <DD><I>start server connection -- return 0 for success, else protocol specific error value</I>
<DT><A HREF="#DOC.3.1.4"> <IMG BORDER=0 SRC=icon1.gif></A> void  <B>Disconnect</B>(int linger_time = 10000) </B>
 <DD><I>stop server connection</I>
<DT><A HREF="#DOC.3.1.7"> <IMG BORDER=0 SRC=icon1.gif></A> bool  <B>IsConnected</B>(void) </B>
 <DD><I> returns true if connection is live.</I>
<DT><A HREF="#DOC.3.1.8"> <IMG BORDER=0 SRC=icon1.gif></A> int  <B>GetRequestsQueued</B>(void) </B>
 <DD><I> returns number of submitted requests -- use to monitor request load.</I>
<DT><A HREF="#DOC.3.1.9"> <IMG BORDER=0 SRC=icon1.gif></A> int  <B>GetRequestsWaiting</B>(void) </B>
 <DD><I> returns number of requests waiting for processing -- use to monitor request load.</I>
<DT><A HREF="#DOC.3.1.5"> <IMG BORDER=0 SRC=icon1.gif></A> void  <B>SetProcess</B>(bool flag) </B>
 <DD><I>Set to true to enable async callbacks, set to false to queue results</I>
<DT><A HREF="#DOC.3.1.6"> <IMG BORDER=0 SRC=icon1.gif></A> void  <B>ProcessWait</B>(int duration = 1000) </B>
 <DD><I>Poll for syncronous processing -- blocking for up to X milliseconds to process</I>

</DL>
<DT><A HREF="#DOC.3.2"> <IMG BORDER=0 SRC=icon1.gif></A>  <B>Request Functions</B> </B>
 <DD><I></I>

<DL>
<DT><A HREF="#DOC.3.2.1"> <IMG BORDER=0 SRC=icon1.gif></A> <!2><A HREF="C.html#DOC.2.7">StationAPITrack</A>  <B>RequestLogin</B>(<!1><A HREF="StationAPIRequest.html">StationAPIRequest</A> request, char * name, char * password, <!2><A HREF="C.html#DOC.2.6">StationAPIIP</A> ip, <!1><A HREF="StationAPIProduct.html">StationAPIProduct</A> product, <!1><A HREF="StationAPISession.html">StationAPISession</A> * parentsession = NULL, void * user = NULL) </B>
 <DD><I>Login -- Create a new session on server</I>
<DT><A HREF="#DOC.3.2.2"> <IMG BORDER=0 SRC=icon1.gif></A> <!2><A HREF="C.html#DOC.2.7">StationAPITrack</A>  <B>RequestSession</B>(<!1><A HREF="StationAPIRequest.html">StationAPIRequest</A> request, <!1><A HREF="StationAPISession.html">StationAPISession</A> * sessionid, void * user = NULL) </B>
 <DD><I>Session -- Modify session on server (logout, touch, verify)</I>
<DT><A HREF="#DOC.3.2.3"> <IMG BORDER=0 SRC=icon1.gif></A> void  <B>CancelRequest</B>(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track) </B>
 <DD><I> Cancel request in progress by tracking number -- no callback will occur.</I>

</DL>
<DT><A HREF="#DOC.3.3"> <IMG BORDER=0 SRC=icon1.gif></A>  <B>Callback Functions.</B> </B>
 <DD><I></I>

<DL>
<DT><A HREF="#DOC.3.3.1"> <IMG BORDER=0 SRC=icon1.gif></A> virtual  bool  <B>OnResult</B>(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track, <!1><A HREF="StationAPIResult.html">StationAPIResult</A> result, char * text, void * user) </B>
 <DD><I>Always called first</I>
<DT><A HREF="#DOC.3.3.2"> <IMG BORDER=0 SRC=icon1.gif></A> virtual  void  <B>OnLogin</B>(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track, <!1><A HREF="StationAPIResult.html">StationAPIResult</A> result, char * text, <!2><A HREF="C.html#DOC.2.8">StationAPIUID</A> uid, <!2><A HREF="C.html#DOC.2.9">StationAPIAccountStatus</A> account_status, <!2><A HREF="C.html#DOC.2.10">StationAPIGameStatus</A> game_status, <!1><A HREF="StationAPISession.html">StationAPISession</A> sessionid, void * user) </B>
 <DD><I>Callback for RequestLogin</I>
<DT><A HREF="#DOC.3.3.3"> <IMG BORDER=0 SRC=icon1.gif></A> virtual  void  <B>OnSession</B>(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track, <!1><A HREF="StationAPIResult.html">StationAPIResult</A> result, char * text, <!2><A HREF="C.html#DOC.2.8">StationAPIUID</A> uid, void * user) </B>
 <DD><I>Callback for RequestSession</I>

</DL>
</DL></DL>
<A NAME="DOC.DOCU">
<hr>
 <h2> Documentation </h2>
<BLOCKQUOTE>

Client Station API -- connects to the API Server.
<PRE>
// This class should be inherited so that only the virtual callbacks you wish to implement need be declared:
class MyStationAPI : public StationAPI
{
    void OnSession (StationAPITrack track, StationAPIResult result, char * text, StationAPIUID uid, void * user);
    void OnLogin    (StationAPITrack track, StationAPIResult result, char * text, StationAPIUID uid, 
                StationAPIAccountStatus account_status, StationAPIGameStatus game_status, StationAPISession sessionid, void * user);
};
    </pre>

</BLOCKQUOTE>
<DL>

<A NAME="Control Requests">
<A NAME ="DOC.3.1">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B>  Control Requests</B></TT>
<DL></DL><P><DL>

<A NAME="SetIdentity">
<A NAME ="DOC.3.1.1">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> void  SetIdentity(<!1><A HREF="StationAPIApplication.html">StationAPIApplication</A> applicationid, <!2><A HREF="C.html#DOC.2.11">StationAPIInstance</A> instanceid = 0)</B></TT>
<DD>Set identity -- call before connecting.
<UL>
<LI> applicationid: ID assigned to application
<LI> instanceid: instance can be used to distinguish between multiple copies of applications
</UL>
<DL></DL><P>
<A NAME="SetProtocol">
<A NAME ="DOC.3.1.2">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> void  SetProtocol(<!1><A HREF="StationAPIProtocol.html">StationAPIProtocol</A> protocol)</B></TT>
<DD>Specify communications protocol (optional) -- call before connecting.
<UL>
<LI> protocol: change protocol assigned to application -- default is RDP
</UL>
<DL></DL><P>
<A NAME="Connect">
<A NAME ="DOC.3.1.3">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> int32  Connect(char * dns = SAPI_DEFAULT_SERVER, int port = SAPI_DEFAULT_PORT)</B></TT>
<DD>start server connection -- return 0 for success, else protocol specific error value.
<UL>
<LI> dns   url of api server
<LI> port  port of api server
</UL>
<DL></DL><P>
<A NAME="Disconnect">
<A NAME ="DOC.3.1.4">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> void  Disconnect(int linger_time = 10000)</B></TT>
<DD>stop server connection.
<UL>
<LI> linger_time: max time to wait (optional)
</UL>
<DL></DL><P>
<A NAME="IsConnected">
<A NAME ="DOC.3.1.7">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> bool  IsConnected(void)</B></TT>
<DD> returns true if connection is live.
<DL></DL><P>
<A NAME="GetRequestsQueued">
<A NAME ="DOC.3.1.8">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> int  GetRequestsQueued(void)</B></TT>
<DD> returns number of submitted requests -- use to monitor request load.
<DL></DL><P>
<A NAME="GetRequestsWaiting">
<A NAME ="DOC.3.1.9">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> int  GetRequestsWaiting(void)</B></TT>
<DD> returns number of requests waiting for processing -- use to monitor request load.
<DL></DL><P>
<A NAME="SetProcess">
<A NAME ="DOC.3.1.5">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> void  SetProcess(bool flag)</B></TT>
<DD>Set to true to enable async callbacks, set to false to queue results.
Can use interactively for critical sections, setting flag to false will block if a callback is in progress 
<DL></DL><P>
<A NAME="ProcessWait">
<A NAME ="DOC.3.1.6">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> void  ProcessWait(int duration = 1000)</B></TT>
<DD>Poll for syncronous processing -- blocking for up to X milliseconds to process.  Returns immediately if no work.
<DL></DL><P></DL>

<A NAME="Request Functions">
<A NAME ="DOC.3.2">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B>  Request Functions</B></TT>
<DD>All requests will return a tracking number.
All requests will result in a callback.
Sensitive requests are encrypted before transmission
<DL></DL><P><DL>

<A NAME="RequestLogin">
<A NAME ="DOC.3.2.1">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> <!2><A HREF="C.html#DOC.2.7">StationAPITrack</A>  RequestLogin(<!1><A HREF="StationAPIRequest.html">StationAPIRequest</A> request, char * name, char * password, <!2><A HREF="C.html#DOC.2.6">StationAPIIP</A> ip, <!1><A HREF="StationAPIProduct.html">StationAPIProduct</A> product, <!1><A HREF="StationAPISession.html">StationAPISession</A> * parentsession = NULL, void * user = NULL)</B></TT>
<DD>Login -- Create a new session on server.
<UL>
<LI> request: request code
<LI> name: user name, zero terminated
<LI> password: password, zero terminated
<LI> ip: IP of originating client, for reporting purposes
<LI> product: product code
<LI> parentsession: associated session, if any
<LI> user: user pointer passed through to callback function
</UL>
<DL></DL><P>
<A NAME="RequestSession">
<A NAME ="DOC.3.2.2">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> <!2><A HREF="C.html#DOC.2.7">StationAPITrack</A>  RequestSession(<!1><A HREF="StationAPIRequest.html">StationAPIRequest</A> request, <!1><A HREF="StationAPISession.html">StationAPISession</A> * sessionid, void * user = NULL)</B></TT>
<DD>Session -- Modify session on server (logout, touch, verify).
<UL>
<LI> [request:] request code
<LI> [sessionid:] session to modify
<LI> [user:] user pointer passed through to callback function
</UL>
<DL></DL><P>
<A NAME="CancelRequest">
<A NAME ="DOC.3.2.3">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> void  CancelRequest(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track)</B></TT>
<DD> Cancel request in progress by tracking number -- no callback will occur.
<DL></DL><P></DL>

<A NAME="Callback Functions.">
<A NAME ="DOC.3.3">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B>  Callback Functions.</B></TT>
<DD>Result routines are called when responses from requests occur. All requests will produce a response.
OnResult is always called first. If it does not handle the request, the specific callback is called.
<DL></DL><P><DL>

<A NAME="OnResult">
<A NAME ="DOC.3.3.1">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> virtual  bool  OnResult(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track, <!1><A HREF="StationAPIResult.html">StationAPIResult</A> result, char * text, void * user)</B></TT>
<DD>Always called first. Return true if handled, else false to call secondary callback.
<UL>
<LI> track: tracking number returned by request
<LI> result: result code
<LI> text: displayable text string associated with result code
<LI> user: user pointer passed through from Request Function
</UL>
<DL></DL><P>
<A NAME="OnLogin">
<A NAME ="DOC.3.3.2">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> virtual  void  OnLogin(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track, <!1><A HREF="StationAPIResult.html">StationAPIResult</A> result, char * text, <!2><A HREF="C.html#DOC.2.8">StationAPIUID</A> uid, <!2><A HREF="C.html#DOC.2.9">StationAPIAccountStatus</A> account_status, <!2><A HREF="C.html#DOC.2.10">StationAPIGameStatus</A> game_status, <!1><A HREF="StationAPISession.html">StationAPISession</A> sessionid, void * user)</B></TT>
<DD>Callback for RequestLogin.
<UL>
<LI> track: tracking number returned by request
<LI> result: result code
<LI> text: displayable text string associated with result code
<LI> uid: UID of user on success
<LI> account_status: account status on success
<LI> game_status: game status on success
<LI> sessionid: new session id on success
<LI> user: user pointer passed through from Request Function
</UL>
<DL></DL><P>
<A NAME="OnSession">
<A NAME ="DOC.3.3.3">
<DT><IMG BORDER=0 SRC=icon2.gif><TT><B> virtual  void  OnSession(<!2><A HREF="C.html#DOC.2.7">StationAPITrack</A> track, <!1><A HREF="StationAPIResult.html">StationAPIResult</A> result, char * text, <!2><A HREF="C.html#DOC.2.8">StationAPIUID</A> uid, void * user)</B></TT>
<DD>Callback for RequestSession.
<UL>
<LI> track: tracking number returned by request
<LI> result: result code
<LI> text: displayable text string associated with result code
<LI> uid: UID of user on touch or verify
<LI> user: user pointer passed through from Request Function
</UL>
<DL></DL><P></DL>
</DL>
<hr>
 <DL><DT><B>This class has no child classes.</B></DL>
<DL></DL><P><I><A HREF="aindex.html"> alphabetic index</A></I>  <I><A HREF="HIER.html"> hierarchy of classes</A></I><P><hr>
<A HREF="http://www.zib.de/Visual/software/doc++/index.html"><IMG BORDER=0 ALIGN=RIGHT SRC=logo.gif></A>
<P Align=Center><I>this page has been generated automatically by doc++</I>
<P Align=Center><I>(c)opyright by <A HREF="http://www.zib.de/zoeckler/"> Malte  Z&ouml;ckler</A>, <A HREF="mailto:wunderling@zib.de"> Roland Wunderling </A><br>contact: <A HREF="mailto:doc++@zib.de"> doc++@zib.de</a></I>
</BODY>
