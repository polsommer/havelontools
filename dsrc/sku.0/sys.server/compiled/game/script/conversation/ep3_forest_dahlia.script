// ======================================================================
//
// ep3_forest_dahlia.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.badge;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_forest_dahlia";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_forest_dahlia_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isGoodGuy (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_3", 0) ||
	        groundquests.hasCompletedQuest(player, "ep3_forest_wirartu_epic_3") ||
	        groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_7"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isBadGuy (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_2", 0) ||
		    groundquests.hasCompletedQuest(player, "ep3_forest_wirartu_epic_2"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedInitial (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_2") &&
		    groundquests.hasCompletedQuest(player, "ep3_forest_cryl_quest_2") &&
		    groundquests.hasCompletedQuest(player, "ep3_forest_rhiek_quest_3"));
}       

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isFemale (obj_id player, obj_id npc)
{
	return ( getGender( player ) == GENDER_FEMALE );
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isMale (obj_id player, obj_id npc)
{
	return ( getGender( player ) == GENDER_MALE );
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isTaskActiveOne (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_dahlia_epic_1", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_1", 0))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedTaskOne (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_1", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_dahlia_epic_1"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedQuestOne (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_dahlia_epic_1");
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isTaskActiveTwo (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_dahlia_epic_2", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_2", 0))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedTaskTwo (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_2", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_dahlia_epic_2"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedQuestTwo (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_dahlia_epic_2");
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isTaskActiveThree (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_dahlia_epic_4", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_4", 0))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedTaskThree (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_4", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_dahlia_epic_4"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_hasCompletedQuestThree (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_dahlia_epic_4");
}

// ----------------------------------------------------------------------

boolean ep3_forest_dahlia_condition_isTaskStillActive (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_dahlia_epic_3", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_dahlia_epic_3", 0))
	    
	    return true;
	else
		return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_forest_dahlia_action_giveQuestAssassin (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_outcast_assassin_2");
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_applyDamage (obj_id player, obj_id npc)
{
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_giveQuestOne (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_dahlia_epic_1");
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_giveSignalOne (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "warriors");
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_giveQuestTwo (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_dahlia_epic_2");
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_giveSignalTwo (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "war");
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_giveQuestThree (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_dahlia_epic_3");
}

// ----------------------------------------------------------------------

void ep3_forest_dahlia_action_giveSignalThree (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "win");
	badge.grantBadge(player, "bdg_kash_outcast_story");
	
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_forest_dahlia_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Exemplar... [Dahlia nods.] I have nothing for you at this time. Continue to make your presence known among the Society and spread our name further throughout Kashyyyk.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course, my lady.
	if (response == "s_3136")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are dismissed. [Dahlia waves you off.]
			string_id message = new string_id (c_stringFile, "s_3138");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's good to see you're still alive, mercenary.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My lady. [You bow.]
	if (response == "s_3142")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalThree (player, npc);

			//-- NPC: I have been pleased with your progress, mercenary. You have completed my tasks to my satisfaction. I suppose it's time I offer you the title of Exemplar.
			string_id message = new string_id (c_stringFile, "s_3144");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: If you deem it, my lady.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3146");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Lady Reverend. [You bow.]
	if (response == "s_3154")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am honored to say that, due to your continued success in your tasks, I am able to offer you a position at my side as Exemplar... [Dahlia looks hopeful.] What do you say?
			string_id message = new string_id (c_stringFile, "s_3156");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I too would be honored.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3158");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah, good to see you, Red.
	if (response == "s_3170")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia seems unphased by the nickname.] You did your part well, I must say. Unfortunately, Sertild betrayed the Society and told the Kerritamba of our plans. We were not able to deal with their leader. [Dahlia shrugs.] Such is life...
			string_id message = new string_id (c_stringFile, "s_3172");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We'll just have to try again.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3174");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have been pleased with your progress, mercenary. You have completed my tasks to my satisfaction. I suppose it's time I offer you the title of Exemplar.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: If you deem it, my lady.
	if (response == "s_3146")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia nods.] From this day forth, you will be at my side as my Exemplar. You have reached the end of the road, my friend. The Society will continue to grow and we will prosper.
			string_id message = new string_id (c_stringFile, "s_3148");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You nod.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3150");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia nods.] From this day forth, you will be at my side as my Exemplar. You have reached the end of the road, my friend. The Society will continue to grow and we will prosper.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod.]
	if (response == "s_3150")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: For now, I must rest. I bid you well, Exemplar.
			string_id message = new string_id (c_stringFile, "s_3152");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am honored to say that, due to your continued success in your tasks, I am able to offer you a position at my side as Exemplar... [Dahlia looks hopeful.] What do you say?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I too would be honored.
	if (response == "s_3158")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalThree (player, npc);

			//-- NPC: Then, from this day forth, you are an Exemplar of the Society.. Welcome home, Exemplar.
			string_id message = new string_id (c_stringFile, "s_3160");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What happens now, my lady?
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3162");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then, from this day forth, you are an Exemplar of the Society.. Welcome home, Exemplar.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What happens now, my lady?
	if (response == "s_3162")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh.. [Dahlia smiles.] We rest. And continue to plot against the Kerritamba another day.. For now, enjoy your new-found peace and status.
			string_id message = new string_id (c_stringFile, "s_3164");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will, my lady. Good day to you.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3166");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh.. [Dahlia smiles.] We rest. And continue to plot against the Kerritamba another day.. For now, enjoy your new-found peace and status.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will, my lady. Good day to you.
	if (response == "s_3166")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: And you...
			string_id message = new string_id (c_stringFile, "s_3168");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia seems unphased by the nickname.] You did your part well, I must say. Unfortunately, Sertild betrayed the Society and told the Kerritamba of our plans. We were not able to deal with their leader. [Dahlia shrugs.] Such is life...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We'll just have to try again.
	if (response == "s_3174")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: One day. For now, we rest. Besides, you must learn the ways of the Exemplar. You are a true hero of the Society.. From this day forth, you will now be known as Exemplar.
			string_id message = new string_id (c_stringFile, "s_3176");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks, Red.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3178");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: One day. For now, we rest. Besides, you must learn the ways of the Exemplar. You are a true hero of the Society.. From this day forth, you will now be known as Exemplar.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thanks, Red.
	if (response == "s_3178")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalThree (player, npc);

			//-- NPC: [Dahlia just shakes her head.] What have I thrown myself into..
			string_id message = new string_id (c_stringFile, "s_3180");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Mercenary.. [Dahlia begins.] Our final blow has come to this; you will find Sertild near the Kerritamba village. Like Zhadran, he is one of our most trusted and skilled spies. Once you find him, he'll alert the Kerritamba people. You must be ready, mercenary, for many guards will come and try to defeat you. Bring your most trusted allies with you during this time.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, my Lady Reverend.
	if (response == "s_3188")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: While you're dealing with their guardsmen, we will be dealing with Chief Kerritamba. It is a perfect setup.
			string_id message = new string_id (c_stringFile, "s_3190");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will do your bidding, m'lady.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: First, I must gather my allies to fight with me.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3192");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3200");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My lady... [You nod.]
	if (response == "s_3208")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: And while you're in the thick of battle, the Society and the Quietus Sect will deal with Chief Kerritamba. Are you up to this challenge, mercenary?
			string_id message = new string_id (c_stringFile, "s_3210");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I am, my lady.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not at this time. I have much preparing to do.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3212");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3220");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How is that 'the final blow', Red?
	if (response == "s_3224")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia rolls her eyes.] While you're doing away with the Kerritamba guardsmen, our people will deal with Chief Kerritamba. You have nothing to worry about.
			string_id message = new string_id (c_stringFile, "s_3226");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course. I didn't mean to doubt your wisdom. [You smirk.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am not ready for this task, yet, Red.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3228");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3240");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: While you're dealing with their guardsmen, we will be dealing with Chief Kerritamba. It is a perfect setup.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will do your bidding, m'lady.
	if (response == "s_3192")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestThree (player, npc);

			//-- NPC: I am pleased to hear you speak those words, mercenary. Find Sertild near the Kerritamba village and give him my symbol. The Society will be posed close, waiting for the right time to strike at their glorious leader, Chief Kerritamba.
			string_id message = new string_id (c_stringFile, "s_3194");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You bow.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3196");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: First, I must gather my allies to fight with me.
	if (response == "s_3200")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia smiles.] You are both brave and intelligent. I will enjoy having you as my Exemplar, mercenary. Now go. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_3202");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You bow.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3204");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am pleased to hear you speak those words, mercenary. Find Sertild near the Kerritamba village and give him my symbol. The Society will be posed close, waiting for the right time to strike at their glorious leader, Chief Kerritamba.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You bow.]
	if (response == "s_3196")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia returns to her planning.]
			string_id message = new string_id (c_stringFile, "s_3198");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia smiles.] You are both brave and intelligent. I will enjoy having you as my Exemplar, mercenary. Now go. You are dismissed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You bow.]
	if (response == "s_3204")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia continues her planning.]
			string_id message = new string_id (c_stringFile, "s_3206");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: And while you're in the thick of battle, the Society and the Quietus Sect will deal with Chief Kerritamba. Are you up to this challenge, mercenary?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I am, my lady.
	if (response == "s_3212")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestThree (player, npc);

			//-- NPC: Good. [Dahlia nods, pleased.] You will find Sertild near the Kerritamba village. Speak with him and give him my symbol. But be ready. The Kerritamba people will advance quickly.
			string_id message = new string_id (c_stringFile, "s_3214");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You nod.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3216");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not at this time. I have much preparing to do.
	if (response == "s_3220")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then go. Time is of the essence. We must strike quickly. Return to me soon. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_3222");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good. [Dahlia nods, pleased.] You will find Sertild near the Kerritamba village. Speak with him and give him my symbol. But be ready. The Kerritamba people will advance quickly.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod.]
	if (response == "s_3216")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are dismissed. [Dahlia smiles.] And come back safely.
			string_id message = new string_id (c_stringFile, "s_3218");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia rolls her eyes.] While you're doing away with the Kerritamba guardsmen, our people will deal with Chief Kerritamba. You have nothing to worry about.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course. I didn't mean to doubt your wisdom. [You smirk.]
	if (response == "s_3228")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestThree (player, npc);

			//-- NPC: Just go and complete your task. Oh, and mercenary?
			string_id message = new string_id (c_stringFile, "s_3230");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, Red?
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3232");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am not ready for this task, yet, Red.
	if (response == "s_3240")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then get yourself ready! [Dahlia grumbles.]
			string_id message = new string_id (c_stringFile, "s_3242");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Just go and complete your task. Oh, and mercenary?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, Red?
	if (response == "s_3232")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_applyDamage (player, npc);

			//-- NPC: Have a little adjustment before you leave, hm?
			string_id message = new string_id (c_stringFile, "s_3234");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What--OW!
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3236");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 28);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have a little adjustment before you leave, hm?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What--OW!
	if (response == "s_3236")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia chuckles darkly.]
			string_id message = new string_id (c_stringFile, "s_3238");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Tell me good news, mercenary. I've had a bad day today..

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We have triumphed over the Kerritamba people once more, Lady Reverend.
	if (response == "s_3246")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalTwo (player, npc);

			//-- NPC: [Dahlia exhales a sigh of relief.] We are one step closer to crushing the Kerritamba people. Soon, you will be my Exemplar... the highest rank in the Society. You have done well, thus far, my mercenary. I must carefully decide our last plan of action. Leave me in peace.
			string_id message = new string_id (c_stringFile, "s_3248");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, my lady. [You bow.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3250");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I've done your bidding, my lady.
	if (response == "s_3254")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalTwo (player, npc);

			//-- NPC: [Dahlia nods.] The network within the Society has told me the great news. I am elated. I can now rest easy. However, your work is not yet finished, mercenary. We must plan our last actions against the Kerritamba people. The plans rest on my shoulders alone. Leave me in peace while I mull over our options.
			string_id message = new string_id (c_stringFile, "s_3256");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, my lady.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3258");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Pfft. He was a piece of cake.
	if (response == "s_3262")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalTwo (player, npc);

			//-- NPC: [Dahlia chuckles darkly.] Although your personality conflicts with my ideal designs, you undoubtedly amuse me. The end result is that we were successful. But that is not where this conflict ends. We have one more card to pull. Leave me. I must mull over our choices in this matter.
			string_id message = new string_id (c_stringFile, "s_3264");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You got it, Red.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3266");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 36);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia exhales a sigh of relief.] We are one step closer to crushing the Kerritamba people. Soon, you will be my Exemplar... the highest rank in the Society. You have done well, thus far, my mercenary. I must carefully decide our last plan of action. Leave me in peace.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, my lady. [You bow.]
	if (response == "s_3250")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hmm.. [Dahlia's expression grows pensive.]
			string_id message = new string_id (c_stringFile, "s_3252");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia nods.] The network within the Society has told me the great news. I am elated. I can now rest easy. However, your work is not yet finished, mercenary. We must plan our last actions against the Kerritamba people. The plans rest on my shoulders alone. Leave me in peace while I mull over our options.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, my lady.
	if (response == "s_3258")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia returns to her thoughts.]
			string_id message = new string_id (c_stringFile, "s_3260");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch36 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia chuckles darkly.] Although your personality conflicts with my ideal designs, you undoubtedly amuse me. The end result is that we were successful. But that is not where this conflict ends. We have one more card to pull. Leave me. I must mull over our choices in this matter.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You got it, Red.
	if (response == "s_3266")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ugh.. [Dahlia scoffs.] Damn mercenaries.
			string_id message = new string_id (c_stringFile, "s_3268");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia scoffs.] Why have I not heard the angry cries of the Kerritamba people? [Dahlia leans closer.] Because you haven't done your job. Now get out until you have.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod.]
	if (response == "s_3272")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia only chuckles and returns to her brooding.]
			string_id message = new string_id (c_stringFile, "s_3274");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch40 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am finding myself looking forward to your presence these days, mercenary.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am honored, Lady Reverence. [You smile slyly.]
	if (response == "s_3278")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hmm.. [Dahlia almost sighs audibly, staring at you.]
			string_id message = new string_id (c_stringFile, "s_3280");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: My lady? Are you feeling ill?
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3282");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 41);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, my lady.
	if (response == "s_3294")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia continues without skipping a beat.] You did well with the Kerritamba warriors, mercenary. But now, I require you to do a task that needs a little more skill and keen bravery.
			string_id message = new string_id (c_stringFile, "s_3296");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You nod and listen.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3298");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 45);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You must have a boring day, Lady Red.
	if (response == "s_3314")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_applyDamage (player, npc);

			//-- NPC: [Dahlia sighs frustratedly.] Of course, I can always expect you to say such stupid things, making me want to rip my hair out! [Dahlia points at you.]
			string_id message = new string_id (c_stringFile, "s_3316");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ow!
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3318");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 50);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch41 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmm.. [Dahlia almost sighs audibly, staring at you.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My lady? Are you feeling ill?
	if (response == "s_3282")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh.. [Dahlia frowns at herself and clears her throat.] Let's get down to business. It is the perfect time to strike at the Kerritamba while they're at their weakest moment. Warchief Naloriss can be found searching the perimeter of the village for spies. He is our target. It will be up to you to silence the Warchief for the Society. Are you up to it?
			string_id message = new string_id (c_stringFile, "s_3284");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Anything that pleases you, my lady. [You wink.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'd much rather stay here.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3286");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3290");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh.. [Dahlia frowns at herself and clears her throat.] Let's get down to business. It is the perfect time to strike at the Kerritamba while they're at their weakest moment. Warchief Naloriss can be found searching the perimeter of the village for spies. He is our target. It will be up to you to silence the Warchief for the Society. Are you up to it?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Anything that pleases you, my lady. [You wink.]
	if (response == "s_3286")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestTwo (player, npc);

			//-- NPC: [Dahlia taps her lower lip. She struggles to hold back her comments.] You are dismissed, mercenary.
			string_id message = new string_id (c_stringFile, "s_3288");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'd much rather stay here.
	if (response == "s_3290")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia frowns.] You can't stay here forever, mercenary. Come back when you are serious about becoming my Exemplar.
			string_id message = new string_id (c_stringFile, "s_3292");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch45 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia continues without skipping a beat.] You did well with the Kerritamba warriors, mercenary. But now, I require you to do a task that needs a little more skill and keen bravery.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod and listen.]
	if (response == "s_3298")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: The Kerritamba have responded to our attacks and have sent their weapons master, Warchief Naloriss, out looking for spies.
			string_id message = new string_id (c_stringFile, "s_3300");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What of Zhadran?
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3302");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Kerritamba have responded to our attacks and have sent their weapons master, Warchief Naloriss, out looking for spies.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What of Zhadran?
	if (response == "s_3302")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: He is of no concern to me. If anyone catches him in this lifetime, it will be nothing short of miraculous luck. [Dahlia continues.] Now, you must find Warchief Naloriss and defeat him. It will not be easy. His guards follow closely behind him and will protect him with their life. Do you feel up to my challenge?
			string_id message = new string_id (c_stringFile, "s_3304");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Please lady, I must ready myself first.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am ready.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3306");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3310");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 47);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch47 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: He is of no concern to me. If anyone catches him in this lifetime, it will be nothing short of miraculous luck. [Dahlia continues.] Now, you must find Warchief Naloriss and defeat him. It will not be easy. His guards follow closely behind him and will protect him with their life. Do you feel up to my challenge?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Please lady, I must ready myself first.
	if (response == "s_3306")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia nods.] Then go. I bid you to return soon. This is a matter of great importance.
			string_id message = new string_id (c_stringFile, "s_3308");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am ready.
	if (response == "s_3310")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestTwo (player, npc);

			//-- NPC: Find Warchief Naloriss and defeat him. I hope to hear of your great success in this endeavor.
			string_id message = new string_id (c_stringFile, "s_3312");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch50 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia sighs frustratedly.] Of course, I can always expect you to say such stupid things, making me want to rip my hair out! [Dahlia points at you.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ow!
	if (response == "s_3318")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia almost lunges toward you.] Then, behave! Is it so hard? [Dahlia sighs, centering herself.] I have another task for you, mercenary. Now is the perfect time to launch a deadly attack at the Kerritamba. Because the Kerritamba have suffered increased losses recently, Warchief Naloriss has been patrolling the village, searching for spies.
			string_id message = new string_id (c_stringFile, "s_3320");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Are we concerned about Zhadran?
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3322");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 51);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia almost lunges toward you.] Then, behave! Is it so hard? [Dahlia sighs, centering herself.] I have another task for you, mercenary. Now is the perfect time to launch a deadly attack at the Kerritamba. Because the Kerritamba have suffered increased losses recently, Warchief Naloriss has been patrolling the village, searching for spies.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are we concerned about Zhadran?
	if (response == "s_3322")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia chuckles.] Zhadran is a snake. If anything catches him, it will be short of a miracle. You needn't worry about him.
			string_id message = new string_id (c_stringFile, "s_3324");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Then, I assume you want me to assassinate Warchief Naloriss.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3326");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 52);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia chuckles.] Zhadran is a snake. If anything catches him, it will be short of a miracle. You needn't worry about him.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Then, I assume you want me to assassinate Warchief Naloriss.
	if (response == "s_3326")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are correct, mercenary. You should be like this more often, instead of quipping an attitude every two seconds. [Dahlia smirks.] Are you ready for your challenge?
			string_id message = new string_id (c_stringFile, "s_3328");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready for anything.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I need to prepare first.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3330");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3338");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are correct, mercenary. You should be like this more often, instead of quipping an attitude every two seconds. [Dahlia smirks.] Are you ready for your challenge?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready for anything.
	if (response == "s_3330")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestTwo (player, npc);

			//-- NPC: I hope to hear of your success. Warchief Naloriss patrols the path outside the village. His guards will be with him. It could be a difficult battle.
			string_id message = new string_id (c_stringFile, "s_3332");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I laugh at danger.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3334");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to prepare first.
	if (response == "s_3338")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then, do so. And return quickly. I do not like to be kept waiting.
			string_id message = new string_id (c_stringFile, "s_3340");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch54 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I hope to hear of your success. Warchief Naloriss patrols the path outside the village. His guards will be with him. It could be a difficult battle.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I laugh at danger.
	if (response == "s_3334")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia smirks.] You're dismissed.
			string_id message = new string_id (c_stringFile, "s_3336");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch57 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia takes a moment to look you over.] Yes, mercenary?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have completed my task, my lady.
	if (response == "s_3344")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalOne (player, npc);

			//-- NPC: [Dahlia nods.] Good. Your actions and efficiency please me. Now go. I must discuss your next task with my advisors. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_3346");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3348");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 58);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Lady Reverence. [You bow.] The deed is done.
	if (response == "s_3352")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalOne (player, npc);

			//-- NPC: [Dahlia smiles.] Thank you, mercenary. One day, you will be a fine Exemplar in my court. Now, leave me to brood. I must think about your next task.
			string_id message = new string_id (c_stringFile, "s_3354");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I await your bidding. [You bow.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3356");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 60);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It's done, Lady Red.
	if (response == "s_3360")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveSignalOne (player, npc);

			//-- NPC: [Dahlia narrows her eyes.] I am pleased, yet saddened. I am pleased that you have completed your mission. But I am *not* pleased by the disrespect you continue to show me. I will excuse it... *this* time. But you had better wisen up, mercenary.
			string_id message = new string_id (c_stringFile, "s_3362");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course. [You bow, a hint of sarcasm in your voice.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3364");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 62);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch58 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia nods.] Good. Your actions and efficiency please me. Now go. I must discuss your next task with my advisors. You are dismissed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you.
	if (response == "s_3348")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia returns to her brooding.]
			string_id message = new string_id (c_stringFile, "s_3350");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch60 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia smiles.] Thank you, mercenary. One day, you will be a fine Exemplar in my court. Now, leave me to brood. I must think about your next task.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I await your bidding. [You bow.]
	if (response == "s_3356")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes.. yes. [Dahlia tries to hide her wide smile behind her hand.]
			string_id message = new string_id (c_stringFile, "s_3358");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch62 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia narrows her eyes.] I am pleased, yet saddened. I am pleased that you have completed your mission. But I am *not* pleased by the disrespect you continue to show me. I will excuse it... *this* time. But you had better wisen up, mercenary.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course. [You bow, a hint of sarcasm in your voice.]
	if (response == "s_3364")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Now, leave me. I must think about your next task..
			string_id message = new string_id (c_stringFile, "s_3366");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Before you can speak, Dahlia raises a finger.] I don't want to speak to you unless you have stories of success from your mission. By the cleanliness of your clothes, you have not yet succeeded in your task. I suggest you run along.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, m'lady.
	if (response == "s_3370")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia returns to her brooding.]
			string_id message = new string_id (c_stringFile, "s_3372");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch66 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have heard many things about you, mercenary. [Dahlia looks you over.] So.. you wish to become an Exemplar, no?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, my lady. [You bow.]
	if (response == "s_3376")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia nods.] It is rare to see other females in the Society. I will readily welcome another... If you can complete the tasks I set before you. You have much work ahead of you.
			string_id message = new string_id (c_stringFile, "s_3378");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am ready, my lady.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3380");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 67);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: If only to serve you, Lady Reverence.
	if (response == "s_3396")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia fans herself with her hand.] Well, then.. such dashing respect. You intrigue me. [Dahlia clears her throat, sterning her expression. Was she flustered?] Let us get started, then. You have much work ahead of you, mercenary.
			string_id message = new string_id (c_stringFile, "s_3398");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You listen intently.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3400");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 72);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I suppose. [You scoff.]
	if (response == "s_3412")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia leans closer.] Let's get one thing straight here, mercenary. You *will* give me your utmost respect or you *will* face the consequences. Am I clear? I don't want to have to fry another grunt or mercenary any time soon. It gives me no greater joy than to get rid of those who don't earn their places early on, but it is such a waste of potential talent. I hope you learn from this. I will *not* repeat it again.
			string_id message = new string_id (c_stringFile, "s_3414");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm sorry. It won't happen again.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: [You lean in.] I'm not afraid of you.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3416");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3428");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 76);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch67 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia nods.] It is rare to see other females in the Society. I will readily welcome another... If you can complete the tasks I set before you. You have much work ahead of you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am ready, my lady.
	if (response == "s_3380")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia nods.] As you know, the Kerritamba have treated many of our people with hateful disdain. The Society holds a deep hatred for the Kerritamba for outcasting us into the depths of the forest, leaving us to die hungry, alone... We must strike back at them. Over the years, we have taken out high-standing individuals in their village. To show them we are still thriving, you will take down some of their numbers, for starters.
			string_id message = new string_id (c_stringFile, "s_3382");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can do that. What will you have me do?
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I--couldn't do such a thing.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3384");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3392");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 68);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch68 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia nods.] As you know, the Kerritamba have treated many of our people with hateful disdain. The Society holds a deep hatred for the Kerritamba for outcasting us into the depths of the forest, leaving us to die hungry, alone... We must strike back at them. Over the years, we have taken out high-standing individuals in their village. To show them we are still thriving, you will take down some of their numbers, for starters.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can do that. What will you have me do?
	if (response == "s_3384")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestOne (player, npc);

			//-- NPC: Hmm.. [Dahlia taps her chin.] 10 seems like a good number. Yes. I want you to find and destroy 10 Kerritamba Warriors for me. It will be easier for our spies to infiltrate the village once some of their Warriors have been defeated. Return soon and tell me of your success. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_3386");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, m'lady.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3388");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 69);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I--couldn't do such a thing.
	if (response == "s_3392")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am amazed at the quality of recruits that come in these days. You are a disappointment to the promising trend.
			string_id message = new string_id (c_stringFile, "s_3394");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch69 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmm.. [Dahlia taps her chin.] 10 seems like a good number. Yes. I want you to find and destroy 10 Kerritamba Warriors for me. It will be easier for our spies to infiltrate the village once some of their Warriors have been defeated. Return soon and tell me of your success. You are dismissed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, m'lady.
	if (response == "s_3388")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia waves a dismissive hand.]
			string_id message = new string_id (c_stringFile, "s_3390");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch72 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia fans herself with her hand.] Well, then.. such dashing respect. You intrigue me. [Dahlia clears her throat, sterning her expression. Was she flustered?] Let us get started, then. You have much work ahead of you, mercenary.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You listen intently.]
	if (response == "s_3400")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: For their crimes in the past, the Kerritamba have been the targets for many of our devious practices. And we musn't stop there. I want you to find and destroy 10 Kerritamba Warriors for me. Return quickly and tell me of your success.
			string_id message = new string_id (c_stringFile, "s_3402");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Anything for you, my lady. [You wink.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I refuse.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3404");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3408");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 73);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch73 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: For their crimes in the past, the Kerritamba have been the targets for many of our devious practices. And we musn't stop there. I want you to find and destroy 10 Kerritamba Warriors for me. Return quickly and tell me of your success.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Anything for you, my lady. [You wink.]
	if (response == "s_3404")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestOne (player, npc);

			//-- NPC: [Dahlia bites her lip, holding back a girlish smile.] You're dismissed.
			string_id message = new string_id (c_stringFile, "s_3406");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I refuse.
	if (response == "s_3408")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia narrows her eyes.] You fool. Leave, then. I no longer want to see your face.
			string_id message = new string_id (c_stringFile, "s_3410");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch76 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia leans closer.] Let's get one thing straight here, mercenary. You *will* give me your utmost respect or you *will* face the consequences. Am I clear? I don't want to have to fry another grunt or mercenary any time soon. It gives me no greater joy than to get rid of those who don't earn their places early on, but it is such a waste of potential talent. I hope you learn from this. I will *not* repeat it again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm sorry. It won't happen again.
	if (response == "s_3416")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: It had better not, mercenary. As I was saying... As you know, we find the Kerritamba to be on the top of our hate list for their actions in the past. Our usual activities are not dire enough, we feel. I want you to find and destroy 10 Kerritamba Warriors. I await your answer, mercenary.
			string_id message = new string_id (c_stringFile, "s_3418");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You can count on me.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll never do such a thing.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3420");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3424");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 77);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You lean in.] I'm not afraid of you.
	if (response == "s_3428")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_applyDamage (player, npc);

			//-- NPC: [Dahlia only sighs, flickering her wrist outward in your direction.]
			string_id message = new string_id (c_stringFile, "s_3430");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ow!
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3432");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 80);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch77 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It had better not, mercenary. As I was saying... As you know, we find the Kerritamba to be on the top of our hate list for their actions in the past. Our usual activities are not dire enough, we feel. I want you to find and destroy 10 Kerritamba Warriors. I await your answer, mercenary.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You can count on me.
	if (response == "s_3420")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestOne (player, npc);

			//-- NPC: Well done. I do enjoy favorable answers. Go, then, and return quickly. You are dismissed. [Dahlia waves you off.]
			string_id message = new string_id (c_stringFile, "s_3422");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll never do such a thing.
	if (response == "s_3424")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then, you will never amount to anything in the Society, grunt. Get out of my face. You're not even worth my spit.
			string_id message = new string_id (c_stringFile, "s_3426");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch80 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia only sighs, flickering her wrist outward in your direction.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ow!
	if (response == "s_3432")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: And that, my little mercenary, is just a taste of what I can do. Are you finished with your games?
			string_id message = new string_id (c_stringFile, "s_3434");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, my lady. [You cringe.]
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I--I have to go.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3436");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3448");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 81);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch81 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: And that, my little mercenary, is just a taste of what I can do. Are you finished with your games?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, my lady. [You cringe.]
	if (response == "s_3436")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. [Dahlia smiles.] Now, let's get back to business. The Kerritamba must suffer for their iniquities in the past. Therefore, I want you to find and destroy 10 Kerritamba Warriors so that our spies may easily infiltrate the village. I expect your agreement.
			string_id message = new string_id (c_stringFile, "s_3438");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You rub your wound.] Yes, I'll do so.
			boolean hasResponse0 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Uh--I must attend to my pain first. I'll be back later.
			boolean hasResponse1 = false;
			if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3440");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3444");

				utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 82);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I--I have to go.
	if (response == "s_3448")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia only chuckles darkly.]
			string_id message = new string_id (c_stringFile, "s_3450");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch82 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good. [Dahlia smiles.] Now, let's get back to business. The Kerritamba must suffer for their iniquities in the past. Therefore, I want you to find and destroy 10 Kerritamba Warriors so that our spies may easily infiltrate the village. I expect your agreement.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You rub your wound.] Yes, I'll do so.
	if (response == "s_3440")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			ep3_forest_dahlia_action_giveQuestOne (player, npc);

			//-- NPC: Good. I expect you here soon. I can't wait to hear of your success.
			string_id message = new string_id (c_stringFile, "s_3442");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uh--I must attend to my pain first. I'll be back later.
	if (response == "s_3444")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia chickles.] Go, then.
			string_id message = new string_id (c_stringFile, "s_3446");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch86 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia sniffs delicately.] I smell trash. Oh. It's just you. [Dahlia chuckles darkly.] What are you doing here? I sense a familiar air about you. I do not respond well to unexpected audiences. However... it would do you justice do speak with Exemplar Zhadran in the Kerritamba village. He will instruct you on how to gain favor with the Society.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, m'lady.
	if (response == "s_3454")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ahh. Such refreshing respect. [Dahlia nods.] Run along now.
			string_id message = new string_id (c_stringFile, "s_3456");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_dahlia_handleBranch89 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Dahlia frowns deeply.] Another nameless face in my court. How disgusting. I suggest you leave and quickly. I don't want to dirty my hands, or my thoughts, with dealing with your type of filth.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I--
	if (response == "s_3462")
	{
		//-- [NOTE] 
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Dahlia points.] Leave!!
			string_id message = new string_id (c_stringFile, "s_3464");
			utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_forest_dahlia");

	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "dahlia" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "dahlia" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_forest_dahlia");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedQuestThree (player, npc))
	{
		//-- NPC: Exemplar... [Dahlia nods.] I have nothing for you at this time. Continue to make your presence known among the Society and spread our name further throughout Kashyyyk.
		string_id message = new string_id (c_stringFile, "s_3134");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Of course, my lady.
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3136");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 1);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedTaskThree (player, npc))
	{
		//-- NPC: It's good to see you're still alive, mercenary.
		string_id message = new string_id (c_stringFile, "s_3140");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: My lady. [You bow.]
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition_isFemale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Lady Reverend. [You bow.]
		boolean hasResponse1 = false;
		if (ep3_forest_dahlia_condition_isMale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: Yeah, good to see you, Red.
		boolean hasResponse2 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3142");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3154");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3170");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 3);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_isTaskActiveThree (player, npc))
	{
		//-- NPC: [Dahlia lunges at you.] Why are you still here? Do you not realize that we are in the midst of a battle?!
		string_id message = new string_id (c_stringFile, "s_3182");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_isTaskStillActive (player, npc))
	{
		//-- NPC: [Dahlia sighs loudly.] I told you to speak with Sertild, did I not? Why are you still here? Go!
		string_id message = new string_id (c_stringFile, "s_3184");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedQuestTwo (player, npc))
	{
		//-- NPC: Mercenary.. [Dahlia begins.] Our final blow has come to this; you will find Sertild near the Kerritamba village. Like Zhadran, he is one of our most trusted and skilled spies. Once you find him, he'll alert the Kerritamba people. You must be ready, mercenary, for many guards will come and try to defeat you. Bring your most trusted allies with you during this time.
		string_id message = new string_id (c_stringFile, "s_3186");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, my Lady Reverend.
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition_isMale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: My lady... [You nod.]
		boolean hasResponse1 = false;
		if (ep3_forest_dahlia_condition_isFemale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: How is that 'the final blow', Red?
		boolean hasResponse2 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3188");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3208");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3224");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 16);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedTaskTwo (player, npc))
	{
		//-- NPC: Tell me good news, mercenary. I've had a bad day today..
		string_id message = new string_id (c_stringFile, "s_3244");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: We have triumphed over the Kerritamba people once more, Lady Reverend.
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition_isMale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I've done your bidding, my lady.
		boolean hasResponse1 = false;
		if (ep3_forest_dahlia_condition_isFemale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: Pfft. He was a piece of cake.
		boolean hasResponse2 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3246");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3254");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3262");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 31);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_isTaskActiveTwo (player, npc))
	{
		//-- NPC: [Dahlia scoffs.] Why have I not heard the angry cries of the Kerritamba people? [Dahlia leans closer.] Because you haven't done your job. Now get out until you have.
		string_id message = new string_id (c_stringFile, "s_3270");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: [You nod.]
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3272");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 38);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedQuestOne (player, npc))
	{
		//-- NPC: I am finding myself looking forward to your presence these days, mercenary.
		string_id message = new string_id (c_stringFile, "s_3276");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am honored, Lady Reverence. [You smile slyly.]
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition_isMale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Thank you, my lady.
		boolean hasResponse1 = false;
		if (ep3_forest_dahlia_condition_isFemale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: You must have a boring day, Lady Red.
		boolean hasResponse2 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3278");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3294");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3314");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 40);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedTaskOne (player, npc))
	{
		//-- NPC: [Dahlia takes a moment to look you over.] Yes, mercenary?
		string_id message = new string_id (c_stringFile, "s_3342");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I have completed my task, my lady.
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition_isFemale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Lady Reverence. [You bow.] The deed is done.
		boolean hasResponse1 = false;
		if (ep3_forest_dahlia_condition_isMale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: It's done, Lady Red.
		boolean hasResponse2 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3344");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3352");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3360");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 57);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_isTaskActiveOne (player, npc))
	{
		//-- NPC: [Before you can speak, Dahlia raises a finger.] I don't want to speak to you unless you have stories of success from your mission. By the cleanliness of your clothes, you have not yet succeeded in your task. I suggest you run along.
		string_id message = new string_id (c_stringFile, "s_3368");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, m'lady.
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3370");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 64);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_hasCompletedInitial (player, npc))
	{
		//-- NPC: I have heard many things about you, mercenary. [Dahlia looks you over.] So.. you wish to become an Exemplar, no?
		string_id message = new string_id (c_stringFile, "s_3374");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, my lady. [You bow.]
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition_isFemale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: If only to serve you, Lady Reverence.
		boolean hasResponse1 = false;
		if (ep3_forest_dahlia_condition_isMale (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I suppose. [You scoff.]
		boolean hasResponse2 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3376");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3396");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3412");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 66);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_isBadGuy (player, npc))
	{
		//-- NPC: [Dahlia sniffs delicately.] I smell trash. Oh. It's just you. [Dahlia chuckles darkly.] What are you doing here? I sense a familiar air about you. I do not respond well to unexpected audiences. However... it would do you justice do speak with Exemplar Zhadran in the Kerritamba village. He will instruct you on how to gain favor with the Society.
		string_id message = new string_id (c_stringFile, "s_3452");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you, m'lady.
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3454");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 86);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition_isGoodGuy (player, npc))
	{
		//-- NPC: [Dahlia laughs hauntingly.] Kerritamba. Your kind never ceases to amaze me. Do you think you can walk in here without consequences? You're a fool. Fools have no place in the Society!! Guards!!
		string_id message = new string_id (c_stringFile, "s_3458");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
	{
		//-- NPC: [Dahlia frowns deeply.] Another nameless face in my court. How disgusting. I suggest you leave and quickly. I don't want to dirty my hands, or my thoughts, with dealing with your type of filth.
		string_id message = new string_id (c_stringFile, "s_3460");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I--
		boolean hasResponse0 = false;
		if (ep3_forest_dahlia_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3462");

			utils.setScriptVar (player, "conversation.ep3_forest_dahlia.branchId", 89);

			npcStartConversation (player, npc, "ep3_forest_dahlia", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_forest_dahlia")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

	if (branchId == 1 && ep3_forest_dahlia_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && ep3_forest_dahlia_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_forest_dahlia_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && ep3_forest_dahlia_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && ep3_forest_dahlia_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_forest_dahlia_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_forest_dahlia_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && ep3_forest_dahlia_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && ep3_forest_dahlia_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && ep3_forest_dahlia_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && ep3_forest_dahlia_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && ep3_forest_dahlia_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_forest_dahlia_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && ep3_forest_dahlia_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && ep3_forest_dahlia_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && ep3_forest_dahlia_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && ep3_forest_dahlia_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && ep3_forest_dahlia_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && ep3_forest_dahlia_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && ep3_forest_dahlia_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && ep3_forest_dahlia_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 36 && ep3_forest_dahlia_handleBranch36 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && ep3_forest_dahlia_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 40 && ep3_forest_dahlia_handleBranch40 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 41 && ep3_forest_dahlia_handleBranch41 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && ep3_forest_dahlia_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 45 && ep3_forest_dahlia_handleBranch45 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && ep3_forest_dahlia_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 47 && ep3_forest_dahlia_handleBranch47 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 50 && ep3_forest_dahlia_handleBranch50 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && ep3_forest_dahlia_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && ep3_forest_dahlia_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && ep3_forest_dahlia_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 54 && ep3_forest_dahlia_handleBranch54 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 57 && ep3_forest_dahlia_handleBranch57 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 58 && ep3_forest_dahlia_handleBranch58 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 60 && ep3_forest_dahlia_handleBranch60 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 62 && ep3_forest_dahlia_handleBranch62 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && ep3_forest_dahlia_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 66 && ep3_forest_dahlia_handleBranch66 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 67 && ep3_forest_dahlia_handleBranch67 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 68 && ep3_forest_dahlia_handleBranch68 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 69 && ep3_forest_dahlia_handleBranch69 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 72 && ep3_forest_dahlia_handleBranch72 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 73 && ep3_forest_dahlia_handleBranch73 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 76 && ep3_forest_dahlia_handleBranch76 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 77 && ep3_forest_dahlia_handleBranch77 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 80 && ep3_forest_dahlia_handleBranch80 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 81 && ep3_forest_dahlia_handleBranch81 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 82 && ep3_forest_dahlia_handleBranch82 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 86 && ep3_forest_dahlia_handleBranch86 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 89 && ep3_forest_dahlia_handleBranch89 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_forest_dahlia.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

