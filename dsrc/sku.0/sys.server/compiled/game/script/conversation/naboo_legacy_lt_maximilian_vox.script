// ======================================================================
//
// naboo_legacy_lt_maximilian_vox.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.badge;
include library.chat;
include library.content;
include library.groundquests;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/naboo_legacy_lt_maximilian_vox";

// ======================================================================
// Script Conditions
// ======================================================================

boolean naboo_legacy_lt_maximilian_vox_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_kickQuestActive_Imp (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "legacy_naboo_kick_imp") ||
	( ( groundquests.hasCompletedQuest(player, "legacy_together") || groundquests.hasCompletedQuest(player, "legacy_together_2") ) &&
	hasObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME) );
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_kickQuestActive_Rebel (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "legacy_naboo_kick_reb") ||
	( ( groundquests.hasCompletedQuest(player, "legacy_together") || groundquests.hasCompletedQuest(player, "legacy_together_2")) &&
	hasObjVar(player, content.REBEL_PATH_OBJVAR_NAME) );
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_seekingDroidParts_Imp (obj_id player, obj_id npc)
{
	return ( !groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_1") ||
	!groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_2") ||
	!groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_3_pt2") ||
	!groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_4") ) &&
	badge.hasBadge (player, "bdg_content_rsf_clearance_7") &&
	hasObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME);
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_seekingRSFComputerAccess (obj_id player, obj_id npc)
{
	return 	groundquests.hasCompletedQuest(player, "naboo_kadaraa_tipping_the_balance_2") &&
	!badge.hasBadge (player, "bdg_content_rsf_clearance_7");
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_hasAllDroidParts_Imp (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_1") &&
	groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_2") &&
	groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_3_pt2") &&
	groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_4") &&
	hasObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME);
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_seekingDroidParts_Rebel (obj_id player, obj_id npc)
{
	return ( !groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_1") ||
	!groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_2") ||
	!groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_3_pt2") ||
	!groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_4") ) &&
	badge.hasBadge (player, "bdg_content_rsf_clearance_7") &&
	hasObjVar(player, content.REBEL_PATH_OBJVAR_NAME);
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_hasAllDroidParts_Rebel (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_1") &&
	groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_2") &&
	groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_3_pt2") &&
	groundquests.hasCompletedQuest(player, "legacy_naboo_droid_module_4") &&
	hasObjVar(player, content.REBEL_PATH_OBJVAR_NAME);
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_onPanakaQuest_Rebel (obj_id player, obj_id npc)
{
	return ( groundquests.isQuestActive(player, "naboo_kadaraa_tipping_the_balance_1") ||
	groundquests.hasCompletedQuest(player, "naboo_kadaraa_tipping_the_balance_1") ||
	groundquests.isQuestActive(player, "naboo_kadaraa_tipping_the_balance_2") ) &&
	hasObjVar(player, content.REBEL_PATH_OBJVAR_NAME);
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_onPanakaQuest_Imp (obj_id player, obj_id npc)
{
	return ( groundquests.isQuestActive(player, "naboo_kadaraa_tipping_the_balance_1") ||
	groundquests.hasCompletedQuest(player, "naboo_kadaraa_tipping_the_balance_1") ||
	groundquests.isQuestActive(player, "naboo_kadaraa_tipping_the_balance_2") ) &&
	hasObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME);
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_completedNaboo_Imp (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "legacy_naboo_imperial_final_reward");
}

// ----------------------------------------------------------------------

boolean naboo_legacy_lt_maximilian_vox_condition_completedNaboo_Rebel (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "legacy_naboo_rebel_final_reward");
}

// ======================================================================
// Script Actions
// ======================================================================

void naboo_legacy_lt_maximilian_vox_action_grantKadaaraQuest (obj_id player, obj_id npc)
{
	if ( hasObjVar(player, content.REBEL_PATH_OBJVAR_NAME) )
	{
		removeObjVar(player, content.REBEL_PATH_OBJVAR_NAME);
	}
	
	if ( !hasObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME) )
	{
		setObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME, true);
	}
	
	groundquests.requestGrantQuest(player, "naboo_kadaraa_tipping_the_balance_1");
	return;
}

// ----------------------------------------------------------------------

void naboo_legacy_lt_maximilian_vox_action_givePointerToCorellia (obj_id player, obj_id npc)
{
	if(!groundquests.isQuestActive(player, "naboo_send_to_lt_jasper") && !groundquests.isQuestActiveOrComplete(player, "corellia_coronet_capitol_problems_missing_shipment_intro"))
	{
		groundquests.grantQuest(player, "naboo_send_to_lt_jasper");
	}
}

// ----------------------------------------------------------------------

void naboo_legacy_lt_maximilian_vox_action_grantFinalReward_Imp (obj_id player, obj_id npc)
{
	if ( hasObjVar(player, content.REBEL_PATH_OBJVAR_NAME) )
	{
		removeObjVar(player, content.REBEL_PATH_OBJVAR_NAME);
	}

	if ( !hasObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME) )
	{
		setObjVar(player, content.IMPERIAL_PATH_OBJVAR_NAME, true);
	}
	
	groundquests.sendSignal(player, "returnToLegacyContact");
	groundquests.requestGrantQuest(player, "legacy_naboo_imperial_final_reward");
	return;
}

// ----------------------------------------------------------------------

void naboo_legacy_lt_maximilian_vox_action_endFindDroidParts (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "returnToImperilOrRebelContact");
}

// ----------------------------------------------------------------------

void naboo_legacy_lt_maximilian_vox_action_endGotoKadaara (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "naboo_from_tatooine_kick");	
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int naboo_legacy_lt_maximilian_vox_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did you find the droid AI? Consider your actions and aid your Empire. It is your only choice. I ask again, did you find the droid AI?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I have it.
	if (response == "s_63")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_endFindDroidParts (player, npc);

			//-- NPC: You have progressed farther than I actually expected you would. The Empire could use the services of someone like yourself. A good beginning and show of loyalty would be to surrender the AI to my care.
			string_id message = new string_id (c_stringFile, "s_66");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [hand over the droid AI]
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, I need to think about this a bit more.
			boolean hasResponse1 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_60");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That is none of your concern.
	if (response == "s_64")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh, but it is. It very much concerns me. But I have yet to lose patience with you. When you have the droid AI, I have confidence you will relinquish it to me as is your rightful obligation.
			string_id message = new string_id (c_stringFile, "s_65");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You have progressed farther than I actually expected you would. The Empire could use the services of someone like yourself. A good beginning and show of loyalty would be to surrender the AI to my care.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [hand over the droid AI]
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_grantFinalReward_Imp (player, npc);

			//-- NPC: I must prepare at once for my departure. You are a hero of the Empire and a shining beacon for all those who desire peace and harmony in the galaxy. It has been an honor for you to serve with me. I'm sure you agree.
			string_id message = new string_id (c_stringFile, "s_61");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, I need to think about this a bit more.
	if (response == "s_60")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: There is nothing to think about. Your duty is to the Empire as is the duty of all. Do not tarnish this victory by tainting your loyalty to the Empire. Think quickly and then yield the AI to me.
			string_id message = new string_id (c_stringFile, "s_62");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What news have you? Did you obtain the droid AI?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I did.
	if (response == "s_55")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: All four parts?
			string_id message = new string_id (c_stringFile, "s_56");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, all of it.
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_57");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: All four parts?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, all of it.
	if (response == "s_57")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_endFindDroidParts (player, npc);

			//-- NPC: I am impressed. Truly. I had my doubts about you, but Commander Barrezz assured me that you were the right choice. I am gratified to learn that he was correct. Now, if you please, surrender the AI to my care. I must get it to our scientists and droid engineers with extreme haste.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [hand over the droid AI]
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, I need to think about this a bit more.
			boolean hasResponse1 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_60");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am impressed. Truly. I had my doubts about you, but Commander Barrezz assured me that you were the right choice. I am gratified to learn that he was correct. Now, if you please, surrender the AI to my care. I must get it to our scientists and droid engineers with extreme haste.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [hand over the droid AI]
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_grantFinalReward_Imp (player, npc);

			//-- NPC: I must prepare at once for my departure. You are a hero of the Empire and a shining beacon for all those who desire peace and harmony in the galaxy. It has been an honor for you to serve with me. I'm sure you agree.
			string_id message = new string_id (c_stringFile, "s_61");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, I need to think about this a bit more.
	if (response == "s_60")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: There is nothing to think about. Your duty is to the Empire as is the duty of all. Do not tarnish this victory by tainting your loyalty to the Empire. Think quickly and then yield the AI to me.
			string_id message = new string_id (c_stringFile, "s_62");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You dare flaunt your association with the Rebel Alliance in the face of an Imperial officer? Yes, I know about that. Of course I do. I am with the Empire and we know more about your actions that you should be comfortable with. Now then, let us discuss what you can do to regain our good graces.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, please. How may I redeem myself?
	if (response == "s_78")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: Quite simple, actually. Obtain the droid AI we seek and all will be forgiven.
			string_id message = new string_id (c_stringFile, "s_80");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How do I do that?
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_82");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, thank you. I'm not interested.
	if (response == "s_84")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'll humor you for now, but the patience of the Empire is not infinite. We will have that droid AI with your help or without it.
			string_id message = new string_id (c_stringFile, "s_86");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Quite simple, actually. Obtain the droid AI we seek and all will be forgiven.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I do that?
	if (response == "s_82")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_endGotoKadaara (player, npc);

			//-- NPC: Our next best guess based on the information you obtained from the small droid on Tatooine hints at an old war bunker near here. Go to that war bunker and search it for any technology you can find.
			string_id message = new string_id (c_stringFile, "s_96");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_98");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you the one sent from Tatooine by Commander Adrian Barrezz?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I am.
	if (response == "s_90")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then we have no time to waste. You have conducted yourself well enough thus far, but this matter is far from over. You must procure the droid AI we seek.
			string_id message = new string_id (c_stringFile, "s_92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where do I find the droid AI?
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_94");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who?
	if (response == "s_102")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			//-- NPC: Never you mind. Step away, please, I have official Imperial business to conduct.
			string_id message = new string_id (c_stringFile, "s_104");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then we have no time to waste. You have conducted yourself well enough thus far, but this matter is far from over. You must procure the droid AI we seek.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where do I find the droid AI?
	if (response == "s_94")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_endGotoKadaara (player, npc);

			//-- NPC: Our next best guess based on the information you obtained from the small droid on Tatooine hints at an old war bunker near here. Go to that war bunker and search it for any technology you can find.
			string_id message = new string_id (c_stringFile, "s_96");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_98");

				utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_legacy_lt_maximilian_vox_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Our next best guess based on the information you obtained from the small droid on Tatooine hints at an old war bunker near here. Go to that war bunker and search it for any technology you can find.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on my way.
	if (response == "s_98")
	{
		//-- [NOTE] 
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			naboo_legacy_lt_maximilian_vox_action_grantKadaaraQuest (player, npc);

			//-- NPC: Return to me once you've found any information about the Old Republic experimental droid AI.
			string_id message = new string_id (c_stringFile, "s_100");
			utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.naboo_legacy_lt_maximilian_vox");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	setInvulnerable (self, true);
	
	ai_lib.setDefaultCalmBehavior(self, ai_lib.BEHAVIOR_SENTINEL);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	setInvulnerable (self, true);

	ai_lib.setDefaultCalmBehavior(self, ai_lib.BEHAVIOR_SENTINEL);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	
	faceTo( self, player );

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.naboo_legacy_lt_maximilian_vox");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_completedNaboo_Rebel (player, npc))
	{
		//-- NPC: You disappoint me gravely. That you should show such disloyalty to the Empire marks this as a saddened and diminished galaxy. And yet, perhaps there will come another chance for you to reclaim your place within the Empire. I hope, for your sake, you do not pass on such a chance.
		string_id message = new string_id (c_stringFile, "s_27");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_completedNaboo_Imp (player, npc))
	{
		naboo_legacy_lt_maximilian_vox_action_givePointerToCorellia (player, npc);

		//-- NPC: You, sir, are a credit to the Empire and to everything for which the Empire stands. Your actions have lead to a new hope of peace and prosperity for the entire galaxy. Except for those who stand against us, of course.
		string_id message = new string_id (c_stringFile, "s_28");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_hasAllDroidParts_Rebel (player, npc))
	{
		//-- NPC: Did you find the droid AI? Consider your actions and aid your Empire. It is your only choice. I ask again, did you find the droid AI?
		string_id message = new string_id (c_stringFile, "s_15");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I have it.
		boolean hasResponse0 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: That is none of your concern.
		boolean hasResponse1 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_63");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_64");

			utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 3);

			npcStartConversation (player, npc, "naboo_legacy_lt_maximilian_vox", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_hasAllDroidParts_Imp (player, npc))
	{
		//-- NPC: What news have you? Did you obtain the droid AI?
		string_id message = new string_id (c_stringFile, "s_11");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I did.
		boolean hasResponse0 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_55");

			utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 6);

			npcStartConversation (player, npc, "naboo_legacy_lt_maximilian_vox", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_seekingDroidParts_Rebel (player, npc))
	{
		//-- NPC: When you find the droid AI, remember your duty to the Empire. You may yet be able to redeem yourself within the eyes and heart of the Empire.
		string_id message = new string_id (c_stringFile, "s_22");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_seekingDroidParts_Imp (player, npc))
	{
		//-- NPC: The droid AI was split and is housed in four different droids? How very odd. I will never understand the scientific mind. This complicates things slightly, but changes nothing. Gather all four parts of the AI and return with them to me. Be careful with whom you speak about this. I am watching.
		string_id message = new string_id (c_stringFile, "s_24");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_seekingRSFComputerAccess (player, npc))
	{
		//-- NPC: After gaining access to the RSF mainframe, use it to learn everything you can about the droid AI and where to find it. Then go and obtain it.
		string_id message = new string_id (c_stringFile, "s_26");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_onPanakaQuest_Rebel (player, npc))
	{
		//-- NPC: Carry on with what you are doing, but consider carefully what you do with anything you find in that bunker. The Empire is generous to those who aid it, but merciless to those who stand in our way. Do not forget that.
		string_id message = new string_id (c_stringFile, "s_72");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_onPanakaQuest_Imp (player, npc))
	{
		//-- NPC: Search the old war bunker on the beach here near Kaadara. Imperial Intelligence suggests that some local criminals known as Skaak Tippers may have taken residence in the bunker, so be prepared. Examine anything of interest you find in the bunker.
		string_id message = new string_id (c_stringFile, "s_74");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_kickQuestActive_Rebel (player, npc))
	{
		//-- NPC: You dare flaunt your association with the Rebel Alliance in the face of an Imperial officer? Yes, I know about that. Of course I do. I am with the Empire and we know more about your actions that you should be comfortable with. Now then, let us discuss what you can do to regain our good graces.
		string_id message = new string_id (c_stringFile, "s_76");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, please. How may I redeem myself?
		boolean hasResponse0 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: No, thank you. I'm not interested.
		boolean hasResponse1 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_78");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_84");

			utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 16);

			npcStartConversation (player, npc, "naboo_legacy_lt_maximilian_vox", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition_kickQuestActive_Imp (player, npc))
	{
		//-- NPC: Are you the one sent from Tatooine by Commander Adrian Barrezz?
		string_id message = new string_id (c_stringFile, "s_88");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I am.
		boolean hasResponse0 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Who?
		boolean hasResponse1 = false;
		if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_90");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_102");

			utils.setScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId", 19);

			npcStartConversation (player, npc, "naboo_legacy_lt_maximilian_vox", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_legacy_lt_maximilian_vox_condition__defaultCondition (player, npc))
	{
		//-- NPC: There are three basic types in the galaxy: those of the Empire, those of the Rebellion, and everyone else. We of the Empire accomplish everything, the Rebels oppose everything, and the rest just get in the way.
		string_id message = new string_id (c_stringFile, "s_106");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "naboo_legacy_lt_maximilian_vox")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

	if (branchId == 3 && naboo_legacy_lt_maximilian_vox_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && naboo_legacy_lt_maximilian_vox_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && naboo_legacy_lt_maximilian_vox_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && naboo_legacy_lt_maximilian_vox_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && naboo_legacy_lt_maximilian_vox_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && naboo_legacy_lt_maximilian_vox_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && naboo_legacy_lt_maximilian_vox_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && naboo_legacy_lt_maximilian_vox_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && naboo_legacy_lt_maximilian_vox_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && naboo_legacy_lt_maximilian_vox_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.naboo_legacy_lt_maximilian_vox.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

