// ======================================================================
//
// c_story1_1_imp_quest.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.groundquests;
include library.space_flags;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/c_story1_1_imp_quest";

// ======================================================================
// Script Conditions
// ======================================================================

boolean c_story1_1_imp_quest_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_playerStartedQuest (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	
	boolean onQuest = questIsQuestActive(questId1, player)||questIsQuestComplete(questId1, player)
					||(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return onQuest;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_playerIsReb (obj_id player, obj_id npc)
{
	if (!factions.isRebel(player))
		return false;
		
	return true;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_questActivePostData (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int unlock = groundquests.getTaskId(questId1, "unlock"); 
		
	boolean onQuest = questIsQuestActive(questId1, player)
					&& questIsTaskComplete(questId1, unlock, player)
					&&!(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return onQuest;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_questActivePreData (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int unlock = groundquests.getTaskId(questId1, "unlock"); 
		
	boolean onQuest = questIsQuestActive(questId1, player)
					&& !questIsTaskComplete(questId1, unlock, player)
					&&!(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return onQuest;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_questComplete (obj_id player, obj_id npc)
{
	int questId = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int cliffhanger = groundquests.getTaskId(questId, "cliffhanger"); 
	
	return (questIsQuestComplete(questId, player)||questIsTaskActive(questId, cliffhanger, player))
			&&!(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_foundData (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int unlock = groundquests.getTaskId(questId1, "unlock"); 

	boolean onQuest = false;
	onQuest = questIsTaskActive(questId1, unlock, player)
		&&!(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));

	return onQuest;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_playerIsNeutral (obj_id player, obj_id npc)
{
	if (factions.isImperial(player)||factions.isRebel(player))
		return false;
	
	return true;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_notFoundCrash (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int search = groundquests.getTaskId(questId1, "search"); 

	boolean onQuest = false;
	onQuest = questIsTaskActive(questId1, search, player)
	&&!(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return onQuest;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_completedS1Imp (obj_id player, obj_id npc)
{
	if (!factions.isImperial(player))
		return false;	

	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int cliffhanger = groundquests.getTaskId(questId1, "cliffhanger"); 
		
	boolean quest1Complete = (questIsQuestComplete(questId1, player)||questIsTaskActive(questId1, cliffhanger, player))
							&& !(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return quest1Complete;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_completedS1Neutral (obj_id player, obj_id npc)
{
	if (!factions.isImperial(player))
		return false;

	int questId1 = questGetQuestId("quest/c_story1_1_neu");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int cliffhanger = groundquests.getTaskId(questId1, "cliffhanger"); 
	
	boolean Quest1Complete = (questIsQuestComplete(questId1, player)||questIsTaskActive(questId1, cliffhanger, player))
							&& !(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return Quest1Complete;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_completedS1Reb (obj_id player, obj_id npc)
{
	if (!factions.isImperial(player))
		return false;

	int questId1 = questGetQuestId("quest/c_story1_1_reb");
	int questId2 = questGetQuestId("quest/c_story1_2_imp");
	int cliffhanger = groundquests.getTaskId(questId1, "cliffhanger"); 
	
	boolean Quest1Complete = (questIsQuestComplete(questId1, player)||questIsTaskActive(questId1, cliffhanger, player))
							&& !(questIsQuestActive(questId2, player)||questIsQuestComplete(questId2, player));
	
	return Quest1Complete;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_completedS1NewFactionReb (obj_id player, obj_id npc)
{
	if (!factions.isRebel(player))
		return false;
		
	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int cliffhanger = groundquests.getTaskId(questId1, "cliffhanger"); 
		
	boolean Quest1Complete = questIsQuestComplete(questId1, player)||questIsTaskActive(questId1, cliffhanger, player);
	
	return Quest1Complete;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_completedS1NewFactionNeutral (obj_id player, obj_id npc)
{
	if (factions.isImperial(player)||factions.isRebel(player))
		return false;

	int questId1 = questGetQuestId("quest/c_story1_1_imp");
	int cliffhanger = groundquests.getTaskId(questId1, "cliffhanger"); 
		
	boolean Quest1Complete = questIsQuestComplete(questId1, player)||questIsTaskActive(questId1, cliffhanger, player);
	
	return Quest1Complete;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_quest2Active (obj_id player, obj_id npc)
{
	if ( ( groundquests.isTaskActive(player, "c_story1_2_imp", "cliff2")||
		groundquests.hasCompletedQuest(player, "c_story1_2_imp") )&&
		(!groundquests.hasCompletedQuest(player, "c_story1_3_imp") ) )
		
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_quest4ActiveOrComplete (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedQuest(player, "c_story1_4a")||groundquests.isQuestActive(player, "c_story1_4a"));
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_quest3Active (obj_id player, obj_id npc)
{
	return (groundquests.isQuestActive(player, "c_story1_3_imp"));
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_onTaskReturn (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "c_story1_3_imp", "return"));
}

// ----------------------------------------------------------------------

boolean c_story1_1_imp_quest_condition_quest3Complete (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "c_story1_3_imp")&&
			(!groundquests.hasCompletedQuest(player, "c_story1_4a")&& 
			!groundquests.isQuestActive(player, "c_story1_4a"));
}

// ======================================================================
// Script Actions
// ======================================================================

void c_story1_1_imp_quest_action_giveQuest (obj_id player, obj_id npc)
{
	int questId = questGetQuestId("quest/c_story1_1_imp");

	groundquests.grantQuest(questId, player, npc, true);
	
//	obj_id top=getTopMostContainer(player);
//	location loc = getLocation(top);
//	loc.x = 0;
//	loc.y = 0;
//	loc.z = 2012;
//	loc.area = "rori";
//	obj_id waypoint = createWaypointInDatapad(player, loc);
//	setObjVar(player, "quest.general.quest/c_story1_1_imp.crash", waypoint);	
//	setWaypointName(waypoint, "Missing Pilot Coordinates");
//	setWaypointActive(waypoint, true);
	
//	location loc1 = getLocation(top);
//	loc1.x = -1358;
//	loc1.y = 0;
//	loc1.z = -3692;
//	obj_id waypoint1 = createWaypointInDatapad(player, loc1);
//	setObjVar(player, "quest.general.quest/c_story1_1_imp.imperialQG", waypoint1);	
//	setWaypointName(waypoint1, "Jevan Monsul");
	//setWaypointActive(waypoint, true);
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_unlockData (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "c_story1_1_imp_unlockeddata");

	obj_id remwaypoint = getObjIdObjVar(player, "quest.general.quest/c_story1_1_imp.crash");
	if (remwaypoint != null)
    {
       destroyWaypointInDatapad(remwaypoint, player);
    }
	removeObjVar(player, "quest.general.quest/c_story1_1_imp.crash");

	obj_id remwaypoint1 = getObjIdObjVar(player, "quest.general.quest/c_story1_1_imp.crash");
	if (remwaypoint1 != null)
    {
       destroyWaypointInDatapad(remwaypoint1, player);
    }
	removeObjVar(player, "quest.general.quest/c_story1_1_imp.crash");

//	obj_id top=getTopMostContainer(player);
//	location loc = getLocation(top);
//	loc.x = -5109;
//	loc.y = 0;
//	loc.z = -2237;
//	loc.area = "rori";
//	obj_id waypoint = createWaypointInDatapad(player, loc);
//	setObjVar(player, "quest.general.quest/c_story1_1_imp.doctor", waypoint);	
//	setWaypointName(waypoint, "Doctor Vang's Medical Center");
//	setWaypointActive(waypoint, true);
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_faceplayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_giveCrashWaypoint (obj_id player, obj_id npc)
{
	obj_id remwaypoint = getObjIdObjVar(player, "quest.general.quest/c_story1_1_imp.crash");
	if (remwaypoint != null)
    {
       destroyWaypointInDatapad(remwaypoint, player);
    }
	removeObjVar(player, "quest.general.quest/c_story1_1_imp.crash");
	
	obj_id top=getTopMostContainer(player);
	location loc = getLocation(top);
	loc.x = 0;
	loc.y = 0;
	loc.z = 2012;
	loc.area = "rori";
	obj_id waypoint = createWaypointInDatapad(player, loc);
	setObjVar(player, "quest.general.quest/c_story1_1_imp.crash", waypoint);	
	setWaypointName(waypoint, "Missing Pilot Coordinates");
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_giveQuest2 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "c_story1_1_imp_cliffhanger");
	groundquests.sendSignal(player, "c_story1_1_neu_cliffhanger");
	groundquests.sendSignal(player, "c_story1_1_reb_cliffhanger");
			
	int questId = questGetQuestId("quest/c_story1_2_imp");
	
	groundquests.grantQuest(questId, player, npc, true);
	
	obj_id remwaypoint = getObjIdObjVar(player, "quest.general.quest/c_story1_1_imp.corpse");
	if (remwaypoint != null)
    {
       destroyWaypointInDatapad(remwaypoint, player);
    }
	removeObjVar(player, "quest.general.quest/c_story1_1_imp.corpse");
	
	obj_id remwaypoint1 = getObjIdObjVar(player, "quest.general.quest/c_story1_1_imp.imperialQG");
	if (remwaypoint1 != null)
    {
       destroyWaypointInDatapad(remwaypoint1, player);
    }
	removeObjVar(player, "quest.general.quest/c_story1_1_imp.imperialQG");
	
//	obj_id top=getTopMostContainer(player);
//	location loc = getLocation(top);
//	loc.x = -5286;
//	loc.y = 0;
//	loc.z = -2266;
//	loc.area = "rori";
//	obj_id waypoint = createWaypointInDatapad(player, loc);
//	setObjVar(player, "quest.general.quest/c_story1_2_imp.kaila", waypoint);	
//	setWaypointName(waypoint, "Kaila Min's Hang Out");
//	setWaypointActive(waypoint, true);
	
//	location loc1 = getLocation(top);
//	loc1.x = -1358;
//	loc1.y = 0;
//	loc1.z = -3692;
//	obj_id waypoint1 = createWaypointInDatapad(player, loc1);
//	setObjVar(player, "quest.general.quest/c_story1_2_imp.imperialQG", waypoint1);	
//	setWaypointName(waypoint1, "Jevan Monsul");
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_giveQuest3 (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "c_story1_3_imp");

}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_removeQuest3 (obj_id player, obj_id npc)
{
	groundquests.clearQuest(player, "c_story1_3_imp");
	space_quest.clearQuestFlags(player, "escort", "c_story1_3_space");
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_signalReward3 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "returned");
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_giveQuest4 (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "c_story1_4a");
}

// ----------------------------------------------------------------------

void c_story1_1_imp_quest_action_completeQ2 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "c_story1_2_imp_cliff2");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int c_story1_1_imp_quest_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hello again, soldier.  It appears that my search bore fruit.  A lady named Kaila heard that I was looking for that lost pilot.  She said that she saw someone fitting his description in the wilderness.  Since you are already in the loop for this, I want you to go talk to her.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Didn't she give you the information when she contacted you?
	if (response == "s_288")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: No.  She is expecting a reward for valuable information.  The Empire will take care of that.  You will go talk to her, won't you?
			string_id message = new string_id (c_stringFile, "s_290");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course, sir.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm not really interested in finding this guy.  He was an idiot to crash his ship and not come back to town.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_292");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_296");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't need additional details.  I want to find out what's going on.
	if (response == "s_300")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveQuest2 (player, npc);

			//-- NPC: Kaila apparently hangs out at some dive in Narmle.  Here's a waypoint.  It should be safe enough there. 
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No more of this for me.  I'm done.
	if (response == "s_304")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: If we do not find him, I'm holding you responsible.
			string_id message = new string_id (c_stringFile, "s_306");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No.  She is expecting a reward for valuable information.  The Empire will take care of that.  You will go talk to her, won't you?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course, sir.
	if (response == "s_292")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveQuest2 (player, npc);

			//-- NPC: Good choice. She is a regular at some dive in Narmle after dark.  I'll give you a waypoint.
			string_id message = new string_id (c_stringFile, "s_294");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm not really interested in finding this guy.  He was an idiot to crash his ship and not come back to town.
	if (response == "s_296")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: If we do not find him, I'm holding you responsible.
			string_id message = new string_id (c_stringFile, "s_298");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome to the right side, soldier.  I'm glad to see that you support law and order.  Sources tell me that you found a spice sample and are looking for a missing pilot.  I have information for you.  A lady named Kaila saw the pilot out in the wilderness.  I want you to go talk to her.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Didn't she give you the information when she contacted you?
	if (response == "s_288")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: No.  She is expecting a reward for valuable information.  The Empire will take care of that.  You will go talk to her, won't you?
			string_id message = new string_id (c_stringFile, "s_290");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course, sir.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm not really interested in finding this guy.  He was an idiot to crash his ship and not come back to town.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_292");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_296");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't need additional details.  I want to find out what's going on.
	if (response == "s_300")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveQuest2 (player, npc);

			//-- NPC: Kaila apparently hangs out at some dive in Narmle.  Here's a waypoint.  It should be safe enough there. 
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No more of this for me.  I'm done.
	if (response == "s_304")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: If we do not find him, I'm holding you responsible.
			string_id message = new string_id (c_stringFile, "s_306");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, soldier, looks like you have chosen to change your traitorous ways.  Good to see!  Sources tell me that you found a spice sample and are looking for a missing pilot.  I have information for you.  A lady named Kaila saw the pilot out in the wilderness.  I want you to go talk to her.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Didn't she give you the information when she contacted you?
	if (response == "s_288")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: No.  She is expecting a reward for valuable information.  The Empire will take care of that.  You will go talk to her, won't you?
			string_id message = new string_id (c_stringFile, "s_290");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course, sir.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm not really interested in finding this guy.  He was an idiot to crash his ship and not come back to town.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_292");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_296");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't need additional details.  I want to find out what's going on.
	if (response == "s_300")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveQuest2 (player, npc);

			//-- NPC: Kaila apparently hangs out at some dive in Narmle.  Here's a waypoint.  It should be safe enough there. 
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No more of this for me.  I'm done.
	if (response == "s_304")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: If we do not find him, I'm holding you responsible.
			string_id message = new string_id (c_stringFile, "s_306");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Greetings, soldier.  I have a situation that requires my attention and I cannot attend to it properly.  Would you be willing to help me out?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps, if I have more information.
	if (response == "s_230")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: I have just gotten word that a pilot is missing. We have the coordinates of his last known location. It was on Rori. Would you be willing to run out there and see what happened?  He may be hurt or in danger. 
			string_id message = new string_id (c_stringFile, "s_232");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will go investigate.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'd rather not.  I have a lot to do right now.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_234");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_238");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will do anything I can to help the Empire.
	if (response == "s_242")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			c_story1_1_imp_quest_action_giveQuest (player, npc);

			//-- NPC: Your loyalty encourages me.  I wish more people were like you.  Anyway, a pilot is missing and we don't know what happened. We have his last known coordinates on Rori. Investigate then bring me back any information you find, particularly information about his cargo. This is of great interest to the Empire.
			string_id message = new string_id (c_stringFile, "s_244");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thank you.  You should attend to your own duties.
	if (response == "s_246")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shoo");

			//-- NPC: I guess you just aren't that helpful after all.  
			string_id message = new string_id (c_stringFile, "s_248");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have just gotten word that a pilot is missing. We have the coordinates of his last known location. It was on Rori. Would you be willing to run out there and see what happened?  He may be hurt or in danger. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will go investigate.
	if (response == "s_234")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveQuest (player, npc);

			//-- NPC: Very good.  Go to these coordinates on Rori and see if you can find anything out. Then report back to me. Oh, if he had cargo, maybe you could find out what happened to it.  That would probably help him out a lot.
			string_id message = new string_id (c_stringFile, "s_236");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'd rather not.  I have a lot to do right now.
	if (response == "s_238")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hopefully your decision didn't doom that poor pilot.
			string_id message = new string_id (c_stringFile, "s_240");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome back.  Did you find anything interesting?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The pilot's ship crashed.  I haven't found any trace of him though.
	if (response == "s_252")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Crashed?  That's terrible!  Please go back there and search for some trace of him.
			string_id message = new string_id (c_stringFile, "s_254");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I found this datapad and this sample.  I think it's a spice.
	if (response == "s_256")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: A spice?  I have never seen anything like it.  Let's see what this datapad contains.  One moment for the decoder to do its job...there we go.  
			string_id message = new string_id (c_stringFile, "s_258");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What does it say?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_260");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet.
	if (response == "s_276")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Please get right on that.
			string_id message = new string_id (c_stringFile, "s_278");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I lost the location. Can you give it to me again?
	if (response == "s_280")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveCrashWaypoint (player, npc);

			//-- NPC: I can give you that data.
			string_id message = new string_id (c_stringFile, "s_282");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A spice?  I have never seen anything like it.  Let's see what this datapad contains.  One moment for the decoder to do its job...there we go.  

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What does it say?
	if (response == "s_260")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: It looks like this sample was part of a larger shipment that the pilot was bringing somewhere.  The datapad is quite damaged. There's nothing about who shot the ship down, just that the ship was attacked.
			string_id message = new string_id (c_stringFile, "s_262");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So, now what do I do?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_264");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It looks like this sample was part of a larger shipment that the pilot was bringing somewhere.  The datapad is quite damaged. There's nothing about who shot the ship down, just that the ship was attacked.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So, now what do I do?
	if (response == "s_264")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: I think that this spice sample is important somehow.  I have a loyal Imperial doctor that will analyze this sample if you take it to him.
			string_id message = new string_id (c_stringFile, "s_266");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I would be happy to.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not right now, but I'll come back when I'm ready.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_268");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_272");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I think that this spice sample is important somehow.  I have a loyal Imperial doctor that will analyze this sample if you take it to him.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I would be happy to.
	if (response == "s_268")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_unlockData (player, npc);

			//-- NPC: Good.  Here's the medical facility where he works.  You should find him inside.  I swear, I don't think he sleeps.
			string_id message = new string_id (c_stringFile, "s_270");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not right now, but I'll come back when I'm ready.
	if (response == "s_272")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: You do that.
			string_id message = new string_id (c_stringFile, "s_274");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, well, well, guess our traitor wasn't as good at hiding his tracks as he thought!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you mean?
	if (response == "s_88")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: A special load of cargo was siezed from a group of smugglers.  Some of it was the spice that we are looking for.
			string_id message = new string_id (c_stringFile, "s_92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Interesting.  What else can you tell me?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_93");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I beg your pardon? I'm no traitor!
	if (response == "s_89")
	{
		doAnimationAction (player, "taken_aback");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Of course you aren't.  I'm talking about Cal Handro, that 'missing' pilot.  But is there something that you wanted to admit to, %TU?
			string_id message = new string_id (c_stringFile, "s_90");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Not at all!  I was just testing you, actually.  Tell me what you learned.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_91");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 35);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A special load of cargo was siezed from a group of smugglers.  Some of it was the spice that we are looking for.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Interesting.  What else can you tell me?
	if (response == "s_93")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: I can tell you that it led us to some very interesting intelligence. One of the investigators made contact with the...gentleman... who may be harboring this traitor.  
			string_id message = new string_id (c_stringFile, "s_94");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why don't you go in and extract him?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do for you then?
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_95");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_97");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can tell you that it led us to some very interesting intelligence. One of the investigators made contact with the...gentleman... who may be harboring this traitor.  

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why don't you go in and extract him?
	if (response == "s_95")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Let's just say that it's complicated.  We need to do this with diplomacy.
			string_id message = new string_id (c_stringFile, "s_96");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see.  What am I to do?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_98");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I do for you then?
	if (response == "s_97")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Go out to Rori, to the Martano estate.  Talk to Tierce Martano and find out what he knows.  After this, though, I'm out.  I have been...reassigned. Maybe the investigator will be able to help you further.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who is this investigator?  Where is the Martano estate?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 33);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let's just say that it's complicated.  We need to do this with diplomacy.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see.  What am I to do?
	if (response == "s_98")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Go out to Rori, to the Martano estate.  Talk to Tierce Martano and find out what he knows.  After this, though, I'm out.  I have been...reassigned. Maybe the investigator will be able to help you further.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who is this investigator?  Where is the Martano estate?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 33);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch33 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Go out to Rori, to the Martano estate.  Talk to Tierce Martano and find out what he knows.  After this, though, I'm out.  I have been...reassigned. Maybe the investigator will be able to help you further.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who is this investigator?  Where is the Martano estate?
	if (response == "s_100")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			c_story1_1_imp_quest_action_giveQuest4 (player, npc);

			//-- NPC: The investigator is Officer M'kae and I'll give you the coordinates to the Martano Estate.  Good luck %TU.
			string_id message = new string_id (c_stringFile, "s_101");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch35 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Of course you aren't.  I'm talking about Cal Handro, that 'missing' pilot.  But is there something that you wanted to admit to, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not at all!  I was just testing you, actually.  Tell me what you learned.
	if (response == "s_91")
	{
		doAnimationAction (player, "laugh");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: A special load of cargo was siezed from a group of smugglers.  Some of it was the spice that we are looking for.
			string_id message = new string_id (c_stringFile, "s_92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Interesting.  What else can you tell me?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_93");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch36 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There you are %TU. Have you found the pilot?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet. I did come across some interesting information though.
	if (response == "s_957")
	{
		doAnimationAction (player, "shake_head_no");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: Go on?
			string_id message = new string_id (c_stringFile, "s_958");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: It appears that the pilot smuggled slaves as well as spice.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_959");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 37);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Go on?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It appears that the pilot smuggled slaves as well as spice.
	if (response == "s_959")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "taken_aback");

			//-- NPC: Slaves? Are you sure? For who?
			string_id message = new string_id (c_stringFile, "s_960");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: For Trandoshan slavers. A rival clan of theirs wanted him dead.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_961");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 38);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Slaves? Are you sure? For who?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: For Trandoshan slavers. A rival clan of theirs wanted him dead.
	if (response == "s_961")
	{
		doAnimationAction (player, "nod");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			c_story1_1_imp_quest_action_signalReward3 (player, npc);

			//-- NPC: Hmm, so maybe they were behind it then. I will use this new information to try and gather some more leads. Maybe we can finally find the pilot so he can shed some light on all of this and pay for his crimes.
			string_id message = new string_id (c_stringFile, "s_963");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: My information hinted that some of these slavers work with the Empire...
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Sounds good.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_964");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_965");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmm, so maybe they were behind it then. I will use this new information to try and gather some more leads. Maybe we can finally find the pilot so he can shed some light on all of this and pay for his crimes.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My information hinted that some of these slavers work with the Empire...
	if (response == "s_964")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: That... that is preposterous! We would never work with such filth. Just let that go. Now, come check back with me later and hopefully I will have some new information available for you.
			string_id message = new string_id (c_stringFile, "s_966");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds good.
	if (response == "s_965")
	{
		doAnimationAction (player, "nod");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			doAnimationAction (player, "salute2");

			//-- NPC: Come check back with me later and hopefully I will have some new information available for you.
			string_id message = new string_id (c_stringFile, "s_967");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Was there anything else soldier?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Just double checking the info. Wire, Dearic cantina, correct?
	if (response == "s_330")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod");

			//-- NPC: Yes soldier, you got it right. Now hurry, we need to find this pilot and find out what he's been up to.
			string_id message = new string_id (c_stringFile, "s_333");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Something came up; I have to abort the mission for now.
	if (response == "s_331")
	{
		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			c_story1_1_imp_quest_action_removeQuest3 (player, npc);

			//-- NPC: That something better be really important %TU! I expect to see you back here very soon to finish this!
			string_id message = new string_id (c_stringFile, "s_332");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch45 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good to see you again soldier. We have a new lead on the whereabouts of the pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The last time you had a lead, I almost got killed!
	if (response == "s_293")
	{
		doAnimationAction (player, "pound_fist_palm");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod");

			//-- NPC: Yes, very sorry about that. Our intel was... lacking. You handled yourself like an expert though and this mission should be a walk in the park for you.
			string_id message = new string_id (c_stringFile, "s_299");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sorry but I don't trust your 'intel'. I'm out of here!
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: You better be right, I've had enough near death experiences.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_305");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_309");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I assume I will have a platoon of troopers with me this time?
	if (response == "s_295")
	{
		doAnimationAction (player, "sigh_deeply");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm afraid we're on a very limited budget. I assure you that will not be necessary this time though.
			string_id message = new string_id (c_stringFile, "s_301");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You better be right, I've had enough near death experiences.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Yeah right. I don't have time for this right now, I'm out of here.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_325");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_326");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have time for any more of your crazy missions!
	if (response == "s_297")
	{
		doAnimationAction (player, "shake_head_no");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: You have a job to do soldier! I expect to see you back here soon or this will go in to your record!
			string_id message = new string_id (c_stringFile, "s_303");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, very sorry about that. Our intel was... lacking. You handled yourself like an expert though and this mission should be a walk in the park for you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry but I don't trust your 'intel'. I'm out of here!
	if (response == "s_305")
	{
		doAnimationAction (player, "dismiss");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: You have a job to do soldier! I expect to see you back here soon or this will go in to your record!
			string_id message = new string_id (c_stringFile, "s_313");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You better be right, I've had enough near death experiences.
	if (response == "s_309")
	{
		doAnimationAction (player, "point_accusingly");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Fair enough. Our intel points to an information broker in Dearic, Talus. He was seen with the pilot about a week ago. Find out what he knows and see if you can track down the pilot.
			string_id message = new string_id (c_stringFile, "s_315");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's the data on the information broker?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_316");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 48);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch48 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Fair enough. Our intel points to an information broker in Dearic, Talus. He was seen with the pilot about a week ago. Find out what he knows and see if you can track down the pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the data on the information broker?
	if (response == "s_316")
	{
		doAnimationAction (player, "nod");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			//-- NPC: His real name is unknown to us but he's called Wire. He's a Bothan, fairly short, with a pale fur. You should be able to find him in the local cantina of Dearic.
			string_id message = new string_id (c_stringFile, "s_317");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And you are sure I won't find twenty thugs trying to kill me instead?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Very well, I will be on my way.
			boolean hasResponse1 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_318");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_319");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 49);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch49 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: His real name is unknown to us but he's called Wire. He's a Bothan, fairly short, with a pale fur. You should be able to find him in the local cantina of Dearic.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And you are sure I won't find twenty thugs trying to kill me instead?
	if (response == "s_318")
	{
		doAnimationAction (player, "shrug_hands");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_shoulders");

			//-- NPC: No intel is fool proof %TU but we do not believe Wire to be a combatant threat. Never the less, be on your guard, a lot of criminal elements seem to have an interest in this pilot and his cargo.
			string_id message = new string_id (c_stringFile, "s_321");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You could say that again. Alright, I will travel to Dearic.
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_322");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 50);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Very well, I will be on my way.
	if (response == "s_319")
	{
		doAnimationAction (player, "nod");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			doAnimationAction (player, "salute2");

			c_story1_1_imp_quest_action_giveQuest3 (player, npc);

			//-- NPC: Excellent soldier! Stay alert out there.
			string_id message = new string_id (c_stringFile, "s_320");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch50 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No intel is fool proof %TU but we do not believe Wire to be a combatant threat. Never the less, be on your guard, a lot of criminal elements seem to have an interest in this pilot and his cargo.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You could say that again. Alright, I will travel to Dearic.
	if (response == "s_322")
	{
		doAnimationAction (player, "nod");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			doAnimationAction (player, "salute2");

			c_story1_1_imp_quest_action_giveQuest3 (player, npc);

			//-- NPC: Excellent soldier! Stay alert out there.
			string_id message = new string_id (c_stringFile, "s_324");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_story1_1_imp_quest_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm afraid we're on a very limited budget. I assure you that will not be necessary this time though.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You better be right, I've had enough near death experiences.
	if (response == "s_325")
	{
		doAnimationAction (player, "sigh_deeply");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Fair enough. Our intel points to an information broker in Dearic, Talus. He was seen with the pilot about a week ago. Find out what he knows and see if you can track down the pilot.
			string_id message = new string_id (c_stringFile, "s_315");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's the data on the information broker?
			boolean hasResponse0 = false;
			if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_316");

				utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 48);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah right. I don't have time for this right now, I'm out of here.
	if (response == "s_326")
	{
		doAnimationAction (player, "dismiss");

		//-- [NOTE] 
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: You have a job to do soldier! I expect to see you back here soon or this will go in to your record!
			string_id message = new string_id (c_stringFile, "s_328");
			utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.c_story1_1_imp_quest");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	setInvulnerable (self, true);
	setName (self, "Jevan Monsul");
	ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	setInvulnerable (self, true);
	setName (self, "Jevan Monsul");
	ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.c_story1_1_imp_quest");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_completedS1NewFactionReb (player, npc))
	{
		doAnimationAction (npc, "shake_head_disgust");

		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: I'm disappointed in you, traitor.  You turn your back on the Empire and then expect us to hand information over to you?  You are sadly mistaken.  Go talk to your own kind now.
		string_id message = new string_id (c_stringFile, "s_219");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_completedS1NewFactionNeutral (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: How is civilian life treating you?  Never mind, I don't want to know.  I also don't want to know why you are coming to me for classified information.  I have someone else handling this investigation now...military personnel.
		string_id message = new string_id (c_stringFile, "s_222");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_playerIsNeutral (player, npc))
	{
		doAnimationAction (npc, "shake_head_no");

		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: If I could use your help, I would, but my orders are for Imperial military only.
		string_id message = new string_id (c_stringFile, "s_224");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_playerIsReb (player, npc))
	{
		doAnimationAction (npc, "shoo");

		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Go away, Rebel scum.
		string_id message = new string_id (c_stringFile, "s_226");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_completedS1Imp (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Hello again, soldier.  It appears that my search bore fruit.  A lady named Kaila heard that I was looking for that lost pilot.  She said that she saw someone fitting his description in the wilderness.  Since you are already in the loop for this, I want you to go talk to her.
		string_id message = new string_id (c_stringFile, "s_286");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Didn't she give you the information when she contacted you?
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't need additional details.  I want to find out what's going on.
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: No more of this for me.  I'm done.
		boolean hasResponse2 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_288");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_300");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_304");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 5);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_completedS1Neutral (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Welcome to the right side, soldier.  I'm glad to see that you support law and order.  Sources tell me that you found a spice sample and are looking for a missing pilot.  I have information for you.  A lady named Kaila saw the pilot out in the wilderness.  I want you to go talk to her.
		string_id message = new string_id (c_stringFile, "s_308");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Didn't she give you the information when she contacted you?
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't need additional details.  I want to find out what's going on.
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: No more of this for me.  I'm done.
		boolean hasResponse2 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_288");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_300");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_304");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 5);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_completedS1Reb (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Well, soldier, looks like you have chosen to change your traitorous ways.  Good to see!  Sources tell me that you found a spice sample and are looking for a missing pilot.  I have information for you.  A lady named Kaila saw the pilot out in the wilderness.  I want you to go talk to her.
		string_id message = new string_id (c_stringFile, "s_310");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Didn't she give you the information when she contacted you?
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't need additional details.  I want to find out what's going on.
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: No more of this for me.  I'm done.
		boolean hasResponse2 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_288");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_300");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_304");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 5);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (!c_story1_1_imp_quest_condition_playerStartedQuest (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Greetings, soldier.  I have a situation that requires my attention and I cannot attend to it properly.  Would you be willing to help me out?
		string_id message = new string_id (c_stringFile, "s_228");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Perhaps, if I have more information.
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I will do anything I can to help the Empire.
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: No thank you.  You should attend to your own duties.
		boolean hasResponse2 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_230");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_242");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_246");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 13);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_questActivePreData (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Welcome back.  Did you find anything interesting?
		string_id message = new string_id (c_stringFile, "s_250");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: The pilot's ship crashed.  I haven't found any trace of him though.
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition_notFoundCrash (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Yes, I found this datapad and this sample.  I think it's a spice.
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition_foundData (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: Not yet.
		boolean hasResponse2 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: I lost the location. Can you give it to me again?
		boolean hasResponse3 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_252");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_256");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_276");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_280");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 19);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_questActivePostData (player, npc))
	{
		doAnimationAction (npc, "point_forward");

		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: Go talk to Doctor Vang.  There's not much else I can do to help you.
		string_id message = new string_id (c_stringFile, "s_284");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_quest3Complete (player, npc))
	{
		//-- NPC: Well, well, well, guess our traitor wasn't as good at hiding his tracks as he thought!
		string_id message = new string_id (c_stringFile, "s_956");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What do you mean?
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I beg your pardon? I'm no traitor!
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_88");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_89");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 29);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_onTaskReturn (player, npc))
	{
		doAnimationAction (npc, "salute2");

		doAnimationAction (player, "salute2");

		//-- NPC: There you are %TU. Have you found the pilot?
		string_id message = new string_id (c_stringFile, "s_955");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Not yet. I did come across some interesting information though.
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_957");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 36);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_quest3Active (player, npc))
	{
		doAnimationAction (npc, "salute2");

		doAnimationAction (player, "salute2");

		//-- NPC: Was there anything else soldier?
		string_id message = new string_id (c_stringFile, "s_329");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Just double checking the info. Wire, Dearic cantina, correct?
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Something came up; I have to abort the mission for now.
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_330");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_331");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 42);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition_quest2Active (player, npc))
	{
		doAnimationAction (npc, "salute2");

		doAnimationAction (player, "salute2");

		c_story1_1_imp_quest_action_completeQ2 (player, npc);

		//-- NPC: Good to see you again soldier. We have a new lead on the whereabouts of the pilot.
		string_id message = new string_id (c_stringFile, "s_291");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: The last time you had a lead, I almost got killed!
		boolean hasResponse0 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I assume I will have a platoon of troopers with me this time?
		boolean hasResponse1 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I don't have time for any more of your crazy missions!
		boolean hasResponse2 = false;
		if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_293");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_295");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_297");

			utils.setScriptVar (player, "conversation.c_story1_1_imp_quest.branchId", 45);

			npcStartConversation (player, npc, "c_story1_1_imp_quest", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_story1_1_imp_quest_condition__defaultCondition (player, npc))
	{
		c_story1_1_imp_quest_action_faceplayer (player, npc);

		//-- NPC: I don't know anything more than you do and I'm waiting to hear back from headquarters about what to do next.
		string_id message = new string_id (c_stringFile, "s_312");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "c_story1_1_imp_quest")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

	if (branchId == 5 && c_story1_1_imp_quest_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && c_story1_1_imp_quest_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && c_story1_1_imp_quest_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && c_story1_1_imp_quest_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && c_story1_1_imp_quest_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && c_story1_1_imp_quest_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && c_story1_1_imp_quest_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && c_story1_1_imp_quest_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && c_story1_1_imp_quest_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && c_story1_1_imp_quest_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && c_story1_1_imp_quest_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && c_story1_1_imp_quest_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && c_story1_1_imp_quest_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && c_story1_1_imp_quest_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 33 && c_story1_1_imp_quest_handleBranch33 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 35 && c_story1_1_imp_quest_handleBranch35 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 36 && c_story1_1_imp_quest_handleBranch36 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && c_story1_1_imp_quest_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && c_story1_1_imp_quest_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && c_story1_1_imp_quest_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && c_story1_1_imp_quest_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 45 && c_story1_1_imp_quest_handleBranch45 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && c_story1_1_imp_quest_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 48 && c_story1_1_imp_quest_handleBranch48 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 49 && c_story1_1_imp_quest_handleBranch49 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 50 && c_story1_1_imp_quest_handleBranch50 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && c_story1_1_imp_quest_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.c_story1_1_imp_quest.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

