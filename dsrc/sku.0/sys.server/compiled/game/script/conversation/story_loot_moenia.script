// ======================================================================
//
// story_loot_moenia.script
// Copyright 2003, Sony Online Entertainment
// All Rights Reserved.
//
// DO NOT EDIT THIS AUTO-GENERATED FILE.  PLEASE USE THE CONVERATION EDITOR!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.features;
include library.money;
include library.prose;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/story_loot_moenia";

// ======================================================================
// Script Conditions
// ======================================================================

boolean story_loot_moenia_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkAll (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("all"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkTatooine (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("tatooine"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkNaboo (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("naboo"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkCorellia (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("corellia"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkLok (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("lok"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkDantooine (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("dantooine"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkYavin4 (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("yavin4"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkEndor (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("endor"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkDathomir (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("dathomir"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_hasSpaceExp (obj_id player, obj_id npc)
{
	return features.isSpaceEdition(player);

}

// ----------------------------------------------------------------------

boolean story_loot_moenia_condition_checkRem (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.rem"))
		return true;
		
return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void story_loot_moenia_action_Tatooine (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 1500;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Naboo (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 1500;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Corellia (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 1500;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Dantooine (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 3000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Lok (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 3000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Yavin4 (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 3000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Endor (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 4000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_Dathomir (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 4000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_All (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 150;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_animBow (obj_id player, obj_id npc)
{
	doAnimationAction( npc, "bow" );
}

// ----------------------------------------------------------------------

void story_loot_moenia_action_storyLoot (obj_id player, obj_id npc)
{
	utils.setScriptVar(player, "story_loot.rem", true);
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

string story_loot_moenia_tokenTO_species (obj_id player, obj_id npc)
{
	int speciesNum = getSpecies(player);
	string speciesName = "name_human";
	switch (speciesNum)
	{
		case SPECIES_HUMAN:
			speciesName = "name_human";
			break;
		case SPECIES_ZABRAK:
			speciesName = "name_zabrak";
			break;
		case SPECIES_WOOKIEE:
			speciesName = "name_wookie";
			break;
		case SPECIES_TWILEK:
			speciesName = "name_twilek";
			break;
		case SPECIES_TRANDOSHAN:
			speciesName = "name_trandoshan";
			break;
		case SPECIES_ITHORIAN:
			speciesName = "name_ithorian";
			break;
		case SPECIES_SULLUSTAN:
			speciesName = "name_sullustan";
			break;
		case SPECIES_MON_CALAMARI:
			speciesName = "name_moncal";
			break;
		case SPECIES_RODIAN:
			speciesName = "name_rodian";
			break;
		case SPECIES_BOTHAN:
			speciesName = "name_bothan";
			break;
			
	}
			
	return new string(utils.packStringId(new string_id ("player_species", speciesName)));
}

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "npc.conversation.story_loot_moenia");
		
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	setName(self, "Droijack-dyn");

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	setName(self, "Droijack-dyn");

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "npc.conversation.story_loot_moenia");

	return SCRIPT_CONTINUE;
}

trigger OnGiveItem(obj_id item, obj_id player)
{
	if (hasObjVar(item, "story_loot.planet"))
	{
		string planet = getStringObjVar(item, "story_loot.planet");
		
		utils.setScriptVar(player, "story_loot.planet", planet);
		utils.setScriptVar(player, "story_loot.item", item);
		
		OnStartNpcConversation(self, player);
	}
	
	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	if (ai_lib.isInCombat (self) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkAll (player, self))
	{
		doAnimationAction (self, "point_away");

		doAnimationAction (player, "scared");

		story_loot_moenia_action_All (player, self);

		//-- NPC: [That freighter had it coming. It seems that Droijack-dyn knows exactly where it came from too, according to his birdly expression. You scram before the bird-man pecks you really hard. Freighter sympathizer.]
		string_id message = new string_id (c_stringFile, "s_aa0a2be5");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkCorellia (player, self))
	{
		doAnimationAction (self, "fakepunch");

		doAnimationAction (player, "pet_high");

		story_loot_moenia_action_Corellia (player, self);

		//-- NPC: [You had front row tickets to the Galactic Civil War Extravaganza in Corellia. If only you had brought your favorite snack, Almond-Kwevvu Crisp Munchies, you would have been happy. What a show. You give Droijack-dyn his information and, in return, he gives you a handful of credits.]
		string_id message = new string_id (c_stringFile, "s_8a1e08c");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkDantooine (player, self))
	{
		doAnimationAction (self, "nod_head_once");

		doAnimationAction (player, "dream");

		story_loot_moenia_action_Dantooine (player, self);

		//-- NPC: [Dantooine didn't offer much in the ruse of excitement. As Droijack-dyn hands you a hanfdul of credits for giving him the information he needed, you begin to wonder. Do the Ishi Tib like crackers? You decide against giving him a sample of your favorite snack, Almond-Kwevvu Crisp Munchies. They're too good to share.]
		string_id message = new string_id (c_stringFile, "s_4f8f72e2");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkDathomir (player, self))
	{
		doAnimationAction (self, "flipcoin");

		doAnimationAction (player, "airguitar");

		story_loot_moenia_action_Dathomir (player, self);

		//-- NPC: [You barely came back from that trip alive and expect a large pay ount from the bird-man. You desperately need to do some repairs. When he does, you celebrate in the only way you know how.]
		string_id message = new string_id (c_stringFile, "s_b953d944");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkEndor (player, self))
	{
		doAnimationAction (self, "flipcoin");

		story_loot_moenia_action_Endor (player, self);

		//-- NPC: [You think back to your trip to Endor as you hand Droijack-dyn the item requested. You had a feeling the Imperials were up to something up there. But you can't seem to figure out exactly what it was. Hm. You forget anything about Endor as Droijack-dyn hands you a rather large handful of credits. Endor smendor.]
		string_id message = new string_id (c_stringFile, "s_e9574203");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkLok (player, self))
	{
		doAnimationAction (self, "backhand_threaten");

		doAnimationAction (player, "shrug_shoulders");

		story_loot_moenia_action_Lok (player, self);

		//-- NPC: [You hope that Droijack-dyn doesn't mind that the objects you bring back are a little.. crispy. You hand the information disk to the bird-man and it falls apart when he touches it. He frowns.. at least, you guess that's what he's doing. You shrug. Information is information, right? ... right?
		string_id message = new string_id (c_stringFile, "s_61cc04c8");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkNaboo (player, self))
	{
		doAnimationAction (self, "flipcoin");

		doAnimationAction (player, "expect_tip");

		story_loot_moenia_action_Naboo (player, self);

		//-- NPC: [Naboo was easy sailing. In fact, you were able to stop by the local freighter and get a souvenir *while* dogfighting some pirates. You're just that good. Because the trip was so easy, you really don't expect much credit-wise.]
		string_id message = new string_id (c_stringFile, "s_d701ec31");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkTatooine (player, self))
	{
		doAnimationAction (self, "flipcoin");

		story_loot_moenia_action_Tatooine (player, self);

		//-- NPC: [You shake the sand off the item from Tatooine and hand it to him. Droijack-dyn pulls out a handful of credits from his backpack and gives them to you. If you could only steal that backpack...]
		string_id message = new string_id (c_stringFile, "s_d768ce2d");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkYavin4 (player, self))
	{
		doAnimationAction (self, "nod_head_once");

		story_loot_moenia_action_Yavin4 (player, self);

		//-- NPC: [You fight the urge to hand the bird a cracker and give him the object he requested instead. Droijack-dyn appears to be happy with it.]
		string_id message = new string_id (c_stringFile, "s_5b01a6db");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_checkRem (player, self))
	{
		doAnimationAction (self, "wave1");

		doAnimationAction (player, "shrug_shoulders");

		//-- NPC: [Droijack-dyn greets you warmly. His bird expression appears to be quizzical, you think. You smile. You're getting pretty good at understanding this bird-man. Hm. You bet he's waiting for those nifty objects he requested. Do you have any? You look in your backpack. Your backpack isn't as neat as his is. You bet you can just drag the object onto him and he'll pick it up with his little--er big bird hands. Maybe you should try?]
		string_id message = new string_id (c_stringFile, "s_d70926bc");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition_hasSpaceExp (player, self))
	{
		doAnimationAction (self, "wave1");

		story_loot_moenia_action_animBow (player, self);

		//-- NPC: [Droijack-dyn the Ishi Tib tries to get your attention by spouting off what sounds like chipring. Ah, yes. The Ishi Tib, an avian race whose language consists of bird-like sounds and squawks. You try to understand what it's saying.]
		string_id message = new string_id (c_stringFile, "s_5b29fb2");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I can kinda understand you. I think you need help.
		boolean hasResponse0 = false;
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Uh.. no thanks. I'll be going now.
		boolean hasResponse1 = false;
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_45d96c97");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_579e662c");

			setObjVar (player, "conversation.story_loot_moenia.branchId", 11);

			npcStartConversation (player, self, "story_loot_moenia", message, responses);
		}
		else
		{
			chat.chat (self, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_moenia_condition__defaultCondition (player, self))
	{
		doAnimationAction (self, "wave_on_dismissing");

		//-- NPC: [Droijack-dyn the Ishi Tib, an avian race whose language consists of chirping, waves you off. It seems like he--is it a he or a she?--needs someone specific. With all the space talk around, you assume he needs a pilot to help him.]
		string_id message = new string_id (c_stringFile, "s_308c2df6");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "story_loot_moenia")
		return SCRIPT_CONTINUE;

	int branchId = getIntObjVar (player, "conversation.story_loot_moenia.branchId");

	//-- [BRANCH NOTE] 
	//-- NPC: [Droijack-dyn the Ishi Tib tries to get your attention by spouting off what sounds like chipring. Ah, yes. The Ishi Tib, an avian race whose language consists of bird-like sounds and squawks. You try to understand what it's saying.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can kinda understand you. I think you need help.
	if (branchId == 11 && response == "s_45d96c97")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "point_up");

			//-- NPC: [Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]
			string_id message = new string_id (c_stringFile, "s_c9179ad6");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You want.. a bird bath!
			boolean hasResponse0 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: You want.. information!
			boolean hasResponse1 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't want to help after all.
			boolean hasResponse2 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_fb58660c");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6d9c4154");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d3466494");

				setObjVar (player, "conversation.story_loot_moenia.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_moenia.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Droijack-dyn the Ishi Tib tries to get your attention by spouting off what sounds like chipring. Ah, yes. The Ishi Tib, an avian race whose language consists of bird-like sounds and squawks. You try to understand what it's saying.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Droijack-dyn the Ishi Tib tries to get your attention by spouting off what sounds like chipring. Ah, yes. The Ishi Tib, an avian race whose language consists of bird-like sounds and squawks. You try to understand what it's saying.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uh.. no thanks. I'll be going now.
	if (branchId == 11 && response == "s_579e662c")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "backhand_threaten");

			doAnimationAction (player, "wtf");

			//-- NPC: [Bird people are weird and you'd rather not help them. Droijack-dyn advances toward you. You bet, by his physique, he could really give you a pounding. You run away. You have Almond-Kwevvu Crisp Munchies to eat and enemies to fight.]
			string_id message = new string_id (c_stringFile, "s_43728039");
			removeObjVar (player, "conversation.story_loot_moenia.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Droijack-dyn the Ishi Tib tries to get your attention by spouting off what sounds like chipring. Ah, yes. The Ishi Tib, an avian race whose language consists of bird-like sounds and squawks. You try to understand what it's saying.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: You want.. a bird bath!
	if (branchId == 12 && response == "s_fb58660c")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "shake_head_no");

			//-- NPC: [You crinkle your nose. Where did that come from? Well, he is a bird, isn't he? Droijack-dyn the Ishi Tib shakes his head. Of course that's not what he wanted! You try some more guesses.]
			string_id message = new string_id (c_stringFile, "s_8b12a5dd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A cracker!
			boolean hasResponse0 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_92154c00");

				setObjVar (player, "conversation.story_loot_moenia.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_moenia.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: You want.. information!
	if (branchId == 12 && response == "s_6d9c4154")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (player, "pose_proudly");

			//-- NPC: [Right on the first try! Looks like you have all of your kreetles in one lair and definitely the sharpest stone knife in the drawer. The bird-man pulls out several objects, looking to contain some pretty neat information. You start to piece together that he wants these objects, you can get them from space and from the enemies you defeat. Wow, your intellect is amazing. You puff up, trying to look all impressive.]
			string_id message = new string_id (c_stringFile, "s_57df7ab9");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: But.. what exactly am I looking for?
			boolean hasResponse0 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5b7b08d1");

				setObjVar (player, "conversation.story_loot_moenia.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_moenia.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't want to help after all.
	if (branchId == 12 && response == "s_d3466494")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "threaten_combat");

			doAnimationAction (player, "scared");

			//-- NPC: [Droijack-dyn advances toward you threatingly. You know, for a bird-man he's pretty impressive. In fact, you begin to wonder what profession he is. Just your luck, he's probably a Teras Kasi. That'd really ruin your day. You bet he has some powerful 'beak attack' that only birds get. You've decided you'd rather not find out and run off.]
			string_id message = new string_id (c_stringFile, "s_7f89f5d3");
			removeObjVar (player, "conversation.story_loot_moenia.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Droijack-dyn the Ishi Tib nods. It, although you've kinda figured out it's male by it's appearance, points to the sky. Space. Obviously, he wants something from the space systems. But, what, you can't tell. You start to guess.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [You crinkle your nose. Where did that come from? Well, he is a bird, isn't he? Droijack-dyn the Ishi Tib shakes his head. Of course that's not what he wanted! You try some more guesses.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: A cracker!
	if (branchId == 13 && response == "s_92154c00")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			//-- NPC: [Would you stop that? It seems Droijack-dyn really needs some help. Get serious, here. You try again.]
			string_id message = new string_id (c_stringFile, "s_f09b75ae");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You want.. hm. Information?
			boolean hasResponse0 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f93d75ff");

				setObjVar (player, "conversation.story_loot_moenia.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_moenia.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[You crinkle your nose. Where did that come from? Well, he is a bird, isn't he? Droijack-dyn the Ishi Tib shakes his head. Of course that's not what he wanted! You try some more guesses.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Would you stop that? It seems Droijack-dyn really needs some help. Get serious, here. You try again.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: You want.. hm. Information?
	if (branchId == 14 && response == "s_f93d75ff")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			//-- NPC: [Finally, Droijack-dyn nods and pulls out two objects from his backpack. One looks like a log of some sort, the other, a diary--you can tell because 'diary' is written across the front of it. Pretty tricky. Droijack-dyn points up. You begin to piece together that you can find objects like this in space and that the bird-man needs them. Will you help?]
			string_id message = new string_id (c_stringFile, "s_a8aa7613");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yeah, I'll help.
			boolean hasResponse0 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Nah, I've got other things to do.
			boolean hasResponse1 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d57d668a");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5c453f12");

				setObjVar (player, "conversation.story_loot_moenia.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_moenia.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Would you stop that? It seems Droijack-dyn really needs some help. Get serious, here. You try again.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Finally, Droijack-dyn nods and pulls out two objects from his backpack. One looks like a log of some sort, the other, a diary--you can tell because 'diary' is written across the front of it. Pretty tricky. Droijack-dyn points up. You begin to piece together that you can find objects like this in space and that the bird-man needs them. Will you help?]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah, I'll help.
	if (branchId == 15 && response == "s_d57d668a")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (player, "shrug_shoulders");

			story_loot_moenia_action_storyLoot (player, self);

			//-- NPC: [Droijack-dyn nods again, pulling a handful of credits from his backpack. You wonder what else he has in there. Snapping out of your daydream, you guess what he's trying to say is he'll pay you for any 'information' you find. Sounds like a sweet deal. You shrug. Time to go into space and defeat some enemies, hoping they'll drop their diaries. Nice.]
			string_id message = new string_id (c_stringFile, "s_56dc8579");
			removeObjVar (player, "conversation.story_loot_moenia.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Finally, Droijack-dyn nods and pulls out two objects from his backpack. One looks like a log of some sort, the other, a diary--you can tell because 'diary' is written across the front of it. Pretty tricky. Droijack-dyn points up. You begin to piece together that you can find objects like this in space and that the bird-man needs them. Will you help?]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Finally, Droijack-dyn nods and pulls out two objects from his backpack. One looks like a log of some sort, the other, a diary--you can tell because 'diary' is written across the front of it. Pretty tricky. Droijack-dyn points up. You begin to piece together that you can find objects like this in space and that the bird-man needs them. Will you help?]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nah, I've got other things to do.
	if (branchId == 15 && response == "s_5c453f12")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "strut");

			//-- NPC: [Well, Droijack-dyn looks like he's pretty mad. You better scram before he pecks you pretty hard.]
			string_id message = new string_id (c_stringFile, "s_81fa3514");
			removeObjVar (player, "conversation.story_loot_moenia.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Finally, Droijack-dyn nods and pulls out two objects from his backpack. One looks like a log of some sort, the other, a diary--you can tell because 'diary' is written across the front of it. Pretty tricky. Droijack-dyn points up. You begin to piece together that you can find objects like this in space and that the bird-man needs them. Will you help?]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [Right on the first try! Looks like you have all of your kreetles in one lair and definitely the sharpest stone knife in the drawer. The bird-man pulls out several objects, looking to contain some pretty neat information. You start to piece together that he wants these objects, you can get them from space and from the enemies you defeat. Wow, your intellect is amazing. You puff up, trying to look all impressive.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: But.. what exactly am I looking for?
	if (branchId == 18 && response == "s_5b7b08d1")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			//-- NPC: [You look closer at the objects Droijack-dyn is holding. The objects appear to be disks, and a datapad of some sort. Huh. One of them has 'diary' written on the front of it. Looks like you'll be hunting enemies for their diaries and logs of information. Just your line of work. Droijack-dyn pulls out some credits from his backpack, either gloating he has way more money than you or that he'll pay you for the information you get him.]
			string_id message = new string_id (c_stringFile, "s_aa1b838f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay. I'll help you.
			boolean hasResponse0 = false;
			if (story_loot_moenia_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_34e97c89");

				setObjVar (player, "conversation.story_loot_moenia.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_moenia.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[Right on the first try! Looks like you have all of your kreetles in one lair and definitely the sharpest stone knife in the drawer. The bird-man pulls out several objects, looking to contain some pretty neat information. You start to piece together that he wants these objects, you can get them from space and from the enemies you defeat. Wow, your intellect is amazing. You puff up, trying to look all impressive.]' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: [You look closer at the objects Droijack-dyn is holding. The objects appear to be disks, and a datapad of some sort. Huh. One of them has 'diary' written on the front of it. Looks like you'll be hunting enemies for their diaries and logs of information. Just your line of work. Droijack-dyn pulls out some credits from his backpack, either gloating he has way more money than you or that he'll pay you for the information you get him.]
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay. I'll help you.
	if (branchId == 19 && response == "s_34e97c89")
	{
		//-- [NOTE] 
		if (story_loot_moenia_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "nod_head_once");

			story_loot_moenia_action_storyLoot (player, self);

			//-- NPC: [Droijack-dyn the Ishi Tib nods. He seems happy, but you can't tell because.. well, he has a bird face. You stop wondering exactly why birds like crackers so much and run off.]
			string_id message = new string_id (c_stringFile, "s_b3731646");
			removeObjVar (player, "conversation.story_loot_moenia.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch '[You look closer at the objects Droijack-dyn is holding. The objects appear to be disks, and a datapad of some sort. Huh. One of them has 'diary' written on the front of it. Looks like you'll be hunting enemies for their diaries and logs of information. Just your line of work. Droijack-dyn pulls out some credits from his backpack, either gloating he has way more money than you or that he'll pay you for the information you get him.]' were false.");

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	removeObjVar (player, "conversation.story_loot_moenia.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

