// ======================================================================
//
// ep3_forest_aveso.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_forest_aveso";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_forest_aveso_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_isGoodguy (obj_id player, obj_id npc)
{
		return (groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_3", 0) ||
	        groundquests.hasCompletedQuest(player, "ep3_forest_wirartu_epic_3") ||
	        groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_7"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_isBadGuy (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_2", 0) ||
		    groundquests.hasCompletedQuest(player, "ep3_forest_wirartu_epic_2"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_isTaskActiveInitial (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "ep3_forest_outcast_contact", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_outcast_contact", 0))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_isTaskActiveOne (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_aveso_quest_1", 1) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_aveso_quest_1", 1))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_hasCompletedTaskOne (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_aveso_quest_1", 1) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_1"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_hasCompletedQuestOne (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_1");
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_isTaskActiveTwo (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_aveso_quest_2", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_aveso_quest_2", 0))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_hasCompletedTaskTwo (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_aveso_quest_2", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_2"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_hasCompletedQuestTwo (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_2");
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_isTaskActiveThree (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_forest_aveso_quest_3", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_forest_aveso_quest_3", 0))
	    
	    return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_hasCompletedTaskThree (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_aveso_quest_3", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_3"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_aveso_condition_hasCompletedQuestThree (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_aveso_quest_3");
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_forest_aveso_action_giveQuestAssassin (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_outcast_assassin");
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveQuestOne (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_aveso_quest_1");
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveQuestTwo (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_aveso_quest_2");
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveSignalOne (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "meat");
	sendSystemMessage(player, new string_id( "dungeon/myyydril", "reward_aveso_quest_1"));
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveSignalTwo (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "boxes");
	sendSystemMessage(player, new string_id( "dungeon/myyydril", "reward_aveso_quest_2"));
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveQuestThree (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_aveso_quest_3");
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveSignalThree (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "escort");
}

// ----------------------------------------------------------------------

void ep3_forest_aveso_action_giveSignalContact (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "contact");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_forest_aveso_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As I said before, grunt, I have nothing more for you. You should speak with the others if you haven't already.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was just visiting.
	if (response == "s_1175")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, I'm here and I'm fine. I'm sure you have tasks you must complete. In fact, I must return to mine. Perhaps, we'll talk again. [Aveso nods.]
			string_id message = new string_id (c_stringFile, "s_1177");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hm. [Aveso nods, trying to hide her pleased expression.] I approve of your progress, grunt. Perhaps not all is lost for you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't worry. I'll still visit you when I become leader of this place.
	if (response == "s_1181")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveSignalTwo (player, npc);

			//-- NPC: Nice try, grunt. [Aveso smirks.] Our Lady Reverence, Dahlia Damask, is far more difficult to please--even deal with--than I. She'll die of old age before giving up her place.
			string_id message = new string_id (c_stringFile, "s_1183");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I stand corrected.
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1185");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Nice try, grunt. [Aveso smirks.] Our Lady Reverence, Dahlia Damask, is far more difficult to please--even deal with--than I. She'll die of old age before giving up her place.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I stand corrected.
	if (response == "s_1185")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: One day, you'll meet her. But until then, you're stuck with me. [Aveso looks at her list.] And perhaps you will meet her sooner than I thought. Looks like I have nothing else left for you.
			string_id message = new string_id (c_stringFile, "s_1187");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You nod.]
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1189");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: One day, you'll meet her. But until then, you're stuck with me. [Aveso looks at her list.] And perhaps you will meet her sooner than I thought. Looks like I have nothing else left for you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod.]
	if (response == "s_1189")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Speak with the others within this place. They may have tasks for you.
			string_id message = new string_id (c_stringFile, "s_1191");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso smiles to herself.] You again. I thought I had the fortune of getting rid of you. I was wrong.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Count on being wrong more often, lady.
	if (response == "s_1197")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Lady? [Aveso smiles sweetly.] Don't tell me you're getting sweet on me, dear. Sarcasm aside, let's get down to business. We need things done around here and you're the perfect lackey to do it.
			string_id message = new string_id (c_stringFile, "s_1199");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm over-joyed. [You smirk.]
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1201");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Lady? [Aveso smiles sweetly.] Don't tell me you're getting sweet on me, dear. Sarcasm aside, let's get down to business. We need things done around here and you're the perfect lackey to do it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm over-joyed. [You smirk.]
	if (response == "s_1201")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Weapons have a tendency to break with general use. We'll need a new stock if we plan to be able to keep the Kerritamba off our backs for a while. At the end of the Chenataa River, there is an abandoned camp once inhabited by the Empire. One of our contacts has hidden a weapon stash there and inventory shows 6 boxes worth of weapons and supplies. Go there and find the supplies and bring them back.
			string_id message = new string_id (c_stringFile, "s_1203");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: It is as good as done.
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm tired of doing petty work.
			boolean hasResponse1 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1205");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1209");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Weapons have a tendency to break with general use. We'll need a new stock if we plan to be able to keep the Kerritamba off our backs for a while. At the end of the Chenataa River, there is an abandoned camp once inhabited by the Empire. One of our contacts has hidden a weapon stash there and inventory shows 6 boxes worth of weapons and supplies. Go there and find the supplies and bring them back.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It is as good as done.
	if (response == "s_1205")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveQuestTwo (player, npc);

			//-- NPC: That's what I like to hear. Keep it up and maybe, in some distant future, we'll get along.
			string_id message = new string_id (c_stringFile, "s_1207");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm tired of doing petty work.
	if (response == "s_1209")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: And I grow tired of your antics. Leave.
			string_id message = new string_id (c_stringFile, "s_1211");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso smirks.] I'm surprised. You actually set aside your selfishness to help others. Was it difficult for you?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes. In fact, I'm dying inside. [You smirk.]
	if (response == "s_1215")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveSignalOne (player, npc);

			//-- NPC: Good. A little rot and decay can go a long way for some. I have other work that needs to be done. Wait here while I look at my list.
			string_id message = new string_id (c_stringFile, "s_1217");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Only for you.
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1219");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good. A little rot and decay can go a long way for some. I have other work that needs to be done. Wait here while I look at my list.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Only for you.
	if (response == "s_1219")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Aveso rolls her eyes.]
			string_id message = new string_id (c_stringFile, "s_1221");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As I expected, you have come back empty handed. I should see meats falling out of your pockets. I don't, now do I?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't feel as if I should hurry myself.
	if (response == "s_1225")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Think of it this way; the more time you take, the closer it is to Mother Ves'ad's feeding time. Now hurry up.
			string_id message = new string_id (c_stringFile, "s_1227");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso looks you over.] So, Zhadran sent you? I can tell by your cocky swagger. Don't think you'll get any respect from me. Now... let's get down to business. I'm your contact and you'll be taking orders from me. Got that?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm listening, ma'am. [You bow mockingly.]
	if (response == "s_1231")
	{
		doAnimationAction (player, "bow");

		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveSignalContact (player, npc);

			//-- NPC: [Aveso sighs.] Somehow, I always get stuck with the imbeciles. [She rubs her temple.] Let's get started. First, you'll be doing grunt work. Once you show your worth, how insignificant it might be, you'll move up to complete more important tasks. Let us start with your first task...
			string_id message = new string_id (c_stringFile, "s_1233");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You only nod.]
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1235");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You scoff.] I don't take orders from women.
	if (response == "s_1251")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveSignalContact (player, npc);

			//-- NPC: [Aveso laughs.] You'll take orders from me, or I'll punch you in the throat. Pick one.
			string_id message = new string_id (c_stringFile, "s_1253");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You smirk.] I'll be co-operative.
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1255");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso sighs.] Somehow, I always get stuck with the imbeciles. [She rubs her temple.] Let's get started. First, you'll be doing grunt work. Once you show your worth, how insignificant it might be, you'll move up to complete more important tasks. Let us start with your first task...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You only nod.]
	if (response == "s_1235")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: In the forests surrounding our cozy cave, you'll find the Mouf and the Webweaver. Contrary to what the Kerritamba will tell you, we eat the meat of these creatures to survive. I'm sure you've already guessed we've ran out of our supply. You'll be the one to restock it. Am I clear?
			string_id message = new string_id (c_stringFile, "s_1237");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I refuse to do such petty tasks.
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am able to do this... and more. [You wink.]
			boolean hasResponse1 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It is a petty task, but I'll do it.
			boolean hasResponse2 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1239");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1243");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1247");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: In the forests surrounding our cozy cave, you'll find the Mouf and the Webweaver. Contrary to what the Kerritamba will tell you, we eat the meat of these creatures to survive. I'm sure you've already guessed we've ran out of our supply. You'll be the one to restock it. Am I clear?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I refuse to do such petty tasks.
	if (response == "s_1239")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Aveso spits on you.] Then, I don't want to see your disgusting face.
			string_id message = new string_id (c_stringFile, "s_1241");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am able to do this... and more. [You wink.]
	if (response == "s_1243")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveQuestOne (player, npc);

			//-- NPC: [Aveso gags.] Ugh.. just... collect 20 meats from each creature. Get out of here before you make me sick.
			string_id message = new string_id (c_stringFile, "s_1245");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It is a petty task, but I'll do it.
	if (response == "s_1247")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveQuestOne (player, npc);

			//-- NPC: Petty or not, you'll do as you're told or I will feed you to Mother Ves'ad. Count it as the highlight of my day.
			string_id message = new string_id (c_stringFile, "s_1249");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso laughs.] You'll take orders from me, or I'll punch you in the throat. Pick one.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You smirk.] I'll be co-operative.
	if (response == "s_1255")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Aveso chuckles darkly.] Too bad. It would have been enjoyable to have everyone watch while you're beat down by a woman.
			string_id message = new string_id (c_stringFile, "s_1257");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds interesting. [You smile slyly.]
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1259");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso chuckles darkly.] Too bad. It would have been enjoyable to have everyone watch while you're beat down by a woman.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds interesting. [You smile slyly.]
	if (response == "s_1259")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Let us continue, shall we? [Aveso rolls her eyes.] The only thing I need from you is for you to gather 20 meats from both Mouf and Webweaver. That's 40 in all, if you're slow to keep up. I'm sure you can muster up what little ability to have to follow orders and complete this task in due time.
			string_id message = new string_id (c_stringFile, "s_1261");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Would you like those meats seasoned? [You smirk.]
			boolean hasResponse0 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't submit myself to doing grunt work.
			boolean hasResponse1 = false;
			if (ep3_forest_aveso_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1263");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1267");

				utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let us continue, shall we? [Aveso rolls her eyes.] The only thing I need from you is for you to gather 20 meats from both Mouf and Webweaver. That's 40 in all, if you're slow to keep up. I'm sure you can muster up what little ability to have to follow orders and complete this task in due time.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Would you like those meats seasoned? [You smirk.]
	if (response == "s_1263")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveQuestOne (player, npc);

			//-- NPC: Just get them and hurry up. My people are hungry, grunt.
			string_id message = new string_id (c_stringFile, "s_1265");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't submit myself to doing grunt work.
	if (response == "s_1267")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then, get out of my face, cretin. Your stench insults the very fibers of my being.
			string_id message = new string_id (c_stringFile, "s_1269");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso arches a brow.] Who are you, why are you here and why haven't I heard of you. If you're even thinking about becoming one of the Outcast, you'll need to find Zhadran and speak with him. He weeds out the filth from the trash.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My, my. What an attitude.
	if (response == "s_1273")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			//-- NPC: You'd rather deal with my attitude than a gaping wound in your side. Trust me. [Aveso smiles sweetly.]
			string_id message = new string_id (c_stringFile, "s_1275");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_aveso_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Aveso rolls her eyes.] Oh. One of you. If you think you can just rat us out to your matted Kerritamba overlords, you're mistaken. Get lost. The very air around me is rank with your stupidity.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uhh..
	if (response == "s_1279")
	{
		//-- [NOTE] 
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			ep3_forest_aveso_action_giveQuestAssassin (player, npc);

			//-- NPC: That's right. Run along now.
			string_id message = new string_id (c_stringFile, "s_1281");
			utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_forest_aveso");

	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "aveso" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "aveso" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_forest_aveso");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_hasCompletedQuestTwo (player, npc))
	{
		//-- NPC: As I said before, grunt, I have nothing more for you. You should speak with the others if you haven't already.
		string_id message = new string_id (c_stringFile, "s_1173");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I was just visiting.
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1175");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 1);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_hasCompletedTaskTwo (player, npc))
	{
		//-- NPC: Hm. [Aveso nods, trying to hide her pleased expression.] I approve of your progress, grunt. Perhaps not all is lost for you.
		string_id message = new string_id (c_stringFile, "s_1179");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Don't worry. I'll still visit you when I become leader of this place.
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1181");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 3);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_isTaskActiveTwo (player, npc))
	{
		//-- NPC: I'm not even going to acknowledge your existence until I see those boxes. I know the look of failure on one's face. I've seen it many times. Now go.
		string_id message = new string_id (c_stringFile, "s_1193");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_hasCompletedQuestOne (player, npc))
	{
		//-- NPC: [Aveso smiles to herself.] You again. I thought I had the fortune of getting rid of you. I was wrong.
		string_id message = new string_id (c_stringFile, "s_1195");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Count on being wrong more often, lady.
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1197");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 8);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_hasCompletedTaskOne (player, npc))
	{
		//-- NPC: [Aveso smirks.] I'm surprised. You actually set aside your selfishness to help others. Was it difficult for you?
		string_id message = new string_id (c_stringFile, "s_1213");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes. In fact, I'm dying inside. [You smirk.]
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1215");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 13);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_isTaskActiveOne (player, npc))
	{
		//-- NPC: As I expected, you have come back empty handed. I should see meats falling out of your pockets. I don't, now do I?
		string_id message = new string_id (c_stringFile, "s_1223");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I don't feel as if I should hurry myself.
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1225");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 16);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_isTaskActiveInitial (player, npc))
	{
		//-- NPC: [Aveso looks you over.] So, Zhadran sent you? I can tell by your cocky swagger. Don't think you'll get any respect from me. Now... let's get down to business. I'm your contact and you'll be taking orders from me. Got that?
		string_id message = new string_id (c_stringFile, "s_1229");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm listening, ma'am. [You bow mockingly.]
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: [You scoff.] I don't take orders from women.
		boolean hasResponse1 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1231");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1251");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 18);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_isBadGuy (player, npc))
	{
		//-- NPC: [Aveso arches a brow.] Who are you, why are you here and why haven't I heard of you. If you're even thinking about becoming one of the Outcast, you'll need to find Zhadran and speak with him. He weeds out the filth from the trash.
		string_id message = new string_id (c_stringFile, "s_1271");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: My, my. What an attitude.
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1273");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 29);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition_isGoodguy (player, npc))
	{
		//-- NPC: [Aveso rolls her eyes.] Oh. One of you. If you think you can just rat us out to your matted Kerritamba overlords, you're mistaken. Get lost. The very air around me is rank with your stupidity.
		string_id message = new string_id (c_stringFile, "s_1277");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Uhh..
		boolean hasResponse0 = false;
		if (ep3_forest_aveso_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1279");

			utils.setScriptVar (player, "conversation.ep3_forest_aveso.branchId", 31);

			npcStartConversation (player, npc, "ep3_forest_aveso", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_aveso_condition__defaultCondition (player, npc))
	{
		//-- NPC: What are you doing here? You're not one of us. Get out before you find yourself on the end of a polearm. [Aveso sneers.]
		string_id message = new string_id (c_stringFile, "s_1283");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_forest_aveso")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_forest_aveso.branchId");

	if (branchId == 1 && ep3_forest_aveso_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && ep3_forest_aveso_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_forest_aveso_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && ep3_forest_aveso_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_forest_aveso_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_forest_aveso_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && ep3_forest_aveso_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && ep3_forest_aveso_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && ep3_forest_aveso_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && ep3_forest_aveso_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && ep3_forest_aveso_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && ep3_forest_aveso_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_forest_aveso_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && ep3_forest_aveso_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && ep3_forest_aveso_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && ep3_forest_aveso_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && ep3_forest_aveso_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && ep3_forest_aveso_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_forest_aveso.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

