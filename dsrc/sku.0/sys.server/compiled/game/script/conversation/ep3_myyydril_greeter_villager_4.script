// ======================================================================
//
// ep3_myyydril_greeter_villager_4.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_myyydril_greeter_villager_4";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_myyydril_greeter_villager_4_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_Kallaarac (obj_id player, obj_id npc)
{
		return groundquests.isTaskActive (player, "ep3_myyydril_kivvaaa_talkto_1", 0);
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_Helping (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_kivvaaa_talkto_1");
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_Caverns (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_nawika_talkto_5");
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_Hero (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_kallaarac_destroy_3");
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_Doctor (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_myyydril_yraka_talkto_6", 0);
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_Lorn (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_3", 0);
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_greeter_villager_4_condition_End (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_3");
}

// ======================================================================
// Script Actions
// ======================================================================

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_myyydril_greeter_villager_4_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris smiles.] It's good to see you again, Hero. I'm afraid it may be for the last time.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why do you think that?
	if (response == "s_123")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, look at this place. [Old Warris gestures to the village.] We're at peace now. What else would you do? There may be a few who still need help. You should check with them.
			string_id message = new string_id (c_stringFile, "s_125");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will. Thank you.
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_127");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 2);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, look at this place. [Old Warris gestures to the village.] We're at peace now. What else would you do? There may be a few who still need help. You should check with them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will. Thank you.
	if (response == "s_127")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris nods.] Be sure to visit once in a while.
			string_id message = new string_id (c_stringFile, "s_129");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The village is all a-buzz about your trip to the Deep Depths. And the rumors about Treun Lorn are hard to ignore. Supposedly, he's working on some crazy project down there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Project? What sort of project?
	if (response == "s_986")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris shrugs.] No one knows. But it's not good. Sometimes, if you listen very carefully, you can hear the hum of some machine down there and the occasional bout of insane laughter.
			string_id message = new string_id (c_stringFile, "s_987");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Strange. I'll find out soon enough.
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_988");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris shrugs.] No one knows. But it's not good. Sometimes, if you listen very carefully, you can hear the hum of some machine down there and the occasional bout of insane laughter.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Strange. I'll find out soon enough.
	if (response == "s_988")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Indeed. Just.. be careful. Bring friends with you. You'll need them. [Old Warris nods sagely.]
			string_id message = new string_id (c_stringFile, "s_989");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris nods at you.] Hello Hero.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod.] You must know something about the Doctor.
	if (response == "s_920")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: So you're fishing for information on Kinesworthy, hm? Strange fellow, that one. He usually keeps to himself. He came here after a run-in with enslaved Wookiees. He was all beat up, kept saying the name 'Treun Lorn' over and over.
			string_id message = new string_id (c_stringFile, "s_922");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's Treun Lorn?
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_924");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So you're fishing for information on Kinesworthy, hm? Strange fellow, that one. He usually keeps to himself. He came here after a run-in with enslaved Wookiees. He was all beat up, kept saying the name 'Treun Lorn' over and over.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's Treun Lorn?
	if (response == "s_924")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: His partner. They worked in a cybernetics lab together. Treun Lorn was lost, or something, and Kinesworthy came looking for him. Why he would be in a cave, or how Kinesworthy ended up here, is beyond me. That's all I know, really.
			string_id message = new string_id (c_stringFile, "s_926");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can always count on you.
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_928");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: His partner. They worked in a cybernetics lab together. Treun Lorn was lost, or something, and Kinesworthy came looking for him. Why he would be in a cave, or how Kinesworthy ended up here, is beyond me. That's all I know, really.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can always count on you.
	if (response == "s_928")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris smiles a toothy grin.] I've been here long enough to know a thing or two.
			string_id message = new string_id (c_stringFile, "s_930");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris pats you hard on the back.] Well if it isn't the Hero! What are you up to these days?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was hoping you'd know. I've been in a daze.
	if (response == "s_934")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris nods.] Becoming Hero is quite the privilege among the Myyydril people. There are many who would enjoy the company or the help of a Hero.
			string_id message = new string_id (c_stringFile, "s_936");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know of anyone in particular?
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_938");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris nods.] Becoming Hero is quite the privilege among the Myyydril people. There are many who would enjoy the company or the help of a Hero.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know of anyone in particular?
	if (response == "s_938")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yraka Nes would be one. She has her own little makeshift hospital here in the village. You should speak with her.
			string_id message = new string_id (c_stringFile, "s_940");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you.
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_942");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yraka Nes would be one. She has her own little makeshift hospital here in the village. You should speak with her.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you.
	if (response == "s_942")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris nods.]
			string_id message = new string_id (c_stringFile, "s_944");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris clears his throat.] Your name and the word 'Urnsor'is' are usually in the same sentence these days.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Weird isn't it.
	if (response == "s_948")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: You'd better be careful around those things. The Poltur Virus can be a deadly foe.
			string_id message = new string_id (c_stringFile, "s_950");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Poltur Virus?
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_952");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You'd better be careful around those things. The Poltur Virus can be a deadly foe.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Poltur Virus?
	if (response == "s_952")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: It eats the flesh. That's what happened to Kivvaaa and that's how she received her cybernetic arm.
			string_id message = new string_id (c_stringFile, "s_954");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Cybernetics?
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_956");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It eats the flesh. That's what happened to Kivvaaa and that's how she received her cybernetic arm.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Cybernetics?
	if (response == "s_956")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess you haven't met Doctor Kinesworthy yet. [Old Warris pats your shoulder.] You'll learn all you need to know in good time, my friend.
			string_id message = new string_id (c_stringFile, "s_958");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Alright. I should get going. Urnsor'is, you know.
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_960");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I guess you haven't met Doctor Kinesworthy yet. [Old Warris pats your shoulder.] You'll learn all you need to know in good time, my friend.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Alright. I should get going. Urnsor'is, you know.
	if (response == "s_960")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I know. [Old Warris smiles.] Be safe out there.
			string_id message = new string_id (c_stringFile, "s_962");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris nods.] It's a good thing to help people. Through the shallow winds of this forsaken caverns, I've heard Nawika needs some help regarding her husband.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you for telling me this.
	if (response == "s_966")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris nods.] It's good to see you around.
			string_id message = new string_id (c_stringFile, "s_968");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Kivvaaa must have accepted your willingness to help. I hear the rumor-mill turning about. Interesting things they say these days.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Like what, if I may ask?
	if (response == "s_972")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: That you're here to help us and that you'll be the answer to our cries of help. The cave is littered with dangers that our people have no hope of defeating. We were afraid. But now, you're here.
			string_id message = new string_id (c_stringFile, "s_974");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm flattered.
			boolean hasResponse0 = false;
			if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_976");

				utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That you're here to help us and that you'll be the answer to our cries of help. The cave is littered with dangers that our people have no hope of defeating. We were afraid. But now, you're here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm flattered.
	if (response == "s_976")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris nods.] Just don't let us down. That's all you need to worry about.
			string_id message = new string_id (c_stringFile, "s_978");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_greeter_villager_4_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Old Warris nods to you.] You seem new around here, young one. The Myyydril people would be angry if you started snooping about without having spoken with Kivvaaa. She's at the entrance of our village.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll go speak with her.
	if (response == "s_982")
	{
		//-- [NOTE] 
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Old Warris nods.] I hope the meeting goes well.
			string_id message = new string_id (c_stringFile, "s_984");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_myyydril_greeter_villager_4");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_myyydril_greeter_villager_4");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_End (player, npc))
	{
		//-- NPC: [Old Warris smiles.] It's good to see you again, Hero. I'm afraid it may be for the last time.
		string_id message = new string_id (c_stringFile, "s_121");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Why do you think that?
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_123");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 1);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_Lorn (player, npc))
	{
		//-- NPC: The village is all a-buzz about your trip to the Deep Depths. And the rumors about Treun Lorn are hard to ignore. Supposedly, he's working on some crazy project down there.
		string_id message = new string_id (c_stringFile, "s_985");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Project? What sort of project?
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_986");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 4);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_Doctor (player, npc))
	{
		//-- NPC: [Old Warris nods at you.] Hello Hero.
		string_id message = new string_id (c_stringFile, "s_918");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: [You nod.] You must know something about the Doctor.
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_920");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 7);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_Hero (player, npc))
	{
		//-- NPC: [Old Warris pats you hard on the back.] Well if it isn't the Hero! What are you up to these days?
		string_id message = new string_id (c_stringFile, "s_932");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I was hoping you'd know. I've been in a daze.
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_934");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 11);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_Caverns (player, npc))
	{
		//-- NPC: [Old Warris clears his throat.] Your name and the word 'Urnsor'is' are usually in the same sentence these days.
		string_id message = new string_id (c_stringFile, "s_946");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Weird isn't it.
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_948");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 15);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_Helping (player, npc))
	{
		//-- NPC: [Old Warris nods.] It's a good thing to help people. Through the shallow winds of this forsaken caverns, I've heard Nawika needs some help regarding her husband.
		string_id message = new string_id (c_stringFile, "s_964");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you for telling me this.
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_966");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 20);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition_Kallaarac (player, npc))
	{
		//-- NPC: Kivvaaa must have accepted your willingness to help. I hear the rumor-mill turning about. Interesting things they say these days.
		string_id message = new string_id (c_stringFile, "s_970");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Like what, if I may ask?
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_972");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 22);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
	{
		//-- NPC: [Old Warris nods to you.] You seem new around here, young one. The Myyydril people would be angry if you started snooping about without having spoken with Kivvaaa. She's at the entrance of our village.
		string_id message = new string_id (c_stringFile, "s_980");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'll go speak with her.
		boolean hasResponse0 = false;
		if (ep3_myyydril_greeter_villager_4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_982");

			utils.setScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId", 25);

			npcStartConversation (player, npc, "ep3_myyydril_greeter_villager_4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_myyydril_greeter_villager_4")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

	if (branchId == 1 && ep3_myyydril_greeter_villager_4_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 2 && ep3_myyydril_greeter_villager_4_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_myyydril_greeter_villager_4_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && ep3_myyydril_greeter_villager_4_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && ep3_myyydril_greeter_villager_4_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_myyydril_greeter_villager_4_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_myyydril_greeter_villager_4_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && ep3_myyydril_greeter_villager_4_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && ep3_myyydril_greeter_villager_4_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && ep3_myyydril_greeter_villager_4_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && ep3_myyydril_greeter_villager_4_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && ep3_myyydril_greeter_villager_4_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && ep3_myyydril_greeter_villager_4_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && ep3_myyydril_greeter_villager_4_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_myyydril_greeter_villager_4_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && ep3_myyydril_greeter_villager_4_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && ep3_myyydril_greeter_villager_4_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && ep3_myyydril_greeter_villager_4_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_myyydril_greeter_villager_4.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

