// ======================================================================
//
// corellia_coronet_lt_jasper.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/corellia_coronet_lt_jasper";

// ======================================================================
// Script Conditions
// ======================================================================

boolean corellia_coronet_lt_jasper_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_missingShipmentQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_find_missing_shipment") ||
	groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_missing_shipment_intro") ||
	groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_missing_shipment") ||
	(groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_missing_shipment_intro") &&
	!groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_missing_shipment"));
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_missingShipmentQuestCompleted (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_missing_shipment", "ralMundi_reportToJasper") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_missing_shipment") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_find_missing_shipment");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_starportVandalsQuestCompleted (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_starport_vandals_2", "starport_vandals_8") ||
			groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_starport_vandals_2");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_starportVandalsQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActiveOrComplete(player, "corellia_coronet_capitol_problems_starport_vandals")||
			groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_starport_vandals_2");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_farmAidQuestCompleted (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_farm_aid", "farm_aid_6") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_farm_aid");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_farmAidQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_farm_aid");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_foundEvidence (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_the_informant", "the_informant_9") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_the_informant");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_governmentWorkQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_government_work");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_theInformantQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_the_informant") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_government_work");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_theMeetingQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_the_meeting");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_theMeetingQuestComplete (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_the_meeting", "the_meeting_6") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_the_meeting");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_diktatSearchComplete (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_diktat_search", "diktat_search_6") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_diktat_search");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_diktatSearchActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_diktat_search");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_goGoGadgetQuestComplete (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_go_go_gadget", "go_go_gadget_6") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_go_go_gadget");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_goGoGadgetQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_go_go_gadget");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_rogueBaseQuestComplete (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_rogue_corsec_base", "infiltrate_rogue_corsec_base_3") ||
	groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_rogue_corsec_base");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_rogueBaseQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_rogue_corsec_base");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_thankfulDiktatQuestComplete (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "corellia_coronet_capitol_problems_thankful_diktat");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_thankfulDiktatQuestActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_coronet_capitol_problems_thankful_diktat");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_isLtJasperQuestDisabled (obj_id player, obj_id npc)
{
	return groundquests.isQuestDisabled("corellia_coronet_capitol_problems_lt_jasper");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_thankfulDiktatEnding (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_thankful_diktat", "thankful_diktat_2");
}

// ----------------------------------------------------------------------

boolean corellia_coronet_lt_jasper_condition_onNextSeries (obj_id player, obj_id npc)
{
	return groundquests.isQuestActiveOrComplete(player, "coronet_murmurs_1_smuggler") ||
	groundquests.isQuestActiveOrComplete(player, "coronet_murmurs_goto_questgiver") ||
	groundquests.isQuestActiveOrComplete(player, "coronet_murmurs_initialize_login_goto");
}

// ======================================================================
// Script Actions
// ======================================================================

void corellia_coronet_lt_jasper_action_grantMissingShipmentQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_missing_shipment_intro");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantStarportVandalsQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_starport_vandals");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantFarmAidQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_farm_aid");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantGovernmentWorkQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_government_work");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantTheMeetingQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_the_meeting");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantDiktatSearchQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_diktat_search");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantGoGoGadgetQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_go_go_gadget");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantRogueBaseQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_rogue_corsec_base");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantThankfulDiktatQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_coronet_capitol_problems_thankful_diktat");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endThankfulDiktat (obj_id player, obj_id npc)
{
	if ( groundquests.isTaskActive(player, "corellia_coronet_capitol_problems_thankful_diktat", "thankful_diktat_2") )
	{
		groundquests.sendSignal(player, "thankful_diktat_2");
	}
	return;
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endMissingShipment (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "ralMundi_reportToJasper");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endStarportVandal (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "starport_vandals_8");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endFarmAid (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "farm_aid_6");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endInformant (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "the_informant_9");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endTheMeeting (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "the_meeting_6");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endDiktatSearch (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "diktat_search_6");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endGoGoGadget (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "go_go_gadget_6");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endRogueBase (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "infiltrate_rogue_corsec_base_3");
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_endSendFromNaboo (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "naboo_to_jasper_03");	
}

// ----------------------------------------------------------------------

void corellia_coronet_lt_jasper_action_grantPointerToNextSeries (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "coronet_murmurs_goto_questgiver");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int corellia_coronet_lt_jasper_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have heard some disturbing news. If you're able to help, please talk to an associate of mine, Lt. Joth.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I've already spoken to Lt. Joth.
	if (response == "s_155")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm glad to hear that! He ends up with the most disturbing assignments, and I always get nervous when he needs help.
			string_id message = new string_id (c_stringFile, "s_157");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where can I find Lt. Joth?
	if (response == "s_164")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantPointerToNextSeries (player, npc);

			//-- NPC: I'll upload his location to your journal. Please speak  with him as soon as you can.
			string_id message = new string_id (c_stringFile, "s_166");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: By authority of the Diktat of Corellia and in recognition of outstanding service to the Corellian Security Force, it is my honor to present to you the Corellian Medal of Distinguished Service.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you. I am honored.
	if (response == "s_169")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			corellia_coronet_lt_jasper_action_endThankfulDiktat (player, npc);

			//-- NPC: The honor is all mine. It has been a pleasure to work with you. 
			string_id message = new string_id (c_stringFile, "s_171");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I would be happy to help.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not at this time, but perhaps later.
			boolean hasResponse1 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_177");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_181");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The honor is all mine. It has been a pleasure to work with you. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I would be happy to help.
	if (response == "s_177")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantPointerToNextSeries (player, npc);

			//-- NPC: I'll upload his location to your journal. Please speak  with him as soon as you can.
			string_id message = new string_id (c_stringFile, "s_179");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not at this time, but perhaps later.
	if (response == "s_181")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Please speak with me again if you change your mind.
			string_id message = new string_id (c_stringFile, "s_183");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, I must say that I am very impressed. You not only foiled the plot to discredit the Diktat, but defeated the Rogue CorSec commanders who were apparently behind the whole thing!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm glad I could be of service.
	if (response == "s_161")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantThankfulDiktatQuest (player, npc);

			//-- NPC: You have done a great service to this planet. So much so that the Diktat himself would like to thank you. Go to the capitol building and speak with the Diktat.
			string_id message = new string_id (c_stringFile, "s_162");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A file sent to this device from a remote location would appear to come from the Diktat's terminal. We need to catch the senders in the act. The device has been adjusted to tell us where the data is originating. Now we wait for that to happen.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Anything yet?
	if (response == "s_73")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Not yet.
			string_id message = new string_id (c_stringFile, "s_74");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How about now?
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_75");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Not yet.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How about now?
	if (response == "s_75")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Still nothing.
			string_id message = new string_id (c_stringFile, "s_76");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: This could take forever.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_77");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Still nothing.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: This could take forever.
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Or not. I've got some coordinates for the source of the remote signal. Go check it out. Be careful. I'd imagine you will be walking into the heart of their operations.
			string_id message = new string_id (c_stringFile, "s_78");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Don't worry about me. I can take care of myself.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I cannot do that right now. Perhaps later.
			boolean hasResponse1 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_79");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_80");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Or not. I've got some coordinates for the source of the remote signal. Go check it out. Be careful. I'd imagine you will be walking into the heart of their operations.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't worry about me. I can take care of myself.
	if (response == "s_79")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantRogueBaseQuest (player, npc);

			//-- NPC: I just want to help make sure you're prepared. When you arrive, take out their leaders. Then find proof that they are behind the smuggled spice and are attempting to incriminate the Diktat and his administration. Search any computers you find.
			string_id message = new string_id (c_stringFile, "s_81");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I cannot do that right now. Perhaps later.
	if (response == "s_80")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_82");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Not a single file or document that was even mildly suspicious--except this device. I have no idea what it is or does. But I know how we can find out. There's a gadget specialist here in Coronet. I've worked with him in the past. If he can't help us, no one can.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll go speak with the gadget specialist.
	if (response == "s_67")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantGoGoGadgetQuest (player, npc);

			//-- NPC: Thank you. If he can figure out what it does, that will be a big help. If he can figure out how it got onto the Diktat's terminal connection, even better! Report to me when you're done speaking with the gadget specialist.
			string_id message = new string_id (c_stringFile, "s_69");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I cannot do that right now. Perhaps later.
	if (response == "s_68")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_70");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I never thought that the Diktat himself would be involved with something like smuggling spice into Corellia. Shocking! You're certain the orders were from the Diktat?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes. They were clearly marked as from his terminal.
	if (response == "s_58")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "sigh_deeply");

			//-- NPC: Then his desk and data terminal must be searched. I'll upload the authorization that you need to your journal. If you find anything even remotely suspicious, report back to me at once. Please be courteous to the Diktat. He's a powerful man.
			string_id message = new string_id (c_stringFile, "s_60");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll be tactful as I search.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I cannot do that right now. Perhaps later.
			boolean hasResponse1 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_62");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then his desk and data terminal must be searched. I'll upload the authorization that you need to your journal. If you find anything even remotely suspicious, report back to me at once. Please be courteous to the Diktat. He's a powerful man.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll be tactful as I search.
	if (response == "s_61")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantDiktatSearchQuest (player, npc);

			//-- NPC: First speak to the Diktat and present these authorization writs as you talk to him. Then search his desk and any papers or documents on it. After that, search his data terminal. Look through all recent data files and communications.
			string_id message = new string_id (c_stringFile, "s_64");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I cannot do that right now. Perhaps later.
	if (response == "s_62")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_63");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What's this? A datapad. And you got it from a Rogue CorSec trooper? You're certain?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I'm certain.
	if (response == "s_170")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ah, this is bad. The Rogue CorSec are a group of former CorSec troopers and agents who for various reasons left CorSec in pursuit of a more criminal lifestyle. I haven't dealt with them much myself, but I've heard that they can be a troublesome group. As would be expected. Some members of CorSec find them embarrassing. Others outright hate them.
			string_id message = new string_id (c_stringFile, "s_172");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And you?
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_174");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, this is bad. The Rogue CorSec are a group of former CorSec troopers and agents who for various reasons left CorSec in pursuit of a more criminal lifestyle. I haven't dealt with them much myself, but I've heard that they can be a troublesome group. As would be expected. Some members of CorSec find them embarrassing. Others outright hate them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And you?
	if (response == "s_174")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Undecided as yet. Let me see if I can access any of the files on this datapad you found...There we go. Hmmm. It looks like they suspected that informant of knowing about some plot the Rogue CorSec are working on. That's the informant you were sent to talk to. I wonder what they're up to. Could it be connected?
			string_id message = new string_id (c_stringFile, "s_176");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Seems possible.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_178");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Undecided as yet. Let me see if I can access any of the files on this datapad you found...There we go. Hmmm. It looks like they suspected that informant of knowing about some plot the Rogue CorSec are working on. That's the informant you were sent to talk to. I wonder what they're up to. Could it be connected?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Seems possible.
	if (response == "s_178")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: In any case, it's not something we can ignore. I have an idea. I know a guy named Jonset. Keeps his eyes and ears open and has helped me with information in the past. He's usually in the Coronet cantina. Go speak with him and see if he's heard anything.
			string_id message = new string_id (c_stringFile, "s_180");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Perhaps later, but not right now.
			boolean hasResponse1 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_182");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_186");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: In any case, it's not something we can ignore. I have an idea. I know a guy named Jonset. Keeps his eyes and ears open and has helped me with information in the past. He's usually in the Coronet cantina. Go speak with him and see if he's heard anything.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on my way.
	if (response == "s_182")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantTheMeetingQuest (player, npc);

			//-- NPC: Excellent. Jonset should be at the cantina. Be sure to tell him I sent you.
			string_id message = new string_id (c_stringFile, "s_184");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps later, but not right now.
	if (response == "s_186")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_188");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well done. A colleague of mine at the CorSec headquarters received a very nice compliment from Mr. Handerin on the job you did. Very well done. But now it starts to get trickier. You will be reporting to the capitol to work for Gallura Handerin. She's a fairly high level government aide. She'll have some work for you. While doing what she asks, keep an eye out for anything unusual or out of the ordinary. Especially if it might be illegal.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. I'll watch for anything unusual.
	if (response == "s_96")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantGovernmentWorkQuest (player, npc);

			//-- NPC: More than that, though. You'll need to have some proof or evidence. Data files, communication records, something like that. Hopefully, you'll know it when you see it. Report to me if you find something. Good luck.
			string_id message = new string_id (c_stringFile, "s_98");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps later, but I can't right now.
	if (response == "s_100")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_102");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch41 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So the Ragtags were trying to put some CorSec heat on the Meatlumps, eh? Typical. The Ragtags really hate the Meatlumps for some reason, even though the Meatlumps barely acknowledge the Ragtags exist. Maybe that's the cause. Regardless, it's time to start turning our eye to the capitol. We need to find out what's going on there. Interested?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, definitely.
	if (response == "s_108")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. I need to get you some work at the capitol building, but it needs to happen in a way that won't draw attention or suspicion. To that end, I've arranged for you to go help a local farmer named Pol Handerin. He's having some trouble on his farm. He's also the cousin of an aide who works at the capitol, so it seems like a golden opportunity.
			string_id message = new string_id (c_stringFile, "s_110");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Right. I'll go find out what help he needs. Where do I find him?
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_112");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps later, but not right now.
	if (response == "s_116")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_118");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good. I need to get you some work at the capitol building, but it needs to happen in a way that won't draw attention or suspicion. To that end, I've arranged for you to go help a local farmer named Pol Handerin. He's having some trouble on his farm. He's also the cousin of an aide who works at the capitol, so it seems like a golden opportunity.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Right. I'll go find out what help he needs. Where do I find him?
	if (response == "s_112")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantFarmAidQuest (player, npc);

			//-- NPC: He has a farm on the outskirts of town. I'll upload a waypoint to your datapad. Find out what's troubling him and help solve his problems. We should then be able to use him as a reference to get you some work at the capitol for his cousin. Report back to me when you've finished helping Mr. Handerin.
			string_id message = new string_id (c_stringFile, "s_114");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well done. I've already heard about the wonderful job you did helping Mr. Mundi. I also heard about what you found at the capitol. I'm going to look into that for now, but I might need your help on that soon. For now I have a different assignment, if you're interested?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am. What's the assignment?
	if (response == "s_124")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Jesseb Convorr, the starport master, has sent in a report of vandalism in the starport. He'd like someone to find those responsible and stop them from doing it again.
			string_id message = new string_id (c_stringFile, "s_126");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on it. He would be at the starport?
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_128");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 47);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps later, but not right now.
	if (response == "s_132")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. Speak with me again when you are ready to continue.
			string_id message = new string_id (c_stringFile, "s_134");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch47 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Jesseb Convorr, the starport master, has sent in a report of vandalism in the starport. He'd like someone to find those responsible and stop them from doing it again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on it. He would be at the starport?
	if (response == "s_128")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantStarportVandalsQuest (player, npc);

			//-- NPC: Ah, what a natural. Yes, Jesseb is indeed at the starport. You might have spoken to him during your last assignment, if my sources are correct. Report back to me when you've completed the assignment.
			string_id message = new string_id (c_stringFile, "s_130");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Greetings, I hope this day finds you well.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You're a member of the Corellian Security Force?
	if (response == "s_140")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_endSendFromNaboo (player, npc);

			//-- NPC: I am. Are you in need of assistance?
			string_id message = new string_id (c_stringFile, "s_142");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I was wondering the same. Do you have any work available?
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_144");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 52);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It does, thank you.
	if (response == "s_187")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Excellent and farewell.
			string_id message = new string_id (c_stringFile, "s_190");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am. Are you in need of assistance?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was wondering the same. Do you have any work available?
	if (response == "s_144")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Possibly. I'm always looking for someone who can help me get things done. Someone who could go places I might have trouble going. Would that describe you?
			string_id message = new string_id (c_stringFile, "s_146");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, it does.
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, it doesn't.
			boolean hasResponse1 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_148");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_168");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Possibly. I'm always looking for someone who can help me get things done. Someone who could go places I might have trouble going. Would that describe you?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, it does.
	if (response == "s_148")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then perhaps we could work together. First, I need to get an idea of what you can do. There's a small case that's come up that seems ideal. I'm going to have you help a local merchant named Ral Mundi. Mr. Mundi needs help tracking down a shipment of starship components that has gone missing. It's apparently very important to the survival of his business. I want you to help him find his missing shipment.
			string_id message = new string_id (c_stringFile, "s_150");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can do that. Where would I find Mr. Mundi?
			boolean hasResponse0 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Sounds boring. Never mind.
			boolean hasResponse1 = false;
			if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_152");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_158");

				utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, it doesn't.
	if (response == "s_168")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: I see. That's too bad.
			string_id message = new string_id (c_stringFile, "s_175");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_coronet_lt_jasper_handleBranch54 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then perhaps we could work together. First, I need to get an idea of what you can do. There's a small case that's come up that seems ideal. I'm going to have you help a local merchant named Ral Mundi. Mr. Mundi needs help tracking down a shipment of starship components that has gone missing. It's apparently very important to the survival of his business. I want you to help him find his missing shipment.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can do that. Where would I find Mr. Mundi?
	if (response == "s_152")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			corellia_coronet_lt_jasper_action_grantMissingShipmentQuest (player, npc);

			//-- NPC: You'll find him at the starport entrance. He has an unending supply of hope, or so it seems. Go speak with him. Report back to me when you've completed this case.
			string_id message = new string_id (c_stringFile, "s_154");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds boring. Never mind.
	if (response == "s_158")
	{
		//-- [NOTE] 
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ah. Only in it for the excitement. Good luck with that.
			string_id message = new string_id (c_stringFile, "s_163");
			utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.corellia_coronet_lt_jasper");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.corellia_coronet_lt_jasper");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_isLtJasperQuestDisabled (player, npc))
	{
		//-- NPC: Hello, citizen. I am Lt. Jasper of the Corellian Security Force, also known as CorSec. I hope the day find you well.
		string_id message = new string_id (c_stringFile, "s_159");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_thankfulDiktatQuestComplete (player, npc))
	{
		//-- NPC: I have heard some disturbing news. If you're able to help, please talk to an associate of mine, Lt. Joth.
		string_id message = new string_id (c_stringFile, "s_86");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I've already spoken to Lt. Joth.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition_onNextSeries (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Where can I find Lt. Joth?
		boolean hasResponse1 = false;
		if (!corellia_coronet_lt_jasper_condition_onNextSeries (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_155");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_164");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 2);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_thankfulDiktatEnding (player, npc))
	{
		doAnimationAction (npc, "feed_creature_medium");

		//-- NPC: By authority of the Diktat of Corellia and in recognition of outstanding service to the Corellian Security Force, it is my honor to present to you the Corellian Medal of Distinguished Service.
		string_id message = new string_id (c_stringFile, "s_167");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you. I am honored.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_169");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 5);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_thankfulDiktatQuestActive (player, npc))
	{
		//-- NPC: Go speak to the Diktat in his office at the capitol building. He wants to thank you for clearing his name.
		string_id message = new string_id (c_stringFile, "s_87");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_rogueBaseQuestComplete (player, npc))
	{
		corellia_coronet_lt_jasper_action_endRogueBase (player, npc);

		//-- NPC: Well, I must say that I am very impressed. You not only foiled the plot to discredit the Diktat, but defeated the Rogue CorSec commanders who were apparently behind the whole thing!
		string_id message = new string_id (c_stringFile, "s_83");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm glad I could be of service.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_161");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 10);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_rogueBaseQuestActive (player, npc))
	{
		//-- NPC: Take out their leaders. Then find proof that they are behind the smuggled spice and are attempting to incriminate the Diktat and his administration. Search any computers you find.
		string_id message = new string_id (c_stringFile, "s_84");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_goGoGadgetQuestComplete (player, npc))
	{
		corellia_coronet_lt_jasper_action_endGoGoGadget (player, npc);

		//-- NPC: A file sent to this device from a remote location would appear to come from the Diktat's terminal. We need to catch the senders in the act. The device has been adjusted to tell us where the data is originating. Now we wait for that to happen.
		string_id message = new string_id (c_stringFile, "s_72");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Anything yet?
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_73");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 13);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_goGoGadgetQuestActive (player, npc))
	{
		//-- NPC: Go speak with the gadget specialist in town and find out if he can make heads or tails of this device you found on the Diktat's terminal connection.
		string_id message = new string_id (c_stringFile, "s_71");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_diktatSearchComplete (player, npc))
	{
		corellia_coronet_lt_jasper_action_endDiktatSearch (player, npc);

		//-- NPC: Not a single file or document that was even mildly suspicious--except this device. I have no idea what it is or does. But I know how we can find out. There's a gadget specialist here in Coronet. I've worked with him in the past. If he can't help us, no one can.
		string_id message = new string_id (c_stringFile, "s_65");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'll go speak with the gadget specialist.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I cannot do that right now. Perhaps later.
		boolean hasResponse1 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_67");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_68");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 20);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_diktatSearchActive (player, npc))
	{
		//-- NPC: First speak to the Diktat and present this search authorization to him. It's important to play this as straight as is possible. Search his desk and any papers or documents on it. Next, search his data terminal. Bring back anything suspicious.
		string_id message = new string_id (c_stringFile, "s_66");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_theMeetingQuestComplete (player, npc))
	{
		corellia_coronet_lt_jasper_action_endTheMeeting (player, npc);

		//-- NPC: I never thought that the Diktat himself would be involved with something like smuggling spice into Corellia. Shocking! You're certain the orders were from the Diktat?
		string_id message = new string_id (c_stringFile, "s_56");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes. They were clearly marked as from his terminal.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_58");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 24);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_theMeetingQuestActive (player, npc))
	{
		//-- NPC: Follow up on whatever Jonset tells you and then report back to me when you're done.
		string_id message = new string_id (c_stringFile, "s_57");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_foundEvidence (player, npc))
	{
		corellia_coronet_lt_jasper_action_endInformant (player, npc);

		//-- NPC: What's this? A datapad. And you got it from a Rogue CorSec trooper? You're certain?
		string_id message = new string_id (c_stringFile, "s_48");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I'm certain.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_170");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 29);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_theInformantQuestActive (player, npc))
	{
		//-- NPC: I've heard that Brantlee Spondoon, aide to the Diktat, has requested your help. You must've earned a good reputation over there. This is very good. Keep it up. Report to me if you find anything.
		string_id message = new string_id (c_stringFile, "s_90");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_governmentWorkQuestActive (player, npc))
	{
		//-- NPC: Keep your eyes open while doing the things Gallura asks of you. If you find conclusive evidence of anything, report to me.
		string_id message = new string_id (c_stringFile, "s_92");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_farmAidQuestCompleted (player, npc))
	{
		corellia_coronet_lt_jasper_action_endFarmAid (player, npc);

		//-- NPC: Well done. A colleague of mine at the CorSec headquarters received a very nice compliment from Mr. Handerin on the job you did. Very well done. But now it starts to get trickier. You will be reporting to the capitol to work for Gallura Handerin. She's a fairly high level government aide. She'll have some work for you. While doing what she asks, keep an eye out for anything unusual or out of the ordinary. Especially if it might be illegal.
		string_id message = new string_id (c_stringFile, "s_94");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I understand. I'll watch for anything unusual.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Perhaps later, but I can't right now.
		boolean hasResponse1 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_96");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_100");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 37);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_farmAidQuestActive (player, npc))
	{
		//-- NPC: Pol Handerin has a farm on the outskirts of Coronet. Go find out what help he seeks and give it to him. Then report back to me.
		string_id message = new string_id (c_stringFile, "s_104");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_starportVandalsQuestCompleted (player, npc))
	{
		corellia_coronet_lt_jasper_action_endStarportVandal (player, npc);

		//-- NPC: So the Ragtags were trying to put some CorSec heat on the Meatlumps, eh? Typical. The Ragtags really hate the Meatlumps for some reason, even though the Meatlumps barely acknowledge the Ragtags exist. Maybe that's the cause. Regardless, it's time to start turning our eye to the capitol. We need to find out what's going on there. Interested?
		string_id message = new string_id (c_stringFile, "s_106");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, definitely.
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Perhaps later, but not right now.
		boolean hasResponse1 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_108");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_116");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 41);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_starportVandalsQuestActive (player, npc))
	{
		//-- NPC: Any luck finding those vandals? My guess would be the Meatlumps, but that's only a guess. There are plenty of other possibilities. Let the evidence guide you. Report back to me once you've completed the assignment.
		string_id message = new string_id (c_stringFile, "s_120");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_missingShipmentQuestCompleted (player, npc))
	{
		corellia_coronet_lt_jasper_action_endMissingShipment (player, npc);

		//-- NPC: Well done. I've already heard about the wonderful job you did helping Mr. Mundi. I also heard about what you found at the capitol. I'm going to look into that for now, but I might need your help on that soon. For now I have a different assignment, if you're interested?
		string_id message = new string_id (c_stringFile, "s_122");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am. What's the assignment?
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Perhaps later, but not right now.
		boolean hasResponse1 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_124");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_132");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 46);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition_missingShipmentQuestActive (player, npc))
	{
		//-- NPC: Keep at it. I'm sure you'll locate that missing shipment. Report back to me once you've completed that assignment.
		string_id message = new string_id (c_stringFile, "s_136");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
	{
		//-- NPC: Greetings, I hope this day finds you well.
		string_id message = new string_id (c_stringFile, "s_138");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You're a member of the Corellian Security Force?
		boolean hasResponse0 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: It does, thank you.
		boolean hasResponse1 = false;
		if (corellia_coronet_lt_jasper_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_140");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_187");

			utils.setScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId", 51);

			npcStartConversation (player, npc, "corellia_coronet_lt_jasper", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "corellia_coronet_lt_jasper")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

	if (branchId == 2 && corellia_coronet_lt_jasper_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && corellia_coronet_lt_jasper_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && corellia_coronet_lt_jasper_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && corellia_coronet_lt_jasper_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && corellia_coronet_lt_jasper_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && corellia_coronet_lt_jasper_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && corellia_coronet_lt_jasper_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && corellia_coronet_lt_jasper_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && corellia_coronet_lt_jasper_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && corellia_coronet_lt_jasper_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && corellia_coronet_lt_jasper_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && corellia_coronet_lt_jasper_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && corellia_coronet_lt_jasper_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && corellia_coronet_lt_jasper_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && corellia_coronet_lt_jasper_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && corellia_coronet_lt_jasper_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 41 && corellia_coronet_lt_jasper_handleBranch41 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && corellia_coronet_lt_jasper_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && corellia_coronet_lt_jasper_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 47 && corellia_coronet_lt_jasper_handleBranch47 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && corellia_coronet_lt_jasper_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && corellia_coronet_lt_jasper_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && corellia_coronet_lt_jasper_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 54 && corellia_coronet_lt_jasper_handleBranch54 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.corellia_coronet_lt_jasper.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

