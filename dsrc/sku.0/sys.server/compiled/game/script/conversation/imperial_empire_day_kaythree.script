// ======================================================================
//
// imperial_empire_day_kaythree.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.37 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.badge;
include library.buff;
include library.chat;
include library.collection;
include library.conversation;
include library.create;
include library.factions;
include library.groundquests;
include library.holiday;
include library.static_item;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/imperial_empire_day_kaythree";

// ======================================================================
// Script Conditions
// ======================================================================

boolean imperial_empire_day_kaythree_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isEntertainerOrTrader (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (imperial_empire_day_kaythree_condition_isEntertainer(player, npc) || imperial_empire_day_kaythree_condition_isTrader(player, npc));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasNotCraftedSupplies (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	for(int i = 0; i < holiday.ALL_IMPERIAL_QUESTS.length; i++)
	{
		if(groundquests.isQuestActive(player, holiday.ALL_IMPERIAL_QUESTS[i])
		&& groundquests.isTaskActive(player, holiday.ALL_IMPERIAL_QUESTS[i], "crafteSupplies"))
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isEntertainerOrTraderAndNeverMetNotChampion (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (imperial_empire_day_kaythree_condition_isEntertainerOrTrader(player, npc) && !imperial_empire_day_kaythree_condition_alreadyKnowsKaythree(player, npc) && !imperial_empire_day_kaythree_condition_isChampion(player, npc));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompletedEntertainerOneNotTwo (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_01)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_02));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasAMissionActive (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	for(int i = 0; i < holiday.ALL_IMPERIAL_QUESTS.length; i++)
	{
		if(groundquests.isQuestActive(player, holiday.ALL_IMPERIAL_QUESTS[i]))
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_alreadyKnowsKaythree (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (imperial_empire_day_kaythree_condition_isEntertainer(player, npc) && groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_01))
	|| (imperial_empire_day_kaythree_condition_isTrader(player, npc) && (groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_DOMESTICS)
	|| groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_ENG)
	|| groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_MUNITIONS)
	|| groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_STRUC)));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasRecoveryCollectionPrerequisite (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return hasCompletedCollectionSlotPrereq(player, holiday.IMPERIAL_ANTIPROP_COUNTER_SLOT);
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isChampion (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return hasCompletedCollectionSlot(player, holiday.EMPIRE_DAY_CHAMPION_BADGE);
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompletedEntertainerTwoNotThree (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_02)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_03));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompletedEntertainerThreeNotFour (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_03)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_04));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isRebelPlayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (factions.isRebel(player));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isNeutralPlayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return(!factions.isImperial(player) && !factions.isRebel(player));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompletedEntertainerFourNotFive (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_04)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_05));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompletedEntertainerFiveNotSix (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_05)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_06));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isEntertainerWaitingForSignal (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (imperial_empire_day_kaythree_condition_isEntertainer(player, npc) && imperial_empire_day_kaythree_condition_alreadyKnowsKaythree(player, npc) && imperial_empire_day_kaythree_condition_hasEntertainerMissionWithTask(player, npc));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasEntertainerMissionWithTask (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	for(int i = 0; i < holiday.ALL_IMPERIAL_ENTERTAINER_QUESTS.length; i++)
	{
		if(groundquests.isQuestActive(player, holiday.ALL_IMPERIAL_ENTERTAINER_QUESTS[i])
		&& groundquests.isTaskActive(player, holiday.ALL_IMPERIAL_ENTERTAINER_QUESTS[i], "waitingForCredit"))
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isNeutralWorkingForRebel (obj_id player, obj_id npc)
{
	if(imperial_empire_day_kaythree_condition_isNeutralPlayer(player, npc))
	{
		return(((getCollectionSlotValue(player, holiday.REBEL_ENGINEERING_START_SLOT) > 0)
		&& !hasCompletedCollection(player, holiday.REBEL_ENGINEERING_COLLECTION))
		|| ((getCollectionSlotValue(player, holiday.REBEL_ENTERTAINER_START_SLOT) > 0)
		&& !hasCompletedCollection(player, holiday.REBEL_ENTERTAINER_COLLECTION)));
	}
	return false;
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompleted1stMissionNot2nd (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_DOMESTICS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_DOMESTICS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_ENG)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_ENG))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_MUNITIONS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_MUNITIONS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_STRUC)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_STRUC));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompleted2ndMissionNot3rd (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_DOMESTICS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_DOMESTICS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_ENG)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_ENG))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_MUNITIONS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_MUNITIONS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_STRUC)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_STRUC));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isEnterainerOrTraderAndNeverMetKaythreeIsChampion (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (imperial_empire_day_kaythree_condition_isChampion(player, npc) && !imperial_empire_day_kaythree_condition_alreadyKnowsKaythree(player, npc) && imperial_empire_day_kaythree_condition_isEntertainerOrTrader(player, npc));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isChampionKnowsKaythree (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (imperial_empire_day_kaythree_condition_isChampion(player, npc) && imperial_empire_day_kaythree_condition_alreadyKnowsKaythree(player, npc));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompleted3rdMissionNot4th (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_DOMESTICS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_DOMESTICS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_ENG)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_ENG))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_MUNITIONS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_MUNITIONS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_STRUC)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_STRUC));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompleted4thMissionNot5th (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_DOMESTICS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_DOMESTICS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_ENG)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_ENG))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_MUNITIONS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_MUNITIONS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_STRUC)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_STRUC));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompleted5thMissionNot6th (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_DOMESTICS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_DOMESTICS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_ENG)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_ENG))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_MUNITIONS)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_MUNITIONS))
	|| (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_STRUC)
	&& !groundquests.isQuestActiveOrComplete(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_STRUC));
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_hasCompleted6thMission (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	if((imperial_empire_day_kaythree_condition_isEntertainer(player, npc) 
	&& groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_06)))
	{
		return true;
	}
	else if(imperial_empire_day_kaythree_condition_isTrader(player, npc) && (groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_DOMESTICS)
	|| groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_ENG)
	|| groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_MUNITIONS)
	|| groundquests.hasCompletedQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_STRUC)))
	{
		return true;	
	}
	return false;
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isEntertainer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return utils.isProfession(player, utils.ENTERTAINER);
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isTrader (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return utils.isProfession(player, utils.TRADER);
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isStructuresTrader (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return hasSkill(player, "class_structures_phase1_novice");
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isEngineeringTrader (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return hasSkill(player, "class_engineering_phase1_novice");
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isMunitionsTrader (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return hasSkill(player, "class_munitions_phase1_novice");
}

// ----------------------------------------------------------------------

boolean imperial_empire_day_kaythree_condition_isDomesticsTrader (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return hasSkill(player, "class_domestics_phase1_novice");
}

// ======================================================================
// Script Actions
// ======================================================================

void imperial_empire_day_kaythree_action_grantDomesticsMissionOne (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_DOMESTICS);
	if(getCollectionSlotValue(player, holiday.IMPERIAL_ENGINEERING_START_SLOT) <= 0)
		imperial_empire_day_kaythree_action_grantEngineeringCollectionStart(player, npc);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantDomesticsMissionTwo (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_DOMESTICS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantDomesticsMissionThree (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_DOMESTICS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantDomesticsMissionFour (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_DOMESTICS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantDomesticsMissionFive (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_DOMESTICS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_spawnTroopers (obj_id player, obj_id npc)
{
	//spawn some mean enemies
	for (int i = 0; i < 3; i++)
	{
		location guardLocation = groundquests.getRandom2DLocationAroundLocation(npc, 1, 1, 5, 12);
		int mobLevel = getLevel(player);
		obj_id guard = create.object("imperial_emperorsday_ceremony_sentry", guardLocation, mobLevel);
		attachScript(guard, "event.emp_day.factional_guard_self_destruct");
		startCombat(guard, player);
	}
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantDomesticsMissionSix (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_DOMESTICS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEntertainerOne (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_01);
	modifyCollectionSlotValue(player, holiday.IMPERIAL_ENTERTAINER_START_SLOT, 1);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEntertainerTwo (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_02); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEntertainerThree (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_03); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEntertainerFour (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_04); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEntertainerFive (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_05); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_checkHolidayTimeStampOnPlayer (obj_id player, obj_id npc)
{
	//holiday.checkEventLockOutRemoval(player, holiday.EMPIRE_DAY_RECRUITMENT_TIMESTAMP);
	//holiday.checkEventLockOutRemoval(player, holiday.EMPIRE_DAY_PROPAGANDA_TIMESTAMP);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEntertainerSix (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_ENTERTAINER_06); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_entertainerSendSignalIncrementCollection (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "creditReceived"); 
	if(hasCompletedCollectionSlotPrereq(player, holiday.IMPERIAL_ENTERTAINER_COUNTER_SLOT))
	{
		modifyCollectionSlotValue(player, holiday.IMPERIAL_ENTERTAINER_COUNTER_SLOT, 1);
	}
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEngineeringCollectionStart (obj_id player, obj_id npc)
{
	if(getCollectionSlotValue(player, holiday.IMPERIAL_ENGINEERING_START_SLOT) <= 0)
			modifyCollectionSlotValue(player, holiday.IMPERIAL_ENGINEERING_START_SLOT, 1);

}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEngineeringMissionOne (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_ENG);
	if(getCollectionSlotValue(player, holiday.IMPERIAL_ENGINEERING_START_SLOT) <= 0)
		imperial_empire_day_kaythree_action_grantEngineeringCollectionStart(player, npc);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEngineeringMissionTwo (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_ENG);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEngineeringMissionThree (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_ENG);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEngineeringMissionFour (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_ENG);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEngineeringMissionFive (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_ENG);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantEnigineeringMissionSix (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_ENG);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantMunitionsMissionOne (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_MUNITIONS);
	if(getCollectionSlotValue(player, holiday.IMPERIAL_ENGINEERING_START_SLOT) <= 0)
		imperial_empire_day_kaythree_action_grantEngineeringCollectionStart(player, npc);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantMunitionsMissionTwo (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_MUNITIONS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantMunitionsMissionThree (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_MUNITIONS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantMunitionsMissionFour (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_MUNITIONS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantMunitionsMissionFive (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_MUNITIONS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantMunitionsMissionSix (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_MUNITIONS); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantStructuresMissionOne (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_01_STRUC);
	if(getCollectionSlotValue(player, holiday.IMPERIAL_ENGINEERING_START_SLOT) <= 0)
		imperial_empire_day_kaythree_action_grantEngineeringCollectionStart(player, npc);
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantStructuresMissionTwo (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_02_STRUC); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantStructuresMissionThree (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_03_STRUC); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantStructuresMissionFour (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_04_STRUC); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantStructuresMissionFive (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_05_STRUC); 
}

// ----------------------------------------------------------------------

void imperial_empire_day_kaythree_action_grantStructuresMissionSix (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, holiday.EMPIREDAYQUEST_IMP_CRASHSITE_06_STRUC); 
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

string imperial_empire_day_kaythree_tokenTO_timeLeftRecruitment (obj_id player, obj_id npc)
{
	string returnString = holiday.getTimeRemainingBeforeLockoutRemoved(player, holiday.EMPIRE_DAY_RECRUITMENT_TIMESTAMP);
	if(returnString == null || returnString.equals(""))
		return "might have to contact Customer Service. I can't seem to get any time data off your character.";
	return returnString;
}

// ----------------------------------------------------------------------

string imperial_empire_day_kaythree_tokenTO_timeLeftPropaganda (obj_id player, obj_id npc)
{
	string returnString = holiday.getTimeRemainingBeforeLockoutRemoved(player, holiday.EMPIRE_DAY_PROPAGANDA_TIMESTAMP);
	if(returnString == null || returnString.equals(""))
		return "might have to contact Customer Service. I can't seem to get any time data off your character.";
	return returnString;
}

// ======================================================================
// Script %DI Tokens
// ======================================================================

int imperial_empire_day_kaythree_tokenDI_notUsed (obj_id player, obj_id npc)
{
	return 0;
}

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int imperial_empire_day_kaythree_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I was warned you might visit, %TU.  You didn't really expect to work for the Rebellion as well as the Empire at the same time did you? 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I want to help the Empire.
	if (response == "s_306")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Finish your work with the Rebels and maybe we'll talk.
			string_id message = new string_id (c_stringFile, "s_307");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Very good, %TU. Here is your compensation.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you have any other missions?
	if (response == "s_298")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerOneNotTwo (player, npc))
		{
			//-- NPC: Your second mission is more of the same. You will be reporting to the Imperial Restuss Cantina on Rori. Are you ready to leave now, %TU?
			string_id message = new string_id (c_stringFile, "s_148");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lets do it.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_150");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 74);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerTwoNotThree (player, npc))
		{
			//-- NPC: Your third mission is here at the Theed Cantina. I'm sure you will find the short walk and compensation appealing. Are you available now?
			string_id message = new string_id (c_stringFile, "s_157");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lets do it.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_161");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 76);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerThreeNotFour (player, npc))
		{
			//-- NPC: We have a fourth mission in Bela Vistal Cantina on Corellia. Let me know when you are ready to leave.
			string_id message = new string_id (c_stringFile, "s_189");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am ready. Give me the mission.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_253");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 78);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerFourNotFive (player, npc))
		{
			//-- NPC: Your fifth mission will take you to Yavin IV. The Imperial Fortress to be exact. Are you interested, %TU?
			string_id message = new string_id (c_stringFile, "s_257");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yavin IV? Alright.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_259");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 80);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerFiveNotSix (player, npc))
		{
			//-- NPC: This will be your last mission, Entertainer %TU. The forces are located at a small Imperial Outpost on Lok. Are you interested? 
			string_id message = new string_id (c_stringFile, "s_263");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The last one?  No problem.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_265");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 82);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted6thMission (player, npc))
		{
			//-- NPC: I find your enthusiasm refreshing, %TU, but that was the last mission. 
			string_id message = new string_id (c_stringFile, "s_301");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You should finish up your current mission and come back, %TU.
			string_id message = new string_id (c_stringFile, "s_303");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Champion %TU has returned. Are you ready another mission?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have another mission?
	if (response == "s_192")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted1stMissionNot2nd (player, npc))
		{
			//-- NPC: Your second salvage mission will be on the same planet as the last. Rori.
			string_id message = new string_id (c_stringFile, "s_197");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And you didn't send me a communication while I was on that planet because?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_198");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted2ndMissionNot3rd (player, npc))
		{
			//-- NPC: Your third salvage mission will be on the same planet as the last. Rori.
			string_id message = new string_id (c_stringFile, "s_207");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Let me guess. You are testing me?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am ready.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_208");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_233");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted3rdMissionNot4th (player, npc))
		{
			//-- NPC: You will be happy to know your fourth mission is on Talus.
			string_id message = new string_id (c_stringFile, "s_214");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Exactly how many supply shuttles are there??
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_215");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted4thMissionNot5th (player, npc))
		{
			//-- NPC: Talus again, %TU. Are you ready?
			string_id message = new string_id (c_stringFile, "s_225");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why do I have a feeling we will be having this conversation again?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll keep doing this as long as the Empire needs me.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_226");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_237");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 47);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted5thMissionNot6th (player, npc))
		{
			//-- NPC: You will likely be very happy to hear that this is your last mission, %TU.
			string_id message = new string_id (c_stringFile, "s_230");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Noooo! Say it isn't so!
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: That is too bad. I really like traveling throughout the galaxy for crates of...uhh, stuff.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I am ready for the last assigment.
			boolean hasResponse2 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_231");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_243");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_247");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 57);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You should finish up your current mission and come back, %TU.
			string_id message = new string_id (c_stringFile, "s_289");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have another mission?
	if (response == "s_146")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerOneNotTwo (player, npc))
		{
			//-- NPC: Your second mission is more of the same. You will be reporting to the Imperial Restuss Cantina on Rori. Are you ready to leave now, %TU?
			string_id message = new string_id (c_stringFile, "s_148");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lets do it.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_150");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 74);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerTwoNotThree (player, npc))
		{
			//-- NPC: Your third mission is here at the Theed Cantina. I'm sure you will find the short walk and compensation appealing. Are you available now?
			string_id message = new string_id (c_stringFile, "s_157");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lets do it.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_161");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 76);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerThreeNotFour (player, npc))
		{
			//-- NPC: We have a fourth mission in Bela Vistal Cantina on Corellia. Let me know when you are ready to leave.
			string_id message = new string_id (c_stringFile, "s_189");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am ready. Give me the mission.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_253");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 78);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerFourNotFive (player, npc))
		{
			//-- NPC: Your fifth mission will take you to Yavin IV. The Imperial Fortress to be exact. Are you interested, %TU?
			string_id message = new string_id (c_stringFile, "s_257");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yavin IV? Alright.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_259");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 80);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerFiveNotSix (player, npc))
		{
			//-- NPC: This will be your last mission, Entertainer %TU. The forces are located at a small Imperial Outpost on Lok. Are you interested? 
			string_id message = new string_id (c_stringFile, "s_263");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The last one?  No problem.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_265");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 82);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted6thMission (player, npc))
		{
			//-- NPC: I find your enthusiasm refreshing, %TU, but that was the last mission. 
			string_id message = new string_id (c_stringFile, "s_301");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You should finish up your current mission and come back, %TU.
			string_id message = new string_id (c_stringFile, "s_303");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You have returned, %TU. Are you ready for another mission?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have another mission?
	if (response == "s_192")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted1stMissionNot2nd (player, npc))
		{
			//-- NPC: Your second salvage mission will be on the same planet as the last. Rori.
			string_id message = new string_id (c_stringFile, "s_197");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And you didn't send me a communication while I was on that planet because?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_198");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted2ndMissionNot3rd (player, npc))
		{
			//-- NPC: Your third salvage mission will be on the same planet as the last. Rori.
			string_id message = new string_id (c_stringFile, "s_207");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Let me guess. You are testing me?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am ready.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_208");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_233");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted3rdMissionNot4th (player, npc))
		{
			//-- NPC: You will be happy to know your fourth mission is on Talus.
			string_id message = new string_id (c_stringFile, "s_214");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Exactly how many supply shuttles are there??
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_215");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted4thMissionNot5th (player, npc))
		{
			//-- NPC: Talus again, %TU. Are you ready?
			string_id message = new string_id (c_stringFile, "s_225");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why do I have a feeling we will be having this conversation again?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll keep doing this as long as the Empire needs me.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_226");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_237");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 47);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted5thMissionNot6th (player, npc))
		{
			//-- NPC: You will likely be very happy to hear that this is your last mission, %TU.
			string_id message = new string_id (c_stringFile, "s_230");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Noooo! Say it isn't so!
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: That is too bad. I really like traveling throughout the galaxy for crates of...uhh, stuff.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I am ready for the last assigment.
			boolean hasResponse2 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_231");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_243");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_247");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 57);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You should finish up your current mission and come back, %TU.
			string_id message = new string_id (c_stringFile, "s_289");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have another mission?
	if (response == "s_146")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerOneNotTwo (player, npc))
		{
			//-- NPC: Your second mission is more of the same. You will be reporting to the Imperial Restuss Cantina on Rori. Are you ready to leave now, %TU?
			string_id message = new string_id (c_stringFile, "s_148");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lets do it.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_150");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 74);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerTwoNotThree (player, npc))
		{
			//-- NPC: Your third mission is here at the Theed Cantina. I'm sure you will find the short walk and compensation appealing. Are you available now?
			string_id message = new string_id (c_stringFile, "s_157");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lets do it.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_161");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 76);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerThreeNotFour (player, npc))
		{
			//-- NPC: We have a fourth mission in Bela Vistal Cantina on Corellia. Let me know when you are ready to leave.
			string_id message = new string_id (c_stringFile, "s_189");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am ready. Give me the mission.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_253");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 78);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerFourNotFive (player, npc))
		{
			//-- NPC: Your fifth mission will take you to Yavin IV. The Imperial Fortress to be exact. Are you interested, %TU?
			string_id message = new string_id (c_stringFile, "s_257");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yavin IV? Alright.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_259");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 80);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompletedEntertainerFiveNotSix (player, npc))
		{
			//-- NPC: This will be your last mission, Entertainer %TU. The forces are located at a small Imperial Outpost on Lok. Are you interested? 
			string_id message = new string_id (c_stringFile, "s_263");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The last one?  No problem.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_265");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 82);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_hasCompleted6thMission (player, npc))
		{
			//-- NPC: I find your enthusiasm refreshing, %TU, but that was the last mission. 
			string_id message = new string_id (c_stringFile, "s_301");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You should finish up your current mission and come back, %TU.
			string_id message = new string_id (c_stringFile, "s_303");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your second salvage mission will be on the same planet as the last. Rori.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And you didn't send me a communication while I was on that planet because?
	if (response == "s_198")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: I needed to make sure you returned with the supplies, %TU. If you had failed in that mission there would be no reason to offer you a second. I also considered the prospect that you may like to take a few hours to rest in the beautiful city of Theed. 
			string_id message = new string_id (c_stringFile, "s_199");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How considerate...
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_200");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 10);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I needed to make sure you returned with the supplies, %TU. If you had failed in that mission there would be no reason to offer you a second. I also considered the prospect that you may like to take a few hours to rest in the beautiful city of Theed. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How considerate...
	if (response == "s_200")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Would you like the second mission, %TU?
			string_id message = new string_id (c_stringFile, "s_201");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I suppose the pay was good enough.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Yes. I am ready.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_202");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_205");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 11);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Would you like the second mission, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I suppose the pay was good enough.
	if (response == "s_202")
	{
		imperial_empire_day_kaythree_action_grantDomesticsMissionTwo (player, npc);

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionTwo (player, npc);

			//-- NPC: Do not forget that the good citizens of the Empire payed your royalties, or the lives of the crew that were lost in the crash.  Remember this on your next mission.
			string_id message = new string_id (c_stringFile, "s_203");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionTwo (player, npc);

			//-- NPC: You found it satisfactory? Do not forget that the good citizens of the Empire payed your royalties, or the lives of the crew that were lost in the crash.  Here is your next mission.
			string_id message = new string_id (c_stringFile, "s_139");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionTwo (player, npc);

			//-- NPC: Do not forget that the good citizens of the Empire payed your royalties, or the lives of the crew that were lost in the crash.  Here is your next mission.
			string_id message = new string_id (c_stringFile, "s_141");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionTwo (player, npc);

			//-- NPC: Good Enough? Do not forget that the good citizens of the Empire payed your royalties, or the lives of the crew that were lost in the crash.  Here is your next mission.
			string_id message = new string_id (c_stringFile, "s_143");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes. I am ready.
	if (response == "s_205")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionTwo (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_206");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionTwo (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_153");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionTwo (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_159");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionTwo (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_160");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your third salvage mission will be on the same planet as the last. Rori.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let me guess. You are testing me?
	if (response == "s_208")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Testing?
			string_id message = new string_id (c_stringFile, "s_209");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes. Testing my patience. Just give me the mission.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_210");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am ready.
	if (response == "s_233")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionThree (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_234");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionThree (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_165");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionThree (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_166");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionThree (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_167");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Testing?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes. Testing my patience. Just give me the mission.
	if (response == "s_210")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: As you wish, %TU. You are doing well. The higher echelons of the Empire will no doubt be appreciative of your efforts.
			string_id message = new string_id (c_stringFile, "s_211");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Right. The mission?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_212");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 22);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As you wish, %TU. You are doing well. The higher echelons of the Empire will no doubt be appreciative of your efforts.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Right. The mission?
	if (response == "s_212")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionThree (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_213");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionThree (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_162");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionThree (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_163");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionThree (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_164");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You will be happy to know your fourth mission is on Talus.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Exactly how many supply shuttles are there??
	if (response == "s_215")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: A few, %TU.
			string_id message = new string_id (c_stringFile, "s_216");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see...if you mean 4 is 'a few.'
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Well, okay. I'm guess I am ready now.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_217");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_235");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 32);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A few, %TU.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see...if you mean 4 is 'a few.'
	if (response == "s_217")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you ready for travel to Talus or argue semantics, %TU?
			string_id message = new string_id (c_stringFile, "s_218");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I want to argue.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Alright. Give me the mission.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_219");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_220");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 33);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well, okay. I'm guess I am ready now.
	if (response == "s_235")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionFour (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_236");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionFour (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_176");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionFour (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_178");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionFour (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_179");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch33 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you ready for travel to Talus or argue semantics, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I want to argue.
	if (response == "s_219")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: ...
			string_id message = new string_id (c_stringFile, "s_221");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Alright. Give me the mission.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_222");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Alright. Give me the mission.
	if (response == "s_220")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionFour (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_223");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionFour (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_172");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionFour (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_173");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionFour (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_175");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: ...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Alright. Give me the mission.
	if (response == "s_222")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionFour (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_224");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionFour (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_168");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionFour (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_169");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionFour (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_170");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch47 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Talus again, %TU. Are you ready?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why do I have a feeling we will be having this conversation again?
	if (response == "s_226")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: What will it matter if you are well compensated and your work is for a good cause, %TU?
			string_id message = new string_id (c_stringFile, "s_227");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Right. What is the next mission?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_228");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 48);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll keep doing this as long as the Empire needs me.
	if (response == "s_237")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionFive (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_238");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionFive (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_183");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionFive (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_184");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionFive (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_185");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch48 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What will it matter if you are well compensated and your work is for a good cause, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Right. What is the next mission?
	if (response == "s_228")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionFive (player, npc);

			//-- NPC: Here is your next Domestics mission.
			string_id message = new string_id (c_stringFile, "s_229");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionFive (player, npc);

			//-- NPC: Here is your next Engineering mission.
			string_id message = new string_id (c_stringFile, "s_180");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionFive (player, npc);

			//-- NPC: Here is your next Munitions mission.
			string_id message = new string_id (c_stringFile, "s_181");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionFive (player, npc);

			//-- NPC: Here is your next Structures mission.
			string_id message = new string_id (c_stringFile, "s_182");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch57 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You will likely be very happy to hear that this is your last mission, %TU.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Noooo! Say it isn't so!
	if (response == "s_231")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am fully programmed to interpret sarcasm, %TU. Just in case that wasn't clear.
			string_id message = new string_id (c_stringFile, "s_232");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: If you weren't interpreting the sarcasm, this conversation would be pretty dull.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_239");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 58);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That is too bad. I really like traveling throughout the galaxy for crates of...uhh, stuff.
	if (response == "s_243")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: ...
			string_id message = new string_id (c_stringFile, "s_244");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Right...what was the last mission?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_245");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 64);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am ready for the last assigment.
	if (response == "s_247")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionSix (player, npc);

			//-- NPC: Here is your last Domestics mission.
			string_id message = new string_id (c_stringFile, "s_248");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEnigineeringMissionSix (player, npc);

			//-- NPC: Here is your last Engineering mission.
			string_id message = new string_id (c_stringFile, "s_250");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionSix (player, npc);

			//-- NPC: Here is your last Munitions mission.
			string_id message = new string_id (c_stringFile, "s_251");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionSix (player, npc);

			//-- NPC: Here is your last Structures mission.
			string_id message = new string_id (c_stringFile, "s_252");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch58 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am fully programmed to interpret sarcasm, %TU. Just in case that wasn't clear.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: If you weren't interpreting the sarcasm, this conversation would be pretty dull.
	if (response == "s_239")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Can you complete the last mission or should I find someone with skills, %TU?
			string_id message = new string_id (c_stringFile, "s_240");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ouch! Okay, okay.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_241");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 59);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch59 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Can you complete the last mission or should I find someone with skills, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ouch! Okay, okay.
	if (response == "s_241")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionThree (player, npc);

			//-- NPC: Here is your last Domestics mission, %TU.
			string_id message = new string_id (c_stringFile, "s_242");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEnigineeringMissionSix (player, npc);

			//-- NPC: Here is your last Engineering mission, %TU.
			string_id message = new string_id (c_stringFile, "s_186");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionSix (player, npc);

			//-- NPC: Here is your last Munitions mission, %TU.
			string_id message = new string_id (c_stringFile, "s_187");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionSix (player, npc);

			//-- NPC: Here is your last Structures mission, %TU.
			string_id message = new string_id (c_stringFile, "s_188");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: ...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Right...what was the last mission?
	if (response == "s_245")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionSix (player, npc);

			//-- NPC: Here is your last Domestics mission, %TU.
			string_id message = new string_id (c_stringFile, "s_246");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEnigineeringMissionSix (player, npc);

			//-- NPC: Here is your last Engineering mission, %TU.
			string_id message = new string_id (c_stringFile, "s_191");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionSix (player, npc);

			//-- NPC: Here is your last Munitions mission, %TU.
			string_id message = new string_id (c_stringFile, "s_204");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionSix (player, npc);

			//-- NPC: Here is your last Structures mission, %TU.
			string_id message = new string_id (c_stringFile, "s_249");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch74 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your second mission is more of the same. You will be reporting to the Imperial Restuss Cantina on Rori. Are you ready to leave now, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Lets do it.
	if (response == "s_150")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerTwo (player, npc);

			//-- NPC: Very well, %TU. Here is your mission.
			string_id message = new string_id (c_stringFile, "s_155");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch76 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your third mission is here at the Theed Cantina. I'm sure you will find the short walk and compensation appealing. Are you available now?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Lets do it.
	if (response == "s_161")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerThree (player, npc);

			//-- NPC: Very well, %TU. Here is your mission.
			string_id message = new string_id (c_stringFile, "s_174");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch78 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We have a fourth mission in Bela Vistal Cantina on Corellia. Let me know when you are ready to leave.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am ready. Give me the mission.
	if (response == "s_253")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerFour (player, npc);

			//-- NPC: Very well, %TU. Here is your mission.
			string_id message = new string_id (c_stringFile, "s_255");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch80 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your fifth mission will take you to Yavin IV. The Imperial Fortress to be exact. Are you interested, %TU?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yavin IV? Alright.
	if (response == "s_259")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerFive (player, npc);

			//-- NPC: Very well, %TU. Here is your mission.
			string_id message = new string_id (c_stringFile, "s_261");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch82 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This will be your last mission, Entertainer %TU. The forces are located at a small Imperial Outpost on Lok. Are you interested? 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The last one?  No problem.
	if (response == "s_265")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerSix (player, npc);

			//-- NPC: Here is your last mission, %TU.
			string_id message = new string_id (c_stringFile, "s_267");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch86 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Champion %TU. I am glad you have stopped by. I am Kaythree, protocol droid of the Empire.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Protocol droid of the Empire?
	if (response == "s_193")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: I can only disclose that I work for the betterment of the Empire. Are you available for work?
			string_id message = new string_id (c_stringFile, "s_194");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kind of work?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
			boolean hasResponse2 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_151");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_293");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_299");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 91);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nice to meet you I guess.
	if (response == "s_195")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you available for work?
			string_id message = new string_id (c_stringFile, "s_196");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kind of work?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
			boolean hasResponse2 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_151");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_293");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_299");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 91);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch87 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can only disclose that I work for the betterment of the Empire. Are you available for work?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of work?
	if (response == "s_151")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			//-- NPC: The Empire has been battling low morale since the destruction of the Death Star. Your task is simple. Entertain Imperial personnel. Are you interested?
			string_id message = new string_id (c_stringFile, "s_154");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do I get paid?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_171");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 92);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isTrader (player, npc))
		{
			//-- NPC: Both sides of this conflict have lost shuttles carrying important supplies. These shuttles have crash landed in several locations and you are the perfect candidate to assist.
			string_id message = new string_id (c_stringFile, "s_264");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm a trader, not a rescue party.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Anything for the Emperor.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_268");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_282");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 96);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
	if (response == "s_293")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: The ceremony is right behind you, %TU.
			string_id message = new string_id (c_stringFile, "s_295");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
	if (response == "s_299")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You need to speak with Major Tantor, %TU. You can find the Major less than 200 meters away, East of the Theed Palace, standing next to a Lambda Shuttle.
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch88 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you available for work?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of work?
	if (response == "s_151")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			//-- NPC: The Empire has been battling low morale since the destruction of the Death Star. Your task is simple. Entertain Imperial personnel. Are you interested?
			string_id message = new string_id (c_stringFile, "s_154");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do I get paid?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_171");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 92);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isTrader (player, npc))
		{
			//-- NPC: Both sides of this conflict have lost shuttles carrying important supplies. These shuttles have crash landed in several locations and you are the perfect candidate to assist.
			string_id message = new string_id (c_stringFile, "s_264");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm a trader, not a rescue party.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Anything for the Emperor.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_268");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_282");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 96);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
	if (response == "s_293")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: The ceremony is right behind you, %TU.
			string_id message = new string_id (c_stringFile, "s_295");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
	if (response == "s_299")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You need to speak with Major Tantor, %TU. You can find the Major less than 200 meters away, East of the Theed Palace, standing next to a Lambda Shuttle.
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch89 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome, %TU. We have not met yet but I have heard of you. I am Kaythree, protocol droid of the Empire.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Protocol droid of the Empire?
	if (response == "s_140")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: I can only disclose that I work for the betterment of the Empire. Are you available for work?
			string_id message = new string_id (c_stringFile, "s_144");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kind of work?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
			boolean hasResponse2 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_151");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_293");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_299");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 91);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nice to meet you I guess.
	if (response == "s_147")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you available for work?
			string_id message = new string_id (c_stringFile, "s_149");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kind of work?
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
			boolean hasResponse2 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_151");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_293");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_299");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 91);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch90 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can only disclose that I work for the betterment of the Empire. Are you available for work?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of work?
	if (response == "s_151")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			//-- NPC: The Empire has been battling low morale since the destruction of the Death Star. Your task is simple. Entertain Imperial personnel. Are you interested?
			string_id message = new string_id (c_stringFile, "s_154");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do I get paid?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_171");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 92);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isTrader (player, npc))
		{
			//-- NPC: Both sides of this conflict have lost shuttles carrying important supplies. These shuttles have crash landed in several locations and you are the perfect candidate to assist.
			string_id message = new string_id (c_stringFile, "s_264");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm a trader, not a rescue party.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Anything for the Emperor.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_268");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_282");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 96);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
	if (response == "s_293")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: The ceremony is right behind you, %TU.
			string_id message = new string_id (c_stringFile, "s_295");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
	if (response == "s_299")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You need to speak with Major Tantor, %TU. You can find the Major less than 200 meters away, East of the Theed Palace, standing next to a Lambda Shuttle.
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch91 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you available for work?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of work?
	if (response == "s_151")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			//-- NPC: The Empire has been battling low morale since the destruction of the Death Star. Your task is simple. Entertain Imperial personnel. Are you interested?
			string_id message = new string_id (c_stringFile, "s_154");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do I get paid?
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_171");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 92);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isTrader (player, npc))
		{
			//-- NPC: Both sides of this conflict have lost shuttles carrying important supplies. These shuttles have crash landed in several locations and you are the perfect candidate to assist.
			string_id message = new string_id (c_stringFile, "s_264");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm a trader, not a rescue party.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Anything for the Emperor.
			boolean hasResponse1 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_268");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_282");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 96);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Actually I am looking for the Empire Day Ceremony. Do you know where that is?
	if (response == "s_293")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: The ceremony is right behind you, %TU.
			string_id message = new string_id (c_stringFile, "s_295");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I tear down the Rebel posters on the Kiosks around Theed?
	if (response == "s_299")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You need to speak with Major Tantor, %TU. You can find the Major less than 200 meters away, East of the Theed Palace, standing next to a Lambda Shuttle.
			string_id message = new string_id (c_stringFile, "s_302");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch92 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Empire has been battling low morale since the destruction of the Death Star. Your task is simple. Entertain Imperial personnel. Are you interested?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes.
	if (response == "s_156")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerOne (player, npc);

			//-- NPC: Very good. Here is your first assignment.
			string_id message = new string_id (c_stringFile, "s_158");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do I get paid?
	if (response == "s_171")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. You will be compensated for your time if the assignment is fulfilled.
			string_id message = new string_id (c_stringFile, "s_190");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Alright. Give me the assignment.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_256");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 94);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch94 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes. You will be compensated for your time if the assignment is fulfilled.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Alright. Give me the assignment.
	if (response == "s_256")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEntertainerOrTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEntertainerOne (player, npc);

			//-- NPC: Very good. Here is your first assignment.
			string_id message = new string_id (c_stringFile, "s_260");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch96 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Both sides of this conflict have lost shuttles carrying important supplies. These shuttles have crash landed in several locations and you are the perfect candidate to assist.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm a trader, not a rescue party.
	if (response == "s_268")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am fully aware of your occupation, %TU. All flight crew have been evacuated. Your task is just to recover what can be salvaged from the wreckage.
			string_id message = new string_id (c_stringFile, "s_270");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And that is when I will be ambushed by Rebels right? Yeah, no thanks!
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_272");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 97);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Anything for the Emperor.
	if (response == "s_282")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Domestics assignment.
			string_id message = new string_id (c_stringFile, "s_284");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Engineering assignment.
			string_id message = new string_id (c_stringFile, "s_286");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Munitions assignment.
			string_id message = new string_id (c_stringFile, "s_288");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Structures assignment.
			string_id message = new string_id (c_stringFile, "s_291");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch97 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am fully aware of your occupation, %TU. All flight crew have been evacuated. Your task is just to recover what can be salvaged from the wreckage.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And that is when I will be ambushed by Rebels right? Yeah, no thanks!
	if (response == "s_272")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: Please let me continue, %TU. No enemy forces have been detected at the crash location I am sending you to. You need only travel there and simply pick up what supplies have not been destroyed.
			string_id message = new string_id (c_stringFile, "s_274");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: If I see any Rebels at the crash site I will return and expect full compensation.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_276");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 98);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch98 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please let me continue, %TU. No enemy forces have been detected at the crash location I am sending you to. You need only travel there and simply pick up what supplies have not been destroyed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: If I see any Rebels at the crash site I will return and expect full compensation.
	if (response == "s_276")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are more than welcome to come back and collect if that happens, %TU.
			string_id message = new string_id (c_stringFile, "s_278");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Great. Give me the location.
			boolean hasResponse0 = false;
			if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_280");

				utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 99);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int imperial_empire_day_kaythree_handleBranch99 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are more than welcome to come back and collect if that happens, %TU.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Great. Give me the location.
	if (response == "s_280")
	{
		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isDomesticsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantDomesticsMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Domestics assignment.
			string_id message = new string_id (c_stringFile, "s_284");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isEngineeringTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantEngineeringMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Engineering assignment.
			string_id message = new string_id (c_stringFile, "s_286");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isMunitionsTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantMunitionsMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Munitions assignment.
			string_id message = new string_id (c_stringFile, "s_288");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (imperial_empire_day_kaythree_condition_isStructuresTrader (player, npc))
		{
			imperial_empire_day_kaythree_action_grantStructuresMissionOne (player, npc);

			//-- NPC: Very good. Here is your first Structures assignment.
			string_id message = new string_id (c_stringFile, "s_291");
			utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isTangible (self)) || (isPlayer (self)))
		detachScript(self, "conversation.imperial_empire_day_kaythree");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.imperial_empire_day_kaythree");

	return SCRIPT_CONTINUE;
}

trigger OnDetach ()
{
	clearCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isRebelPlayer (player, npc))
	{
		doAnimationAction (npc, "backhand_threaten");

		//-- NPC: My data banks show your true identity, %TU. You are, as we say in the Empire, 'Rebel Scum.'
		string_id message = new string_id (c_stringFile, "s_50");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isNeutralWorkingForRebel (player, npc))
	{
		//-- NPC: I was warned you might visit, %TU.  You didn't really expect to work for the Rebellion as well as the Empire at the same time did you? 
		string_id message = new string_id (c_stringFile, "s_305");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I want to help the Empire.
		boolean hasResponse0 = false;
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_306");

			utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 2);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "imperial_empire_day_kaythree", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_hasCompleted6thMission (player, npc))
	{
		//-- NPC: Well done, %TU. I have no other missions for you. Long live the Emperor.
		string_id message = new string_id (c_stringFile, "s_145");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_hasNotCraftedSupplies (player, npc))
	{
		//-- NPC: Please craft the supplies and take them to the Supply Officer, %TU
		string_id message = new string_id (c_stringFile, "s_138");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isEntertainerWaitingForSignal (player, npc))
	{
		imperial_empire_day_kaythree_action_entertainerSendSignalIncrementCollection (player, npc);

		//-- NPC: Very good, %TU. Here is your compensation.
		string_id message = new string_id (c_stringFile, "s_297");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Do you have any other missions?
		boolean hasResponse0 = false;
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_298");

			utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 6);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "imperial_empire_day_kaythree", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isChampionKnowsKaythree (player, npc))
	{
		imperial_empire_day_kaythree_action_checkHolidayTimeStampOnPlayer (player, npc);

		//-- NPC: Champion %TU has returned. Are you ready another mission?
		string_id message = new string_id (c_stringFile, "s_67");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You have another mission?
		boolean hasResponse0 = false;
		if (imperial_empire_day_kaythree_condition_isTrader (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: You have another mission?
		boolean hasResponse1 = false;
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_192");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_146");

			utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 8);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "imperial_empire_day_kaythree", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_alreadyKnowsKaythree (player, npc))
	{
		//-- NPC: You have returned, %TU. Are you ready for another mission?
		string_id message = new string_id (c_stringFile, "s_116");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You have another mission?
		boolean hasResponse0 = false;
		if (imperial_empire_day_kaythree_condition_isTrader (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: You have another mission?
		boolean hasResponse1 = false;
		if (imperial_empire_day_kaythree_condition_isEntertainer (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_192");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_146");

			utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 8);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "imperial_empire_day_kaythree", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isEnterainerOrTraderAndNeverMetKaythreeIsChampion (player, npc))
	{
		doAnimationAction (npc, "salute2");

		doAnimationAction (player, "salute2");

		//-- NPC: Champion %TU. I am glad you have stopped by. I am Kaythree, protocol droid of the Empire.
		string_id message = new string_id (c_stringFile, "s_131");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Protocol droid of the Empire?
		boolean hasResponse0 = false;
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Nice to meet you I guess.
		boolean hasResponse1 = false;
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_193");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_195");

			utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 86);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "imperial_empire_day_kaythree", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isEntertainerOrTraderAndNeverMetNotChampion (player, npc))
	{
		doAnimationAction (npc, "salute2");

		//-- NPC: Welcome, %TU. We have not met yet but I have heard of you. I am Kaythree, protocol droid of the Empire.
		string_id message = new string_id (c_stringFile, "s_137");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Protocol droid of the Empire?
		boolean hasResponse0 = false;
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Nice to meet you I guess.
		boolean hasResponse1 = false;
		if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_140");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_147");

			utils.setScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId", 89);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "imperial_empire_day_kaythree", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition_isChampion (player, npc))
	{
		//-- NPC: I am sorry, Champion %TU, but I have other tasks to attend to. If you have any associates that are Entertainers or Traders. Please send them to me.
		string_id message = new string_id (c_stringFile, "s_309");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (imperial_empire_day_kaythree_condition__defaultCondition (player, npc))
	{
		//-- NPC: I am sorry, %TU, but I have other tasks to attend to. If you have any associates that are Entertainers or Traders. Please send them to me.
		string_id message = new string_id (c_stringFile, "s_310");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "imperial_empire_day_kaythree")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

	if (branchId == 2 && imperial_empire_day_kaythree_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && imperial_empire_day_kaythree_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && imperial_empire_day_kaythree_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && imperial_empire_day_kaythree_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && imperial_empire_day_kaythree_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && imperial_empire_day_kaythree_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && imperial_empire_day_kaythree_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && imperial_empire_day_kaythree_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && imperial_empire_day_kaythree_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && imperial_empire_day_kaythree_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && imperial_empire_day_kaythree_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && imperial_empire_day_kaythree_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 33 && imperial_empire_day_kaythree_handleBranch33 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && imperial_empire_day_kaythree_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 47 && imperial_empire_day_kaythree_handleBranch47 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 48 && imperial_empire_day_kaythree_handleBranch48 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 57 && imperial_empire_day_kaythree_handleBranch57 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 58 && imperial_empire_day_kaythree_handleBranch58 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 59 && imperial_empire_day_kaythree_handleBranch59 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && imperial_empire_day_kaythree_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 74 && imperial_empire_day_kaythree_handleBranch74 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 76 && imperial_empire_day_kaythree_handleBranch76 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 78 && imperial_empire_day_kaythree_handleBranch78 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 80 && imperial_empire_day_kaythree_handleBranch80 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 82 && imperial_empire_day_kaythree_handleBranch82 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 86 && imperial_empire_day_kaythree_handleBranch86 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 87 && imperial_empire_day_kaythree_handleBranch87 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 88 && imperial_empire_day_kaythree_handleBranch88 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 89 && imperial_empire_day_kaythree_handleBranch89 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 90 && imperial_empire_day_kaythree_handleBranch90 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 91 && imperial_empire_day_kaythree_handleBranch91 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 92 && imperial_empire_day_kaythree_handleBranch92 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 94 && imperial_empire_day_kaythree_handleBranch94 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 96 && imperial_empire_day_kaythree_handleBranch96 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 97 && imperial_empire_day_kaythree_handleBranch97 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 98 && imperial_empire_day_kaythree_handleBranch98 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 99 && imperial_empire_day_kaythree_handleBranch99 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.imperial_empire_day_kaythree.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

