// ======================================================================
//
// death_watch_foreman.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.player_structure;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/death_watch_foreman";

// ======================================================================
// Script Conditions
// ======================================================================

boolean death_watch_foreman_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_startMission (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_completed") || hasObjVar(player, "death_watch.drill_kill"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.drill_02") || hasObjVar(player, "death_watch.drill_03"))
	{
		return false;
	}
	
	obj_id structure = getTopMostContainer (npc);
	
	if(!hasObjVar(structure, "death_watch.haldo") && !hasObjVar(player, "death_watch.drill_01"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_notCompleted (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.medicine_success") || hasObjVar(player, "death_watch.medicine_kill"))
	{
		return false;
	}
	
	obj_id structure = getTopMostContainer (npc);
	
	obj_id oldPlayer = getObjIdObjVar(structure, "death_watch.haldo_player");
	
	if(hasObjVar(player, "death_watch.drill_01"))
	{
		if(hasObjVar(structure, "death_watch.haldo") && oldPlayer == player) 
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_helpedHaldo (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_01") && hasObjVar(player, "death_watch.medicine_success"))
	{
		return true;
	}
	return false;	
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_alreadyBeingHelped (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_completed") || hasObjVar(player, "death_watch.drill_kill"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.drill_02") || hasObjVar(player, "death_watch.drill_03"))
	{
		return false;
	}
	
	obj_id structure = getTopMostContainer (npc);
	
	if(hasObjVar(structure, "death_watch.haldo") && !hasObjVar(player, "death_watch.drill_01"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_killedHaldo (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_01") && hasObjVar(player, "death_watch.medicine_kill"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_notCompletedBattery (obj_id player, obj_id npc)
{
	if(!hasObjVar(player, "death_watch.drill_02"))
	{
		return false;
	}
	
	obj_id[] objContents = utils.getContents(player, true);

	if( objContents != null )
	{
		for( int intI = 0; intI<objContents.length; intI++ )
		{
			string strItemTemplate = getTemplateName(objContents[intI]);
			if( strItemTemplate=="object/tangible/dungeon/death_watch_bunker/drill_battery_clean.iff")
			{
				return false;
			}
		}
	}
	return true;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_batteryCleaned (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	
	if(hasObjVar(structure, "death_watch.water_pressure_mission"))
	{
		return false;
	}
	
	if(!hasObjVar(player, "death_watch.drill_02"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.medicine_kill"))
	{
		return false;
	}
	
	obj_id[] objContents = utils.getContents(player, true);

	if( objContents != null )
	{
		for( int intI = 0; intI<objContents.length; intI++ )
		{
			string strItemTemplate = getTemplateName(objContents[intI]);
			if( strItemTemplate=="object/tangible/dungeon/death_watch_bunker/drill_battery_clean.iff")
			{
			return true;
			}
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_waterPressureStartnoKill (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	
	if(hasObjVar(structure, "death_watch.water_pressure_mission"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.drill_03") && hasObjVar(player, "death_watch.medicine_success"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_waterPressureStartKill (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	
	if(hasObjVar(structure, "death_watch.water_pressure_mission"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.drill_03") && hasObjVar(player, "death_watch.medicine_kill"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_batteryCleanedKill (obj_id player, obj_id npc)
{
	if(!hasObjVar(player, "death_watch.drill_02"))
	{
		return false;
	}
	
	if(!hasObjVar(player, "death_watch.medicine_kill"))
	{
		return false;
	}
	
	obj_id[] objContents = utils.getContents(player, true);

	if( objContents != null )
	{
		for( int intI = 0; intI<objContents.length; intI++ )
		{
			string strItemTemplate = getTemplateName(objContents[intI]);
			if( strItemTemplate=="object/tangible/dungeon/death_watch_bunker/drill_battery_clean.iff")
			{
			return true;
			}
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_notCompletedWater (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	if(hasObjVar(player, "death_watch.drill_03"))
	{
		if(hasObjVar(player, "death_watch.water_pressure"))
		{
			obj_id oldPlayer = getObjIdObjVar(structure, "death_watch.water_pressure_mission");
			if (oldPlayer == player)
			{
				return true;
			}
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_waterPressureSuccess (obj_id player, obj_id npc)
{
	if(!hasObjVar(player, "death_watch.drill_03"))
	{
		return false;
	}
	if(hasObjVar(player, "death_watch.water_pressure_success") && !hasObjVar(player, "death_watch.medicine_kill"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_waterPressureSuccessKill (obj_id player, obj_id npc)
{
	if(!hasObjVar(player, "death_watch.drill_03"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.water_pressure_success") && hasObjVar(player, "death_watch.medicine_kill"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_getMoreOreNotReady (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_completed"))
	{
		int comTime = getIntObjVar(player, "death_watch.drill_completed");
		int curTime = getGameTime();
		
		if (curTime < comTime + 172800)
		{
			return true;
		}
	}
	
	if(hasObjVar(player, "death_watch.drill_kill"))
	{
		int killTime = getIntObjVar(player, "death_watch.drill_kill");
		int curTime = getGameTime();
		
		if (curTime < killTime + 269200)
		{
			return true;
		}
	}
	return false;	
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_getMoreOreReady (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_completed"))
	{
		int comTime = getIntObjVar(player, "death_watch.drill_completed");
		int curTime = getGameTime();
		
		if (curTime > comTime + 172800)
		{
			return true;
		}
	}
	
	if(hasObjVar(player, "death_watch.drill_kill"))
	{
		int killTime = getIntObjVar(player, "death_watch.drill_kill");
		int curTime = getGameTime();
		
		if (curTime > killTime + 269200)
		{
			return true;
		}
	}
	return false;	
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_waterPressureFail (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_completed") || hasObjVar(player, "death_watch.drill_kill"))
	{
		return false;
	}
	
	if(hasObjVar(player, "death_watch.water_pressure_failed") || hasObjVar(player, "death_watch.drill_03"))
	{
		obj_id structure = getTopMostContainer (npc);
	
		if(hasObjVar(structure, "death_watch.water_pressure_mission"))
		{	
			return false;
		}
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_waterPressureBusy (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	
	if(hasObjVar(structure, "death_watch.water_pressure_mission"))
	{
		obj_id oldPlayer = getObjIdObjVar(structure, "death_watch.water_pressure_mission");
		if (oldPlayer != player)
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_haldoFailed (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	
	if(hasObjVar(player, "death_watch.drill_01"))
	{
		if(!hasObjVar(structure, "death_watch.haldo"))
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_foreman_condition_noInvRoom (obj_id player, obj_id npc)
{
	boolean hasNoInvRoom = false;
	obj_id playerInv = utils.getInventoryContainer(player);
	if ( isIdValid(playerInv) )
	{
		int free_space = getVolumeFree(playerInv);
		if (free_space < 1 )
		{
			hasNoInvRoom = true;
		}
	}
	return hasNoInvRoom;
}

// ======================================================================
// Script Actions
// ======================================================================

void death_watch_foreman_action_helpHaldo (obj_id player, obj_id npc)
{	
	setObjVar(player, "death_watch.drill_01", 1);
	
	dictionary params = new dictionary();
	params.put("player", player);
	messageTo(npc, "handleSpawnHaldo", params, 1f, false);	
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_cleanBattery (obj_id player, obj_id npc)
{
	removeObjVar(player, "death_watch.drill_01");
	setObjVar(player, "death_watch.drill_02", 1);
	return;
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_takeBattery (obj_id player, obj_id npc)
{
	obj_id[] objContents = utils.getContents(player, true);

	if( objContents != null )
	{
		for( int intI = 0; intI<objContents.length; intI++ )
		{
			string strItemTemplate = getTemplateName(objContents[intI]);
			if( strItemTemplate=="object/tangible/dungeon/death_watch_bunker/drill_battery_clean.iff")
			{
				obj_id battery = objContents[intI];
				destroyObject(battery);
			}
		}
	}
	removeObjVar(player, "death_watch.drill_02");
	setObjVar(player, "death_watch.drill_03", 1);
	return;
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_startWaterPressure (obj_id player, obj_id npc)
{
	setObjVar(player, "death_watch.water_pressure", 1);
	setObjVar(npc, "death_watch.start_water_pressure", 1);
	
	obj_id structure = player_structure.getStructure(player);
	if ( !isIdValid(structure))
	{
		return;
	}
	
	setObjVar(structure, "death_watch.water_pressure_mission", player);
	messageTo(structure, "handleWaterPumpReset", null, 1f, false);
	return;
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_finishMission (obj_id player, obj_id npc)
{
	int time = getGameTime();
	
	if(hasObjVar(player, "death_watch.medicine_kill"))
	{
		removeObjVar(player, "death_watch.medicine_kill");
		removeObjVar(player, "death_watch.drill_03");
		removeObjVar(player, "death_watch.water_pressure_success");
		setObjVar(player, "death_watch.drill_kill", time);
	}
	else
	{
		removeObjVar(player, "death_watch.medicine_success");
		removeObjVar(player, "death_watch.drill_03");
		removeObjVar(player, "death_watch.water_pressure_success");
		setObjVar(player, "death_watch.drill_completed", time);
	}
	
	obj_id playerInv = getObjectInSlot( player, "inventory" );
	if(isIdValid(playerInv))
	{
		obj_id item = createObject( "object/tangible/loot/dungeon/death_watch_bunker/mining_drill_reward.iff", playerInv, "" );
	}
	return;	
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_giveReward (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.drill_completed"))
	{
		int curTime = getGameTime();
		setObjVar(player, "death_watch.drill_completed", curTime);
	}
	else if (hasObjVar(player, "death_watch.drill_kill"))
	{
		int curTime = getGameTime();
		setObjVar(player, "death_watch.drill_kill", curTime);
	}
	
	obj_id playerInv = getObjectInSlot( player, "inventory" );
	if(isIdValid(playerInv))
	{
		obj_id item = createObject( "object/tangible/loot/dungeon/death_watch_bunker/mining_drill_reward.iff", playerInv, "" );
	}
	return;
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_declineHaldo (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	obj_id haldo = getObjIdObjVar(structure, "death_watch.haldo");
	
	messageTo(haldo, "handleCrazedCleanup", null, 1f, false);
	return;	
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_declineWater (obj_id player, obj_id npc)
{
	obj_id structure = getTopMostContainer (npc);
	removeObjVar(player, "death_watch.water_pressure");
	removeObjVar(structure, "death_watch.water_pressure_mission");
	setObjVar(player, "death_watch.water_pressure_failed", 1);
	return;
}

// ----------------------------------------------------------------------

void death_watch_foreman_action_cleanOldPlayers (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch.water_pressure"))
	{
		removeObjVar(player, "death_watch.water_pressure");
	}
	return;
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int death_watch_foreman_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey, what are you doing down here? You shouldn't be walking around down here unless you are working or the Mandalorians authorized you to be here and you certainly don't have the look of a miner.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You work for the Mandalorians?
	if (response == "s_1c4d0bbb")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Work in the loosest sense of the word. Although we are not really getting a whole lot of work done at this moment.
			string_id message = new string_id (c_stringFile, "s_7a654750");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What sort of work are you doing?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why aren't you getting any work done?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7d65b570");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2de77a24");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 2);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have received authorization from the Mandalorians.
	if (response == "s_637e6c80")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah, yeah...whatever you say there pally. I wouldn't want to be in your shoes if the Mandalorians catch you down here bothering their miners.
			string_id message = new string_id (c_stringFile, "s_81b8b95b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Don't worry about me and the Mandalorians. I can handle them.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: So what are you all doing down here?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_57097d43");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7d2eea07");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Work in the loosest sense of the word. Although we are not really getting a whole lot of work done at this moment.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What sort of work are you doing?
	if (response == "s_7d65b570")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: We mine for the alum that the Mandalores use to make their armor. Basically, we get to work down in these nasty caves all day long so the Mandalorians can look nice.
			string_id message = new string_id (c_stringFile, "s_dd6f26cc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds fun. But didn't you say you weren't getting much done?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_82599d96");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why aren't you getting any work done?
	if (response == "s_2de77a24")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Its this blasted laser they have us working with. Dumb thing never works right and then when we finally did get it working again, Haldo went off his rocker, ripped it's battery out, and took off with it.
			string_id message = new string_id (c_stringFile, "s_ac0e598b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Haldo? Who is Haldo and why would he take the battery?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Sounds to me like you should be happy your not working.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_42");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_dc1d4717");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We mine for the alum that the Mandalores use to make their armor. Basically, we get to work down in these nasty caves all day long so the Mandalorians can look nice.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds fun. But didn't you say you weren't getting much done?
	if (response == "s_82599d96")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's this blasted laser they have us working with. Dumb thing never works right and then when we finally did get it working again, Haldo went off his rocker, ripped its battery out, and took off with it.
			string_id message = new string_id (c_stringFile, "s_1fe41c46");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Haldo? Who is Haldo and why would he take the battery?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Sounds to me like you should be happy you're not working.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_687ef712");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_968923c1");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's this blasted laser they have us working with. Dumb thing never works right and then when we finally did get it working again, Haldo went off his rocker, ripped its battery out, and took off with it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Haldo? Who is Haldo and why would he take the battery?
	if (response == "s_687ef712")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Haldo was one of the men on my crew. My guess is that his rebreather wasn't working properly and he breathed too much of the alum fumes. Blasted air vents haven't been working right either, so we have been using our masks a lot.
			string_id message = new string_id (c_stringFile, "s_c2d12633");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Maybe I can help you track down Haldo.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Have you sent anyone out to try to find Haldo?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8bbe4b84");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_19ecd0cd");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds to me like you should be happy you're not working.
	if (response == "s_968923c1")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah right. The Mandalorains are expecting their ore and they don't much like excuses. If we can't get this drill back online and get back on schedule...well lets just say I prefer to it not coming to that.
			string_id message = new string_id (c_stringFile, "s_b75a73ed");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So who is this Haldo?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58a87fe");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Haldo was one of the men on my crew. My guess is that his rebreather wasn't working properly and he breathed too much of the alum fumes. Blasted air vents haven't been working right either, so we have been using our masks a lot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Maybe I can help you track down Haldo.
	if (response == "s_8bbe4b84")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: That would be a lifesaver. No one else is willing to go out and try to find him. Guys who get hit with alum sickness generally are unstable and sometimes can be quite dangerous.
			string_id message = new string_id (c_stringFile, "s_471cd71d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: If he is sick is there anyway to help him?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: So I will have to take the battery from him by force?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2236f9d7");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1265571c");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Have you sent anyone out to try to find Haldo?
	if (response == "s_19ecd0cd")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: I asked for volunteers but no one was willing to go search. Not that I blame them, I don't even want to go out and try to find him. People with alum sickness become real messed up in the head. You never know what they are going to do. A lot of times they get really violent.
			string_id message = new string_id (c_stringFile, "s_645da2b5");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Maybe I can help you track down Haldo.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_35");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That would be a lifesaver. No one else is willing to go out and try to find him. Guys who get hit with alum sickness generally are unstable and sometimes can be quite dangerous.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: If he is sick is there anyway to help him?
	if (response == "s_2236f9d7")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah, well there is a cure. We would have gone and got it, but the Mandalorians don't much care for us wandering around when we are supposed to be working, so none of us have gone up to get it.
			string_id message = new string_id (c_stringFile, "s_45d9624a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where can I find this cure?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6c1f32dd");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So I will have to take the battery from him by force?
	if (response == "s_1265571c")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hey now! I didn't say anything about using force on him. He is sick and there is a cure up in the medical lab. Granted there have been a few cases where alum sickness will make a person so demented that they can't come back, but Haldo has only been ill for a little while.
			string_id message = new string_id (c_stringFile, "s_c7f1e2ee");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where can I find this cure if I decide to help out?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f73c5ae7");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yeah, well there is a cure. We would have gone and got it, but the Mandalorians don't much care for us wandering around when we are supposed to be working, so none of us have gone up to get it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where can I find this cure?
	if (response == "s_6c1f32dd")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: It is located upstairs in the medical lab. One of the medical droids should be able to give it to you. They don't require any special code or anything to help you out. At least they didn't last time I used them, but the Mandalorians don't really consult us when they make changes to things around here.
			string_id message = new string_id (c_stringFile, "s_d1b18b50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok I will go see what I can do for your co-worker.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am sorry but I don't really have time to help your sick co-worker.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ce027a15");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71ad5afa");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is located upstairs in the medical lab. One of the medical droids should be able to give it to you. They don't require any special code or anything to help you out. At least they didn't last time I used them, but the Mandalorians don't really consult us when they make changes to things around here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok I will go see what I can do for your co-worker.
	if (response == "s_ce027a15")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_helpHaldo (player, npc);

			//-- NPC: That is the best news that I have heard all day. If you get that battery come on back to me and I will see about getting this drill back online.
			string_id message = new string_id (c_stringFile, "s_b7c0824");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am sorry but I don't really have time to help your sick co-worker.
	if (response == "s_71ad5afa")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: That is pretty much what I expected. I would have been shocked if a complete stranger such as yourself offered to help us out.
			string_id message = new string_id (c_stringFile, "s_f79fa021");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey now! I didn't say anything about using force on him. He is sick and there is a cure up in the medical lab. Granted there have been a few cases where alum sickness will make a person so demented that they can't come back, but Haldo has only been ill for a little while.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where can I find this cure if I decide to help out?
	if (response == "s_f73c5ae7")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: It is located upstairs in the medical lab. One of the medical droids should be able to give it to you. They don't require any special code or anything to help you out. At least they didn't last time I used them but the Mandalorians don't really consult us when they make changes to things around here.
			string_id message = new string_id (c_stringFile, "s_44557f4a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok I will go see what I can do for your co-worker.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am sorry but I don't really have time to help your sick co-worker.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_26");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_29");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is located upstairs in the medical lab. One of the medical droids should be able to give it to you. They don't require any special code or anything to help you out. At least they didn't last time I used them but the Mandalorians don't really consult us when they make changes to things around here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok I will go see what I can do for your co-worker.
	if (response == "s_26")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_helpHaldo (player, npc);

			//-- NPC: That is the best news that I have heard all day. If you get that battery, come on back to me and I will see about getting this drill back online.
			string_id message = new string_id (c_stringFile, "s_f4fd5da3");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am sorry but I don't really have time to help your sick co-worker.
	if (response == "s_29")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: That is pretty much what I expected. I would have been shocked if a complete stranger such as yourself offered to help us out.
			string_id message = new string_id (c_stringFile, "s_31");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I asked for volunteers but no one was willing to go search. Not that I blame them, I don't even want to go out and try to find him. People with alum sickness become real messed up in the head. You never know what they are going to do. A lot of times they get really violent.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Maybe I can help you track down Haldo.
	if (response == "s_35")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: That would be a lifesaver. No one else is willing to go out and try to find him. Guys who get hit with alum sickness generally are unstable and sometimes can be quite dangerous.
			string_id message = new string_id (c_stringFile, "s_471cd71d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: If he is sick is there anyway to help him?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: So I will have to take the battery from him by force?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2236f9d7");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1265571c");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yeah right. The Mandalorains are expecting their ore and they don't much like excuses. If we can't get this drill back online and get back on schedule...well lets just say I prefer to it not coming to that.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So who is this Haldo?
	if (response == "s_58a87fe")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Haldo was one of the men on my crew. My guess is that his rebreather wasn't working properly and he breathed too much of the alum fumes. Blasted air vents haven't been working right either, so we have been using our masks a lot.
			string_id message = new string_id (c_stringFile, "s_c2d12633");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Maybe I can help you track down Haldo.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Have you sent anyone out to try to find Haldo?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8bbe4b84");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_19ecd0cd");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Its this blasted laser they have us working with. Dumb thing never works right and then when we finally did get it working again, Haldo went off his rocker, ripped it's battery out, and took off with it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Haldo? Who is Haldo and why would he take the battery?
	if (response == "s_42")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Haldo was one of the men on my crew. My guess is that his rebreather wasn't working properly and he breathed too much of the alum fumes. Blasted air vents haven't been working right either, so we have been using our masks a lot.
			string_id message = new string_id (c_stringFile, "s_c2d12633");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Maybe I can help you track down Haldo.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Have you sent anyone out to try to find Haldo?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8bbe4b84");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_19ecd0cd");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds to me like you should be happy your not working.
	if (response == "s_dc1d4717")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess it isn't that bad. The Mandalorians don't pay us a whole lot but they generally don't directly mistreat any of us unless we do something to make them mad...which doesn't seem that hard to do. Hmmmm...now that I think about it this isn't the best life but it is better then telling them we quit.
			string_id message = new string_id (c_stringFile, "s_e83ca277");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So who is this Haldo guy who ran off with your battery?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4e099c6a");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I guess it isn't that bad. The Mandalorians don't pay us a whole lot but they generally don't directly mistreat any of us unless we do something to make them mad...which doesn't seem that hard to do. Hmmmm...now that I think about it this isn't the best life but it is better then telling them we quit.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So who is this Haldo guy who ran off with your battery?
	if (response == "s_4e099c6a")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Haldo was one of the men on my crew. My guess is that his rebreather wasn't working properly and he breathed too much of the alum fumes. Blasted air vents haven't been working right either, so we have been using our masks a lot.
			string_id message = new string_id (c_stringFile, "s_c2d12633");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Maybe I can help you track down Haldo.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Have you sent anyone out to try to find Haldo?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8bbe4b84");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_19ecd0cd");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yeah, yeah...whatever you say there pally. I wouldn't want to be in your shoes if the Mandalorians catch you down here bothering their miners.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't worry about me and the Mandalorians. I can handle them.
	if (response == "s_57097d43")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: You're braver then I will ever be. But if you really are that tough, maybe you would like to help recover our drill battery that Haldo ran off with?
			string_id message = new string_id (c_stringFile, "s_6d069da0");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who is this Haldo fellow?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't really have time to rescue your battery.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f2b532b6");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_baac9005");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So what are you all doing down here?
	if (response == "s_7d2eea07")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: We mine for the alum that the Mandalores use to make their armor. Basically, we get to work down in these nasty caves all day long so the Mandalorians can look nice.
			string_id message = new string_id (c_stringFile, "s_dd6f26cc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds fun. But didn't you say you weren't getting much done?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_82599d96");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're braver then I will ever be. But if you really are that tough, maybe you would like to help recover our drill battery that Haldo ran off with?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who is this Haldo fellow?
	if (response == "s_f2b532b6")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Haldo was one of the men on my crew. My guess is that his rebreather wasn't working properly and he breathed too much of the alum fumes. Blasted air vents haven't been working right either, so we have been using our masks a lot.
			string_id message = new string_id (c_stringFile, "s_c2d12633");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Maybe I can help you track down Haldo.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Have you sent anyone out to try to find Haldo?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8bbe4b84");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_19ecd0cd");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time to rescue your battery.
	if (response == "s_baac9005")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: That is pretty much what I expected. I would have been shocked if a complete stranger such as yourself offered to help us out.
			string_id message = new string_id (c_stringFile, "s_31");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have you managed to find Haldo yet? We really need that battery back before the Mandalorians come down here to check up on our progress.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet, but I am still looking for him.
	if (response == "s_c825f420")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ok, please hurry. I am sure that we don't have a whole lot of time left. Once you get the battery come back to me as quick as you can.
			string_id message = new string_id (c_stringFile, "s_fb5cf4cd");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time to deal with this right now.
	if (response == "s_54ee97f2")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_declineHaldo (player, npc);

			//-- NPC: Yeah, well I guess it was to much to ask of a complete stranger but I was hoping that it would all work out. Wish us luck because we are going to need it.
			string_id message = new string_id (c_stringFile, "s_d8f6c63f");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thank you for helping Haldo and getting the battery back for us. Now we can get back to....oh no! The battery's connections are all covered with dirt and grime. Haldo must have got them dirty after he took it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What happens if the battery connections are dirty?
	if (response == "s_bdb717fb")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: We won't get a good solid connection and the drill won't fire is what will happen. I hate to ask but could you perhaps take this battery over to the workshop and have one of treadwell clean it up?
			string_id message = new string_id (c_stringFile, "s_9cf7119e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, I will come back to you as soon as I get it cleaned.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Can't you have one of your other guys take care of this?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_dd657c44");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f7962ef3");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We won't get a good solid connection and the drill won't fire is what will happen. I hate to ask but could you perhaps take this battery over to the workshop and have one of treadwell clean it up?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, I will come back to you as soon as I get it cleaned.
	if (response == "s_dd657c44")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_cleanBattery (player, npc);

			//-- NPC: You know I can't thank you enough. Without your help there is no way we could get this job completed on time.
			string_id message = new string_id (c_stringFile, "s_63fae5b4");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can't you have one of your other guys take care of this?
	if (response == "s_f7962ef3")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well you see the problem is the Mandalorians have been monitoring our use of workshop. If one of us goes, they will ask why and then find out about Haldo. If you go, then they will just know a stranger has been in here. Since they will most likely try to kill you on sight, I figured there wouldn't be any harm done.
			string_id message = new string_id (c_stringFile, "s_51b7892e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: In an odd sort of way, that makes sense. Ok, I will do it.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks, I think I will avoid the workshop if it is monitored.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4d8102d5");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a618b93a");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well you see the problem is the Mandalorians have been monitoring our use of workshop. If one of us goes, they will ask why and then find out about Haldo. If you go, then they will just know a stranger has been in here. Since they will most likely try to kill you on sight, I figured there wouldn't be any harm done.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: In an odd sort of way, that makes sense. Ok, I will do it.
	if (response == "s_4d8102d5")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_cleanBattery (player, npc);

			//-- NPC: I figured you would be up for that whole danger thing. Once the treadwell has cleaned the battery, come on back to me so we can get that battery installed back into the drill.
			string_id message = new string_id (c_stringFile, "s_787e689e");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks, I think I will avoid the workshop if it is monitored.
	if (response == "s_a618b93a")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: That is up to you. If you change your mind come on back.
			string_id message = new string_id (c_stringFile, "s_31e8b478");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have you managed to get that battery cleaned yet?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet, but I will get this battery cleaned soon.
	if (response == "s_145fd34")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ok, please hurry because the Mandalorians will be wondering where their ore is shortly.
			string_id message = new string_id (c_stringFile, "s_3b67f1eb");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time for this right now, sorry.
	if (response == "s_3055077f")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well that battery doesn't really do us alot of good in its current state. Why don't you hold onto it and if you do get a chance run it over to the workshop and get it cleaned. We would really appreciate it.
			string_id message = new string_id (c_stringFile, "s_579c9bc5");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch33 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I guess I should thank you for getting us the battery back but you didn't have to kill Haldo. He was sick in the head from the fumes and the medicine from the medical droid could have cured him.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You wanted the battery back and I got it back for you.
	if (response == "s_d62e85a9")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah, I suppose you did. Let me take a look at it. Oh no, this battery isn't going to do us any good. Look here all the connections on it are covered with dirt and grime. Now it is going to have to be cleaned off.
			string_id message = new string_id (c_stringFile, "s_9b4dd6c7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How do you get it cleaned off?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5dbddef");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yeah, I suppose you did. Let me take a look at it. Oh no, this battery isn't going to do us any good. Look here all the connections on it are covered with dirt and grime. Now it is going to have to be cleaned off.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do you get it cleaned off?
	if (response == "s_5dbddef")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Could you do us one more favor and take this battery over to the workshop. The treadwell in there can clean it off without any problems.
			string_id message = new string_id (c_stringFile, "s_d1eff807");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok, I will take it over to the workshop for you.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why don't one of you go take it to the workshop?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b5a845f9");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_728cbacc");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 35);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch35 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Could you do us one more favor and take this battery over to the workshop. The treadwell in there can clean it off without any problems.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok, I will take it over to the workshop for you.
	if (response == "s_b5a845f9")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_cleanBattery (player, npc);

			//-- NPC: Just speak to the treadwell when you are in there and he will take care of the dirty battery. Oh and try not to kill him while you are there. We sort of need him for repairs around this place.
			string_id message = new string_id (c_stringFile, "s_bc5213a");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why don't one of you go take it to the workshop?
	if (response == "s_728cbacc")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: I would love to but the Mandalorians keep track of who comes and goes from the workshop. If one of us goes in they will ask why and I would rather they didn't know about the whole Haldo incident. Since you are a stranger they will just correctly assume you are an intruder and try to kill you...which they probably have been doing anyways.
			string_id message = new string_id (c_stringFile, "s_23237572");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Good point. Ok I will take the battery to the workshop.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't really have time for this right now, sorry.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6204ccac");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_85");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 37);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I would love to but the Mandalorians keep track of who comes and goes from the workshop. If one of us goes in they will ask why and I would rather they didn't know about the whole Haldo incident. Since you are a stranger they will just correctly assume you are an intruder and try to kill you...which they probably have been doing anyways.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Good point. Ok I will take the battery to the workshop.
	if (response == "s_6204ccac")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_cleanBattery (player, npc);

			//-- NPC: Just speak to the treadwell when you are in there and he will take care of the dirty battery. Oh and try not to kill him while you are there. We sort of need him for repairs around this place.
			string_id message = new string_id (c_stringFile, "s_bc5213a");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time for this right now, sorry.
	if (response == "s_85")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well that battery doesn't really do us a lot of good in its current state. Why don't you hold onto it and if you do get a chance run it over to the workshop and get it cleaned. We would really appreciate it.
			string_id message = new string_id (c_stringFile, "s_87");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey, you're back. I was sort of half expecting you not to return. Oh yeah, this is excellent. The battery is clean and ready to be installed in the drill. Unfortunately there is one other issue that we are having.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let me guess. It's something that your guys can't do either.
	if (response == "s_7fe1c6d7")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: No need to be sarcastic. The Mandalorians keep us under a pretty tight watch down here. They don't really trust anyone who isn't Mandalorian and then they will only partially trust you.
			string_id message = new string_id (c_stringFile, "s_3f363bf3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is the other problem with the drill?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44bb7cbc");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 40);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is the other problem with the drill?
	if (response == "s_93")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: The drill uses a liquid coolant system in order to keep it from overheating and exploding. Well the problem is that we are not getting any pressure down here so if we turn on the drill...BOOM!
			string_id message = new string_id (c_stringFile, "s_286d283f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you need in order to get water pressure down here?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: You are still using liquid coolant for you laser drill?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83d1549d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b491aba5");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 41);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch40 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No need to be sarcastic. The Mandalorians keep us under a pretty tight watch down here. They don't really trust anyone who isn't Mandalorian and then they will only partially trust you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is the other problem with the drill?
	if (response == "s_44bb7cbc")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: The drill uses a liquid coolant system in order to keep it from overheating and exploding. Well the problem is that we are not getting any pressure down here so if we turn on the drill...BOOM!
			string_id message = new string_id (c_stringFile, "s_286d283f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you need in order to get water pressure down here?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: You are still using liquid coolant for you laser drill?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83d1549d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b491aba5");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 41);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch41 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The drill uses a liquid coolant system in order to keep it from overheating and exploding. Well the problem is that we are not getting any pressure down here so if we turn on the drill...BOOM!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you need in order to get water pressure down here?
	if (response == "s_83d1549d")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Upstairs there is a pump room. There are four pumps that all need to be on in order to get the water down to us. Unfortunately the circuit breakers on those things are all ancient and trip at the slightest surge. If you could maybe go up there and turn them all on for us I know we could get underway.
			string_id message = new string_id (c_stringFile, "s_e5e9e886");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok fine I will do this for you but you are going to owe me.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't really have time for this right now, sorry.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d4b1da9f");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You are still using liquid coolant for you laser drill?
	if (response == "s_b491aba5")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's old technology. The Mandalorians don't exactly splurge on mining equipment. In fact if you haven't noticed already nothing around here is exactly in tip top shape.
			string_id message = new string_id (c_stringFile, "s_8deeb761");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok fine I will do this for you but you are going to owe me.
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't really have time for this right now, sorry.
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_107");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_113");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Upstairs there is a pump room. There are four pumps that all need to be on in order to get the water down to us. Unfortunately the circuit breakers on those things are all ancient and trip at the slightest surge. If you could maybe go up there and turn them all on for us I know we could get underway.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok fine I will do this for you but you are going to owe me.
	if (response == "s_d4b1da9f")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition_waterPressureStartnoKill (player, npc))
		{
			death_watch_foreman_action_startWaterPressure (player, npc);

			//-- NPC: Deal. Now listen those pumps can be tricky. Generally when you trip one of the valves it causes the one or ones next to it on the circuit to flip as well.  You will have to play with it for a while in order to get them all online. Also we really don't have a lot of time so if you are not back soon I am going to have to see if there is anything else I can do to get it on.
			string_id message = new string_id (c_stringFile, "s_262e7b86");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (death_watch_foreman_condition_waterPressureStartKill (player, npc))
		{
			death_watch_foreman_action_startWaterPressure (player, npc);

			//-- NPC: Deal. Now listen those pumps can be tricky. Generally when you trip one of the valves it causes the one or ones next to it on the circuit to flip as well.  You will have to play with it for a while in order to get them all online. There isn't much time...oh yeah, and try not to destroy the pumps while you are at it.
			string_id message = new string_id (c_stringFile, "s_8405256c");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time for this right now, sorry.
	if (response == "s_101")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah, well I guess it was to much to ask of a complete stranger but I was hoping that it would all work out. Wish us luck because we are going to need it.
			string_id message = new string_id (c_stringFile, "s_103");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's old technology. The Mandalorians don't exactly splurge on mining equipment. In fact if you haven't noticed already nothing around here is exactly in tip top shape.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok fine I will do this for you but you are going to owe me.
	if (response == "s_107")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition_waterPressureStartnoKill (player, npc))
		{
			death_watch_foreman_action_startWaterPressure (player, npc);

			//-- NPC: Deal. Now listen those pumps can be tricky. Generally when you trip one of the valves it causes the one or ones next to it on the circuit to flip as well.  You will have to play with it for a while in order to get them all online. Also we really don't have a lot of time so if you are not back soon I am going to have to see if there is anything else I can do to get it on.
			string_id message = new string_id (c_stringFile, "s_109");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (death_watch_foreman_condition_waterPressureStartKill (player, npc))
		{
			death_watch_foreman_action_startWaterPressure (player, npc);

			//-- NPC: Deal. Now listen those pumps can be tricky. Generally when you trip one of the valves it causes the one or ones next to it on the circuit to flip as well.  You will have to play with it for a while in order to get them all online. There isn't much time...oh yeah, and try not to destroy the pumps while you are at it.
			string_id message = new string_id (c_stringFile, "s_111");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time for this right now, sorry.
	if (response == "s_113")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah, well I guess it was to much to ask of a complete stranger but I was hoping that it would all work out. Wish us luck because we are going to need it.
			string_id message = new string_id (c_stringFile, "s_115");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch50 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey you are back. I was sort of half expecting you not to return. Oh yeah, this is excellent. The battery is clean and ready to be installed in the drill. And you didn't destroy the treadwell...that's a plus. Unfortunately there is one other issue that we are having.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let me guess. It is something that your guys can't do either.
	if (response == "s_a33b6055")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: No need to be sarcastic. The Mandalorians keep us under a pretty tight watch down here. They don't really trust anyone who isn't mandalorian and then they will only partially trust you.
			string_id message = new string_id (c_stringFile, "s_5c4119d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is the other problem with the drill?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_120");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 51);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is the other problem with the drill?
	if (response == "s_122")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: The drill uses a liquid coolant system in order to keep it from overheating and exploding. Well the problem is that we are not getting any pressure down here so if we turn on the drill...BOOM!
			string_id message = new string_id (c_stringFile, "s_286d283f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you need in order to get water pressure down here?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: You are still using liquid coolant for you laser drill?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83d1549d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b491aba5");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 41);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No need to be sarcastic. The Mandalorians keep us under a pretty tight watch down here. They don't really trust anyone who isn't mandalorian and then they will only partially trust you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is the other problem with the drill?
	if (response == "s_120")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: The drill uses a liquid coolant system in order to keep it from overheating and exploding. Well the problem is that we are not getting any pressure down here so if we turn on the drill...BOOM!
			string_id message = new string_id (c_stringFile, "s_286d283f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you need in order to get water pressure down here?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: You are still using liquid coolant for you laser drill?
			boolean hasResponse1 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83d1549d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b491aba5");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 41);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What are you doing back here. We still don't have any water pressure down here. I am telling you that we don't have very much time left.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok, cool your jets. I am on it.
	if (response == "s_9bea7011")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Once you get those pumps back online come on back and we will discuss what I owe you.
			string_id message = new string_id (c_stringFile, "s_6864fcd4");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really have time for this right now, sorry.
	if (response == "s_127")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_declineWater (player, npc);

			//-- NPC: Yeah, well I guess it was to much to ask of a complete stranger but I was hoping that it would all work out. Wish us luck because we are going to need it.
			string_id message = new string_id (c_stringFile, "s_129");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch55 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't know how you managed to get those pumps working without the Mandalorians taking you out. You must be a lot tougher then you look. I can't thank you enough for all your help.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How about a reward?
	if (response == "s_5597accd")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: We don't really have a whole lot to give but I will tell you what. I can sneak you some of this ore that we are mining. Now before you get all mad about just getting ore let me tell you that this is the stuff that the Mandalores use in their armor.
			string_id message = new string_id (c_stringFile, "s_b4feb773");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You make Mandalorian armor out of this ore?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ed0d4e5a");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 56);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch56 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We don't really have a whole lot to give but I will tell you what. I can sneak you some of this ore that we are mining. Now before you get all mad about just getting ore let me tell you that this is the stuff that the Mandalores use in their armor.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You make Mandalorian armor out of this ore?
	if (response == "s_ed0d4e5a")
	{
		//-- [NOTE] 
		if (!death_watch_foreman_condition_noInvRoom (player, npc))
		{
			death_watch_foreman_action_finishMission (player, npc);

			//-- NPC: Hey all I know is that this stuff is used in the making of the armor. They keep a pretty tight watch on how much of this stuff we mine, but I know I can sneak you some every now and again. Here you go. If you check back with me occasionally, I should be able to sneak you out some more. Not too often mind you, but I will do my best.
			string_id message = new string_id (c_stringFile, "s_18426338");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (death_watch_foreman_condition_noInvRoom (player, npc))
		{
			//-- NPC: This is the same ore that the Mandalores use to make their armor. I am willing to sneak you some but you are going to need to make some room in your inventory so I can.
			string_id message = new string_id (c_stringFile, "s_52f3e83e");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch59 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey you managed to get all of the pumps online and to my knowledge didn't destroy all of them in the process. That is surprising considering your track record for violence. Well a deal is a deal so tell you what I will get you some of this ore that we are mining.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I risked my life for some ore?
	if (response == "s_c04f0d0d")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hey it is not just any ore. This is the stuff that the Mandalorians use in their armor. They keep a pretty careful track of what we mine but I know that I can sneak you some of this stuff without them noticing it.
			string_id message = new string_id (c_stringFile, "s_95879f15");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You make Mandalorian armor out of this ore?
			boolean hasResponse0 = false;
			if (death_watch_foreman_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_140");

				utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 60);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch60 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey it is not just any ore. This is the stuff that the Mandalorians use in their armor. They keep a pretty careful track of what we mine but I know that I can sneak you some of this stuff without them noticing it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You make Mandalorian armor out of this ore?
	if (response == "s_140")
	{
		//-- [NOTE] 
		if (!death_watch_foreman_condition_noInvRoom (player, npc))
		{
			death_watch_foreman_action_finishMission (player, npc);

			//-- NPC: Hey all I know is that this stuff is used in the making of the armor. They keep a pretty tight watch on how much of this stuff we mine, but I know I can sneak you some every now and again. Here you go. If you check back with me occasionally, I should be able to sneak you out some more. Not too often mind you, but I will do my best.
			string_id message = new string_id (c_stringFile, "s_142");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (death_watch_foreman_condition_noInvRoom (player, npc))
		{
			//-- NPC: This is the same ore that the Mandalores use to make their armor. I am willing to sneak you some but you are going to need to make some room in your inventory so I can.
			string_id message = new string_id (c_stringFile, "s_144");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good to see you again my friend. I was able to secure some more of this ore for you. If you need some more check back with me later and maybe I can sneak some more out under the noses of the Mandalorians.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, I could really use some more of that.
	if (response == "s_dbf0d0f9")
	{
		//-- [NOTE] 
		if (!death_watch_foreman_condition_noInvRoom (player, npc))
		{
			death_watch_foreman_action_giveReward (player, npc);

			//-- NPC: Here you go.
			string_id message = new string_id (c_stringFile, "s_829888a9");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (death_watch_foreman_condition_noInvRoom (player, npc))
		{
			//-- NPC: You are going to have to clear out some inventory space in order for me to give you any more of this ore.
			string_id message = new string_id (c_stringFile, "s_5af847c7");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch68 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So you are back? We still don't have any water pressure down here maybe you would like to head back up and try again?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I will give it another shot.
	if (response == "s_e55f453d")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_startWaterPressure (player, npc);

			//-- NPC: Remember those pumps can be tricky. Generally when you trip one of the valves it causes the one or ones next to it on the circuit to flip as well.  You will have to play with it for a while in order to get them all online.
			string_id message = new string_id (c_stringFile, "s_6b8a415c");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks, I can't figure out how to get those pumps to work.
	if (response == "s_b99aaac2")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Choice is yours. We will figure out some other way to get them online I suppose.
			string_id message = new string_id (c_stringFile, "s_23cbff5d");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int death_watch_foreman_handleBranch72 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey you are back again. You know Haldo is still running around down here with our battery. Are you sure you don't want to give us a hand and try to get it back for us?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes I will see if I can find him for you.
	if (response == "s_26fa42a7")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			death_watch_foreman_action_helpHaldo (player, npc);

			//-- NPC: Great. Now remember there is some medicine in the medical lab that should be able to help him out. And once you get that battery bring it on back to me so we can get this drill working again.
			string_id message = new string_id (c_stringFile, "s_de774e37");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks, I can't look for him right now.
	if (response == "s_f501c596")
	{
		//-- [NOTE] 
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ok, well if you change your mind you know where I am.
			string_id message = new string_id (c_stringFile, "s_8f36c784");
			utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.death_watch_foreman");

	setCondition (self, CONDITION_CONVERSABLE);
	
	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	
	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.death_watch_foreman");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (death_watch_foreman_condition_startMission (player, npc))
	{
		//-- NPC: Hey, what are you doing down here? You shouldn't be walking around down here unless you are working or the Mandalorians authorized you to be here and you certainly don't have the look of a miner.
		string_id message = new string_id (c_stringFile, "s_8dc6968d");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You work for the Mandalorians?
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I have received authorization from the Mandalorians.
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1c4d0bbb");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_637e6c80");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 1);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_notCompleted (player, npc))
	{
		//-- NPC: Have you managed to find Haldo yet? We really need that battery back before the Mandalorians come down here to check up on our progress.
		string_id message = new string_id (c_stringFile, "s_4f17ac67");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Not yet, but I am still looking for him.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't really have time to deal with this right now.
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c825f420");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_54ee97f2");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 21);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_helpedHaldo (player, npc))
	{
		//-- NPC: Thank you for helping Haldo and getting the battery back for us. Now we can get back to....oh no! The battery's connections are all covered with dirt and grime. Haldo must have got them dirty after he took it.
		string_id message = new string_id (c_stringFile, "s_27b9acbc");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What happens if the battery connections are dirty?
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_bdb717fb");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 24);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_notCompletedBattery (player, npc))
	{
		//-- NPC: Have you managed to get that battery cleaned yet?
		string_id message = new string_id (c_stringFile, "s_7b9dc7c7");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Not yet, but I will get this battery cleaned soon.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't really have time for this right now, sorry.
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_145fd34");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3055077f");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 30);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_killedHaldo (player, npc))
	{
		//-- NPC: I guess I should thank you for getting us the battery back but you didn't have to kill Haldo. He was sick in the head from the fumes and the medicine from the medical droid could have cured him.
		string_id message = new string_id (c_stringFile, "s_3310d1b6");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You wanted the battery back and I got it back for you.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d62e85a9");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 33);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_batteryCleaned (player, npc))
	{
		death_watch_foreman_action_takeBattery (player, npc);

		//-- NPC: Hey, you're back. I was sort of half expecting you not to return. Oh yeah, this is excellent. The battery is clean and ready to be installed in the drill. Unfortunately there is one other issue that we are having.
		string_id message = new string_id (c_stringFile, "s_dd7c0dd3");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Let me guess. It's something that your guys can't do either.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: What is the other problem with the drill?
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_7fe1c6d7");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_93");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 39);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_batteryCleanedKill (player, npc))
	{
		death_watch_foreman_action_takeBattery (player, npc);

		//-- NPC: Hey you are back. I was sort of half expecting you not to return. Oh yeah, this is excellent. The battery is clean and ready to be installed in the drill. And you didn't destroy the treadwell...that's a plus. Unfortunately there is one other issue that we are having.
		string_id message = new string_id (c_stringFile, "s_f46d76f6");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Let me guess. It is something that your guys can't do either.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: What is the other problem with the drill?
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_a33b6055");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_122");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 50);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_notCompletedWater (player, npc))
	{
		//-- NPC: What are you doing back here. We still don't have any water pressure down here. I am telling you that we don't have very much time left.
		string_id message = new string_id (c_stringFile, "s_de4a182e");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Ok, cool your jets. I am on it.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't really have time for this right now, sorry.
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_9bea7011");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_127");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 52);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_waterPressureSuccess (player, npc))
	{
		//-- NPC: I don't know how you managed to get those pumps working without the Mandalorians taking you out. You must be a lot tougher then you look. I can't thank you enough for all your help.
		string_id message = new string_id (c_stringFile, "s_c1dc6296");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: How about a reward?
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5597accd");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 55);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_waterPressureSuccessKill (player, npc))
	{
		//-- NPC: Hey you managed to get all of the pumps online and to my knowledge didn't destroy all of them in the process. That is surprising considering your track record for violence. Well a deal is a deal so tell you what I will get you some of this ore that we are mining.
		string_id message = new string_id (c_stringFile, "s_1b208070");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I risked my life for some ore?
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c04f0d0d");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 59);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_getMoreOreNotReady (player, npc))
	{
		//-- NPC: Hey it is you again. Glad to see you are still breathing. If you have come looking for ore I am sorry but I can't sneak you out any right now. The Mandalorians are running inventory right now and will notice anything that is missing. Check back with me later.
		string_id message = new string_id (c_stringFile, "s_1d1d45a9");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_getMoreOreReady (player, npc))
	{
		//-- NPC: Good to see you again my friend. I was able to secure some more of this ore for you. If you need some more check back with me later and maybe I can sneak some more out under the noses of the Mandalorians.
		string_id message = new string_id (c_stringFile, "s_e1dd8e6e");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you, I could really use some more of that.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_dbf0d0f9");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 64);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_alreadyBeingHelped (player, npc))
	{
		//-- NPC: Another stranger? The Mandalorians must be really slacking on their defenses lately. Oh well, none of my business. I am sorry but I really have to get back to work right now, maybe I will have time to talk to you later.
		string_id message = new string_id (c_stringFile, "s_9e37f61f");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_waterPressureFail (player, npc))
	{
		//-- NPC: So you are back? We still don't have any water pressure down here maybe you would like to head back up and try again?
		string_id message = new string_id (c_stringFile, "s_4af1601a");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I will give it another shot.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: No thanks, I can't figure out how to get those pumps to work.
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_e55f453d");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_b99aaac2");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 68);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_waterPressureBusy (player, npc))
	{
		death_watch_foreman_action_cleanOldPlayers (player, npc);

		//-- NPC: Hey your back. I am sorry but right now we are having a bit of a crisis. I know I told you to hurry back but right now I simply don't have any time to talk to you. Could you please come back to me in a little while.
		string_id message = new string_id (c_stringFile, "s_d9db9b00");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_foreman_condition_haldoFailed (player, npc))
	{
		//-- NPC: Hey you are back again. You know Haldo is still running around down here with our battery. Are you sure you don't want to give us a hand and try to get it back for us?
		string_id message = new string_id (c_stringFile, "s_1511575f");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes I will see if I can find him for you.
		boolean hasResponse0 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: No thanks, I can't look for him right now.
		boolean hasResponse1 = false;
		if (death_watch_foreman_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_26fa42a7");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_f501c596");

			utils.setScriptVar (player, "conversation.death_watch_foreman.branchId", 72);

			npcStartConversation (player, npc, "death_watch_foreman", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "death_watch_foreman")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.death_watch_foreman.branchId");

	if (branchId == 1 && death_watch_foreman_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 2 && death_watch_foreman_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && death_watch_foreman_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && death_watch_foreman_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && death_watch_foreman_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && death_watch_foreman_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && death_watch_foreman_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && death_watch_foreman_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && death_watch_foreman_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && death_watch_foreman_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && death_watch_foreman_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && death_watch_foreman_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && death_watch_foreman_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && death_watch_foreman_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && death_watch_foreman_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && death_watch_foreman_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && death_watch_foreman_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && death_watch_foreman_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && death_watch_foreman_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && death_watch_foreman_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && death_watch_foreman_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 33 && death_watch_foreman_handleBranch33 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && death_watch_foreman_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 35 && death_watch_foreman_handleBranch35 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && death_watch_foreman_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && death_watch_foreman_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 40 && death_watch_foreman_handleBranch40 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 41 && death_watch_foreman_handleBranch41 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && death_watch_foreman_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && death_watch_foreman_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 50 && death_watch_foreman_handleBranch50 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && death_watch_foreman_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && death_watch_foreman_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 55 && death_watch_foreman_handleBranch55 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 56 && death_watch_foreman_handleBranch56 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 59 && death_watch_foreman_handleBranch59 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 60 && death_watch_foreman_handleBranch60 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && death_watch_foreman_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 68 && death_watch_foreman_handleBranch68 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 72 && death_watch_foreman_handleBranch72 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.death_watch_foreman.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

