// ======================================================================
//
// tatooine_rebel_tier4.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.skill;
include library.space_flags;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/tatooine_rebel_tier4";

// ======================================================================
// Script Conditions
// ======================================================================

boolean tatooine_rebel_tier4_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isWrongFaction (obj_id player, obj_id npc)
{
	//check the player has the correct novice skill box for this trainer
	return (!hasSkill(player,"pilot_rebel_navy_novice"));
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasCompletedTier3 (obj_id player, obj_id npc)
{
	return space_flags.hasCompletedTierThree(player);
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isOnMission (obj_id player, obj_id npc)
{
	return ( space_quest.hasQuest(player) );
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_faliedMissionOne (obj_id player, obj_id npc)
{
	if (
			( 
				space_quest.hasAbortedQuest ( player, "space_battle", "tatooine_rebel_tier4_1" ) ||
	   			space_quest.hasFailedQuest ( player, "space_battle", "tatooine_rebel_tier4_1" ) 
	   		)
	   		&&
	   			!space_quest.hasWonQuest ( player, "destroy_surpriseattack", "tatooine_rebel_tier4_1_c" )
	   	)
		return true;
	   	
	if ( 
			space_quest.hasAbortedQuest ( player, "patrol", "tatooine_rebel_tier4_1_b" ) ||
			space_quest.hasFailedQuest ( player, "patrol", "tatooine_rebel_tier4_1_b" ) 
		)
		return true;
		   
	if (
			space_quest.hasAbortedQuest ( player, "assassinate", "tatooine_rebel_tier4_1_a" ) ||
			space_quest.hasFailedQuest ( player, "assassinate", "tatooine_rebel_tier4_1_a" )
		)
		return true;

	if (
			space_quest.hasAbortedQuest ( player, "destroy_surpriseattack", "tatooine_rebel_tier4_1_c" ) ||
			space_quest.hasFailedQuest ( player, "destroy_surpriseattack", "tatooine_rebel_tier4_1_c" )
		)
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_failedMissionTwo (obj_id player, obj_id npc)
{
	if ( 
			( 
				space_quest.hasAbortedQuest ( player, "recovery", "tatooine_rebel_tier4_2" ) ||
	   			space_quest.hasFailedQuest ( player, "recovery", "tatooine_rebel_tier4_2" ) 
	   		)
	   		&&
	   			!space_quest.hasWonQuest ( player, "survival", "tatooine_rebel_tier4_2_b" )
	   	)
		return true;
	   	
	if ( 
			space_quest.hasAbortedQuest ( player, "survival", "tatooine_rebel_tier4_2_b" ) ||
			space_quest.hasFailedQuest ( player, "survival", "tatooine_rebel_tier4_2_b" ) 
		)
		return true;
		   
	if (
			space_quest.hasAbortedQuest ( player, "delivery", "tatooine_rebel_tier4_2_a" ) ||
			space_quest.hasFailedQuest ( player, "delivery", "tatooine_rebel_tier4_2_a" )
		)
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_failedMissionThree (obj_id player, obj_id npc)
{
	if ( 
			( 
				space_quest.hasAbortedQuest ( player, "space_battle", "tatooine_rebel_tier4_3" ) ||
	   			space_quest.hasFailedQuest ( player, "space_battle", "tatooine_rebel_tier4_3" ) 
	   		)
	   		&&
	   			!space_quest.hasWonQuest ( player, "assassinate", "tatooine_rebel_tier4_3_b" )
	   	)
		return true;
	   	
	if ( 
			space_quest.hasAbortedQuest ( player, "assassinate", "tatooine_rebel_tier4_3_b" ) ||
			space_quest.hasFailedQuest ( player, "assassinate", "tatooine_rebel_tier4_3_b" ) 
		)
		return true;
		   
	if (
			space_quest.hasAbortedQuest ( player, "assassinate", "tatooine_rebel_tier4_3_a" ) ||
			space_quest.hasFailedQuest ( player, "assassinate", "tatooine_rebel_tier4_3_a" )
		)
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_failedMissionFour (obj_id player, obj_id npc)
{
	if ( 
			( 
				space_quest.hasAbortedQuest ( player, "assassinate", "tatooine_rebel_tier4_4" ) ||
	   			space_quest.hasFailedQuest ( player, "assassinate", "tatooine_rebel_tier4_4" ) 
	   		)
	   		&&
	   			!space_quest.hasWonQuest ( player, "space_battle", "tatooine_rebel_tier4_4_b" )
	   	)
		return true;
	   	
	if ( 
			space_quest.hasAbortedQuest ( player, "space_battle", "tatooine_rebel_tier4_4_b" ) ||
			space_quest.hasFailedQuest ( player, "space_battle", "tatooine_rebel_tier4_4_b" ) 
		)
		return true;
		   
	if (
			space_quest.hasAbortedQuest ( player, "survival", "tatooine_rebel_tier4_4_a" ) ||
			space_quest.hasFailedQuest ( player, "survival", "tatooine_rebel_tier4_4_a" )
		)
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_failedMasterMission (obj_id player, obj_id npc)
{

	if ( space_quest.hasAbortedQuestRecursive( player, "destroy", "tatooine_rebel_master" ) ||
		 space_quest.hasFailedQuestRecursive( player, "destroy", "tatooine_rebel_master" ) )
		 return true;

	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isReadyForTraining (obj_id player, obj_id npc)
{
	//see if the player has NOT completed all of tier 4
	//AND has enough XP to buy a tier-4 skill
	if (tatooine_rebel_tier4_condition_hasCompletedTier4(player,npc))
		return false;//you're already done
		
	return ( space_quest.isPlayerQualifiedForSkill( player, "pilot_rebel_navy_starships_04" ) );
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasCompletedTier4 (obj_id player, obj_id npc)
{
	return space_flags.hasCompletedTierFour(player);
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasMasterSkill (obj_id player, obj_id npc)
{
	return (hasSkill( player, "pilot_rebel_navy_master" ));
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isGettingMissionOneReward (obj_id player, obj_id npc)
{
	if (space_quest.hasCompletedQuest( player, "destroy_surpriseattack", "tatooine_rebel_tier4_1_c" )||
		space_quest.hasCompletedQuest( player, "assassinate", "tatooine_rebel_tier4_1_a" ))
	{
		if	(space_quest.hasReceivedReward( player,  "space_battle", "tatooine_rebel_tier4_1" ))
			return false;
		else
			return true;
	}	
	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isGettingMissionTwoReward (obj_id player, obj_id npc)
{
	if (space_quest.hasCompletedQuest( player, "survival", "tatooine_rebel_tier4_2_b" )||
		space_quest.hasCompletedQuest( player, "delivery", "tatooine_rebel_tier4_2_a" ))
	{
		if	(space_quest.hasReceivedReward( player, "recovery", "tatooine_rebel_tier4_2" ))
			return false;
		else
			return true;
	}	
	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isGettingMissionThreeReward (obj_id player, obj_id npc)
{
	if (space_quest.hasCompletedQuest( player, "assassinate", "tatooine_rebel_tier4_3_b" )||
		space_quest.hasCompletedQuest( player, "assassinate", "tatooine_rebel_tier4_3_a" ))
	{
		if	(space_quest.hasReceivedReward( player, "space_battle", "tatooine_rebel_tier4_3" ))
			return false;
		else
			return true;
	}	
	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isGettingMissionFourReward (obj_id player, obj_id npc)
{
	if (space_quest.hasCompletedQuest( player, "space_battle", "tatooine_rebel_tier4_4_b" )||
		space_quest.hasCompletedQuest( player, "survival", "tatooine_rebel_tier4_4_a" ))
	{
		if	(space_quest.hasReceivedReward( player, "assassinate", "tatooine_rebel_tier4_4" ))
			return false;
		else
			return true;
	}	
	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isGettingMasterMissionReward (obj_id player, obj_id npc)
{
	if (!space_quest.hasCompletedQuestRecursive( player, "destroy", "tatooine_rebel_master" ))
		return false;//haven't completed it, so no reward
	
	//you've completed it, so you must be here for the reward:
	if (!space_quest.hasReceivedReward( player, "destroy", "tatooine_rebel_master" ))
		return true;
	else
		return false;	
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasDroid04 (obj_id player, obj_id npc)
{
	return hasSkill( player, "pilot_rebel_navy_droid_04" );
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasWeapon04 (obj_id player, obj_id npc)
{
	return hasSkill(player, "pilot_rebel_navy_weapons_04" );
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasProcedure04 (obj_id player, obj_id npc)
{
	return hasSkill( player, "pilot_rebel_navy_procedures_04" );
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasStarship04 (obj_id player, obj_id npc)
{
	return hasSkill( player, "pilot_rebel_navy_starships_04" );
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_onMyTrack (obj_id player, obj_id npc)
{
	return space_flags.isSpaceTrack(player, space_flags.REBEL_TATOOINE);
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_canFlyNonTrackDuty (obj_id player, obj_id npc)
{
	if(space_flags.hasCompletedTierThree(player) && !space_quest.hasQuest(player))
		return true;
		
	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_isPilot (obj_id player, obj_id npc)
{
	return space_flags.hasAnyPilotSkill(player);
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_readyForMissionOne (obj_id player, obj_id npc)
{
	if ( (hasSkill( player, "pilot_rebel_navy_starships_04" ) ||
		hasSkill( player, "pilot_rebel_navy_weapons_04" ) ||
		hasSkill( player, "pilot_rebel_navy_procedures_04" ) ||
		hasSkill( player, "pilot_rebel_navy_droid_04" )) && 
		space_flags.isSpaceTrack(player, space_flags.REBEL_TATOOINE) &&
		!space_quest.hasReceivedReward( player, "space_battle", "tatooine_rebel_tier4_1" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_readyForMissionTwo (obj_id player, obj_id npc)
{
	string[] skills = { "pilot_rebel_navy_starships_04", 
						"pilot_rebel_navy_weapons_04",
						"pilot_rebel_navy_procedures_04",
						"pilot_rebel_navy_droid_04" };
	int j = 0;
	for ( int i=0; i<skills.length; i++ )
	{
		if ( hasSkill( player, skills[i] ) )
			j++;
	}
	if (( j == 2 ) && space_flags.isSpaceTrack(player, space_flags.REBEL_TATOOINE) &&
	!space_quest.hasReceivedReward( player, "recovery", "tatooine_rebel_tier4_2" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_readyForMissionThree (obj_id player, obj_id npc)
{
	string[] skills = { "pilot_rebel_navy_starships_04", 
						"pilot_rebel_navy_weapons_04",
						"pilot_rebel_navy_procedures_04",
						"pilot_rebel_navy_droid_04" };
	int j = 0;
	for ( int i=0; i<skills.length; i++ )
	{
		if ( hasSkill( player, skills[i] ) )
			j++;
	}
	if (( j == 3 ) && space_flags.isSpaceTrack(player, space_flags.REBEL_TATOOINE) &&
	!space_quest.hasReceivedReward( player, "space_battle", "tatooine_rebel_tier4_3" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_readyForMissionFour (obj_id player, obj_id npc)
{
	string[] skills = { "pilot_rebel_navy_starships_04", 
						"pilot_rebel_navy_weapons_04",
						"pilot_rebel_navy_procedures_04",
						"pilot_rebel_navy_droid_04" };
	int j = 0;
	for ( int i=0; i<skills.length; i++ )
	{
		if ( hasSkill( player, skills[i] ) )
			j++;
	}
	if (( j == 4 ) && space_flags.isSpaceTrack(player, space_flags.REBEL_TATOOINE) &&
	!space_quest.hasReceivedReward( player, "assassinate", "tatooine_rebel_tier4_4" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_rebel_tier4_condition_hasMetMe (obj_id player, obj_id npc)
{
	return space_flags.hasSpaceFlag(player, "metTier4");
}

// ======================================================================
// Script Actions
// ======================================================================

void tatooine_rebel_tier4_action_grantMissionOne (obj_id player, obj_id npc)
{
	space_quest.clearQuestFlags( player, "patrol", "tatooine_rebel_tier4_1_b" );
	space_quest.clearQuestFlags( player, "assassinate", "tatooine_rebel_tier4_1_a" );
	space_quest.clearQuestFlags( player, "destroy_surpriseattack", "tatooine_rebel_tier4_1_c" );
	space_quest.grantQuest( player, "space_battle", "tatooine_rebel_tier4_1" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantMissionTwo (obj_id player, obj_id npc)
{
	space_quest.clearQuestFlags( player, "survival", "tatooine_rebel_tier4_2_b" );
	space_quest.clearQuestFlags( player, "delivery", "tatooine_rebel_tier4_2_a" );
	space_quest.grantQuest( player, "recovery", "tatooine_rebel_tier4_2" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantMissionThree (obj_id player, obj_id npc)
{
	space_quest.clearQuestFlags( player, "assassinate", "tatooine_rebel_tier4_3_b" );
	space_quest.clearQuestFlags( player, "assassinate", "tatooine_rebel_tier4_3_a" );
	space_quest.grantQuest( player, "space_battle", "tatooine_rebel_tier4_3" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantMissionFour (obj_id player, obj_id npc)
{
	space_quest.clearQuestFlags( player, "space_battle", "tatooine_rebel_tier4_4_b" );
	space_quest.clearQuestFlags( player, "survival", "tatooine_rebel_tier4_4_a" );
	space_quest.grantQuest( player, "assassinate", "tatooine_rebel_tier4_4" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantMasterMission (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "tatooine_rebel_master" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantDutyMissionOne (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy_duty", "tatooine_rebel_tier4_1" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantDutyMissionTwo (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "escort_duty", "tatooine_rebel_tier4_1" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantDutyMissionThree (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "recovery_duty", "tatooine_rebel_tier4_1" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_grantDutyMissionFour (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "rescue_duty", "tatooine_rebel_tier4_1" );
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_rewardForMissionOne (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "space_battle", "tatooine_rebel_tier4_1" ))
	{
		space_quest.giveReward( player, "space_battle", "tatooine_rebel_tier4_1", 10000, "object/tangible/ship/components/shield_generator/shd_mission_reward_rebel_taim_military_grade.iff" );
		factions.addFactionStanding( player, factions.FACTION_REBEL, 150.0f );
	}
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_rewardForMissionTwo (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "recovery", "tatooine_rebel_tier4_2" ))
	{
		space_quest.giveReward( player, "recovery", "tatooine_rebel_tier4_2", 10000, "object/tangible/ship/components/droid_interface/ddi_mission_reward_rebel_novaldex_low_latency.iff" );
		factions.addFactionStanding( player, factions.FACTION_REBEL, 150.0f );
	}
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_rewardForMissionThree (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "space_battle", "tatooine_rebel_tier4_3" ))
	{
		space_quest.giveReward( player, "space_battle", "tatooine_rebel_tier4_3", 10000, "object/tangible/ship/components/booster/bst_mission_reward_rebel_qualdex_halcyon.iff" );
		factions.addFactionStanding( player, factions.FACTION_REBEL, 150.0f );
	}
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_rewardForMissionFour (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "assassinate", "tatooine_rebel_tier4_4" ))
	{
		space_quest.giveReward( player, "assassinate", "tatooine_rebel_tier4_4", 10000, "object/tangible/ship/components/weapon/wpn_mission_reward_rebel_incom_tricannon.iff" );
		factions.addFactionStanding( player, factions.FACTION_REBEL, 150.0f );
	}
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_rewardForMasterMission (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "destroy", "tatooine_rebel_master" ))
	{
		space_quest.giveReward( player, "destroy", "tatooine_rebel_master", 5000 );
		grantSkill( player, "pilot_rebel_navy_master");
	}
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_buyWeaponSkill04 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_rebel_navy_weapons_04" );
	playMusic( player, "sound/music_themequest_acc_general.snd");

}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_buyStarshipsSkill04 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_rebel_navy_starships_04" );
	playMusic( player, "sound/music_themequest_acc_general.snd");

}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_buyDroidSkill04 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_rebel_navy_droid_04" );
	playMusic( player, "sound/music_themequest_acc_general.snd");

}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_buyProcedureSkill04 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_rebel_navy_procedures_04" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void tatooine_rebel_tier4_action_setMetMe (obj_id player, obj_id npc)
{
	space_flags.setSpaceFlag(player, "metTier4", true);
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int tatooine_rebel_tier4_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Eh? You don't fly for the Crimson Phoenix. What are you doing here?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm looking for missions.
	if (response == "s_d157e1de")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition_canFlyNonTrackDuty (player, npc))
		{
			//-- NPC: I can give you an elective duty task. If you're interested, I can give you a briefing?
			string_id message = new string_id (c_stringFile, "s_1338e704");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, please.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c82e9a2f");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Only your commanding officer can assign you a mission. Return to your unit.
			string_id message = new string_id (c_stringFile, "s_ae002d12");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can give you an elective duty task. If you're interested, I can give you a briefing?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, please.
	if (response == "s_c82e9a2f")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.
			string_id message = new string_id (c_stringFile, "s_4b3f09bc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_379");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 156);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You failed mission 1, do it over.
	//-- NPC: That's mission failure, soldier.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Requesting redeployment!
	if (response == "s_a95ef734")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Granted. 
			string_id message = new string_id (c_stringFile, "s_b0933679");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you transferring me out of this unit?
	if (response == "s_9fc24a78")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: Not yet. But you're on thin ice. Get back out there.
			string_id message = new string_id (c_stringFile, "s_afcb06fc");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You failed mission 2, do it over.
	//-- NPC: Where's that Imperial ship?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I haven't brought one down yet.
	if (response == "s_1678be5a")
	{
		doAnimationAction (player, "embarrassed");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: Don't talk to me until you've completed your mission.
			string_id message = new string_id (c_stringFile, "s_e2a4b15e");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We're trying, sir.
	if (response == "s_6912a453")
	{
		doAnimationAction (player, "nervous");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "threaten");

			//-- NPC: Well try harder! 
			string_id message = new string_id (c_stringFile, "s_18e57f03");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You failed mission 3, do it over.
	//-- NPC: Unacceptable, soldier.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I want to be a part of the Crimson Phoenix, sir.
	if (response == "s_8c5f29f4")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_on_dismissing");

			//-- NPC: It's not going to happen. Not with results like this. Get back out there and clean up that mess!
			string_id message = new string_id (c_stringFile, "s_45ae8603");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Requesting redeployment, sir!
	if (response == "s_63740522")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: I'm not so sure that's a good idea. I'll give you one more shot.
			string_id message = new string_id (c_stringFile, "s_f3bbd7e7");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You failed mission 4, do it over.
	//-- NPC: I thought you said you WANTED to be a part of the Crimson Phoenix.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I do, sir!
	if (response == "s_4479e343")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Well let's see some guts out  there! Get back in your ship! 
			string_id message = new string_id (c_stringFile, "s_71854a18");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sir, it won't happen again.
	if (response == "s_2022581b")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: See that it doesn't. Return to your ship and finish what you started.
			string_id message = new string_id (c_stringFile, "s_bbd20f83");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You have completed mission one and so here is your reward.
	//-- NPC: All soldiers receive duty pay at the end of each mission.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir.
	if (response == "s_987445c9")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Report back to me when you're ready for another assignment.
			string_id message = new string_id (c_stringFile, "s_a871501f");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Glad to hear it.
	if (response == "s_f69a2921")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Report back to me when you're ready for another assignment.
			string_id message = new string_id (c_stringFile, "s_37");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You have completed mission two and so here is your reward.
	//-- NPC: Nice work, %TU. Our engineers are examining  that TIE fighter now. Here's your duty pay.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Excellent.
	if (response == "s_9c236354")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "tap_head");

			//-- NPC: I suggest you save it for a rainy day.
			string_id message = new string_id (c_stringFile, "s_76dd2544");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir.
	if (response == "s_42")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Report back to me when you're ready for another assignment.
			string_id message = new string_id (c_stringFile, "s_44");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You have completed mission three and so here is your reward.
	//-- NPC: I have your duty pay.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I did a good job out there.
	if (response == "s_acef64cd")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_shoulders");

			//-- NPC: Well, you're not dead, I'll give you that. Report to me later for your next assignment.
			string_id message = new string_id (c_stringFile, "s_6c01a28a");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll take it.
	if (response == "s_d0fd857b")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Report to me later for your next assignment.
			string_id message = new string_id (c_stringFile, "s_76e9b54b");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You have completed mission four and so here is your reward.
	//-- NPC: Here's a little something.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Duty pay?
	if (response == "s_a58b9067")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Absolutely. You've earned it.
			string_id message = new string_id (c_stringFile, "s_528a2d25");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir.
	if (response == "s_54")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: You earned it. Good work out there.
			string_id message = new string_id (c_stringFile, "s_fb3d31a9");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Congratulations, soldier. You're officially a part of the Crimson Phoenix.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir. I'm happy to be a part of the team. 
	if (response == "s_87f091b9")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I've heard good things out there. My boys tell me you can hold your own.
			string_id message = new string_id (c_stringFile, "s_33cdebfd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I try, sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_742d8c68");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 33);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Excellent.
	if (response == "s_90")
	{
		doAnimationAction (player, "pose_proudly");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: You've earned it. You've done everything I've asked, and then some.
			string_id message = new string_id (c_stringFile, "s_f60ad3e3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Any news from that Imperial space station?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_85660b3d");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch33 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I've heard good things out there. My boys tell me you can hold your own.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I try, sir.
	if (response == "s_742d8c68")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_to_self");

			//-- NPC: You're now a full member of the squad. That means you'll be reporting to me, and you'll be participating in all squad missions. 
			string_id message = new string_id (c_stringFile, "s_856e4aab");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready for anything.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b3e9c738");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're now a full member of the squad. That means you'll be reporting to me, and you'll be participating in all squad missions. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready for anything.
	if (response == "s_b3e9c738")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_disgust");

			//-- NPC: Our attack in Endor was a complete dead end. I was SURE we'd find the manufacturing area. It's too late now anyway. The ships are scattered all over the place, and there's a million of them. 
			string_id message = new string_id (c_stringFile, "s_323479fd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sorry to hear that we wasted our time, sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1131a10a");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 35);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch35 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Our attack in Endor was a complete dead end. I was SURE we'd find the manufacturing area. It's too late now anyway. The ships are scattered all over the place, and there's a million of them. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry to hear that we wasted our time, sir.
	if (response == "s_1131a10a")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "tap_head");

			//-- NPC: On the contrary! We found some very interesting information - and we would have missed it completely if we hadn't inspected Endor so closely.
			string_id message = new string_id (c_stringFile, "s_5b998dc7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's that, sir?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71a53f8b");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 36);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch36 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: On the contrary! We found some very interesting information - and we would have missed it completely if we hadn't inspected Endor so closely.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's that, sir?
	if (response == "s_71a53f8b")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: There is a strange level of Imperial activity taking place around Endor. There are hundreds of men and women working there. They are taking extraordinary measures to hide their activities. We just happened to catch a few irregularities on our radar. 
			string_id message = new string_id (c_stringFile, "s_ba8b09ff");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's the project?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_fa396956");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 37);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There is a strange level of Imperial activity taking place around Endor. There are hundreds of men and women working there. They are taking extraordinary measures to hide their activities. We just happened to catch a few irregularities on our radar. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the project?
	if (response == "s_fa396956")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Unknown.
			string_id message = new string_id (c_stringFile, "s_a72f79b2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Could it be the ship factory?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_32b5bee1");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 38);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Unknown.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Could it be the ship factory?
	if (response == "s_32b5bee1")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: That was my first thought. But I don't think that's it. It's something bigger and much more complex. Based on the data, it doesn't look like they're churning out any mass-produced product. It's something much more unusual, with very detailed specifications.
			string_id message = new string_id (c_stringFile, "s_4123d99b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How can I help, sir?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_fbb318e5");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That was my first thought. But I don't think that's it. It's something bigger and much more complex. Based on the data, it doesn't look like they're churning out any mass-produced product. It's something much more unusual, with very detailed specifications.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How can I help, sir?
	if (response == "s_fbb318e5")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I want you to launch an attack against a TIE bomber. Intel tells us that this bomber is transporting a key piece of machinery to the planet's surface. I'd like to know just what that piece IS.
			string_id message = new string_id (c_stringFile, "s_b659eebb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll deliver it to you personally.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_fb9f7cd6");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 40);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch40 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want you to launch an attack against a TIE bomber. Intel tells us that this bomber is transporting a key piece of machinery to the planet's surface. I'd like to know just what that piece IS.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll deliver it to you personally.
	if (response == "s_fb9f7cd6")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionFour (player, npc);

			//-- NPC: See that you do. Head for the Endor system immediately. Dismissed.
			string_id message = new string_id (c_stringFile, "s_cc7b5947");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You've earned it. You've done everything I've asked, and then some.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Any news from that Imperial space station?
	if (response == "s_85660b3d")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Your attack was a success, no doubt about it. But those engineers have vanished. I've never seen anything like it! How can a group of men with heavy machinery be so mobile?
			string_id message = new string_id (c_stringFile, "s_2f190cf");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sorry to hear that we wasted our time, sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_95");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch43 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your attack was a success, no doubt about it. But those engineers have vanished. I've never seen anything like it! How can a group of men with heavy machinery be so mobile?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry to hear that we wasted our time, sir.
	if (response == "s_95")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "gesticulate_wildly");

			//-- NPC: If Ulvaw'op would just TELL us something, maybe we could anticipate these kinds of problems! 
			string_id message = new string_id (c_stringFile, "s_fb05125c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9b43a7ee");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 44);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch44 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: If Ulvaw'op would just TELL us something, maybe we could anticipate these kinds of problems! 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_9b43a7ee")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_disgust");

			//-- NPC: Maybe it's not his fault. Maybe the Imperials are just extremely motivated. What in blazes are they up to?!?
			string_id message = new string_id (c_stringFile, "s_2d4185b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Unknown.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 45);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch45 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Maybe it's not his fault. Maybe the Imperials are just extremely motivated. What in blazes are they up to?!?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Unknown.
	if (response == "s_100")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: The news isn't all bad. We found some very interesting information - and we would have missed it completely if we hadn't inspected Endor so closely.
			string_id message = new string_id (c_stringFile, "s_7aa5d0f7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's that, sir?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_103");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The news isn't all bad. We found some very interesting information - and we would have missed it completely if we hadn't inspected Endor so closely.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's that, sir?
	if (response == "s_103")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: There is a strange level of Imperial activity taking place around Endor. There are hundreds of men and women working there. They are taking extraordinary measures to hide their activities. We just happened to catch a few irregularities on our radar. 
			string_id message = new string_id (c_stringFile, "s_105");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's the project?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_107");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 47);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch47 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There is a strange level of Imperial activity taking place around Endor. There are hundreds of men and women working there. They are taking extraordinary measures to hide their activities. We just happened to catch a few irregularities on our radar. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the project?
	if (response == "s_107")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Unknown.
			string_id message = new string_id (c_stringFile, "s_109");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Could it be the ship factory?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_111");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 48);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch48 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Unknown.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Could it be the ship factory?
	if (response == "s_111")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: That was my first thought. But I don't think that's it. It's something bigger and much more complex. Based on the data, it doesn't look like they're churning out any mass-produced product. It's something much more unusual, with very detailed specifications.
			string_id message = new string_id (c_stringFile, "s_113");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How can I help, sir?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_115");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 49);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch49 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That was my first thought. But I don't think that's it. It's something bigger and much more complex. Based on the data, it doesn't look like they're churning out any mass-produced product. It's something much more unusual, with very detailed specifications.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How can I help, sir?
	if (response == "s_115")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I want you to launch an attack against a TIE bomber. Intel tells us that this bomber is transporting a key piece of machinery to the planet's surface. I'd like to know just what that piece IS.
			string_id message = new string_id (c_stringFile, "s_117");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll deliver it to you personally.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_119");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 50);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch50 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want you to launch an attack against a TIE bomber. Intel tells us that this bomber is transporting a key piece of machinery to the planet's surface. I'd like to know just what that piece IS.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll deliver it to you personally.
	if (response == "s_119")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionFour (player, npc);

			//-- NPC: See that you do. Head for the Endor system immediately. Dismissed.
			string_id message = new string_id (c_stringFile, "s_121");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] Those new ships of the Empire keep giving us problems %TU.
	//-- NPC: We've been taking a close look at that TIE fighter. Quite a piece of machinery.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Especially those guns.
	if (response == "s_c8a0830d")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Incredible handling. It's going to take a while before we find a way to modify their technology for our X-Wings. 
			string_id message = new string_id (c_stringFile, "s_6dea357d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_126");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: They're going to give us a problem, sir.
	if (response == "s_c01ad90e")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: You got that right. Tell me, what did you accomplish while you were with Ulvaw'op?
			string_id message = new string_id (c_stringFile, "s_c84fe27f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We were able to capture several spies, a security officer, and an Imperial defector.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_cbcd1643");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 61);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Incredible handling. It's going to take a while before we find a way to modify their technology for our X-Wings. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_126")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'd like to know who's building these ships. They could answer a lot of questions for us. 
			string_id message = new string_id (c_stringFile, "s_f3eda860");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Imperial engineers are usually well hidden in the belly of the Empire.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2c10011d");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch54 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'd like to know who's building these ships. They could answer a lot of questions for us. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Imperial engineers are usually well hidden in the belly of the Empire.
	if (response == "s_2c10011d")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: I don't think Imperials built these ships. I think they're using a third-party group.
			string_id message = new string_id (c_stringFile, "s_9722b330");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: There should be a manufacturing stamp on the chassis.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_89e27dc9");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 55);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch55 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think Imperials built these ships. I think they're using a third-party group.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: There should be a manufacturing stamp on the chassis.
	if (response == "s_89e27dc9")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_no");

			//-- NPC: No luck there. The engineers, whoever they are, have done a good job covering their tracks.
			string_id message = new string_id (c_stringFile, "s_7d8f56b6");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Don't blame 'em. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_63e0ab42");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 56);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch56 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No luck there. The engineers, whoever they are, have done a good job covering their tracks.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't blame 'em. 
	if (response == "s_63e0ab42")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: We're taking a new tack. We may not know WHO'S building them. But maybe we can figure out WHERE their facilities are. 
			string_id message = new string_id (c_stringFile, "s_1eed1024");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Any leads?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8009422e");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 57);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch57 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We're taking a new tack. We may not know WHO'S building them. But maybe we can figure out WHERE their facilities are. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Any leads?
	if (response == "s_8009422e")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We're tracking the path of these new ships. They're scattered across several systems, but they seem to be concentrated around Endor. My guess is, where there's smoke there's fire. So let's take a closer look. 
			string_id message = new string_id (c_stringFile, "s_c2b3ccaa");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds good to me.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_bc57b086");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 58);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch58 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We're tracking the path of these new ships. They're scattered across several systems, but they seem to be concentrated around Endor. My guess is, where there's smoke there's fire. So let's take a closer look. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds good to me.
	if (response == "s_bc57b086")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: There's an Imperial space station in Endor. I think that's where the engineers are unloading the new models. So that's your primary target.  You'll join forces with a Crimson Phoenix squad, travel to Endor, and launch an attack. 
			string_id message = new string_id (c_stringFile, "s_62fa1f75");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e42b260e");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 59);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch59 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There's an Imperial space station in Endor. I think that's where the engineers are unloading the new models. So that's your primary target.  You'll join forces with a Crimson Phoenix squad, travel to Endor, and launch an attack. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on my way.
	if (response == "s_e42b260e")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			tatooine_rebel_tier4_action_grantMissionThree (player, npc);

			//-- NPC: Let's see how you do. This is your big break, %TU. Don't screw it up.
			string_id message = new string_id (c_stringFile, "s_fed525e5");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch61 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You got that right. Tell me, what did you accomplish while you were with Ulvaw'op?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We were able to capture several spies, a security officer, and an Imperial defector.
	if (response == "s_cbcd1643")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "smack_self");

			//-- NPC: Amazing. This place is lousy with Imperials! What did you learn?
			string_id message = new string_id (c_stringFile, "s_c3bd7a11");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Personally? Not much. Ulvaw'op was in charge of interrogations, and he wasn't exactly forthcoming with me.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f00c2726");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 62);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch62 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Amazing. This place is lousy with Imperials! What did you learn?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Personally? Not much. Ulvaw'op was in charge of interrogations, and he wasn't exactly forthcoming with me.
	if (response == "s_f00c2726")
	{
		doAnimationAction (player, "shrug_shoulders");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_disgust");

			//-- NPC: See? That's what I hate about these guys. They never tell you anything until it's absolutely necessary.
			string_id message = new string_id (c_stringFile, "s_15dc5860");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds like you're trying to stay one step ahead of the Imperials.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_68772323");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 63);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch63 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: See? That's what I hate about these guys. They never tell you anything until it's absolutely necessary.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds like you're trying to stay one step ahead of the Imperials.
	if (response == "s_68772323")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Always. And in the meantime, we've got to find a way to deal with these new TIE fighters. It's going to take a while before we find a way to modify their technology for our X-Wings. 
			string_id message = new string_id (c_stringFile, "s_e2aefddd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_149");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 64);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Always. And in the meantime, we've got to find a way to deal with these new TIE fighters. It's going to take a while before we find a way to modify their technology for our X-Wings. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_149")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: And now they know we're out here, so they're sure to come after us eventually. We need to move quickly. I'd like to know who's building these ships. They could answer a lot of questions for us. 
			string_id message = new string_id (c_stringFile, "s_3a640dfa");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Imperial engineers?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_15bf89c7");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 65);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch65 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: And now they know we're out here, so they're sure to come after us eventually. We need to move quickly. I'd like to know who's building these ships. They could answer a lot of questions for us. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Imperial engineers?
	if (response == "s_15bf89c7")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_no");

			//-- NPC: I don't think they did this in-house. I think the Empire is working with a third party.
			string_id message = new string_id (c_stringFile, "s_e81875f0");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_719a036e");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 66);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch66 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think they did this in-house. I think the Empire is working with a third party.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who?
	if (response == "s_719a036e")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_shoulders");

			//-- NPC: Don't know. The engineers, whoever they are, have done a good job covering their tracks.
			string_id message = new string_id (c_stringFile, "s_7f14ac3a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Don't blame 'em. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 67);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch67 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Don't know. The engineers, whoever they are, have done a good job covering their tracks.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't blame 'em. 
	if (response == "s_156")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We're taking a new tack. We may not know WHO'S building them. But maybe we can figure out WHERE their facilities are. 
			string_id message = new string_id (c_stringFile, "s_158");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Any leads?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_160");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 68);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch68 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We're taking a new tack. We may not know WHO'S building them. But maybe we can figure out WHERE their facilities are. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Any leads?
	if (response == "s_160")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: We're tracking the path of these new ships. They're scattered across several systems, but they seem to be concentrated around Endor. My guess is, where there's smoke there's fire. So let's take a closer look. 
			string_id message = new string_id (c_stringFile, "s_162");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds good to me.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_164");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 69);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch69 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We're tracking the path of these new ships. They're scattered across several systems, but they seem to be concentrated around Endor. My guess is, where there's smoke there's fire. So let's take a closer look. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds good to me.
	if (response == "s_164")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: There's an Imperial space station in Endor. I think that's where the engineers are unloading the new models. So that's your primary target.  You'll join forces with a Crimson Phoenix squad, travel to Endor, and launch an attack. 
			string_id message = new string_id (c_stringFile, "s_166");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_168");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 70);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch70 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There's an Imperial space station in Endor. I think that's where the engineers are unloading the new models. So that's your primary target.  You'll join forces with a Crimson Phoenix squad, travel to Endor, and launch an attack. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on my way.
	if (response == "s_168")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			tatooine_rebel_tier4_action_grantMissionThree (player, npc);

			//-- NPC: Let's see how you do. This is your big break, %TU. Don't screw it up.
			string_id message = new string_id (c_stringFile, "s_170");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch72 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] didn't do too bad in the last mission, even against overwhelming odds.Those experimental fighters of the Empire makes for a challenge.
	//-- NPC: My men tell me you weren't too bad up there. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Those TIE fighters are tough!
	if (response == "s_d059f8aa")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: The Empire has deep pockets. It's incredible, the way they fund their research labs. It's no surprise that their technology outstrips ours.
			string_id message = new string_id (c_stringFile, "s_83b2f3f1");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_175");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 73);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I held my own.
	if (response == "s_24f29c02")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "tap_head");

			//-- NPC: Don't be a cowboy. Remember, you're part of a team now. You've got to work with the squad members.
			string_id message = new string_id (c_stringFile, "s_8574f09");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: As long as they can keep up! 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I understand.
			boolean hasResponse1 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_958c1289");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9288900f");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 83);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch73 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Empire has deep pockets. It's incredible, the way they fund their research labs. It's no surprise that their technology outstrips ours.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_175")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "tap_foot");

			//-- NPC: Up 'til now, we've been able to level the playing field just by gutting it out.
			string_id message = new string_id (c_stringFile, "s_ea7b0fb2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_178");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 74);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch74 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Up 'til now, we've been able to level the playing field just by gutting it out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_178")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: But I think we can work smarter than that. I want to take a closer look at these new TIE fighters.
			string_id message = new string_id (c_stringFile, "s_4ca48b38");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm not following, sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e816c4f3");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 75);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch75 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: But I think we can work smarter than that. I want to take a closer look at these new TIE fighters.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm not following, sir.
	if (response == "s_e816c4f3")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: These new Imperial ships constitute an imminent threat. We need to know what, EXACTLY, we're up against. 
			string_id message = new string_id (c_stringFile, "s_4df417ce");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I agree.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5bb47d59");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 76);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch76 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: These new Imperial ships constitute an imminent threat. We need to know what, EXACTLY, we're up against. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I agree.
	if (response == "s_5bb47d59")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: So here's what we're going to do. %TU, you're going to hijack one of those ships.
			string_id message = new string_id (c_stringFile, "s_c946f118");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That won't be easy.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_790d22d6");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 77);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch77 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So here's what we're going to do. %TU, you're going to hijack one of those ships.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That won't be easy.
	if (response == "s_790d22d6")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "laugh");

			//-- NPC: I don't think you'd be interested in an easy mission.
			string_id message = new string_id (c_stringFile, "s_1cd7da68");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Absolutely not.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a33056f4");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 78);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch78 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think you'd be interested in an easy mission.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Absolutely not.
	if (response == "s_a33056f4")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger1");

			//-- NPC: I want to get inside one of those ships. Sit in the driver's seat. Take it for a test ride. Smell that Imperial leather. 
			string_id message = new string_id (c_stringFile, "s_2183d62a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll try to bring it back in one piece.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d82b46ba");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 79);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch79 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want to get inside one of those ships. Sit in the driver's seat. Take it for a test ride. Smell that Imperial leather. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll try to bring it back in one piece.
	if (response == "s_d82b46ba")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm giving you access to a space assault droid. It'll help you to get the job done. The droid will take control of the ship, once you've disabled the pilot.  
			string_id message = new string_id (c_stringFile, "s_32b7bf59");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [nod]
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8e9d0848");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 80);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch80 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm giving you access to a space assault droid. It'll help you to get the job done. The droid will take control of the ship, once you've disabled the pilot.  

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [nod]
	if (response == "s_8e9d0848")
	{
		doAnimationAction (player, "nod_head_once");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: With any luck, our technicians will figure out a way to put that new technology into OUR ships. 
			string_id message = new string_id (c_stringFile, "s_92a98982");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6425e854");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 81);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch81 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: With any luck, our technicians will figure out a way to put that new technology into OUR ships. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir. 
	if (response == "s_6425e854")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionTwo (player, npc);

			//-- NPC: Bring me one of those birds. Do whatever it takes. You're cleared to leave for Dathomir.
			string_id message = new string_id (c_stringFile, "s_9fcfe841");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch83 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Don't be a cowboy. Remember, you're part of a team now. You've got to work with the squad members.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: As long as they can keep up! 
	if (response == "s_958c1289")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: Hey! Don't assume you're the best. You're not a kid anymore, and this isn't a holocron. This is the real thing. You remember that the next time you see one of your fellow pilots taking fire. 
			string_id message = new string_id (c_stringFile, "s_4c56b685");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_199");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 84);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand.
	if (response == "s_9288900f")
	{
		doAnimationAction (player, "nod_head_once");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: What did you think of those new TIE fighters?
			string_id message = new string_id (c_stringFile, "s_1b9a0acd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: They're impressive. No doubt about it.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2acccb89");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 92);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch84 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey! Don't assume you're the best. You're not a kid anymore, and this isn't a holocron. This is the real thing. You remember that the next time you see one of your fellow pilots taking fire. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_199")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: These new Imperial ships constitute an imminent threat. We need to know what, EXACTLY, we're up against. 
			string_id message = new string_id (c_stringFile, "s_201");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Agreed.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_18d61e21");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 85);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch85 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: These new Imperial ships constitute an imminent threat. We need to know what, EXACTLY, we're up against. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Agreed.
	if (response == "s_18d61e21")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: So here's what we're going to do. %TU, you're going to hijack one of those ships.
			string_id message = new string_id (c_stringFile, "s_204");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That won't be easy.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_206");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 86);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch86 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So here's what we're going to do. %TU, you're going to hijack one of those ships.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That won't be easy.
	if (response == "s_206")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "laugh");

			//-- NPC: I don't think you'd be interested in an easy mission.
			string_id message = new string_id (c_stringFile, "s_208");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Absolutely not.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_210");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 87);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch87 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think you'd be interested in an easy mission.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Absolutely not.
	if (response == "s_210")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger1");

			//-- NPC: I want to get inside one of those ships. Sit in the driver's seat. Take it for a test ride. Smell that Imperial leather. 
			string_id message = new string_id (c_stringFile, "s_212");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll try to bring it back in one piece.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_214");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 88);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch88 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want to get inside one of those ships. Sit in the driver's seat. Take it for a test ride. Smell that Imperial leather. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll try to bring it back in one piece.
	if (response == "s_214")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I'm giving you access to a space assault droid. It'll help you to get the job done. The droid will take control of the ship, once you've disabled the pilot.  
			string_id message = new string_id (c_stringFile, "s_216");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [nod]
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_218");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 89);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch89 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm giving you access to a space assault droid. It'll help you to get the job done. The droid will take control of the ship, once you've disabled the pilot.  

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [nod]
	if (response == "s_218")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: With any luck, our technicians will figure out a way to put that new technology into OUR ships. 
			string_id message = new string_id (c_stringFile, "s_220");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_222");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 90);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch90 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: With any luck, our technicians will figure out a way to put that new technology into OUR ships. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir. 
	if (response == "s_222")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionTwo (player, npc);

			//-- NPC: Bring me one of those birds. Do whatever it takes. You're cleared to leave for Dathomir.
			string_id message = new string_id (c_stringFile, "s_224");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch92 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What did you think of those new TIE fighters?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: They're impressive. No doubt about it.
	if (response == "s_2acccb89")
	{
		doAnimationAction (player, "cough_polite");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I lost some brave men up there.
			string_id message = new string_id (c_stringFile, "s_5e35901c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_230");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 93);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch93 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I lost some brave men up there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_230")
	{
		doAnimationAction (player, "nod_head_once");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Alliance leaders need to know that they can deploy a full Crimson Phoenix squad at any time. 
			string_id message = new string_id (c_stringFile, "s_d3234c01");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I know, sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58a20c33");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 94);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch94 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Alliance leaders need to know that they can deploy a full Crimson Phoenix squad at any time. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I know, sir.
	if (response == "s_58a20c33")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: My job is to protect my pilots as much as possible. They are the most valuable asset we've got. 
			string_id message = new string_id (c_stringFile, "s_428c6440");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Understood, sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_bb9e4a63");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 95);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch95 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My job is to protect my pilots as much as possible. They are the most valuable asset we've got. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Understood, sir.
	if (response == "s_bb9e4a63")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: These new Imperial ships constitute an imminent threat. We need to know what, EXACTLY, we're up against.
			string_id message = new string_id (c_stringFile, "s_a582cadc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Agreed.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_237");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 96);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch96 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: These new Imperial ships constitute an imminent threat. We need to know what, EXACTLY, we're up against.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Agreed.
	if (response == "s_237")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: So here's what we're going to do. %TU, you're going to hijack one of those ships.
			string_id message = new string_id (c_stringFile, "s_239");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That won't be easy.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_241");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 97);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch97 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So here's what we're going to do. %TU, you're going to hijack one of those ships.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That won't be easy.
	if (response == "s_241")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "laugh");

			//-- NPC: I don't think you'd be interested in an easy mission.
			string_id message = new string_id (c_stringFile, "s_243");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Absolutely not.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_245");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 98);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch98 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think you'd be interested in an easy mission.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Absolutely not.
	if (response == "s_245")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger1");

			//-- NPC: I want to get inside one of those ships. Sit in the driver's seat. Take it for a test ride. Smell that Imperial leather. 
			string_id message = new string_id (c_stringFile, "s_247");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll try to bring it back in one piece.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_249");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 99);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch99 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want to get inside one of those ships. Sit in the driver's seat. Take it for a test ride. Smell that Imperial leather. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll try to bring it back in one piece.
	if (response == "s_249")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm giving you access to a space assault droid. It'll help you to get the job done. The droid will take control of the ship, once you've disabled the pilot. 
			string_id message = new string_id (c_stringFile, "s_c5512cb2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [nod]
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_252");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 100);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch100 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm giving you access to a space assault droid. It'll help you to get the job done. The droid will take control of the ship, once you've disabled the pilot. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [nod]
	if (response == "s_252")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: With any luck, our technicians will figure out a way to put that new technology into OUR ships. 
			string_id message = new string_id (c_stringFile, "s_254");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_256");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 101);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch101 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: With any luck, our technicians will figure out a way to put that new technology into OUR ships. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir. 
	if (response == "s_256")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			doAnimationAction (player, "salute2");

			tatooine_rebel_tier4_action_grantMissionTwo (player, npc);

			//-- NPC: Bring me one of those birds. Do whatever it takes. You're cleared to leave for Dathomir.
			string_id message = new string_id (c_stringFile, "s_258");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch103 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're up. Let's see if you can keep up with my squadron.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the mission, sir?
	if (response == "s_5bc07030")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's not a spy mission, that's for sure. Hope that doesn't bother you. 
			string_id message = new string_id (c_stringFile, "s_2db03120");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why would it?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_221bd4ce");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 104);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready to go.
	if (response == "s_321")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We've been planning an attack against a fleet of Imperial fighters for quite some time. We've laid the groundwork. We're ready to go.
			string_id message = new string_id (c_stringFile, "s_323");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Understood.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2c4789b");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 126);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch104 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's not a spy mission, that's for sure. Hope that doesn't bother you. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why would it?
	if (response == "s_221bd4ce")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: I hear you did a good job under Ulvaw'op. Do you enjoy working with spies?
			string_id message = new string_id (c_stringFile, "s_6e4f5881");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I was good at it.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I just do what I'm told.
			boolean hasResponse1 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6c38055e");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_48b7214b");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 105);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch105 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I hear you did a good job under Ulvaw'op. Do you enjoy working with spies?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was good at it.
	if (response == "s_6c38055e")
	{
		doAnimationAction (player, "shrug_shoulders");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_disgust");

			//-- NPC: Don't have any patience for it, myself. Can't stand all that sneaking around.
			string_id message = new string_id (c_stringFile, "s_325c76db");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ulvaw'op has helped the Alliance.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_856aca7d");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 106);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I just do what I'm told.
	if (response == "s_48b7214b")
	{
		doAnimationAction (player, "shrug_shoulders");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_to_self");

			//-- NPC: Well now you're going to do what I tell you.
			string_id message = new string_id (c_stringFile, "s_f3c74323");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Absolutely.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_289");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 117);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch106 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Don't have any patience for it, myself. Can't stand all that sneaking around.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ulvaw'op has helped the Alliance.
	if (response == "s_856aca7d")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I know. His information has saved our butts more than once. And he's probably onto something. I've never seen so much Imperial activity in this area.
			string_id message = new string_id (c_stringFile, "s_aa15510b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm sure you've got a plan.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_521e8b09");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 107);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch107 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I know. His information has saved our butts more than once. And he's probably onto something. I've never seen so much Imperial activity in this area.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm sure you've got a plan.
	if (response == "s_521e8b09")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: You bet I do. There's trouble brewing. I can smell it in the air. That's why the Alliance created the Crimson Phoenix. We're the frontline defenders. Think you can handle it?
			string_id message = new string_id (c_stringFile, "s_15235513");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Absolutely.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d9cced1f");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 108);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch108 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You bet I do. There's trouble brewing. I can smell it in the air. That's why the Alliance created the Crimson Phoenix. We're the frontline defenders. Think you can handle it?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Absolutely.
	if (response == "s_d9cced1f")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We've been planning an attack against a fleet of Imperial fighters for quite some time. We've laid the groundwork. We're ready to go.
			string_id message = new string_id (c_stringFile, "s_5471712d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Imperial fighters? No problem!
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_43fcfbca");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 109);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch109 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We've been planning an attack against a fleet of Imperial fighters for quite some time. We've laid the groundwork. We're ready to go.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Imperial fighters? No problem!
	if (response == "s_43fcfbca")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: Now listen. Based on the numbers, they've got us beat. No doubt about it. They've got far more ships out there than we do. So every single one of my fighters has got to do the job of TEN pilots.
			string_id message = new string_id (c_stringFile, "s_f73581de");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8ddbf95b");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 110);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch110 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Now listen. Based on the numbers, they've got us beat. No doubt about it. They've got far more ships out there than we do. So every single one of my fighters has got to do the job of TEN pilots.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. 
	if (response == "s_8ddbf95b")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: There's something else you need to know. You'll be seeing a new breed of Imperial ships out there.
			string_id message = new string_id (c_stringFile, "s_579532ac");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: New TIE fighters?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c127c173");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 111);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch111 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There's something else you need to know. You'll be seeing a new breed of Imperial ships out there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: New TIE fighters?
	if (response == "s_c127c173")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Exactly. These are next-generation models. They're designed to be faster, lighter, more accurate and more deadly than any other Imperial ship.
			string_id message = new string_id (c_stringFile, "s_b1dd06bd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I didn't know the Empire was working on new designs.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_914a4095");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 112);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch112 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Exactly. These are next-generation models. They're designed to be faster, lighter, more accurate and more deadly than any other Imperial ship.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I didn't know the Empire was working on new designs.
	if (response == "s_914a4095")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We've heard advance warnings about this fleet, but we didn't expect so see operational models so soon. The Empire is moving quickly.
			string_id message = new string_id (c_stringFile, "s_954ec468");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61657d0f");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 113);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch113 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We've heard advance warnings about this fleet, but we didn't expect so see operational models so soon. The Empire is moving quickly.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see.
	if (response == "s_61657d0f")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: The Alliance wants to know one thing. They want to know if OUR best can handle THEIR best. And this is where they get their answer. Right here. Right now.
			string_id message = new string_id (c_stringFile, "s_f689a56f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready to go.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d55f2579");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 114);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch114 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance wants to know one thing. They want to know if OUR best can handle THEIR best. And this is where they get their answer. Right here. Right now.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready to go.
	if (response == "s_d55f2579")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionOne (player, npc);

			//-- NPC: At least you'll have the element of surprise. They're not expecting an attack. I want you to get out there and hit as many of them as you can. We've uploaded coordinates to your ships computer. You're clear to leave for the Dathomir system.
			string_id message = new string_id (c_stringFile, "s_d68a9f0a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes Sir!
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49e55ca2");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 115);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch115 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: At least you'll have the element of surprise. They're not expecting an attack. I want you to get out there and hit as many of them as you can. We've uploaded coordinates to your ships computer. You're clear to leave for the Dathomir system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes Sir!
	if (response == "s_49e55ca2")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh one more thing %TU. All the missions I provide you with will be high risk missions and might be too much to handle by yourself. If you have any favors you can call in, doing so during my missions might be a good idea. Dismissed!
			string_id message = new string_id (c_stringFile, "s_79e6aa32");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch117 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well now you're going to do what I tell you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Absolutely.
	if (response == "s_289")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We've been planning an attack against a fleet of Imperial fighters for quite some time. We've laid the groundwork. We're ready to go.
			string_id message = new string_id (c_stringFile, "s_291");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Imperial fighters? No problem!
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_293");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 118);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch118 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We've been planning an attack against a fleet of Imperial fighters for quite some time. We've laid the groundwork. We're ready to go.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Imperial fighters? No problem!
	if (response == "s_293")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: Now listen. Based on the numbers, they've got us beat. No doubt about it. They've got far more ships out there than we do. So every single one of my fighters has got to do the job of TEN pilots.
			string_id message = new string_id (c_stringFile, "s_295");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_297");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 119);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch119 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Now listen. Based on the numbers, they've got us beat. No doubt about it. They've got far more ships out there than we do. So every single one of my fighters has got to do the job of TEN pilots.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. 
	if (response == "s_297")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: There's something else you need to know. You'll be seeing a new breed of Imperial ships out there.
			string_id message = new string_id (c_stringFile, "s_299");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: New TIE fighters?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_301");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 120);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch120 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There's something else you need to know. You'll be seeing a new breed of Imperial ships out there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: New TIE fighters?
	if (response == "s_301")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Exactly. These are next-generation models. They're designed to be faster, lighter, more accurate and more deadly than any other Imperial ship.
			string_id message = new string_id (c_stringFile, "s_303");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I didn't know the Empire was working on new designs.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_305");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 121);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch121 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Exactly. These are next-generation models. They're designed to be faster, lighter, more accurate and more deadly than any other Imperial ship.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I didn't know the Empire was working on new designs.
	if (response == "s_305")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: We've heard advance warnings about this fleet, but we didn't expect so see operational models so soon. The Empire is moving quickly.
			string_id message = new string_id (c_stringFile, "s_307");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_309");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 122);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch122 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We've heard advance warnings about this fleet, but we didn't expect so see operational models so soon. The Empire is moving quickly.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see.
	if (response == "s_309")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: The Alliance wants to know one thing. They want to know if OUR best can handle THEIR best. And this is where they get their answer. Right here. Right now.
			string_id message = new string_id (c_stringFile, "s_311");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready to go.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_313");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 123);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch123 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance wants to know one thing. They want to know if OUR best can handle THEIR best. And this is where they get their answer. Right here. Right now.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready to go.
	if (response == "s_313")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionOne (player, npc);

			//-- NPC: At least you'll have the element of surprise. They're not expecting an attack. I want you to get out there and hit as many of them as you can. We've uploaded coordinates to your ships computer. You're clear to leave for the Dathomir system.
			string_id message = new string_id (c_stringFile, "s_315");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes Sir!
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_317");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 124);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch124 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: At least you'll have the element of surprise. They're not expecting an attack. I want you to get out there and hit as many of them as you can. We've uploaded coordinates to your ships computer. You're clear to leave for the Dathomir system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes Sir!
	if (response == "s_317")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh one more thing %TU. All the missions I provide you with will be high risk missions and might be too much to handle by yourself. If you have any favors you can call in, doing so during my missions might be a good idea. Dismissed!
			string_id message = new string_id (c_stringFile, "s_319");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch126 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We've been planning an attack against a fleet of Imperial fighters for quite some time. We've laid the groundwork. We're ready to go.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Understood.
	if (response == "s_2c4789b")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: And you're in luck. You're going to be one of the first Rebel soldiers to get an up close look at the new Imperial ships.
			string_id message = new string_id (c_stringFile, "s_f7cbbb30");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A new model?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_314f0ae4");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 127);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch127 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: And you're in luck. You're going to be one of the first Rebel soldiers to get an up close look at the new Imperial ships.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A new model?
	if (response == "s_314f0ae4")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: The Empire has unveiled a new class of TIE fighter. These are brand-new models, next-generation material. They're designed to be faster, lighter, more accurate and more deadly than any ship that's come before them.
			string_id message = new string_id (c_stringFile, "s_6d164e59");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Lucky me.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_907e88bd");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 128);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch128 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Empire has unveiled a new class of TIE fighter. These are brand-new models, next-generation material. They're designed to be faster, lighter, more accurate and more deadly than any ship that's come before them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Lucky me.
	if (response == "s_907e88bd")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: The new ships will be part of this fleet. But you've got more than ship technology to worry about. I'll tell you now, based on the numbers, they've got us beat. No doubt about it. They've got far more ships out there than we do. So every single one of my fighters has got to do the job of TEN pilots.
			string_id message = new string_id (c_stringFile, "s_a71cdd82");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. 
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_331");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 129);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch129 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The new ships will be part of this fleet. But you've got more than ship technology to worry about. I'll tell you now, based on the numbers, they've got us beat. No doubt about it. They've got far more ships out there than we do. So every single one of my fighters has got to do the job of TEN pilots.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. 
	if (response == "s_331")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: The Alliance wants to know one thing. They want to know if OUR best can handle THEIR best. And this is where they get their answer. Right here. Right now.
			string_id message = new string_id (c_stringFile, "s_333");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready to go.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_335");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 130);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch130 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance wants to know one thing. They want to know if OUR best can handle THEIR best. And this is where they get their answer. Right here. Right now.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready to go.
	if (response == "s_335")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantMissionOne (player, npc);

			//-- NPC: At least you'll have the element of surprise. They're not expecting an attack. I want you to get out there and hit as many of them as you can. We've uploaded coordinates to your ships computer. You're clear to leave for the Dathomir system.
			string_id message = new string_id (c_stringFile, "s_337");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch132 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hello, pilot. Welcome to Rori. First time here?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_340")
	{
		doAnimationAction (player, "nod_head_once");

		tatooine_rebel_tier4_action_setMetMe (player, npc);

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: You'll be working for me. You've been assigned to the Crimson Phoenix squad. Do you know what that means?
			string_id message = new string_id (c_stringFile, "s_258d2f1e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_86137261");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 133);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch133 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You'll be working for me. You've been assigned to the Crimson Phoenix squad. Do you know what that means?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No sir.
	if (response == "s_86137261")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC:  Let me tell you something about Crimson Phoenix. This unit was designed to be the best. Do you hear me? THE BEST. I don't tolerate anything less from my pilots.
			string_id message = new string_id (c_stringFile, "s_36085c51");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_345");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 134);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch134 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC:  Let me tell you something about Crimson Phoenix. This unit was designed to be the best. Do you hear me? THE BEST. I don't tolerate anything less from my pilots.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_345")
	{
		doAnimationAction (player, "nod_head_multiple");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: I sure as heck am not going to put an untested pilot in charge of important missions. I need to test you out. See what you're made of. Pilots in this unit have nerves of steel. Do you have nerves of steel?
			string_id message = new string_id (c_stringFile, "s_db77876d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_348");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 135);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch135 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I sure as heck am not going to put an untested pilot in charge of important missions. I need to test you out. See what you're made of. Pilots in this unit have nerves of steel. Do you have nerves of steel?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_348")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "rub_chin_thoughtful");

			//-- NPC: I don't think you do. I think you'll flame out on your first mission.
			string_id message = new string_id (c_stringFile, "s_917742b8");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Well, put me up there, sir, and we'll see which one of us is wrong.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6db5d6ce");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 136);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch136 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think you do. I think you'll flame out on your first mission.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well, put me up there, sir, and we'll see which one of us is wrong.
	if (response == "s_6db5d6ce")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: OK! Well that's a good start, soldier. You've got some options here. I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.
			string_id message = new string_id (c_stringFile, "s_ab288b4d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_353");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 137);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch137 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: OK! Well that's a good start, soldier. You've got some options here. I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_353")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Several Rebel operatives have been scouting Endor, looking for suspicious Imperial activity. Their mission is complete, and now they're carrying valuable data. They need a fighter pilot to escort them safely out of the system.
			string_id message = new string_id (c_stringFile, "s_7e962bfb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_356");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 138);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch138 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Several Rebel operatives have been scouting Endor, looking for suspicious Imperial activity. Their mission is complete, and now they're carrying valuable data. They need a fighter pilot to escort them safely out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_356")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here's an exciting one. I'm looking for a pilot willing to intercept prison ships in the Dathomir system. Those ships are carrying Rebels, and we need those men here with us! The pilot who takes this job will carry a probe outfitted with a virus. That virus will unlock the prisoners' cells. Once they're free, our men will be able to take control of the ship.
			string_id message = new string_id (c_stringFile, "s_73c9f8b3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_359");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 139);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch139 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Here's an exciting one. I'm looking for a pilot willing to intercept prison ships in the Dathomir system. Those ships are carrying Rebels, and we need those men here with us! The pilot who takes this job will carry a probe outfitted with a virus. That virus will unlock the prisoners' cells. Once they're free, our men will be able to take control of the ship.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_359")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: And finally, we've got several damaged freighters out there. Imperial forces attacked them, thinking they carried Rebel forces. They didn't. These are innocent bystanders, and they've suffered on account of us, and now they're sitting ducks. Imperial forces are getting ready to move in and seize those ships. We're going to save them. 
			string_id message = new string_id (c_stringFile, "s_ac30ef3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_362");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 140);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch140 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: And finally, we've got several damaged freighters out there. Imperial forces attacked them, thinking they carried Rebel forces. They didn't. These are innocent bystanders, and they've suffered on account of us, and now they're sitting ducks. Imperial forces are getting ready to move in and seize those ships. We're going to save them. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_362")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: So? Which mission will you take?
			string_id message = new string_id (c_stringFile, "s_6231dba");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Let me at those Imperial patrols.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll fly escort for those Rebel spies.
			boolean hasResponse1 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I want to help those prisoners. 
			boolean hasResponse2 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: I'll do whatever I can to help those disabled freighters.
			boolean hasResponse3 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: Can I hear the briefing again?
			boolean hasResponse4 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_89951606");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_91502216");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67ee2a0");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c1c9b365");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49805f81");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 151);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch141 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So? Which mission will you take?

	//-- [RESPONSE NOTE] Destroy Duty
	//-- PLAYER: Let me at those Imperial patrols.
	if (response == "s_89951606")
	{
		//-- [NOTE] Get to work
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionOne (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_a5b93c4d");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Escort Duty
	//-- PLAYER: I'll fly escort for those Rebel spies.
	if (response == "s_91502216")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionTwo (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_369");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Recovery Duty
	//-- PLAYER: I want to help those prisoners. 
	if (response == "s_67ee2a0")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionThree (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_372");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Rescue Duty
	//-- PLAYER: I'll do whatever I can to help those disabled freighters.
	if (response == "s_c1c9b365")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionFour (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_375");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can I hear the briefing again?
	if (response == "s_49805f81")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.
			string_id message = new string_id (c_stringFile, "s_4b3f09bc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_379");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 156);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch142 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You're ready for a new skill, which would you like?
	//-- NPC: Well soldier, you've earned the right to upgrade to a new skill. I expect all my pilots to continue their training, at all times!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is on the training schedule today?
	if (response == "s_411")
	{
		//-- [NOTE] 
		if (!tatooine_rebel_tier4_condition_hasStarship04 (player, npc))
		{
			//-- NPC: Today you're going to be trained in hyper-maneuverable starfighters.
			string_id message = new string_id (c_stringFile, "s_412");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_416");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 143);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (!tatooine_rebel_tier4_condition_hasWeapon04 (player, npc))
		{
			//-- NPC: Today you're going to be trained in heavy Alliance component use.
			string_id message = new string_id (c_stringFile, "s_413");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_418");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 145);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (!tatooine_rebel_tier4_condition_hasProcedure04 (player, npc))
		{
			//-- NPC: Today you're going to be trained in special weapons and tactics.
			string_id message = new string_id (c_stringFile, "s_414");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_420");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 147);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Today you're going to be trained in droid intelligence theory.
			string_id message = new string_id (c_stringFile, "s_415");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_422");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 149);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch143 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Today you're going to be trained in hyper-maneuverable starfighters.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready.
	if (response == "s_416")
	{
		tatooine_rebel_tier4_action_buyStarshipsSkill04 (player, npc);

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Now come back soon. We have a lot to do.
			string_id message = new string_id (c_stringFile, "s_423");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch145 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Today you're going to be trained in heavy Alliance component use.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready.
	if (response == "s_418")
	{
		tatooine_rebel_tier4_action_buyWeaponSkill04 (player, npc);

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Now come back soon. We have a lot to do.
			string_id message = new string_id (c_stringFile, "s_425");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch147 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Today you're going to be trained in special weapons and tactics.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready.
	if (response == "s_420")
	{
		tatooine_rebel_tier4_action_buyProcedureSkill04 (player, npc);

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Now come back soon. We have a lot to do.
			string_id message = new string_id (c_stringFile, "s_427");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch149 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Today you're going to be trained in droid intelligence theory.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready.
	if (response == "s_422")
	{
		tatooine_rebel_tier4_action_buyDroidSkill04 (player, npc);

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Now come back soon. We have a lot to do.
			string_id message = new string_id (c_stringFile, "s_429");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch151 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] You have not completed tier-4, so do one of these duty missions until you xp your way to a new skill.
	//-- NPC: Well? Are you ready for a duty assignment? Or would you like to hear the briefing again?

	//-- [RESPONSE NOTE] Destroy Duty
	//-- PLAYER: Let me at those Imperial patrols.
	if (response == "s_89951606")
	{
		//-- [NOTE] Get to work
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionOne (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_a5b93c4d");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Escort Duty
	//-- PLAYER: I'll fly escort for those Rebel spies.
	if (response == "s_91502216")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionTwo (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_369");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Recovery Duty
	//-- PLAYER: I want to help those prisoners. 
	if (response == "s_67ee2a0")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionThree (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_372");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Rescue Duty
	//-- PLAYER: I'll do whatever I can to help those disabled freighters.
	if (response == "s_c1c9b365")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionFour (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_375");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can I hear the briefing again?
	if (response == "s_49805f81")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.
			string_id message = new string_id (c_stringFile, "s_4b3f09bc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_379");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 156);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch156 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_379")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Several Rebel operatives have been scouting Endor, looking for suspicious Imperial activity. Their mission is complete, and now they're carrying valuable data. They need a fighter pilot to escort them safely out of the system.
			string_id message = new string_id (c_stringFile, "s_381");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_383");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 157);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch157 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Several Rebel operatives have been scouting Endor, looking for suspicious Imperial activity. Their mission is complete, and now they're carrying valuable data. They need a fighter pilot to escort them safely out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_383")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here's an exciting one. I'm looking for a pilot willing to intercept prison ships in the Dathomir system. Those ships are carrying Rebels, and we need those men here with us! The pilot who takes this job will carry a probe outfitted with a virus. That virus will unlock the prisoners' cells. Once they're free, our men will be able to take control of the ship.
			string_id message = new string_id (c_stringFile, "s_385");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_387");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 158);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch158 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Here's an exciting one. I'm looking for a pilot willing to intercept prison ships in the Dathomir system. Those ships are carrying Rebels, and we need those men here with us! The pilot who takes this job will carry a probe outfitted with a virus. That virus will unlock the prisoners' cells. Once they're free, our men will be able to take control of the ship.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_387")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: And finally, we've got several damaged freighters out there. Imperial forces attacked them, thinking they carried Rebel forces. They didn't. These are innocent bystanders, and they've suffered on account of us, and now they're sitting ducks. Imperial forces are getting ready to move in and seize those ships. We're going to save them. 
			string_id message = new string_id (c_stringFile, "s_389");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_391");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 159);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch159 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: And finally, we've got several damaged freighters out there. Imperial forces attacked them, thinking they carried Rebel forces. They didn't. These are innocent bystanders, and they've suffered on account of us, and now they're sitting ducks. Imperial forces are getting ready to move in and seize those ships. We're going to save them. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_391")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: So? Which mission will you take?
			string_id message = new string_id (c_stringFile, "s_393");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Let me at those Imperial patrols.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll fly escort for those Rebel spies.
			boolean hasResponse1 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I want to help those prisoners. 
			boolean hasResponse2 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: I'll do whatever I can to help those disabled freighters.
			boolean hasResponse3 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: Can I hear the briefing again?
			boolean hasResponse4 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_89951606");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_91502216");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67ee2a0");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c1c9b365");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49805f81");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 151);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch160 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So? Which mission will you take?

	//-- [RESPONSE NOTE] Destroy Duty
	//-- PLAYER: Let me at those Imperial patrols.
	if (response == "s_89951606")
	{
		//-- [NOTE] Get to work
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionOne (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_a5b93c4d");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Escort Duty
	//-- PLAYER: I'll fly escort for those Rebel spies.
	if (response == "s_91502216")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionTwo (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_369");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Recovery Duty
	//-- PLAYER: I want to help those prisoners. 
	if (response == "s_67ee2a0")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionThree (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_372");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Rescue Duty
	//-- PLAYER: I'll do whatever I can to help those disabled freighters.
	if (response == "s_c1c9b365")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionFour (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_375");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can I hear the briefing again?
	if (response == "s_49805f81")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.
			string_id message = new string_id (c_stringFile, "s_4b3f09bc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_379");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 156);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch161 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good, you're here. I have your orders. Seems that somebody has taken an interest in your piloting abilities. You're being transferred.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where to?
	if (response == "s_1d23eb6a")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: You'll be serving under Admiral Willham Burke. You may have heard of him. He's commander of the Fourth Battle Group stationed in the Outer Rim, two time recipient of the Alliance Medal of Valor, and one of the finest field commanders in the business.
			string_id message = new string_id (c_stringFile, "s_e075ea09");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Nope, never heard of him.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Oh, THAT Admiral Burke. I thought you meant someone else.
			boolean hasResponse1 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_bc4f4a10");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8ee4f074");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 162);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I always knew I was destined for greatness.
	if (response == "s_3cc21469")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_disgust");

			//-- NPC: I can assure you that Admiral Burke will not be interested in how great you think you are. He'll expect you to shut your mouth and do your job.
			string_id message = new string_id (c_stringFile, "s_f252cbc8");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And Admiral Burke is...?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_622525cb");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 169);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch162 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You'll be serving under Admiral Willham Burke. You may have heard of him. He's commander of the Fourth Battle Group stationed in the Outer Rim, two time recipient of the Alliance Medal of Valor, and one of the finest field commanders in the business.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nope, never heard of him.
	if (response == "s_bc4f4a10")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then you've been living under a rock. He's heard of you. He's looking for men who can handle a Black Ops mission. I think you may be just the pilot he needs.
			string_id message = new string_id (c_stringFile, "s_265095d0");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is the mission?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_614d7ac4");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 163);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh, THAT Admiral Burke. I thought you meant someone else.
	if (response == "s_8ee4f074")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: You getting smart with me? For crying out loud, soldier, it's time for you to straighten up and fly right. Your orders are to report to Doaba Guerfel on Corellia. Admiral Burke will be there to fill you in on the rest of the details.
			string_id message = new string_id (c_stringFile, "s_36fbddee");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't really like Corellia this time of year.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9e999838");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 167);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch163 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then you've been living under a rock. He's heard of you. He's looking for men who can handle a Black Ops mission. I think you may be just the pilot he needs.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is the mission?
	if (response == "s_614d7ac4")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "laugh");

			//-- NPC: Didn't I say it was top secret? That generally means they don't broadcast all the details. I am sure that Admiral Burke will fill you in once you report for duty.
			string_id message = new string_id (c_stringFile, "s_bed2013a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where am I headed?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ef167e72");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 164);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch164 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Didn't I say it was top secret? That generally means they don't broadcast all the details. I am sure that Admiral Burke will fill you in once you report for duty.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where am I headed?
	if (response == "s_ef167e72")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: You'll find the Admiral on Corellia, in Doaba Guerfel. You had better prepare yourself. The Fourth Battle Group takes on some of the most dangerous and difficult tasks in the Outer Rim.
			string_id message = new string_id (c_stringFile, "s_e7488f0b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can handle it.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e1da7727");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 165);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch165 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You'll find the Admiral on Corellia, in Doaba Guerfel. You had better prepare yourself. The Fourth Battle Group takes on some of the most dangerous and difficult tasks in the Outer Rim.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can handle it.
	if (response == "s_e1da7727")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Yes, you can. But that doesn't mean you know everything. Keep your wits about you and pay attention. You could learn a lot from Admiral Burke. Now don't keep him waiting. Good luck, pilot.
			string_id message = new string_id (c_stringFile, "s_35208536");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch167 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You getting smart with me? For crying out loud, soldier, it's time for you to straighten up and fly right. Your orders are to report to Doaba Guerfel on Corellia. Admiral Burke will be there to fill you in on the rest of the details.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't really like Corellia this time of year.
	if (response == "s_9e999838")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "threaten");

			//-- NPC: Are you trying to push my buttons? Bad move, soldier. Now listen to me. Obey your orders, don't give Admiral Burke any of your lip, and pay attention. You could probably learn a thing or two from the Admiral. Now get moving.
			string_id message = new string_id (c_stringFile, "s_a778e999");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch169 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can assure you that Admiral Burke will not be interested in how great you think you are. He'll expect you to shut your mouth and do your job.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And Admiral Burke is...?
	if (response == "s_622525cb")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Your new commanding officer, Admiral Willham Burke. You may have heard of him. Commander of the Fourth Battle Group stationed in the Outer Rim, two time recipient of the Alliance Medal of Valor, one of the finest field commanders in the business.
			string_id message = new string_id (c_stringFile, "s_3bf1bb23");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Nope, never heard of him.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Oh, THAT Admiral Burke. I thought you meant someone else.
			boolean hasResponse1 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_bc4f4a10");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8ee4f074");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 162);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch170 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your new commanding officer, Admiral Willham Burke. You may have heard of him. Commander of the Fourth Battle Group stationed in the Outer Rim, two time recipient of the Alliance Medal of Valor, one of the finest field commanders in the business.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nope, never heard of him.
	if (response == "s_bc4f4a10")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then you've been living under a rock. He's heard of you. He's looking for men who can handle a Black Ops mission. I think you may be just the pilot he needs.
			string_id message = new string_id (c_stringFile, "s_265095d0");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is the mission?
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_614d7ac4");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 163);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh, THAT Admiral Burke. I thought you meant someone else.
	if (response == "s_8ee4f074")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: You getting smart with me? For crying out loud, soldier, it's time for you to straighten up and fly right. Your orders are to report to Doaba Guerfel on Corellia. Admiral Burke will be there to fill you in on the rest of the details.
			string_id message = new string_id (c_stringFile, "s_36fbddee");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't really like Corellia this time of year.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9e999838");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 167);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_rebel_tier4_handleBranch171 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Glad to see that you made it back from your assignment with Admiral Burke. Are you looking for work?

	//-- [RESPONSE NOTE] Destroy Duty
	//-- PLAYER: Let me at those Imperial patrols.
	if (response == "s_89951606")
	{
		//-- [NOTE] Get to work
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionOne (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_a5b93c4d");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Escort Duty
	//-- PLAYER: I'll fly escort for those Rebel spies.
	if (response == "s_91502216")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionTwo (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_369");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Recovery Duty
	//-- PLAYER: I want to help those prisoners. 
	if (response == "s_67ee2a0")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionThree (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_372");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] Rescue Duty
	//-- PLAYER: I'll do whatever I can to help those disabled freighters.
	if (response == "s_c1c9b365")
	{
		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			doAnimationAction (player, "salute1");

			tatooine_rebel_tier4_action_grantDutyMissionFour (player, npc);

			//-- NPC: You're cleared for liftoff.
			string_id message = new string_id (c_stringFile, "s_375");
			utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can I hear the briefing again?
	if (response == "s_49805f81")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I need a pilot to travel to  the Yavin system and launch a series of attacks against Imperial patrols near the Death Star debris field. We've got Rebel smugglers in that system, and they're doing their best to collect Death Star components for analysis.
			string_id message = new string_id (c_stringFile, "s_4b3f09bc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_379");

				utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 156);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.tatooine_rebel_tier4");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition( self, CONDITION_SPACE_INTERESTING );
	setInvulnerable(self, true);
	factions.setFaction( self, factions.FACTION_REBEL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition( self, CONDITION_SPACE_INTERESTING );
	setInvulnerable(self, true);
	factions.setFaction( self, factions.FACTION_REBEL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);

	faceTo( self, player );

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.tatooine_rebel_tier4");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (!tatooine_rebel_tier4_condition_isPilot (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: I don't think that you belong here.
		string_id message = new string_id (c_stringFile, "s_4a4a0211");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You're the wrong faction.
	if (tatooine_rebel_tier4_condition_isWrongFaction (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: I don't think that you belong here, soldier.
		string_id message = new string_id (c_stringFile, "s_4");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (!tatooine_rebel_tier4_condition_onMyTrack (player, npc))
	{
		doAnimationAction (npc, "rub_chin_thoughtful");

		//-- NPC: Eh? You don't fly for the Crimson Phoenix. What are you doing here?
		string_id message = new string_id (c_stringFile, "s_b9b83ec5");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm looking for missions.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d157e1de");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 3);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You're not through tier-3 yet
	if (!tatooine_rebel_tier4_condition_hasCompletedTier3 (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: I think you've got work to do for Ulvaw'op, soldier.
		string_id message = new string_id (c_stringFile, "s_46ccc483");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You're busy.  Already doing a mission.  Hup hup, go do it.
	if (tatooine_rebel_tier4_condition_isOnMission (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: You've already got a mission. I suggest you do it.
		string_id message = new string_id (c_stringFile, "s_a86d6540");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You failed mission 1, do it over.
	if (tatooine_rebel_tier4_condition_faliedMissionOne (player, npc))
	{
		tatooine_rebel_tier4_action_grantMissionOne (player, npc);

		//-- NPC: That's mission failure, soldier.
		string_id message = new string_id (c_stringFile, "s_8d9faecf");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Requesting redeployment!
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Are you transferring me out of this unit?
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_a95ef734");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_9fc24a78");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 8);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You failed mission 2, do it over.
	if (tatooine_rebel_tier4_condition_failedMissionTwo (player, npc))
	{
		tatooine_rebel_tier4_action_grantMissionTwo (player, npc);

		//-- NPC: Where's that Imperial ship?
		string_id message = new string_id (c_stringFile, "s_9b578280");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I haven't brought one down yet.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: We're trying, sir.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1678be5a");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_6912a453");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 11);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You failed mission 3, do it over.
	if (tatooine_rebel_tier4_condition_failedMissionThree (player, npc))
	{
		doAnimationAction (npc, "shake_head_disgust");

		tatooine_rebel_tier4_action_grantMissionThree (player, npc);

		//-- NPC: Unacceptable, soldier.
		string_id message = new string_id (c_stringFile, "s_6d4fe1fb");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I want to be a part of the Crimson Phoenix, sir.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Requesting redeployment, sir!
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_8c5f29f4");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_63740522");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 14);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You failed mission 4, do it over.
	if (tatooine_rebel_tier4_condition_failedMissionFour (player, npc))
	{
		doAnimationAction (npc, "rub_chin_thoughtful");

		tatooine_rebel_tier4_action_grantMissionFour (player, npc);

		//-- NPC: I thought you said you WANTED to be a part of the Crimson Phoenix.
		string_id message = new string_id (c_stringFile, "s_eb925c97");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I do, sir!
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Sir, it won't happen again.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4479e343");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_2022581b");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 17);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You have completed mission one and so here is your reward.
	if (tatooine_rebel_tier4_condition_isGettingMissionOneReward (player, npc))
	{
		doAnimationAction (npc, "nod_head_once");

		tatooine_rebel_tier4_action_rewardForMissionOne (player, npc);

		//-- NPC: All soldiers receive duty pay at the end of each mission.
		string_id message = new string_id (c_stringFile, "s_831e2b3a");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you, sir.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Glad to hear it.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_987445c9");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_f69a2921");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 20);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You have completed mission two and so here is your reward.
	if (tatooine_rebel_tier4_condition_isGettingMissionTwoReward (player, npc))
	{
		doAnimationAction (npc, "nod_head_once");

		tatooine_rebel_tier4_action_rewardForMissionTwo (player, npc);

		//-- NPC: Nice work, %TU. Our engineers are examining  that TIE fighter now. Here's your duty pay.
		string_id message = new string_id (c_stringFile, "s_6c524e01");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Excellent.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Thank you, sir.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_9c236354");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_42");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 23);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You have completed mission three and so here is your reward.
	if (tatooine_rebel_tier4_condition_isGettingMissionThreeReward (player, npc))
	{
		tatooine_rebel_tier4_action_rewardForMissionThree (player, npc);

		//-- NPC: I have your duty pay.
		string_id message = new string_id (c_stringFile, "s_d5a98554");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I did a good job out there.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'll take it.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_acef64cd");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d0fd857b");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 26);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You have completed mission four and so here is your reward.
	if (tatooine_rebel_tier4_condition_isGettingMissionFourReward (player, npc))
	{
		tatooine_rebel_tier4_action_rewardForMissionFour (player, npc);

		//-- NPC: Here's a little something.
		string_id message = new string_id (c_stringFile, "s_bf1cdb65");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Duty pay?
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Thank you, sir.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_a58b9067");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_54");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 29);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_rebel_tier4_condition_readyForMissionFour (player, npc))
	{
		doAnimationAction (npc, "salute2");

		doAnimationAction (player, "salute2");

		//-- NPC: Congratulations, soldier. You're officially a part of the Crimson Phoenix.
		string_id message = new string_id (c_stringFile, "s_d30b6d26");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you, sir. I'm happy to be a part of the team. 
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Excellent.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_87f091b9");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_90");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 32);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] Those new ships of the Empire keep giving us problems %TU.
	if (tatooine_rebel_tier4_condition_readyForMissionThree (player, npc))
	{
		doAnimationAction (npc, "beckon");

		//-- NPC: We've been taking a close look at that TIE fighter. Quite a piece of machinery.
		string_id message = new string_id (c_stringFile, "s_49bf2ccb");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Especially those guns.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: They're going to give us a problem, sir.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c8a0830d");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c01ad90e");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 52);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] didn't do too bad in the last mission, even against overwhelming odds.Those experimental fighters of the Empire makes for a challenge.
	if (tatooine_rebel_tier4_condition_readyForMissionTwo (player, npc))
	{
		doAnimationAction (npc, "rub_chin_thoughtful");

		//-- NPC: My men tell me you weren't too bad up there. 
		string_id message = new string_id (c_stringFile, "s_7b03d343");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Those TIE fighters are tough!
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I held my own.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d059f8aa");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_24f29c02");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 72);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_rebel_tier4_condition_readyForMissionOne (player, npc))
	{
		doAnimationAction (npc, "beckon");

		//-- NPC: You're up. Let's see if you can keep up with my squadron.
		string_id message = new string_id (c_stringFile, "s_37df0fba");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What's the mission, sir?
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'm ready to go.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5bc07030");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_321");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 103);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (!tatooine_rebel_tier4_condition_hasMetMe (player, npc))
	{
		//-- NPC: Hello, pilot. Welcome to Rori. First time here?
		string_id message = new string_id (c_stringFile, "s_1ec8846c");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes sir.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_340");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 132);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You're ready for a new skill, which would you like?
	if (tatooine_rebel_tier4_condition_isReadyForTraining (player, npc))
	{
		//-- NPC: Well soldier, you've earned the right to upgrade to a new skill. I expect all my pilots to continue their training, at all times!
		string_id message = new string_id (c_stringFile, "s_cb594529");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What is on the training schedule today?
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_411");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 142);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] You have not completed tier-4, so do one of these duty missions until you xp your way to a new skill.
	if (!tatooine_rebel_tier4_condition_hasCompletedTier4 (player, npc))
	{
		//-- NPC: Well? Are you ready for a duty assignment? Or would you like to hear the briefing again?
		string_id message = new string_id (c_stringFile, "s_39a10eac");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Let me at those Imperial patrols.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'll fly escort for those Rebel spies.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I want to help those prisoners. 
		boolean hasResponse2 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: I'll do whatever I can to help those disabled freighters.
		boolean hasResponse3 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		//-- PLAYER: Can I hear the briefing again?
		boolean hasResponse4 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse4 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_89951606");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_91502216");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_67ee2a0");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c1c9b365");

			if (hasResponse4)
				responses [responseIndex++] = new string_id (c_stringFile, "s_49805f81");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 151);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (!tatooine_rebel_tier4_condition_hasMasterSkill (player, npc))
	{
		doAnimationAction (npc, "beckon");

		//-- NPC: Good, you're here. I have your orders. Seems that somebody has taken an interest in your piloting abilities. You're being transferred.
		string_id message = new string_id (c_stringFile, "s_30a32651");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Where to?
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I always knew I was destined for greatness.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1d23eb6a");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3cc21469");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 161);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
	{
		//-- NPC: Glad to see that you made it back from your assignment with Admiral Burke. Are you looking for work?
		string_id message = new string_id (c_stringFile, "s_233489bc");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Let me at those Imperial patrols.
		boolean hasResponse0 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'll fly escort for those Rebel spies.
		boolean hasResponse1 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I want to help those prisoners. 
		boolean hasResponse2 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: I'll do whatever I can to help those disabled freighters.
		boolean hasResponse3 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		//-- PLAYER: Can I hear the briefing again?
		boolean hasResponse4 = false;
		if (tatooine_rebel_tier4_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse4 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_89951606");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_91502216");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_67ee2a0");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c1c9b365");

			if (hasResponse4)
				responses [responseIndex++] = new string_id (c_stringFile, "s_49805f81");

			utils.setScriptVar (player, "conversation.tatooine_rebel_tier4.branchId", 151);

			npcStartConversation (player, npc, "tatooine_rebel_tier4", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "tatooine_rebel_tier4")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

	if (branchId == 3 && tatooine_rebel_tier4_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && tatooine_rebel_tier4_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && tatooine_rebel_tier4_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && tatooine_rebel_tier4_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && tatooine_rebel_tier4_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && tatooine_rebel_tier4_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && tatooine_rebel_tier4_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && tatooine_rebel_tier4_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && tatooine_rebel_tier4_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && tatooine_rebel_tier4_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && tatooine_rebel_tier4_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 33 && tatooine_rebel_tier4_handleBranch33 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && tatooine_rebel_tier4_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 35 && tatooine_rebel_tier4_handleBranch35 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 36 && tatooine_rebel_tier4_handleBranch36 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && tatooine_rebel_tier4_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && tatooine_rebel_tier4_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && tatooine_rebel_tier4_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 40 && tatooine_rebel_tier4_handleBranch40 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && tatooine_rebel_tier4_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 43 && tatooine_rebel_tier4_handleBranch43 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 44 && tatooine_rebel_tier4_handleBranch44 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 45 && tatooine_rebel_tier4_handleBranch45 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && tatooine_rebel_tier4_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 47 && tatooine_rebel_tier4_handleBranch47 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 48 && tatooine_rebel_tier4_handleBranch48 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 49 && tatooine_rebel_tier4_handleBranch49 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 50 && tatooine_rebel_tier4_handleBranch50 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && tatooine_rebel_tier4_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && tatooine_rebel_tier4_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 54 && tatooine_rebel_tier4_handleBranch54 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 55 && tatooine_rebel_tier4_handleBranch55 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 56 && tatooine_rebel_tier4_handleBranch56 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 57 && tatooine_rebel_tier4_handleBranch57 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 58 && tatooine_rebel_tier4_handleBranch58 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 59 && tatooine_rebel_tier4_handleBranch59 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 61 && tatooine_rebel_tier4_handleBranch61 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 62 && tatooine_rebel_tier4_handleBranch62 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 63 && tatooine_rebel_tier4_handleBranch63 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && tatooine_rebel_tier4_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 65 && tatooine_rebel_tier4_handleBranch65 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 66 && tatooine_rebel_tier4_handleBranch66 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 67 && tatooine_rebel_tier4_handleBranch67 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 68 && tatooine_rebel_tier4_handleBranch68 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 69 && tatooine_rebel_tier4_handleBranch69 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 70 && tatooine_rebel_tier4_handleBranch70 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 72 && tatooine_rebel_tier4_handleBranch72 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 73 && tatooine_rebel_tier4_handleBranch73 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 74 && tatooine_rebel_tier4_handleBranch74 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 75 && tatooine_rebel_tier4_handleBranch75 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 76 && tatooine_rebel_tier4_handleBranch76 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 77 && tatooine_rebel_tier4_handleBranch77 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 78 && tatooine_rebel_tier4_handleBranch78 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 79 && tatooine_rebel_tier4_handleBranch79 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 80 && tatooine_rebel_tier4_handleBranch80 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 81 && tatooine_rebel_tier4_handleBranch81 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 83 && tatooine_rebel_tier4_handleBranch83 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 84 && tatooine_rebel_tier4_handleBranch84 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 85 && tatooine_rebel_tier4_handleBranch85 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 86 && tatooine_rebel_tier4_handleBranch86 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 87 && tatooine_rebel_tier4_handleBranch87 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 88 && tatooine_rebel_tier4_handleBranch88 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 89 && tatooine_rebel_tier4_handleBranch89 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 90 && tatooine_rebel_tier4_handleBranch90 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 92 && tatooine_rebel_tier4_handleBranch92 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 93 && tatooine_rebel_tier4_handleBranch93 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 94 && tatooine_rebel_tier4_handleBranch94 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 95 && tatooine_rebel_tier4_handleBranch95 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 96 && tatooine_rebel_tier4_handleBranch96 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 97 && tatooine_rebel_tier4_handleBranch97 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 98 && tatooine_rebel_tier4_handleBranch98 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 99 && tatooine_rebel_tier4_handleBranch99 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 100 && tatooine_rebel_tier4_handleBranch100 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 101 && tatooine_rebel_tier4_handleBranch101 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 103 && tatooine_rebel_tier4_handleBranch103 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 104 && tatooine_rebel_tier4_handleBranch104 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 105 && tatooine_rebel_tier4_handleBranch105 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 106 && tatooine_rebel_tier4_handleBranch106 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 107 && tatooine_rebel_tier4_handleBranch107 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 108 && tatooine_rebel_tier4_handleBranch108 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 109 && tatooine_rebel_tier4_handleBranch109 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 110 && tatooine_rebel_tier4_handleBranch110 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 111 && tatooine_rebel_tier4_handleBranch111 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 112 && tatooine_rebel_tier4_handleBranch112 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 113 && tatooine_rebel_tier4_handleBranch113 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 114 && tatooine_rebel_tier4_handleBranch114 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 115 && tatooine_rebel_tier4_handleBranch115 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 117 && tatooine_rebel_tier4_handleBranch117 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 118 && tatooine_rebel_tier4_handleBranch118 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 119 && tatooine_rebel_tier4_handleBranch119 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 120 && tatooine_rebel_tier4_handleBranch120 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 121 && tatooine_rebel_tier4_handleBranch121 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 122 && tatooine_rebel_tier4_handleBranch122 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 123 && tatooine_rebel_tier4_handleBranch123 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 124 && tatooine_rebel_tier4_handleBranch124 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 126 && tatooine_rebel_tier4_handleBranch126 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 127 && tatooine_rebel_tier4_handleBranch127 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 128 && tatooine_rebel_tier4_handleBranch128 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 129 && tatooine_rebel_tier4_handleBranch129 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 130 && tatooine_rebel_tier4_handleBranch130 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 132 && tatooine_rebel_tier4_handleBranch132 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 133 && tatooine_rebel_tier4_handleBranch133 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 134 && tatooine_rebel_tier4_handleBranch134 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 135 && tatooine_rebel_tier4_handleBranch135 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 136 && tatooine_rebel_tier4_handleBranch136 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 137 && tatooine_rebel_tier4_handleBranch137 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 138 && tatooine_rebel_tier4_handleBranch138 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 139 && tatooine_rebel_tier4_handleBranch139 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 140 && tatooine_rebel_tier4_handleBranch140 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 141 && tatooine_rebel_tier4_handleBranch141 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 142 && tatooine_rebel_tier4_handleBranch142 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 143 && tatooine_rebel_tier4_handleBranch143 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 145 && tatooine_rebel_tier4_handleBranch145 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 147 && tatooine_rebel_tier4_handleBranch147 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 149 && tatooine_rebel_tier4_handleBranch149 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 151 && tatooine_rebel_tier4_handleBranch151 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 156 && tatooine_rebel_tier4_handleBranch156 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 157 && tatooine_rebel_tier4_handleBranch157 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 158 && tatooine_rebel_tier4_handleBranch158 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 159 && tatooine_rebel_tier4_handleBranch159 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 160 && tatooine_rebel_tier4_handleBranch160 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 161 && tatooine_rebel_tier4_handleBranch161 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 162 && tatooine_rebel_tier4_handleBranch162 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 163 && tatooine_rebel_tier4_handleBranch163 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 164 && tatooine_rebel_tier4_handleBranch164 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 165 && tatooine_rebel_tier4_handleBranch165 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 167 && tatooine_rebel_tier4_handleBranch167 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 169 && tatooine_rebel_tier4_handleBranch169 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 170 && tatooine_rebel_tier4_handleBranch170 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 171 && tatooine_rebel_tier4_handleBranch171 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.tatooine_rebel_tier4.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

