// ======================================================================
//
// legacy_naboo_typho.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/legacy_naboo_typho";

// ======================================================================
// Script Conditions
// ======================================================================

boolean legacy_naboo_typho_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_finishedSabe (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedQuest (player, "quest/legacy_naboo_helping_the_handmaidens"))
	{
		return true;
	}
	return false;		
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_narglatchClawsActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "narglatchClaws"))
	{
		return true;
	}
	return false;		
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_narglatchClawsFinished (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedTask(player, "quest/legacy_naboo_the_keren_incident", "narglatchClaws"))
	{
		return true;
	}
	return false;	
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_veermokClawsActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "veermokClaws"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_veermokClawsFinished (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedTask(player, "quest/legacy_naboo_the_keren_incident", "veermokClaws"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_stolenGoodsFinished (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedTask(player, "quest/legacy_naboo_the_keren_incident", "stolenGoods"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_stolenGoodsActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "stolenGoods"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_unusualWeaponsFinished (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedTask(player, "quest/legacy_naboo_the_keren_incident", "unusualWeapons"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_unusualWeaponsActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "unusualWeapons"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_findBaseActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "findBase"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_goToBaseActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "goToBase"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_killAssassinActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "killAssassin"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_recoverDataActive (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "quest/legacy_naboo_the_keren_incident", "recoverData"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_recoverDataFinished (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedTask(player, "quest/legacy_naboo_the_keren_incident", "recoverData"))
	{
		return true;
	}
	return false;
}

// ----------------------------------------------------------------------

boolean legacy_naboo_typho_condition_completedQuest (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedQuest (player, "quest/legacy_naboo_the_keren_incident"))
	{
		return true;
	}
	return false;		
}

// ======================================================================
// Script Actions
// ======================================================================

void legacy_naboo_typho_action_grantTyphoQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "quest/legacy_naboo_the_keren_incident");
}

// ----------------------------------------------------------------------

void legacy_naboo_typho_action_signalNarglatchClaws (obj_id player, obj_id npc)
{
	groundquests.sendSignal (player, "narglatchClaws");
}

// ----------------------------------------------------------------------

void legacy_naboo_typho_action_signalVeermokClaws (obj_id player, obj_id npc)
{
	groundquests.sendSignal (player, "veermokClaws");
}

// ----------------------------------------------------------------------

void legacy_naboo_typho_action_signalStolenGoods (obj_id player, obj_id npc)
{
	groundquests.sendSignal (player, "stolenGoods");
}

// ----------------------------------------------------------------------

void legacy_naboo_typho_action_signalUnusualWeapons (obj_id player, obj_id npc)
{
	groundquests.sendSignal (player, "unusualWeapons");
}

// ----------------------------------------------------------------------

void legacy_naboo_typho_action_signalComplete (obj_id player, obj_id npc)
{
	groundquests.sendSignal (player, "encryptedData");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int legacy_naboo_typho_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're back! Great. Let me take a look at those weapons. Hm...yes, it's just what I thought. These would certainly simulate a wild animal attack. Now we need to find out where the Coalition is hiding out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You want me to look into it?
	if (response == "s_63")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_signalUnusualWeapons (player, npc);

			//-- NPC: Sure. Thanks for volunteering. I think if you take down enough Coalition thugs you should be able to figure out where they're hiding. I'll make contact with you in the field if we get anything new.
			string_id message = new string_id (c_stringFile, "s_64");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I had a feeling. These visually match up with the descriptions we got for the missing goods. The lab came back with their answer too, definitely not an animal attack. Someone planned these murders. And now, thanks to these stolen goods, we know who.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What now?
	if (response == "s_57")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: There's just a little more evidence we need to gather. I'm not going to let these guys get off because we got anxious and moved in too fast. My understanding is that some of the higher ranking Coalition members may be carrying some unusual weapons. If you can get those and we can match them to the victims wounds we'll be all set.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm ready whenever you are.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There's just a little more evidence we need to gather. I'm not going to let these guys get off because we got anxious and moved in too fast. My understanding is that some of the higher ranking Coalition members may be carrying some unusual weapons. If you can get those and we can match them to the victims wounds we'll be all set.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready whenever you are.
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_signalStolenGoods (player, npc);

			//-- NPC: You're turning out to be quite an agent. I'll remember that in the future. Ok, go out there and see if you can find me some of these unusual weapons.
			string_id message = new string_id (c_stringFile, "s_60");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good, you've brought me the veermok claws. We're going to switch modes here for a minute. I'll send these claws off to the lab, but I have a new lead. There's a new group of criminals forming on Naboo. They call themselves the Naboo Criminal Coalition. We're going to check them out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Tell me what you need.
	if (response == "s_50")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_signalVeermokClaws (player, npc);

			//-- NPC: The Coalition thugs have been bragging about some of their stolen goods. My informants tell me that some of the goods they have match items that were missing when we found the victims. Check it out, see if you can find the stolen goods, and then report back to me.
			string_id message = new string_id (c_stringFile, "s_54");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'll get these to the lab immediately. In the mean time, I need another set of claws. One of the scientists found some research papers on how the Imperial army was training veermoks. That research might have been done on Naboo.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So I'll go get veermok claws.
	if (response == "s_40")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_signalNarglatchClaws (player, npc);

			//-- NPC: I knew I could count on you. Head out there and bring me back ten of these. Just like the before.
			string_id message = new string_id (c_stringFile, "s_42");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You think some of those veermok are here?
	if (response == "s_41")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: I still think what I thought originally. That this is something else, and not a wild animal. But I'm covering every possibility.
			string_id message = new string_id (c_stringFile, "s_43");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok, I'll go get veermok claws.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I still think what I thought originally. That this is something else, and not a wild animal. But I'm covering every possibility.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok, I'll go get veermok claws.
	if (response == "s_44")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_signalNarglatchClaws (player, npc);

			//-- NPC: I knew I could count on you. Head out there and bring me back ten of these. Just like the before.
			string_id message = new string_id (c_stringFile, "s_42");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're the one Sabe sent? Good, she tells me you're an excellent field operative. I need someone with some experience and who knows how to handle a dangerous situation. You sound like the person for the job.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Dangerous? What did Sabe tell you?
	if (response == "s_33")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: She told me what you did for the handmaidens. You've handled Nightspiders, fanned rawls, veermoks, and the Mauler clan. I can't think of anyone more qualified to help me out.
			string_id message = new string_id (c_stringFile, "s_35");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I guess I did do all that.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: That's right. I'm the one you want.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_37");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm exactly the person you're looking for.
	if (response == "s_74")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here's my situation. There have been a series of mysterious accidents, all claiming the lives of top government officials here in Keren. The bodies are found clawed and bloody, and there's concern that a creature or group of creatures has gone rabid.
			string_id message = new string_id (c_stringFile, "s_76");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You don't believe that, do you?
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Just tell me what you need done.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_108");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: She told me what you did for the handmaidens. You've handled Nightspiders, fanned rawls, veermoks, and the Mauler clan. I can't think of anyone more qualified to help me out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I guess I did do all that.
	if (response == "s_37")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, all right then. Let's get down to business, shall we?
			string_id message = new string_id (c_stringFile, "s_46");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ready when you are.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm not ready just yet.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_51");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_53");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's right. I'm the one you want.
	if (response == "s_72")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here's my situation. There have been a series of mysterious accidents, all claiming the lives of top government officials here in Keren. The bodies are found clawed and bloody, and there's concern that a creature or group of creatures has gone rabid.
			string_id message = new string_id (c_stringFile, "s_76");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You don't believe that, do you?
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Just tell me what you need done.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_108");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, all right then. Let's get down to business, shall we?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ready when you are.
	if (response == "s_51")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here's my situation. There have been a series of mysterious accidents, all claiming the lives of top government officials here in Keren. The bodies are found clawed and bloody, and there's concern that a creature or group of creatures has gone rabid.
			string_id message = new string_id (c_stringFile, "s_76");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You don't believe that, do you?
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Just tell me what you need done.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_108");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm not ready just yet.
	if (response == "s_53")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hm. Sabe was so sure about you. Well, I guess you never can tell.
			string_id message = new string_id (c_stringFile, "s_102");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Here's my situation. There have been a series of mysterious accidents, all claiming the lives of top government officials here in Keren. The bodies are found clawed and bloody, and there's concern that a creature or group of creatures has gone rabid.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You don't believe that, do you?
	if (response == "s_78")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, I don't. You're pretty sharp. There's too much coincidence. How come every victim is a high ranking government official? How come no one else has been attacked? What is this creature and why is it suddenly rabid? No, there's just too many questions.
			string_id message = new string_id (c_stringFile, "s_80");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where do I come in?
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll help. What do you need done?
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_82");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_106");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Just tell me what you need done.
	if (response == "s_108")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_grantTyphoQuest (player, npc);

			//-- NPC: All right. We're looking at the narglatchs right now, based on the size and the depth of the wounds. Go out and get me 10 narglatch claws. When you're done bring them back and I'll get the lab to work on them.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No, I don't. You're pretty sharp. There's too much coincidence. How come every victim is a high ranking government official? How come no one else has been attacked? What is this creature and why is it suddenly rabid? No, there's just too many questions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where do I come in?
	if (response == "s_82")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: RSF headquarters wants to be sure that it's not just a coincidence, so they're doing a full investigation. They need exemplar claws from creatures in the area to test against the wounds of the victims. I need you to get those claws.
			string_id message = new string_id (c_stringFile, "s_84");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No problem.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What's an exemplar?
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_86");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_90");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll help. What do you need done?
	if (response == "s_106")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_grantTyphoQuest (player, npc);

			//-- NPC: All right. We're looking at the narglatchs right now, based on the size and the depth of the wounds. Go out and get me 10 narglatch claws. When you're done bring them back and I'll get the lab to work on them.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: RSF headquarters wants to be sure that it's not just a coincidence, so they're doing a full investigation. They need exemplar claws from creatures in the area to test against the wounds of the victims. I need you to get those claws.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No problem.
	if (response == "s_86")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_grantTyphoQuest (player, npc);

			//-- NPC: All right. We're looking at the narglatchs right now, based on the size and the depth of the wounds. Go out and get me 10 narglatch claws. When you're done bring them back and I'll get the lab to work on them.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's an exemplar?
	if (response == "s_90")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's a test case. You'll bring us a claw and we'll check to see if it's the same type that made the wounds. If we can rule out all the local animals then we can start looking for who really did this.
			string_id message = new string_id (c_stringFile, "s_92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Let's get to it.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_94");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_104");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 28);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's a test case. You'll bring us a claw and we'll check to see if it's the same type that made the wounds. If we can rule out all the local animals then we can start looking for who really did this.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand.
	if (response == "s_94")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: So, you're ready to go to work then?
			string_id message = new string_id (c_stringFile, "s_96");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Absolutely.
			boolean hasResponse0 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I really don't think so.
			boolean hasResponse1 = false;
			if (legacy_naboo_typho_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_98");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 29);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let's get to it.
	if (response == "s_104")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_grantTyphoQuest (player, npc);

			//-- NPC: All right. We're looking at the narglatchs right now, based on the size and the depth of the wounds. Go out and get me 10 narglatch claws. When you're done bring them back and I'll get the lab to work on them.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int legacy_naboo_typho_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So, you're ready to go to work then?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Absolutely.
	if (response == "s_98")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			legacy_naboo_typho_action_grantTyphoQuest (player, npc);

			//-- NPC: All right. We're looking at the narglatchs right now, based on the size and the depth of the wounds. Go out and get me 10 narglatch claws. When you're done bring them back and I'll get the lab to work on them.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I really don't think so.
	if (response == "s_100")
	{
		//-- [NOTE] 
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hm. Sabe was so sure about you. Well, I guess you never can tell.
			string_id message = new string_id (c_stringFile, "s_102");
			utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.legacy_naboo_typho");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.legacy_naboo_typho");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_completedQuest (player, npc))
	{
		//-- NPC: You're done. Thanks.
		string_id message = new string_id (c_stringFile, "s_70");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_recoverDataFinished (player, npc))
	{
		legacy_naboo_typho_action_signalComplete (player, npc);

		//-- NPC: This is it? This is it! It's encrypted, but I'll get the slicers on that right away. You've done a heck of a job. I thank you, and the Royal Security Forces thank you.
		string_id message = new string_id (c_stringFile, "s_67");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_recoverDataActive (player, npc))
	{
		//-- NPC: I need you to go to that Compound and bring back the information from their databank.
		string_id message = new string_id (c_stringFile, "s_68");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_killAssassinActive (player, npc))
	{
		//-- NPC: Feeling a little nervous? I don't blame you. That assassin's going to be pretty tough to deal with. Maybe you should take some back up.
		string_id message = new string_id (c_stringFile, "s_69");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_goToBaseActive (player, npc))
	{
		//-- NPC: What are you doing here? I sent you the location of that Coalition Compound. Go there.
		string_id message = new string_id (c_stringFile, "s_66");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_findBaseActive (player, npc))
	{
		//-- NPC: Don't worry, I'll contact you in the field if we get any new information. For now just keep looking for information from those thugs.
		string_id message = new string_id (c_stringFile, "s_65");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_unusualWeaponsFinished (player, npc))
	{
		//-- NPC: You're back! Great. Let me take a look at those weapons. Hm...yes, it's just what I thought. These would certainly simulate a wild animal attack. Now we need to find out where the Coalition is hiding out.
		string_id message = new string_id (c_stringFile, "s_62");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You want me to look into it?
		boolean hasResponse0 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_63");

			utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 7);

			npcStartConversation (player, npc, "legacy_naboo_typho", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_unusualWeaponsActive (player, npc))
	{
		//-- NPC: Have you found anything yet? Any weapons you don't recognize, or ones that could have caused the damage we've seen?
		string_id message = new string_id (c_stringFile, "s_61");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_stolenGoodsFinished (player, npc))
	{
		//-- NPC: I had a feeling. These visually match up with the descriptions we got for the missing goods. The lab came back with their answer too, definitely not an animal attack. Someone planned these murders. And now, thanks to these stolen goods, we know who.
		string_id message = new string_id (c_stringFile, "s_55");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What now?
		boolean hasResponse0 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_57");

			utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 10);

			npcStartConversation (player, npc, "legacy_naboo_typho", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_stolenGoodsActive (player, npc))
	{
		//-- NPC: Have you found any of the stolen goods I asked you to look for?
		string_id message = new string_id (c_stringFile, "s_56");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_veermokClawsFinished (player, npc))
	{
		//-- NPC: Good, you've brought me the veermok claws. We're going to switch modes here for a minute. I'll send these claws off to the lab, but I have a new lead. There's a new group of criminals forming on Naboo. They call themselves the Naboo Criminal Coalition. We're going to check them out.
		string_id message = new string_id (c_stringFile, "s_47");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Tell me what you need.
		boolean hasResponse0 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_50");

			utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 14);

			npcStartConversation (player, npc, "legacy_naboo_typho", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_veermokClawsActive (player, npc))
	{
		//-- NPC: I still need those Veermok claws to test against the victims.
		string_id message = new string_id (c_stringFile, "s_48");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_narglatchClawsFinished (player, npc))
	{
		//-- NPC: I'll get these to the lab immediately. In the mean time, I need another set of claws. One of the scientists found some research papers on how the Imperial army was training veermoks. That research might have been done on Naboo.
		string_id message = new string_id (c_stringFile, "s_39");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: So I'll go get veermok claws.
		boolean hasResponse0 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: You think some of those veermok are here?
		boolean hasResponse1 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_40");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_41");

			utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 17);

			npcStartConversation (player, npc, "legacy_naboo_typho", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_narglatchClawsActive (player, npc))
	{
		//-- NPC: I still need you to collect those narglatch claws so I can test them against the victims wounds.
		string_id message = new string_id (c_stringFile, "s_38");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition_finishedSabe (player, npc))
	{
		//-- NPC: You're the one Sabe sent? Good, she tells me you're an excellent field operative. I need someone with some experience and who knows how to handle a dangerous situation. You sound like the person for the job.
		string_id message = new string_id (c_stringFile, "s_31");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Dangerous? What did Sabe tell you?
		boolean hasResponse0 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'm exactly the person you're looking for.
		boolean hasResponse1 = false;
		if (legacy_naboo_typho_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_33");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_74");

			utils.setScriptVar (player, "conversation.legacy_naboo_typho.branchId", 21);

			npcStartConversation (player, npc, "legacy_naboo_typho", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (legacy_naboo_typho_condition__defaultCondition (player, npc))
	{
		//-- NPC: I'm not trying to be rude, but I'm very busy at the moment and I don't have time to talk with you. Perhaps you could come back some other time?
		string_id message = new string_id (c_stringFile, "s_110");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "legacy_naboo_typho")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.legacy_naboo_typho.branchId");

	if (branchId == 7 && legacy_naboo_typho_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && legacy_naboo_typho_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && legacy_naboo_typho_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && legacy_naboo_typho_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && legacy_naboo_typho_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && legacy_naboo_typho_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && legacy_naboo_typho_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && legacy_naboo_typho_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && legacy_naboo_typho_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && legacy_naboo_typho_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && legacy_naboo_typho_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && legacy_naboo_typho_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && legacy_naboo_typho_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && legacy_naboo_typho_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.legacy_naboo_typho.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

