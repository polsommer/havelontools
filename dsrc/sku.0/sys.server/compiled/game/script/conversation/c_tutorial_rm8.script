// ======================================================================
//
// c_tutorial_rm8.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.30 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.create;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/c_tutorial_rm8";

// ======================================================================
// Script Conditions
// ======================================================================

boolean c_tutorial_rm8_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean c_tutorial_rm8_condition_playerOnQuest (obj_id player, obj_id npc)
{
	int questId = questGetQuestId("quest/c_newbie_hall_03");
	int c_newbie_hall_end = groundquests.getTaskId(questId, "c_newbie_hall_end"); 
	
	boolean onTask = questIsQuestActive(questId, player)&&!questIsTaskComplete(questId, c_newbie_hall_end, player);
	
	return onTask;
}

// ----------------------------------------------------------------------

boolean c_tutorial_rm8_condition_taskComplete (obj_id player, obj_id npc)
{
	if (hasObjVar (player, "newbie.talkedtojedi"))
	{
		return true;
	}
	return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void c_tutorial_rm8_action_facePlayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
}

// ----------------------------------------------------------------------

void c_tutorial_rm8_action_actionSendSignal (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "c_newbie_hall_end");
	location here = getLocation(npc);
	location dark = new location (18.5f, -4.2f, -154f, here.area, here.cell);
	obj_id sith = create.object ("tutorial_dark_jedi", dark);
	faceTo (npc, sith);
	faceTo (sith, npc);
	addHate(npc, sith, 0.0f);
	addHate(sith, npc, 0.0f);
	setObjVar (player, "newbie.talkedtojedi",  1);
	ai_lib.setMood( npc, chat.MOOD_NONE );
	attachScript (npc, "theme_park.newbie_tutorial.tutorial_jedi_bark");
}

// ----------------------------------------------------------------------

void c_tutorial_rm8_action_giveJediQuest (obj_id player, obj_id npc)
{
	int questId = questGetQuestId("quest/c_newbie_hall_jedi");
	boolean onQuest = questIsQuestActive(questId, player);
	if (onQuest == false)
		{
			groundquests.grantQuest(questId, player, npc, true);
		}
	faceTo(npc, player);	
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int c_tutorial_rm8_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hold a minute %NU I must have a word with you. Do you know of the war that is brewing?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course. The Rebellion members are fighting for their freedom from the Empire's tyranny!
	if (response == "s_302")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: I'm glad you see the true nature of the war. However, before you see the Commander, there is something you must know.
			string_id message = new string_id (c_stringFile, "s_304");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who are you?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What do you want to tell me?
			boolean hasResponse1 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_306");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_346");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course. The Empire will defeat those rebel scum and return peace to the galaxy!
	if (response == "s_366")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_multiple");

			//-- NPC: I'm glad you understand the true nature of the war. But before you see the commander, there is something you must know.
			string_id message = new string_id (c_stringFile, "s_368");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who are you?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_370");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm glad you see the true nature of the war. However, before you see the Commander, there is something you must know.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who are you?
	if (response == "s_306")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_no");

			//-- NPC: Let's just say I'm a friend who is interested in your survival The Empire isn't the only group that has been watching you.
			string_id message = new string_id (c_stringFile, "s_308");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Someone else has been watching me?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why is everyone so interested in me?
			boolean hasResponse1 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_310");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_330");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you want to tell me?
	if (response == "s_346")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "slit_throat");

			//-- NPC: There are those on this station who would see you dead. You need to get off this station if you wish to live. I can help you.
			string_id message = new string_id (c_stringFile, "s_348");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who wants to kill me?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_350");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let's just say I'm a friend who is interested in your survival The Empire isn't the only group that has been watching you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Someone else has been watching me?
	if (response == "s_310")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod");

			//-- NPC: Yes, your potential has roused great interest. We would see that potential used in the fight against the tyranny of the Empire. Now, we must get you off this station. Every moment you stay here, your life is in danger.
			string_id message = new string_id (c_stringFile, "s_312");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I've got to get out of here! Can you help me?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How do I know that I can trust you?
			boolean hasResponse1 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_314");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_318");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why is everyone so interested in me?
	if (response == "s_330")
	{
		doAnimationAction (player, "point_to_self");

		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: There are forces at work here that you will come to understand in time. But for now, we need to get you off this station. Every moment you stay here, your life is in danger.
			string_id message = new string_id (c_stringFile, "s_332");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: In danger? From whom?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_334");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, your potential has roused great interest. We would see that potential used in the fight against the tyranny of the Empire. Now, we must get you off this station. Every moment you stay here, your life is in danger.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I've got to get out of here! Can you help me?
	if (response == "s_314")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_multiple");

			//-- NPC: Yes I can. Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_316");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I know that I can trust you?
	if (response == "s_318")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_shoulders");

			//-- NPC: You don't. But I can assure you that you can't trust the Empire either. So your choice is trust me, or trust them.
			string_id message = new string_id (c_stringFile, "s_320");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: All right. What do I need to do?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_322");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes I can. Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_56")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_57");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You don't. But I can assure you that you can't trust the Empire either. So your choice is trust me, or trust them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: All right. What do I need to do?
	if (response == "s_322")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Yes I can. Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_324");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_326");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes I can. Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_326")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_328");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There are forces at work here that you will come to understand in time. But for now, we need to get you off this station. Every moment you stay here, your life is in danger.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: In danger? From whom?
	if (response == "s_334")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_hands");

			//-- NPC: The Empire is looking for anyone who exhibits the potential to become a great ally in their war against the Rebellion. If you do not agree to join them, they will kill you.
			string_id message = new string_id (c_stringFile, "s_336");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where can I go? I don't have a ship!
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_338");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Empire is looking for anyone who exhibits the potential to become a great ally in their war against the Rebellion. If you do not agree to join them, they will kill you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where can I go? I don't have a ship!
	if (response == "s_338")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_340");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_342");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_342")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_344");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There are those on this station who would see you dead. You need to get off this station if you wish to live. I can help you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who wants to kill me?
	if (response == "s_350")
	{
		doAnimationAction (player, "point_to_self");

		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "poke");

			//-- NPC: The Empire will kill you if you do not agree to help them in their war against the Rebellion.
			string_id message = new string_id (c_stringFile, "s_352");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where can I go?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_354");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Empire will kill you if you do not agree to help them in their war against the Rebellion.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where can I go?
	if (response == "s_354")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			//-- NPC: I have a friend in Mos Eisley who is willing to help you.
			string_id message = new string_id (c_stringFile, "s_356");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you!
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_358");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have a friend in Mos Eisley who is willing to help you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you!
	if (response == "s_358")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_360");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_362");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_362")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_364");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm glad you understand the true nature of the war. But before you see the commander, there is something you must know.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who are you?
	if (response == "s_370")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_to_self");

			//-- NPC: I am a friend of the Empire's, which is more than I can say for others on this station.
			string_id message = new string_id (c_stringFile, "s_372");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you mean?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Friend of the Empire?
			boolean hasResponse1 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_374");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_390");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am a friend of the Empire's, which is more than I can say for others on this station.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you mean?
	if (response == "s_374")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: There are those on this station who secretly favor the Rebellion. Who do you think tipped off the pirates to your presence in this sector? They want to see you dead.
			string_id message = new string_id (c_stringFile, "s_376");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Dead? Me?! Why?!
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_378");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Friend of the Empire?
	if (response == "s_390")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod");

			//-- NPC: Yes, I work directly for Emperor Palpatine. I have been investigating the Commander of this station. He's suspected of being a Rebel sympathizer and has been smuggling guns to them. He is the one who tipped the pirates off to your presence in this sector. He will kill you before you can join the Empire. 
			string_id message = new string_id (c_stringFile, "s_392");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How can I get off this station before they kill me??
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Let 'em come for me, I'm not afraid of them!
			boolean hasResponse1 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_394");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_398");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There are those on this station who secretly favor the Rebellion. Who do you think tipped off the pirates to your presence in this sector? They want to see you dead.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Dead? Me?! Why?!
	if (response == "s_378")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "poke");

			//-- NPC: If someone with your potential joined forces with the Empire, it would go badly for the Rebellion. They are going to try to eliminate you before you reach your full abilities.
			string_id message = new string_id (c_stringFile, "s_380");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How can I get off this station before they kill me?!
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_382");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: If someone with your potential joined forces with the Empire, it would go badly for the Rebellion. They are going to try to eliminate you before you reach your full abilities.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How can I get off this station before they kill me?!
	if (response == "s_382")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_384");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_386");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_386")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_388");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, I work directly for Emperor Palpatine. I have been investigating the Commander of this station. He's suspected of being a Rebel sympathizer and has been smuggling guns to them. He is the one who tipped the pirates off to your presence in this sector. He will kill you before you can join the Empire. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How can I get off this station before they kill me??
	if (response == "s_394")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_forward");

			//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_396");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let 'em come for me, I'm not afraid of them!
	if (response == "s_398")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_finger_warning");

			//-- NPC: You are brave for one so young, but without training, your bravery alone will not keep you alive I am going to give you a ticket to Mos Eisley. Use the travel terminal in this room to get there. I have a friend there who will oversee your training until you are more proficient in your skills. Her name is Trehla Keelo and I will give you a waypoint to find her. Now hurry! Someone is coming!
			string_id message = new string_id (c_stringFile, "s_400");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who's coming?
			boolean hasResponse0 = false;
			if (c_tutorial_rm8_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_402");

				utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 29);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Use the travel terminal in this room to get to Mos Eisley. I will give you a waypoint to my friend there. Her name is Trehla Keelo and she is waiting for you. She will oversee your training until you are stronger and more proficient with your skills.  Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_58")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_59");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int c_tutorial_rm8_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are brave for one so young, but without training, your bravery alone will not keep you alive I am going to give you a ticket to Mos Eisley. Use the travel terminal in this room to get there. I have a friend there who will oversee your training until you are more proficient in your skills. Her name is Trehla Keelo and I will give you a waypoint to find her. Now hurry! Someone is coming!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who's coming?
	if (response == "s_402")
	{
		//-- [NOTE] 
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			c_tutorial_rm8_action_actionSendSignal (player, npc);

			//-- NPC: Just go!
			string_id message = new string_id (c_stringFile, "s_404");
			utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.c_tutorial_rm8");

	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, "Darex Rath");	
	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, "Darex Rath");
	ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );
	
	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.c_tutorial_rm8");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (c_tutorial_rm8_condition_taskComplete (player, npc))
	{
		doAnimationAction (npc, "wave_on_dismissing");

		doAnimationAction (player, "point_right");

		c_tutorial_rm8_action_facePlayer (player, npc);

		//-- NPC: Go on! Get out of here!
		string_id message = new string_id (c_stringFile, "s_406");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (c_tutorial_rm8_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "greet");

		c_tutorial_rm8_action_giveJediQuest (player, npc);

		//-- NPC: Hold a minute %NU I must have a word with you. Do you know of the war that is brewing?
		string_id message = new string_id (c_stringFile, "s_300");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Of course. The Rebellion members are fighting for their freedom from the Empire's tyranny!
		boolean hasResponse0 = false;
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Of course. The Empire will defeat those rebel scum and return peace to the galaxy!
		boolean hasResponse1 = false;
		if (c_tutorial_rm8_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_302");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_366");

			utils.setScriptVar (player, "conversation.c_tutorial_rm8.branchId", 2);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "c_tutorial_rm8", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "c_tutorial_rm8")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.c_tutorial_rm8.branchId");

	if (branchId == 2 && c_tutorial_rm8_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && c_tutorial_rm8_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && c_tutorial_rm8_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && c_tutorial_rm8_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && c_tutorial_rm8_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && c_tutorial_rm8_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && c_tutorial_rm8_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && c_tutorial_rm8_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && c_tutorial_rm8_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && c_tutorial_rm8_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && c_tutorial_rm8_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && c_tutorial_rm8_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && c_tutorial_rm8_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && c_tutorial_rm8_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && c_tutorial_rm8_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && c_tutorial_rm8_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && c_tutorial_rm8_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && c_tutorial_rm8_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && c_tutorial_rm8_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && c_tutorial_rm8_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && c_tutorial_rm8_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && c_tutorial_rm8_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.c_tutorial_rm8.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

