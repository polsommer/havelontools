// ======================================================================
//
// naboo_deeja_peak_vance_groten.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/naboo_deeja_peak_vance_groten";

// ======================================================================
// Script Conditions
// ======================================================================

boolean naboo_deeja_peak_vance_groten_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_startBeaconQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_goto_vance") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_goto_prof_hudmasse");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_onSafetyQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_beacon_safety");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_finishedSafetyQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_beacon_safety", "deeja_peak_beacon_safety_05") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_beacon_safety");
	
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_onDarknessQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_beacon_darkness");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_finishedDarknessQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_beacon_darkness", "deeja_peak_beacon_darkness_10") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_beacon_darkness");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_onFavorQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_beacon_favor");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_finishedFavorQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_beacon_favor", "deeja_peak_beacon_favor_05") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_beacon_favor");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_completedBeaconQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_beacon_mercs", "deeja_peak_beacon_mercs_06") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_beacon_mercs");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_onMercsQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_beacon_mercs");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_finishedMercQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_beacon_mercs", "deeja_peak_beacon_mercs_05");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_vance_groten_condition_noLuckWithKippy (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_beacon_darkness", "deeja_peak_beacon_darkness_04");
}

// ======================================================================
// Script Actions
// ======================================================================

void naboo_deeja_peak_vance_groten_action_grantSafetyQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_beacon_safety");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_grantDarknessQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_beacon_darkness");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_grantFavorQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_beacon_favor");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_grantMercsQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_beacon_mercs");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_signel_mercs_05 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_beacon_mercs_05");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_signal_darkness_04 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_beacon_darkness_04");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_endFavorQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_beacon_favor_05");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_endDarknessQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_beacon_darkness_10");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_endSafetyQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_beacon_safety_05");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_vance_groten_action_endGotoVance (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_goto_vance");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int naboo_deeja_peak_vance_groten_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm impressed. Those Strehkforce mercenaries are really tough, but you made short work of them. The beacon looks unharmed. It should work for what you need. Return with it to Professor Hudmasse.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will. Thanks!
	if (response == "s_87")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_vance_groten_action_signel_mercs_05 (player, npc);

			//-- NPC: I'm glad I could help.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You got my ring back! Thank you! Oh, about the security beacon. I finished fixing it, but it was stolen.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Stolen? By who?
	if (response == "s_58")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: A group of mercenaries from the area, Strehkforce mercenaries. They're commanded by Evan Strehk and Maris Fahrs. Robbery isn't usually their thing, but for some reason they wanted that beacon. I'm afraid you'll have to go take it back from them.
			string_id message = new string_id (c_stringFile, "s_59");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds like I have no choice.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A group of mercenaries from the area, Strehkforce mercenaries. They're commanded by Evan Strehk and Maris Fahrs. Robbery isn't usually their thing, but for some reason they wanted that beacon. I'm afraid you'll have to go take it back from them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds like I have no choice.
	if (response == "s_83")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_vance_groten_action_grantMercsQuest (player, npc);

			//-- NPC: Unfortunately, no. I'm truly sorry about this, but I was out numbered.
			string_id message = new string_id (c_stringFile, "s_84");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I knew Walker would have his old security beacon. Don't worry. I know this one is damaged, but it's nothing I can't fix. Er, while I work on that, I wonder if you would do me a favor?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of favor?
	if (response == "s_53")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: I was foolish enough to use a ring that is a family heirloom as a marker in a game of Sabacc, and of course I lost that game. I have since repaid the debt for which the ring was a marker, but I have not gotten my ring back. I was hoping you'd go collect my ring for me.
			string_id message = new string_id (c_stringFile, "s_54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How do I get the ring?
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I was foolish enough to use a ring that is a family heirloom as a marker in a game of Sabacc, and of course I lost that game. I have since repaid the debt for which the ring was a marker, but I have not gotten my ring back. I was hoping you'd go collect my ring for me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do I get the ring?
	if (response == "s_81")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: Go to the cantina and speak with Herman Pate. He has my ring. He's not a bad guy, but for some reason he hasn't ever returned my ring and seems to always avoid the subject. Herman is usually at the cantina. 
			string_id message = new string_id (c_stringFile, "s_82");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll go speak with him.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_98");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Go to the cantina and speak with Herman Pate. He has my ring. He's not a bad guy, but for some reason he hasn't ever returned my ring and seems to always avoid the subject. Herman is usually at the cantina. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll go speak with him.
	if (response == "s_98")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_vance_groten_action_grantFavorQuest (player, npc);

			//-- NPC: Thank you. I'll have the beacon fixed by the time you finish with that.
			string_id message = new string_id (c_stringFile, "s_99");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Kippy didn't have a beacon? Buried it? I guess I shouldn't be surprised. Let me think for a minute. Hmmm. Oh, I know. Walker Luskeske.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who is Walker Luskeske?
	if (response == "s_94")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: Another former security officer at Stonewall Labs. Walker retired shortly before the Labs shutdown. I'll bet he still has his old beacon. Go talk with him.
			string_id message = new string_id (c_stringFile, "s_95");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do that.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_96");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Another former security officer at Stonewall Labs. Walker retired shortly before the Labs shutdown. I'll bet he still has his old beacon. Go talk with him.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do that.
	if (response == "s_96")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_vance_groten_action_signal_darkness_04 (player, npc);

			//-- NPC: Walker will have one. I just know it.
			string_id message = new string_id (c_stringFile, "s_97");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I appreciate your help. I'd be more than happy to help you find a security beacon. I suggest going to speak with Kippy Martin.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who is Kippy Martin?
	if (response == "s_73")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: Kippy Martin was a former security officer at Stonewall Labs, but she had to quit after falling off of a speeder while moving at close to top speed. Kippy didn't seem to be badly hurt, but was never the same again. She might still have her security beacon.
			string_id message = new string_id (c_stringFile, "s_74");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, I'll go speak with Kippy Martin.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_75");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Kippy Martin was a former security officer at Stonewall Labs, but she had to quit after falling off of a speeder while moving at close to top speed. Kippy didn't seem to be badly hurt, but was never the same again. She might still have her security beacon.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, I'll go speak with Kippy Martin.
	if (response == "s_75")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_vance_groten_action_grantDarknessQuest (player, npc);

			//-- NPC: I'm sure she'll have one. 
			string_id message = new string_id (c_stringFile, "s_76");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Dee'ja Peak is probably the most beautiful mountain town on Naboo. I'm lucky to work here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Professor Hudmasse sent me to you.
	if (response == "s_37")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: He did? I'm sure he had his reasons for doing so. What can I do for you?
			string_id message = new string_id (c_stringFile, "s_39");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I need a security beacon. Professor Hudmasse thought you could help me.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_41");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: He did? I'm sure he had his reasons for doing so. What can I do for you?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need a security beacon. Professor Hudmasse thought you could help me.
	if (response == "s_41")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hmmm, I don't have any myself. I didn't see any point in keeping any of them once the Labs were shutdown. But I have some ideas of where you might find one. I'll gladly trade that information for a little assistance from you.
			string_id message = new string_id (c_stringFile, "s_60");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kind of assistance?
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmmm, I don't have any myself. I didn't see any point in keeping any of them once the Labs were shutdown. But I have some ideas of where you might find one. I'll gladly trade that information for a little assistance from you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of assistance?
	if (response == "s_61")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: You're an accomplished member of the RSF. I was hoping you could help me by reducing some of the threats to the Dee'ja Peak area. Like the Naboo pirates or the Maulers. Oh, and feral shaupauts have been wreaking havoc. Especially the one known as Blot.
			string_id message = new string_id (c_stringFile, "s_62");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'd be happy to help.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't think I'm interested after all.
			boolean hasResponse1 = false;
			if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_63");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_90");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_vance_groten_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're an accomplished member of the RSF. I was hoping you could help me by reducing some of the threats to the Dee'ja Peak area. Like the Naboo pirates or the Maulers. Oh, and feral shaupauts have been wreaking havoc. Especially the one known as Blot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'd be happy to help.
	if (response == "s_63")
	{
		naboo_deeja_peak_vance_groten_action_grantSafetyQuest (player, npc);

		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_vance_groten_action_endGotoVance (player, npc);

			//-- NPC: Thank you. We'll talk about the security beacon after you finish.
			string_id message = new string_id (c_stringFile, "s_64");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I'm interested after all.
	if (response == "s_90")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			//-- NPC: I see. Then it's back to work for me. Farewell.
			string_id message = new string_id (c_stringFile, "s_92");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.naboo_deeja_peak_vance_groten");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	
	faceTo( self, player );

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.naboo_deeja_peak_vance_groten");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_completedBeaconQuest (player, npc))
	{
		//-- NPC: Things in Dee'ja Peak have never been better.
		string_id message = new string_id (c_stringFile, "s_57");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_finishedMercQuest (player, npc))
	{
		//-- NPC: I'm impressed. Those Strehkforce mercenaries are really tough, but you made short work of them. The beacon looks unharmed. It should work for what you need. Return with it to Professor Hudmasse.
		string_id message = new string_id (c_stringFile, "s_20");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I will. Thanks!
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_87");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 2);

			npcStartConversation (player, npc, "naboo_deeja_peak_vance_groten", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_onMercsQuest (player, npc))
	{
		//-- NPC: Those Strehkforce mercenaries are pretty tough. Soften them up first and then you'll have to go after their commanders, Evan Strehk and Maris Fahrs.
		string_id message = new string_id (c_stringFile, "s_21");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_finishedFavorQuest (player, npc))
	{
		naboo_deeja_peak_vance_groten_action_endFavorQuest (player, npc);

		//-- NPC: You got my ring back! Thank you! Oh, about the security beacon. I finished fixing it, but it was stolen.
		string_id message = new string_id (c_stringFile, "s_56");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Stolen? By who?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_58");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 5);

			npcStartConversation (player, npc, "naboo_deeja_peak_vance_groten", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_onFavorQuest (player, npc))
	{
		//-- NPC: Thank you for helping me with this favor. That ring has been in my family for many generations.
		string_id message = new string_id (c_stringFile, "s_55");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_finishedDarknessQuest (player, npc))
	{
		naboo_deeja_peak_vance_groten_action_endDarknessQuest (player, npc);

		//-- NPC: I knew Walker would have his old security beacon. Don't worry. I know this one is damaged, but it's nothing I can't fix. Er, while I work on that, I wonder if you would do me a favor?
		string_id message = new string_id (c_stringFile, "s_52");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What kind of favor?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_53");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 9);

			npcStartConversation (player, npc, "naboo_deeja_peak_vance_groten", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_noLuckWithKippy (player, npc))
	{
		//-- NPC: Kippy didn't have a beacon? Buried it? I guess I shouldn't be surprised. Let me think for a minute. Hmmm. Oh, I know. Walker Luskeske.
		string_id message = new string_id (c_stringFile, "s_93");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Who is Walker Luskeske?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_94");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 13);

			npcStartConversation (player, npc, "naboo_deeja_peak_vance_groten", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_onDarknessQuest (player, npc))
	{
		//-- NPC: Don't worry. I'll help you find a security beacon.
		string_id message = new string_id (c_stringFile, "s_51");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_finishedSafetyQuest (player, npc))
	{
		naboo_deeja_peak_vance_groten_action_endSafetyQuest (player, npc);

		//-- NPC: I appreciate your help. I'd be more than happy to help you find a security beacon. I suggest going to speak with Kippy Martin.
		string_id message = new string_id (c_stringFile, "s_48");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Who is Kippy Martin?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_73");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 17);

			npcStartConversation (player, npc, "naboo_deeja_peak_vance_groten", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition_onSafetyQuest (player, npc))
	{
		//-- NPC: Come talk to me when you finish with those security concerns around Dee'ja Peak.
		string_id message = new string_id (c_stringFile, "s_47");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_vance_groten_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "pose_proudly");

		//-- NPC: Dee'ja Peak is probably the most beautiful mountain town on Naboo. I'm lucky to work here.
		string_id message = new string_id (c_stringFile, "s_43");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Professor Hudmasse sent me to you.
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_vance_groten_condition_startBeaconQuest (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_37");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId", 21);

			npcStartConversation (player, npc, "naboo_deeja_peak_vance_groten", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "naboo_deeja_peak_vance_groten")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

	if (branchId == 2 && naboo_deeja_peak_vance_groten_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && naboo_deeja_peak_vance_groten_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && naboo_deeja_peak_vance_groten_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && naboo_deeja_peak_vance_groten_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && naboo_deeja_peak_vance_groten_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && naboo_deeja_peak_vance_groten_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && naboo_deeja_peak_vance_groten_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && naboo_deeja_peak_vance_groten_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && naboo_deeja_peak_vance_groten_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && naboo_deeja_peak_vance_groten_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && naboo_deeja_peak_vance_groten_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && naboo_deeja_peak_vance_groten_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && naboo_deeja_peak_vance_groten_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && naboo_deeja_peak_vance_groten_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.naboo_deeja_peak_vance_groten.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

