// ======================================================================
//
// quest_hero_of_tatooine_farmer.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.37 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.badge;
include library.chat;
include library.conversation;
include library.money;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/quest_hero_of_tatooine_farmer";

// ======================================================================
// Script Conditions
// ======================================================================

boolean quest_hero_of_tatooine_farmer_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_has_credits (obj_id player, obj_id npc)
{
	if(money.hasFunds(player, money.MT_CASH, 10000)) {
	
		return true;
	} 
	
	return false;
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_already_helped (obj_id player, obj_id npc)
{
	if(utils.hasScriptVar(npc, "already_been_helped")) {
		
		return true;
	}
	
	return false;
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_quest_complete (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "quest.hero_of_tatooine.complete")) {
	
		return true;
		
	} else if(hasObjVar(player, "quest.hero_of_tatooine.altruism.complete")) {
	
		return true;
		
	} else {
	
		return false;
	}
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_lost_waypoint (obj_id player, obj_id npc)
{
	location loc;
	
	obj_id[] waypoints = getWaypointsInDatapad(player);
	
	for(int x = 0; x < waypoints.length; x++) {
	
		loc = getWaypointLocation(waypoints[x]);
		
		if(loc.x == 6522f && loc.z == -1350f && loc.area.equals("tatooine")) {
		
			return false;
		}
	}

	return true;
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_on_quest (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "quest.hero_of_tatooine.altruism")) {
	
		return true;
	}
	
	return false;
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_already_helped_player (obj_id player, obj_id npc)
{
	if(utils.hasScriptVar(npc, "already_been_helped")) {
		
		obj_id helper = utils.getObjIdScriptVar(npc, "already_been_helped");
		
		if(helper == player)
			return true;
	}
	
	return false;
}

// ----------------------------------------------------------------------

boolean quest_hero_of_tatooine_farmer_condition_quest_stuck (obj_id player, obj_id npc)
{
	if ( hasObjVar(player, "quest.hero_of_tatooine.altruism") || !badge.hasBadge(player, "poi_factoryliberation") )
	{
		int status = getIntObjVar(player, "quest.hero_of_tatooine.altruism");
		if ( status > 1 )
		{
			return true;
		}
	}
	return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void quest_hero_of_tatooine_farmer_action_paid_ransom (obj_id player, obj_id npc)
{
	if(!money.hasFunds(player, money.MT_CASH, 10000))
		return;
		
	int bank_before = getBankBalance(player);
		
	if(money.requestPayment(player, "hero_of_tatooine", 10000, null, null, false)) {
	
		int bank_after = getBankBalance(player);
		int bank_delta = bank_before - bank_after;
		
		if(bank_delta > 10000)
			bank_delta = 10000;
			
		money.covertDeposit(player, bank_delta, "noHandler", null);
	}
}

// ----------------------------------------------------------------------

void quest_hero_of_tatooine_farmer_action_will_help (obj_id player, obj_id npc)
{
	location cave = new location(6522, 0, -1350);
	obj_id waypoint = createWaypointInDatapad(player, cave);
	
	setWaypointName(waypoint, "Kidnapped Family");
	setWaypointColor(waypoint, "blue");
	setWaypointVisible(waypoint, true);
	setWaypointActive(waypoint, true);

	setObjVar(player, "quest.hero_of_tatooine.altruism", 1);
	setObjVar(player, "quest.hero_of_tatooine.altruism_waypoint", waypoint);
}

// ----------------------------------------------------------------------

void quest_hero_of_tatooine_farmer_action_been_helped (obj_id player, obj_id npc)
{
	utils.setScriptVar(npc, "already_been_helped", player);
	
	clearCondition (npc, CONDITION_CONVERSABLE);
	detachScript (npc, "npc.conversation.quest_hero_of_tatooine_farmer");
	
	ai_lib.pathAwayFrom(npc, player);
	
	messageTo(npc, "handleDestroy", null, 20.0f, false);
}

// ----------------------------------------------------------------------

void quest_hero_of_tatooine_farmer_action_give_waypoint (obj_id player, obj_id npc)
{
	location cave = new location(6522, 0, -1350);
	obj_id waypoint = createWaypointInDatapad(player, cave);
	
	setWaypointName(waypoint, "Kidnapped Family");
	setWaypointColor(waypoint, "blue");
	setWaypointVisible(waypoint, true);
	setWaypointActive(waypoint, true);
	
	setObjVar(player, "quest.hero_of_tatooine.altruism_waypoint", waypoint);
}

// ----------------------------------------------------------------------

void quest_hero_of_tatooine_farmer_action_reset_quest (obj_id player, obj_id npc)
{
	if ( hasObjVar(player, "quest.hero_of_tatooine.altruism_waypoint") )
	{
		obj_id waypoint = getObjIdObjVar(player, "quest.hero_of_tatooine.altruism_waypoint");
		removeObjVar(player, "quest.hero_of_tatooine.altruism_waypoint");
		if(isIdValid(waypoint))
		{	
			setWaypointActive(waypoint, false);
			setWaypointVisible(waypoint, false);
			destroyWaypointInDatapad(waypoint, player);
		}
	}
	
	location cave = new location(6522, 0, -1350);
	obj_id waypoint = createWaypointInDatapad(player, cave);
	
	setWaypointName(waypoint, "Kidnapped Family");
	setWaypointColor(waypoint, "blue");
	setWaypointVisible(waypoint, true);
	setWaypointActive(waypoint, true);

	setObjVar(player, "quest.hero_of_tatooine.altruism", 1);
	setObjVar(player, "quest.hero_of_tatooine.altruism_waypoint", waypoint);
	return;
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int quest_hero_of_tatooine_farmer_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, hello. You are going to rescue my wife and daughter are you not?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I'm going to rescue your family.
	if (response == "s_53686a92")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Alright. Good luck and be safe.
			string_id message = new string_id (c_stringFile, "s_8c9c92a");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can you show me where you think the cave is again?
	if (response == "s_7c31a6a3")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			quest_hero_of_tatooine_farmer_action_give_waypoint (player, npc);

			//-- NPC: Sure. Here is the location of the cave where I think the brutes might be hiding. Now please save my family, and do be careful.
			string_id message = new string_id (c_stringFile, "s_916b0cc0");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please, oh please. You've got to help me! I'm desperate!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Slow down. What's the matter?
	if (response == "s_9e0bb613")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's my wife and daughter, they're gone! I was out checking the moisture crop and when I got back to the house I found a note saying they'd been kidnapped! They're being held for ransom!
			string_id message = new string_id (c_stringFile, "s_91139d19");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That's terrible!
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do you know who took your family?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Do you know where your family was taken?
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Sorry, I can't help right now.
			boolean hasResponse3 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28fe80fc");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_25");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_63");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_80");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who are you?
	if (response == "s_ca776e30")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm a moisture farmer. And not even a very good one. I can't help but think that if I was at home instead of checking the evaporators, this never would have happened.
			string_id message = new string_id (c_stringFile, "s_7d7b9050");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Tell me what's wrong.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Sorry, I can't talk right now.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ba7f35a5");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f4d0be1e");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry, I can't help you.
	if (response == "s_b658a801")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's my wife and daughter, they're gone! I was out checking the moisture crop and when I got back to the house I found a note saying they'd been kidnapped! They're being held for ransom!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's terrible!
	if (response == "s_28fe80fc")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Don't you think I know that? My family has been kidnapped! The only two things in my life that I hold dear! Of course it's terrible!
			string_id message = new string_id (c_stringFile, "s_f26c1a9");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Don't yell at me. I didn't kidnap them.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Calm down. Do you know who took your family?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Calm down. Do you know where your family was taken?
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Sorry, I don't think I can help right now.
			boolean hasResponse3 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_53fb3746");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b7068b53");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c4fbf8c5");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46d3276e");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know who took your family?
	if (response == "s_25")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.
			string_id message = new string_id (c_stringFile, "s_31e2a586");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know where your family was taken?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know where your family was taken?
	if (response == "s_63")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.
			string_id message = new string_id (c_stringFile, "s_65");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know who took your family?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_76");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry, I can't help right now.
	if (response == "s_80")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Don't you think I know that? My family has been kidnapped! The only two things in my life that I hold dear! Of course it's terrible!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't yell at me. I didn't kidnap them.
	if (response == "s_53fb3746")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: You're right. I'm sorry, but of course you realize why I'm upset.
			string_id message = new string_id (c_stringFile, "s_8e117483");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know who took your family?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do you know where your family was taken?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Sorry, I can't help right now.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c6144200");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f4a9d6e8");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_cdbae137");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Calm down. Do you know who took your family?
	if (response == "s_b7068b53")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.
			string_id message = new string_id (c_stringFile, "s_31e2a586");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know where your family was taken?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Calm down. Do you know where your family was taken?
	if (response == "s_c4fbf8c5")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.
			string_id message = new string_id (c_stringFile, "s_65");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know who took your family?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_76");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry, I don't think I can help right now.
	if (response == "s_46d3276e")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're right. I'm sorry, but of course you realize why I'm upset.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know who took your family?
	if (response == "s_c6144200")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.
			string_id message = new string_id (c_stringFile, "s_31e2a586");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know where your family was taken?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know where your family was taken?
	if (response == "s_f4a9d6e8")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.
			string_id message = new string_id (c_stringFile, "s_65");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know who took your family?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_76");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry, I can't help right now.
	if (response == "s_cdbae137")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know where your family was taken?
	if (response == "s_28")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.
			string_id message = new string_id (c_stringFile, "s_b394e1eb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who do you say might have taken your family, again?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_12d39d30");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_cf9c96f0");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c5196416");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I do to help?
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, I don't have the money to pay the ransom, and if I don't pay, they said they would sell my wife and daughter into slavery. So I'm on my way to try and rescue them myself, although I don't think that I'll be able to put up a good fight.
			string_id message = new string_id (c_stringFile, "s_5a04437");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How much is the ransom?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It doesn't sound like there's much that I can do.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9930ca3d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I can help right now, sorry.
	if (response == "s_61")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who do you say might have taken your family, again?
	if (response == "s_12d39d30")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.
			string_id message = new string_id (c_stringFile, "s_69");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Did you say you knew where your family was taken?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f7d18c26");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_74");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I do to help?
	if (response == "s_cf9c96f0")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, I don't have the money to pay the ransom, and if I don't pay, they said they would sell my wife and daughter into slavery. So I'm on my way to try and rescue them myself, although I don't think that I'll be able to put up a good fight.
			string_id message = new string_id (c_stringFile, "s_5a04437");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How much is the ransom?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It doesn't sound like there's much that I can do.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9930ca3d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I can help right now, sorry.
	if (response == "s_c5196416")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, I don't have the money to pay the ransom, and if I don't pay, they said they would sell my wife and daughter into slavery. So I'm on my way to try and rescue them myself, although I don't think that I'll be able to put up a good fight.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How much is the ransom?
	if (response == "s_9930ca3d")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: The note says that I need to pay ten thousand credits. But I barely break even as a moisture farmer. I don't have that kind of money!
			string_id message = new string_id (c_stringFile, "s_bed5a497");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will give you the ransom money.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It doesn't sound like there's much that I can do.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c1d778b6");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4b28f5f9");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will go rescue your family for you.
	if (response == "s_49")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you sure? I appreciate your selflessness, but it will probably be very dangerous. Though I agree that you are probably better equipped to go than I.
			string_id message = new string_id (c_stringFile, "s_498b2572");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I will go save your wife and daughter.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How much did you say the ransom was?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: On second thought, I don't think I can help right now.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_17089ea4");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a6faa65a");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2fdb8fbd");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It doesn't sound like there's much that I can do.
	if (response == "s_56")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The note says that I need to pay ten thousand credits. But I barely break even as a moisture farmer. I don't have that kind of money!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will give you the ransom money.
	if (response == "s_c1d778b6")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Really? I would be forever grateful, but that's a lot of money. Are you sure?
			string_id message = new string_id (c_stringFile, "s_545b2c24");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I am sure. [give 10000 credits]
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition_has_credits (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Oops. Looks like I don't have that much money either.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Actually, I'd rather go rescue your family for you.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5cdaed70");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2e1d6626");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d5adc7c6");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will go rescue your family for you.
	if (response == "s_46")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you sure? I appreciate your selflessness, but it will probably be very dangerous. Though I agree that you are probably better equipped to go than I.
			string_id message = new string_id (c_stringFile, "s_498b2572");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I will go save your wife and daughter.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How much did you say the ransom was?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: On second thought, I don't think I can help right now.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_17089ea4");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a6faa65a");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2fdb8fbd");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It doesn't sound like there's much that I can do.
	if (response == "s_4b28f5f9")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Really? I would be forever grateful, but that's a lot of money. Are you sure?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I am sure. [give 10000 credits]
	if (response == "s_5cdaed70")
	{
		quest_hero_of_tatooine_farmer_action_paid_ransom (player, npc);

		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			quest_hero_of_tatooine_farmer_action_been_helped (player, npc);

			//-- NPC: Thank you! Oh, thank you so much. I will be in your debt always. I'm going to make arrangements to pay the ransom money now. Thank you again for your kindness.
			string_id message = new string_id (c_stringFile, "s_27d7b600");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oops. Looks like I don't have that much money either.
	if (response == "s_2e1d6626")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh well. Thanks anyway for offering. I guess there's nothing left for me to do but go and try to rescue my wife and daughter myself.
			string_id message = new string_id (c_stringFile, "s_9ead1175");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I wish you the best of luck.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2f051629");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_fb52d10a");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Actually, I'd rather go rescue your family for you.
	if (response == "s_d5adc7c6")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you sure? I appreciate your selflessness, but it will probably be very dangerous. Though I agree that you are probably better equipped to go than I.
			string_id message = new string_id (c_stringFile, "s_498b2572");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I will go save your wife and daughter.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How much did you say the ransom was?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: On second thought, I don't think I can help right now.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_17089ea4");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a6faa65a");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2fdb8fbd");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh well. Thanks anyway for offering. I guess there's nothing left for me to do but go and try to rescue my wife and daughter myself.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will go rescue your family for you.
	if (response == "s_2f051629")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you sure? I appreciate your selflessness, but it will probably be very dangerous. Though I agree that you are probably better equipped to go than I.
			string_id message = new string_id (c_stringFile, "s_498b2572");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I will go save your wife and daughter.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How much did you say the ransom was?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: On second thought, I don't think I can help right now.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_17089ea4");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a6faa65a");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2fdb8fbd");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I wish you the best of luck.
	if (response == "s_fb52d10a")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thanks. I think that I'll need it.
			string_id message = new string_id (c_stringFile, "s_29e0b99d");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you sure? I appreciate your selflessness, but it will probably be very dangerous. Though I agree that you are probably better equipped to go than I.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I will go save your wife and daughter.
	if (response == "s_17089ea4")
	{
		quest_hero_of_tatooine_farmer_action_will_help (player, npc);

		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			quest_hero_of_tatooine_farmer_action_been_helped (player, npc);

			//-- NPC: Thank you so very much. You have my sincerest gratitude. But do be careful, for my family's sake. Here, I'll transmit a location to your datapad. I think that the brutes that did this might be holed up in a cave there.
			string_id message = new string_id (c_stringFile, "s_3abf0d9c");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How much did you say the ransom was?
	if (response == "s_a6faa65a")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: The note says that I need to pay ten thousand credits. But I barely break even as a moisture farmer. I don't have that kind of money!
			string_id message = new string_id (c_stringFile, "s_bed5a497");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will give you the ransom money.
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It doesn't sound like there's much that I can do.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c1d778b6");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4b28f5f9");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: On second thought, I don't think I can help right now.
	if (response == "s_2fdb8fbd")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know who took your family?
	if (response == "s_67")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.
			string_id message = new string_id (c_stringFile, "s_69");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Did you say you knew where your family was taken?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f7d18c26");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_74");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I do to help?
	if (response == "s_76")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, I don't have the money to pay the ransom, and if I don't pay, they said they would sell my wife and daughter into slavery. So I'm on my way to try and rescue them myself, although I don't think that I'll be able to put up a good fight.
			string_id message = new string_id (c_stringFile, "s_5a04437");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How much is the ransom?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It doesn't sound like there's much that I can do.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9930ca3d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I can help right now, sorry.
	if (response == "s_78")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't know for sure. There was a name scribbled at the bottom of the note that was left. It said, 'Sennex'. But I don't know what that means. I don't know anyone named Sennex.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Did you say you knew where your family was taken?
	if (response == "s_f7d18c26")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, I don't. There were lots of tracks leading away from our house heading this way though. I think there might be a cave or something in this direction. They might be holed up in there.
			string_id message = new string_id (c_stringFile, "s_b394e1eb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who do you say might have taken your family, again?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What can I do to help?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I don't think I can help right now, sorry.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_12d39d30");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_cf9c96f0");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c5196416");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I do to help?
	if (response == "s_72")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, I don't have the money to pay the ransom, and if I don't pay, they said they would sell my wife and daughter into slavery. So I'm on my way to try and rescue them myself, although I don't think that I'll be able to put up a good fight.
			string_id message = new string_id (c_stringFile, "s_5a04437");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How much is the ransom?
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will go rescue your family for you.
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: It doesn't sound like there's much that I can do.
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9930ca3d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_49");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I can help right now, sorry.
	if (response == "s_74")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int quest_hero_of_tatooine_farmer_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm a moisture farmer. And not even a very good one. I can't help but think that if I was at home instead of checking the evaporators, this never would have happened.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Tell me what's wrong.
	if (response == "s_ba7f35a5")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's my wife and daughter, they're gone! I was out checking the moisture crop and when I got back to the house I found a note saying they'd been kidnapped! They're being held for ransom!
			string_id message = new string_id (c_stringFile, "s_91139d19");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That's terrible!
			boolean hasResponse0 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Do you know who took your family?
			boolean hasResponse1 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Do you know where your family was taken?
			boolean hasResponse2 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Sorry, I can't help right now.
			boolean hasResponse3 = false;
			if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28fe80fc");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_25");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_63");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_80");

				utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sorry, I can't talk right now.
	if (response == "s_f4d0be1e")
	{
		//-- [NOTE] 
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I'll have to go myself then. Wish me luck.
			string_id message = new string_id (c_stringFile, "s_cadf41fb");
			utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.quest_hero_of_tatooine_farmer");
		
	if(!hasScript(self, "quest.hero_of_tatooine.altruism_farmer"))
		attachScript(self, "quest.hero_of_tatooine.altruism_farmer");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	
	attachScript(self, "quest.hero_of_tatooine.altruism_farmer");

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.quest_hero_of_tatooine_farmer");

	return SCRIPT_CONTINUE;
}

trigger OnDestroy()
{
	if(hasScript(self, "systems.spawning.spawned_tracker"))
	{
		if(!utils.hasScriptVar(self, "intCleanedUp"))
		{
			utils.setScriptVar(self, "intCleanedUp", 1);
			obj_id objParent = getObjIdObjVar(self, "objParent");		
			float fltRespawnTime = getFloatObjVar(self, "fltRespawnTime");
			messageTo(objParent, "spawnDestroyed", null, fltRespawnTime, false);
		}
	}
	
	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (quest_hero_of_tatooine_farmer_condition_quest_stuck (player, npc))
	{
		quest_hero_of_tatooine_farmer_action_reset_quest (player, npc);

		//-- NPC: You seem to be befuddled...and that won't help you to rescue my family. Let's start again. Here, I'll transmit a location to your datapad. I think that the brutes that did this might be holed up in a cave there.
		string_id message = new string_id (c_stringFile, "s_86");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (quest_hero_of_tatooine_farmer_condition_quest_complete (player, npc))
	{
		//-- NPC: Hello! I wanted to thank you again for helping to rescue my family. We are all deeply indebted to you.
		string_id message = new string_id (c_stringFile, "s_da11deae");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (quest_hero_of_tatooine_farmer_condition_on_quest (player, npc))
	{
		//-- NPC: Yes, hello. You are going to rescue my wife and daughter are you not?
		string_id message = new string_id (c_stringFile, "s_ab3e1351");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I'm going to rescue your family.
		boolean hasResponse0 = false;
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Can you show me where you think the cave is again?
		boolean hasResponse1 = false;
		if (quest_hero_of_tatooine_farmer_condition_lost_waypoint (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_53686a92");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_7c31a6a3");

			utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 3);

			npcStartConversation (player, npc, "quest_hero_of_tatooine_farmer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (quest_hero_of_tatooine_farmer_condition_already_helped_player (player, npc))
	{
		//-- NPC: Thanks again for paying the ransom! I'm going to set the deal up right now!
		string_id message = new string_id (c_stringFile, "s_22e3a3");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (quest_hero_of_tatooine_farmer_condition_already_helped (player, npc))
	{
		//-- NPC: Oh, hello. Yes, I did have a problem, but a very kind soul has already offered to help. Thank you very much, though.
		string_id message = new string_id (c_stringFile, "s_7f1f06ba");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
	{
		//-- NPC: Please, oh please. You've got to help me! I'm desperate!
		string_id message = new string_id (c_stringFile, "s_4de6ecbe");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Slow down. What's the matter?
		boolean hasResponse0 = false;
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Who are you?
		boolean hasResponse1 = false;
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: Sorry, I can't help you.
		boolean hasResponse2 = false;
		if (quest_hero_of_tatooine_farmer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_9e0bb613");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_ca776e30");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_b658a801");

			utils.setScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId", 8);

			npcStartConversation (player, npc, "quest_hero_of_tatooine_farmer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "quest_hero_of_tatooine_farmer")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

	if (branchId == 3 && quest_hero_of_tatooine_farmer_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && quest_hero_of_tatooine_farmer_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && quest_hero_of_tatooine_farmer_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && quest_hero_of_tatooine_farmer_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && quest_hero_of_tatooine_farmer_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && quest_hero_of_tatooine_farmer_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && quest_hero_of_tatooine_farmer_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && quest_hero_of_tatooine_farmer_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && quest_hero_of_tatooine_farmer_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && quest_hero_of_tatooine_farmer_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && quest_hero_of_tatooine_farmer_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && quest_hero_of_tatooine_farmer_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && quest_hero_of_tatooine_farmer_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && quest_hero_of_tatooine_farmer_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && quest_hero_of_tatooine_farmer_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.quest_hero_of_tatooine_farmer.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

