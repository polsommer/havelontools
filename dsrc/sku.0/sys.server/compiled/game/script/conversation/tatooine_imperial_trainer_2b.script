// ======================================================================
//
// tatooine_imperial_trainer_2b.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.skill;
include library.space_flags;
include library.space_quest;
include library.utils;
include library.xp;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/tatooine_imperial_trainer_2b";

// ======================================================================
// Script Conditions
// ======================================================================

boolean tatooine_imperial_trainer_2b_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasAuthOfTransfer (obj_id player, obj_id npc)
{
	// Look for the form in their inventory.
	obj_id pInv = utils.getInventoryContainer( player );
	if ( pInv == null )
		return false;

	obj_id[] items = getContents( pInv );
	if ( items == null )
		return false;
		
	for ( int i=0; i<items.length; i++ )
	{
		string name = getTemplateName( items[i] );
		if ( name.equals( "object/tangible/space/mission_objects/transfer_auth.iff" ) )
		{
			utils.setScriptVar( player, "auth", items[i] );
			return true;
		}
	}

	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasUnsignedForm (obj_id player, obj_id npc)
{
	obj_id auth = utils.getObjIdScriptVar( player, "auth" );
	if ( !isIdValid( auth ) )
		return true;
	string sign = getStringObjVar( auth, "signature" );
	if ( sign == null )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasIncorrectForm (obj_id player, obj_id npc)
{
	obj_id auth = utils.getObjIdScriptVar( player, "auth" );
	if ( !isIdValid( auth ) )
		return true;
	string sign = getStringObjVar( auth, "signature" );
	string name = getName( player );
	if ( sign.equals( name ) )
		return false;
	else
		return true;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isStormSquadron (obj_id player, obj_id npc)
{
	return space_flags.hasSpaceFlag(player, "stormSquadronInitiate");
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isPrivateer (obj_id player, obj_id npc)
{
	if ( hasSkill( player, "pilot_neutral_novice" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isRebel (obj_id player, obj_id npc)
{
	if ( factions.getFaction(player) == factions.FACTION_REBEL )
		return true;

	if ( hasSkill( player, "pilot_rebel_navy_novice" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasFailedQuest1 (obj_id player, obj_id npc)
{
	return ( space_quest.hasFailedQuest(  player, "inspect", "imperial_ss_4" ) ||
		     space_quest.hasAbortedQuest( player, "inspect", "imperial_ss_4" ) );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasWonQuest1 (obj_id player, obj_id npc)
{
	return space_quest.hasWonQuest( player, "inspect", "imperial_ss_4" );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isReadyForDutyBlock1 (obj_id player, obj_id npc)
{
	return space_quest.hasReceivedReward( player, "escort", "imperial_ss_5" );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasWonQuest2 (obj_id player, obj_id npc)
{
	return space_quest.hasWonQuest( player, "escort", "imperial_ss_5" );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasFailedQuest2 (obj_id player, obj_id npc)
{
	return ( space_quest.hasFailedQuest(  player, "escort", "imperial_ss_5" ) ||
		     space_quest.hasAbortedQuest( player, "escort", "imperial_ss_5" ) );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isReadyForMission2 (obj_id player, obj_id npc)
{
	return space_quest.hasReceivedReward( player, "inspect", "imperial_ss_4" );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_canBuySkill1 (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "escort", "imperial_ss_5" ))
		return false;
	else if ( space_quest.isPlayerQualifiedForSkill( player, "pilot_imperial_navy_starships_02" ) ||
		 	space_quest.isPlayerQualifiedForSkill( player, "pilot_imperial_navy_weapons_02" ) ||
		 	space_quest.isPlayerQualifiedForSkill( player, "pilot_imperial_navy_procedures_02" ) ||
		 	space_quest.isPlayerQualifiedForSkill( player, "pilot_imperial_navy_droid_02" ) )
				return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_canBuySkill1A (obj_id player, obj_id npc)
{
	if(!hasSkill( player, "pilot_imperial_navy_starships_02" ))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_canBuySkill1B (obj_id player, obj_id npc)
{
	if(!hasSkill( player, "pilot_imperial_navy_weapons_02" ))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_canBuySkill1C (obj_id player, obj_id npc)
{
	if(!hasSkill( player, "pilot_imperial_navy_procedures_02" ))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_canBuySkill1D (obj_id player, obj_id npc)
{
	if(!hasSkill( player, "pilot_imperial_navy_droid_02" ))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isReadyForMission3 (obj_id player, obj_id npc)
{
	string[] skills = { "pilot_imperial_navy_starships_02", 
						"pilot_imperial_navy_weapons_02",
						"pilot_imperial_navy_procedures_02",
						"pilot_imperial_navy_droid_02" };
	int j = 0;
	for ( int i=0; i<skills.length; i++ )
	{
		if ( hasSkill( player, skills[i] ) )
			j++;
	}
	if ( j == 4 )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isOnMission (obj_id player, obj_id npc)
{
	if ( space_quest.hasQuest( player, "inspect", "imperial_ss_4" ) ||
		 space_quest.hasQuest( player, "escort", "imperial_ss_5" ) ||
		 space_quest.hasQuest( player, "recovery", "imperial_ss_6" )) 
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isWorkingForAlozen (obj_id player, obj_id npc)
{
	return space_flags.hasSpaceFlag(player, "workingWithAlozen");
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasFailedQuest3 (obj_id player, obj_id npc)
{
	return ( space_quest.hasFailedQuest(  player, "recovery", "imperial_ss_6" ) ||
		     space_quest.hasAbortedQuest( player, "recovery", "imperial_ss_6" ) );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_hasWonQuest3 (obj_id player, obj_id npc)
{
	return space_quest.hasWonQuest( player, "recovery", "imperial_ss_6" );
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_transferedToDenner (obj_id player, obj_id npc)
{
	if ( space_quest.hasReceivedReward( player, "recovery", "imperial_ss_6" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_onMyTrack (obj_id player, obj_id npc)
{
	return space_flags.isSpaceTrack(player, space_flags.IMPERIAL_TATOOINE);
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_canFlyNonTrackDuty (obj_id player, obj_id npc)
{
	if(space_flags.hasCompletedTierOne(player) && !space_quest.hasQuest(player))
		return true;
		
	return false;
}

// ----------------------------------------------------------------------

boolean tatooine_imperial_trainer_2b_condition_isPilot (obj_id player, obj_id npc)
{
	return space_flags.hasAnyPilotSkill(player);
}

// ======================================================================
// Script Actions
// ======================================================================

void tatooine_imperial_trainer_2b_action_makeStormSquadronInitiate (obj_id player, obj_id npc)
{
	space_flags.setSpaceFlag(player, "stormSquadronInitiate", 1);
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveQuest1 (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "inspect", "imperial_ss_4" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveReward1 (obj_id player, obj_id npc)
{
	if( !space_quest.hasReceivedReward( player, "inspect", "imperial_ss_4") )
	{
		space_quest.giveReward( player, "inspect", "imperial_ss_4", 5000, "object/tangible/ship/components/shield_generator/shd_mission_reward_imperial_rendili_dual_projector.iff" );
		factions.addFactionStanding( player, factions.FACTION_IMPERIAL, 75.0f );
	}
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveQuest2 (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "escort", "imperial_ss_5" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveReward2 (obj_id player, obj_id npc)
{
	if( !space_quest.hasReceivedReward( player, "escort", "imperial_ss_5") )
	{
		space_quest.giveReward( player, "escort", "imperial_ss_5", 5000 );
		factions.addFactionStanding( player, factions.FACTION_IMPERIAL, 50.0f );
	}
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_grantSkill1A (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_imperial_navy_starships_02" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_grantSkill1B (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_imperial_navy_weapons_02" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_grantSkill1C (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_imperial_navy_procedures_02" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_grantSkill1D (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_imperial_navy_droid_02" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_transferToAlozen (obj_id player, obj_id npc)
{
	space_flags.setSpaceFlag(player, "workingWithAlozen", 1);
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveQuest3 (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "recovery", "imperial_ss_6" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveDuty1a (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy_duty", "lok_imperial_ss_2a" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveDuty1b (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "recovery_duty", "lok_imperial_ss_2b" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveDuty1c (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "escort_duty", "lok_imperial_ss_2c" );
}

// ----------------------------------------------------------------------

void tatooine_imperial_trainer_2b_action_giveReward3 (obj_id player, obj_id npc)
{
	if( !space_quest.hasReceivedReward( player, "recovery", "imperial_ss_6") )
	{
		space_quest.giveReward( player, "recovery", "imperial_ss_6", 5000 );
		factions.addFactionStanding( player, factions.FACTION_IMPERIAL, 50.0f );
	}
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int tatooine_imperial_trainer_2b_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well if it isn't another pilot for the Imperial Navy. What do you want?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I would like to request a mission.
	if (response == "s_4854758d")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition_canFlyNonTrackDuty (player, npc))
		{
			//-- NPC: Normally I wouldn't even consider it, but as it turns out I do have some elective duty tasks that require a pilot.
			string_id message = new string_id (c_stringFile, "s_d7641f66");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How can I help?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: On second thought, never mind.
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b84b366c");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_aec16b0a");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: Do you think that I'm here to hand out missions like so much candy? Why don't you go talk to your own commanding officer.
			string_id message = new string_id (c_stringFile, "s_ad3ca2e6");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Normally I wouldn't even consider it, but as it turns out I do have some elective duty tasks that require a pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How can I help?
	if (response == "s_b84b366c")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: You could hunt Rebel raiders, escort our salvage transports or capture some of the pirate salvage transports.
			string_id message = new string_id (c_stringFile, "s_3d7cbb44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm going to hunt Rebel raiders.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'd like to escort salvage transports.
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I'll try and capture pirate salvage ships.
			boolean hasResponse2 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: I'm ready for training.
			boolean hasResponse3 = false;
			if (tatooine_imperial_trainer_2b_condition_onMyTrack (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8a202d7b");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d5ee9adc");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5950b85e");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b0d3b474");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: On second thought, never mind.
	if (response == "s_aec16b0a")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: Figures. Go get lost.
			string_id message = new string_id (c_stringFile, "s_8dbf276d");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You did it. I would be lying if I said that I wasn't shocked. You have proven yourself to be one excellent pilot and an asset to the Empire. Unfortunately, for me I have just received word that you are being transferred from under my command. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am being transferred again?
	if (response == "s_71bf4315")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: That is what I said soldier. Don't you fly boys ever pay any attention?
			string_id message = new string_id (c_stringFile, "s_20009dcb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir! We certainly...
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_53923b62");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is what I said soldier. Don't you fly boys ever pay any attention?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir! We certainly...
	if (response == "s_53923b62")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: Never mind. Disregard that. Regardless you are being transferred over to Captain Denner. Word is that all members of Storm Squadron are being transferred over to his command for a priority alpha assignment. It would appear that the Empire is preparing to transfer resources out of this system in order for some new project.
			string_id message = new string_id (c_stringFile, "s_54c421ec");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What sort of new project?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44522227");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Never mind. Disregard that. Regardless you are being transferred over to Captain Denner. Word is that all members of Storm Squadron are being transferred over to his command for a priority alpha assignment. It would appear that the Empire is preparing to transfer resources out of this system in order for some new project.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What sort of new project?
	if (response == "s_44522227")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am not privy to that information. Perhaps Captain Denner can fill you in more on your assignment. I am still required to continue with my salvage operation here and that is all I know or care about.
			string_id message = new string_id (c_stringFile, "s_1af04177");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where can I find Captain Denner?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_bf7bc308");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am not privy to that information. Perhaps Captain Denner can fill you in more on your assignment. I am still required to continue with my salvage operation here and that is all I know or care about.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where can I find Captain Denner?
	if (response == "s_bf7bc308")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			doAnimationAction (player, "salute1");

			tatooine_imperial_trainer_2b_action_giveReward3 (player, npc);

			//-- NPC: Captain Denner is stationed here in the outpost for the time being. He is organizing the transfer of Storm Squadron and salvage operatives to their new theater of operation. Jump to it soldier. Don't keep your commanding officer waiting. Oh, by the way here is your duty pay for the Twilight Sun.
			string_id message = new string_id (c_stringFile, "s_2f3bf1d8");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Blast it! You were supposed to be the best man for the job and you seriously botched it. Fortunately for you it would appear that we managed to damage the gunboat enough that it has not been able to hyperspace out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So the Twilight Sun is still in the Yavin system.
	if (response == "s_1da2b1f3")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: That is the only reason that I have not busted you right out of the service. You are going to get another crack at capturing the vessel. Get up there and get me that ship before it's able to repair itself.
			string_id message = new string_id (c_stringFile, "s_c0203d03");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir!
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a30c1a53");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is the only reason that I have not busted you right out of the service. You are going to get another crack at capturing the vessel. Get up there and get me that ship before it's able to repair itself.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir!
	if (response == "s_a30c1a53")
	{
		doAnimationAction (player, "salute2");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_on_dismissing");

			tatooine_imperial_trainer_2b_action_giveQuest3 (player, npc);

			//-- NPC: What are you still doing standing here talking to me? Get to your ship and get me that core...NOW SOLDIER!
			string_id message = new string_id (c_stringFile, "s_4fc85d67");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Flying Officer %NU, I have an urgent assignment for you. Stand at attention for briefing!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir!
	if (response == "s_b6b25f13")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The scan team has finished processing the results of the system sweep. The scan has revealed a large concentration of Rebel ships in region M84/2. The scan details indicate the Rebels already have a Gunboat class in the region.
			string_id message = new string_id (c_stringFile, "s_395c2680");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A capital ship?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f08d82df");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The scan team has finished processing the results of the system sweep. The scan has revealed a large concentration of Rebel ships in region M84/2. The scan details indicate the Rebels already have a Gunboat class in the region.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A capital ship?
	if (response == "s_f08d82df")
	{
		doAnimationAction (player, "nervous");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: Not quite but pretty close. The fact that this gunboat evaded our sensor net is disturbing. HQ believes the Rebels are planning to transport the Death Star firing core on board that vessel. Since the sensor sweep data is old, they may already have the core.
			string_id message = new string_id (c_stringFile, "s_62e2ea4c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: They may have already escaped.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_916abbd9");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Not quite but pretty close. The fact that this gunboat evaded our sensor net is disturbing. HQ believes the Rebels are planning to transport the Death Star firing core on board that vessel. Since the sensor sweep data is old, they may already have the core.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: They may have already escaped.
	if (response == "s_916abbd9")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: By the Emperor, I hope for all our sakes that is not the case. Your assignment is to locate that gunboat and disable it. We need to recover the core if it is on board and interrogate the crew if it isn't.
			string_id message = new string_id (c_stringFile, "s_ea3da11c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You want me to capture a gunboat?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_16de6424");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: By the Emperor, I hope for all our sakes that is not the case. Your assignment is to locate that gunboat and disable it. We need to recover the core if it is on board and interrogate the crew if it isn't.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You want me to capture a gunboat?
	if (response == "s_16de6424")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: A squad of Storm Troopers will be standing by to board the ship. All you need to do is disable the ship's reactor or engine subsystems and render them helpless. Once the Storm Troopers are on board they will take over the ship and then you will have to escort them and the ship to a safe jump point.
			string_id message = new string_id (c_stringFile, "s_9506a2bd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8efde2ae");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A squad of Storm Troopers will be standing by to board the ship. All you need to do is disable the ship's reactor or engine subsystems and render them helpless. Once the Storm Troopers are on board they will take over the ship and then you will have to escort them and the ship to a safe jump point.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_8efde2ae")
	{
		doAnimationAction (player, "salute2");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: This is an Ultimate Omega priority operation. The Emperor would dispatch a more elite team to handle the recovery, but there is no time. You must succeed. Failure to capture the firing core could result in disaster.
			string_id message = new string_id (c_stringFile, "s_b7cb6b94");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will not fail.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1ff4247a");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is an Ultimate Omega priority operation. The Emperor would dispatch a more elite team to handle the recovery, but there is no time. You must succeed. Failure to capture the firing core could result in disaster.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will not fail.
	if (response == "s_1ff4247a")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveQuest3 (player, npc);

			//-- NPC: The Emperor himself is interested in the outcome of this operation. Failure will result in harsh penalties.
			string_id message = new string_id (c_stringFile, "s_e6647df0");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Against my better judgment it would appear that you are fit for some flight training. Personally, I wouldn't waste my time training you but I have my orders too.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am ready for my training.
	if (response == "s_7eed59f9")
	{
		//-- [NOTE] 
		if (!tatooine_imperial_trainer_2b_condition_canBuySkill1 (player, npc))
		{
			//-- NPC: I'm not convinced you're ready for training.
			string_id message = new string_id (c_stringFile, "s_1d253370");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition_canBuySkill1 (player, npc))
		{
			//-- NPC: As much as I'd like to deny your request, I've seen nothing but good work from you over the past few operations. I have received permission from command to give you access to new training programs. This information is security rated Gamma Three and you may not share any information regarding your training level with another officer.
			string_id message = new string_id (c_stringFile, "s_2172d08a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Understood.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Let me think about this for a bit.
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ae26c22");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We need to buy time. Slow down the Rebel efforts until we can determine the exact location of the relic. You have operational discretion in this regard, but let me know your plans so I can coordinate with HQ. I've also received new details on the relic from Imperial Intelligence.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of operations can I help with?
	if (response == "s_5a7ec1e4")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: You could hunt Rebel raiders, escort our salvage transports or capture some of the pirate salvage transports.
			string_id message = new string_id (c_stringFile, "s_3d7cbb44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm going to hunt Rebel raiders.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'd like to escort salvage transports.
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I'll try and capture pirate salvage ships.
			boolean hasResponse2 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: I'm ready for training.
			boolean hasResponse3 = false;
			if (tatooine_imperial_trainer_2b_condition_onMyTrack (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8a202d7b");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d5ee9adc");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5950b85e");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b0d3b474");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome back, Officer %NU. The scanning team has submitted their data for review. It's going to take some time to process it all. The debris and the radiation fields make it difficult to get clear readings.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: When do you expect the results?
	if (response == "s_5365b13d")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "check_wrist_device");

			//-- NPC: It could take a few days, even with maximum computing power directed at the problem.
			string_id message = new string_id (c_stringFile, "s_7e1ae5f8");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What should I do?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_57c8489e");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 28);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It could take a few days, even with maximum computing power directed at the problem.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What should I do?
	if (response == "s_57c8489e")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: We need to buy time. Slow down the Rebel efforts until we can determine the exact location of the relic. You have operational discretion in this regard, but let me know your plans so I can coordinate with HQ. I've also received new details on the relic from Imperial Intelligence.
			string_id message = new string_id (c_stringFile, "s_52");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What are the new details?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What kind of operations can I help with?
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3cbda2cf");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_62");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 29);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We need to buy time. Slow down the Rebel efforts until we can determine the exact location of the relic. You have operational discretion in this regard, but let me know your plans so I can coordinate with HQ. I've also received new details on the relic from Imperial Intelligence.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What are the new details?
	if (response == "s_3cbda2cf")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Intelligence has lowered the security rating on this operation so key command elements can operate more effectively. The 'relic' is believed to be the firing core of the Death Star's planet-killer weapon.
			string_id message = new string_id (c_stringFile, "s_e70b39dd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: (Whistle, impressed.)
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9315388f");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of operations can I help with?
	if (response == "s_62")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: You could hunt Rebel raiders, escort our salvage transports or capture some of the pirate salvage transports.
			string_id message = new string_id (c_stringFile, "s_3d7cbb44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm going to hunt Rebel raiders.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'd like to escort salvage transports.
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: I'll try and capture pirate salvage ships.
			boolean hasResponse2 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: I'm ready for training.
			boolean hasResponse3 = false;
			if (tatooine_imperial_trainer_2b_condition_onMyTrack (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8a202d7b");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d5ee9adc");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5950b85e");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b0d3b474");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Intelligence has lowered the security rating on this operation so key command elements can operate more effectively. The 'relic' is believed to be the firing core of the Death Star's planet-killer weapon.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: (Whistle, impressed.)
	if (response == "s_9315388f")
	{
		doAnimationAction (player, "nod_head_once");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: HQ believes that the Rebels have found the core and are planning to extract it. If they succeed, the Mon Cal traitors could duplicate the technology and fabricate their own super weapons.
			string_id message = new string_id (c_stringFile, "s_f4817c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see why Intelligence put a lid on this.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9f6b62d3");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: HQ believes that the Rebels have found the core and are planning to extract it. If they succeed, the Mon Cal traitors could duplicate the technology and fabricate their own super weapons.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see why Intelligence put a lid on this.
	if (response == "s_9f6b62d3")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: We need to keep it that way. The last thing we need are other races attempting their own recovery operations. Yavin could become a warzone.
			string_id message = new string_id (c_stringFile, "s_4e7a1e3a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We need to find the relic soon.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b54802f8");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We need to keep it that way. The last thing we need are other races attempting their own recovery operations. Yavin could become a warzone.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We need to find the relic soon.
	if (response == "s_b54802f8")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: Command is working to refine the scan data as quickly as possible. If we can recover the relic it may help us to construct similar weapons.
			string_id message = new string_id (c_stringFile, "s_e6315aa");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You could hunt Rebel raiders, escort our salvage transports or capture some of the pirate salvage transports.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm going to hunt Rebel raiders.
	if (response == "s_8a202d7b")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveDuty1a (player, npc);

			//-- NPC: Any raiders you destroy will hurt the Rebellion's recovery operation. Keep them busy while we finish refining the scan information.
			string_id message = new string_id (c_stringFile, "s_8e9a6b0f");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'd like to escort salvage transports.
	if (response == "s_d5ee9adc")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveDuty1c (player, npc);

			//-- NPC: There's a never ending supply of salvage to recover. The Rebels and other pirates have been capturing our salvage transports. The transport pilots would be grateful of any cover you could provide.
			string_id message = new string_id (c_stringFile, "s_5d5a0c89");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll try and capture pirate salvage ships.
	if (response == "s_5950b85e")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveDuty1b (player, npc);

			//-- NPC: It's nearly impossible to patrol the entire debris field, so some pirates go undetected. Any pirate salvage convoys you manage to capture would be an added bonus to our own operations.
			string_id message = new string_id (c_stringFile, "s_17ce8fe5");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm ready for training.
	if (response == "s_b0d3b474")
	{
		//-- [NOTE] 
		if (!tatooine_imperial_trainer_2b_condition_canBuySkill1 (player, npc))
		{
			//-- NPC: I'm not convinced you're ready for training.
			string_id message = new string_id (c_stringFile, "s_1d253370");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition_canBuySkill1 (player, npc))
		{
			//-- NPC: As much as I'd like to deny your request, I've seen nothing but good work from you over the past few operations. I have received permission from command to give you access to new training programs. This information is security rated Gamma Three and you may not share any information regarding your training level with another officer.
			string_id message = new string_id (c_stringFile, "s_2172d08a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Understood.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Let me think about this for a bit.
			boolean hasResponse1 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_156");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ae26c22");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As much as I'd like to deny your request, I've seen nothing but good work from you over the past few operations. I have received permission from command to give you access to new training programs. This information is security rated Gamma Three and you may not share any information regarding your training level with another officer.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Understood.
	if (response == "s_156")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition_canBuySkill1A (player, npc))
		{
			//-- NPC: You are to be trained in advanced TIE operations. Your continued success will rely on your ability to make maximum use of all new Imperial technology.
			string_id message = new string_id (c_stringFile, "s_157");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_161");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 40);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition_canBuySkill1B (player, npc))
		{
			//-- NPC: You are the be trained in advanced weapons technology. Mastering proper use of heavy weapons technology is key.
			string_id message = new string_id (c_stringFile, "s_158");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_163");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition_canBuySkill1C (player, npc))
		{
			//-- NPC: You are to be trained in pilot combat technique. Understanding how to rapidly and efficiently manage the complex systems on board a fighter is a necessary step in your development as a pilot.
			string_id message = new string_id (c_stringFile, "s_159");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_165");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 44);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are to be trained in advanced reactor engineering algorithms. Understanding how to rapidly and efficiently manage the complex systems on board a fighter is a necessary step in your development as a pilot. 
			string_id message = new string_id (c_stringFile, "s_160");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_167");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let me think about this for a bit.
	if (response == "s_ae26c22")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: You're cleared for training, so let me know when you are ready to begin.
			string_id message = new string_id (c_stringFile, "s_7b25fbc3");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch40 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are to be trained in advanced TIE operations. Your continued success will rely on your ability to make maximum use of all new Imperial technology.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_161")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_grantSkill1A (player, npc);

			//-- NPC: Use these study programs and destroy them when you have internalized the information. Report back to me when you are ready for a new assignment.
			string_id message = new string_id (c_stringFile, "s_168");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are the be trained in advanced weapons technology. Mastering proper use of heavy weapons technology is key.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_163")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_grantSkill1B (player, npc);

			//-- NPC: Use these study programs and destroy them when you have internalized the information. Report back to me when you are ready for a new assignment.
			string_id message = new string_id (c_stringFile, "s_170");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch44 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are to be trained in pilot combat technique. Understanding how to rapidly and efficiently manage the complex systems on board a fighter is a necessary step in your development as a pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_165")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_grantSkill1C (player, npc);

			//-- NPC: Use these study programs and destroy them when you have internalized the information. Report back to me when you are ready for a new assignment.
			string_id message = new string_id (c_stringFile, "s_172");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are to be trained in advanced reactor engineering algorithms. Understanding how to rapidly and efficiently manage the complex systems on board a fighter is a necessary step in your development as a pilot. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_167")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_grantSkill1D (player, npc);

			//-- NPC: Use these study programs and destroy them when you have internalized the information. Report back to me when you are ready for a new assignment.
			string_id message = new string_id (c_stringFile, "s_174");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch49 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I've already received the report! You lost the scanning team. Unbelievable. Do you know how much it costs to manufacture and deploy a scanning freighter? I thought the Storm Squadron could handle this, but clearly I was misinformed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I..
	if (response == "s_da3db7b8")
	{
		doAnimationAction (player, "embarrassed");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: If I had anyone else to send up, I would, but you're the only pilot in the system rated for this kind of thing. As much as it disgusts me, I've been ordered to send another scanning team up. You're lucky they aren't sending you to fly garbage detail on some backwater outer rim world.
			string_id message = new string_id (c_stringFile, "s_e240955d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_102");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 50);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch50 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: If I had anyone else to send up, I would, but you're the only pilot in the system rated for this kind of thing. As much as it disgusts me, I've been ordered to send another scanning team up. You're lucky they aren't sending you to fly garbage detail on some backwater outer rim world.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_102")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: If I had things my way, you'd never see the inside of a fighter again.
			string_id message = new string_id (c_stringFile, "s_c27ccdd6");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Good for me you don't have things your way.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_10c85b25");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 51);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: If I had things my way, you'd never see the inside of a fighter again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Good for me you don't have things your way.
	if (response == "s_10c85b25")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger2");

			//-- NPC: Watch your mouth, pilot. I can still stick a reprimand on your file a shipload of boronic acid couldn't clean off.
			string_id message = new string_id (c_stringFile, "s_3c521b4d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: (Roll eyes.) Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_86b2a029");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 52);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Watch your mouth, pilot. I can still stick a reprimand on your file a shipload of boronic acid couldn't clean off.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: (Roll eyes.) Yes, sir.
	if (response == "s_86b2a029")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			tatooine_imperial_trainer_2b_action_giveQuest2 (player, npc);

			//-- NPC: The new scan ship is waiting for you. Don't lose this one.
			string_id message = new string_id (c_stringFile, "s_dbcc5353");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch55 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Any progress with the search?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I managed to find this activity log on a Rebel ship.
	if (response == "s_4d81d507")
	{
		doAnimationAction (player, "pose_proudly");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveReward1 (player, npc);

			//-- NPC: Hmm. Looks like the Rebels have definitely found something. There's a lot of activity in region M84/2. I'll dispatch a scanning team to check it out.
			string_id message = new string_id (c_stringFile, "s_847e12c5");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you think that's where the relic is located?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_65d0e7ef");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 56);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch56 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmm. Looks like the Rebels have definitely found something. There's a lot of activity in region M84/2. I'll dispatch a scanning team to check it out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you think that's where the relic is located?
	if (response == "s_65d0e7ef")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: Very likely. Region M84/2 is within the probability projection that Imperial Intelligence sent us. We still don't know what we'll find there.
			string_id message = new string_id (c_stringFile, "s_48a73eb9");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you plan to do?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_fe624ae0");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 57);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch57 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Very likely. Region M84/2 is within the probability projection that Imperial Intelligence sent us. We still don't know what we'll find there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you plan to do?
	if (response == "s_fe624ae0")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			tatooine_imperial_trainer_2b_action_giveQuest2 (player, npc);

			//-- NPC: I'll dispatch the scanning team. I need you to go up and escort the team while they make their sweep. There are probably Rebel fighters in that region, so you'll need to stay sharp. Once the scans are complete, return to me. I have a few things you can do while we process the scan results.
			string_id message = new string_id (c_stringFile, "s_116");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch59 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, it's the pilot from the Navy. Having fun in your auto cooled little cockpit? You know what its like to trudge around in the jungle wearing armor? The sun is killing me, today.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I haven't had luck in finding Rebel information.
	if (response == "s_5cab0f15")
	{
		doAnimationAction (player, "explain");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_hands");

			//-- NPC: We haven't had any luck finding the relic, either.
			string_id message = new string_id (c_stringFile, "s_5c8a242");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Any advice?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_647a7426");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 60);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch60 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We haven't had any luck finding the relic, either.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Any advice?
	if (response == "s_647a7426")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Search the Death Star debris, the radiation clouds, and the nebulae from the Yavin gas giant. They seem like likely areas for the Rebels to hide. All of the garbage from the Death Star makes it hard to scan the system, so you're on your own.
			string_id message = new string_id (c_stringFile, "s_598456ed");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll keep searching.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_24fbbc08");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 61);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch61 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Search the Death Star debris, the radiation clouds, and the nebulae from the Yavin gas giant. They seem like likely areas for the Rebels to hide. All of the garbage from the Death Star makes it hard to scan the system, so you're on your own.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll keep searching.
	if (response == "s_24fbbc08")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveQuest1 (player, npc);

			//-- NPC: You do that.
			string_id message = new string_id (c_stringFile, "s_567022e6");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch63 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm very busy coordinating the ground effort here at the base. I'll have to talk to you later.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Commander Oberhaur told me to contact you.
	if (response == "s_2eaae5bc")
	{
		doAnimationAction (player, "explain");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: You flyboys certainly like to take your time. While you've been gallivanting across the stars, I've had men dying in Rebel raids.
			string_id message = new string_id (c_stringFile, "s_f1639d7c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I came as soon as I received my orders.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f14c78f8");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 64);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am a member of Storm Squadron.
	if (response == "s_53b0407b")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_on_dismissing");

			//-- NPC: You aren't the one I was told to expect. My information is security rated Gamma Three. I can only talk to the one Oberhaur is sending.
			string_id message = new string_id (c_stringFile, "s_ed5d85e3");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm sorry, I'll leave you alone.
	if (response == "s_a73dd488")
	{
		doAnimationAction (player, "standing_placate");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_on_dismissing");

			//-- NPC: If you see a pilot from Storm Squadron tell him to come talk to me. Oberhaur promised he'd be here by now.
			string_id message = new string_id (c_stringFile, "s_1eb2fb7a");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You flyboys certainly like to take your time. While you've been gallivanting across the stars, I've had men dying in Rebel raids.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I came as soon as I received my orders.
	if (response == "s_f14c78f8")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: Those orders detailed that you are under my direct supervision for the duration of this operation. You will be prompt next time, is that clear?
			string_id message = new string_id (c_stringFile, "s_34b41ecc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_130");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 65);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch65 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Those orders detailed that you are under my direct supervision for the duration of this operation. You will be prompt next time, is that clear?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_130")
	{
		doAnimationAction (player, "salute1");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: That's better. The least you fly boys can do is show a little respect.
			string_id message = new string_id (c_stringFile, "s_591121d9");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_133");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 66);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch66 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That's better. The least you fly boys can do is show a little respect.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir.
	if (response == "s_133")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Here's the situation. This information is highly classified, I do not need to remind you of the penalties of leaking Gamma Three intelligence.
			string_id message = new string_id (c_stringFile, "s_957a3e29");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: (Nod.)
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e053d691");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 67);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch67 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Here's the situation. This information is highly classified, I do not need to remind you of the penalties of leaking Gamma Three intelligence.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: (Nod.)
	if (response == "s_e053d691")
	{
		doAnimationAction (player, "nod_head_once");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Since the destruction of the Death Star, the Empire has maintained a heavy presence in Yavin. The Death Star was not completely disintegrated in the core explosion and the remaining debris still contains valuable raw materials and technology.
			string_id message = new string_id (c_stringFile, "s_19717825");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: (Continue to listen.)
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7a761694");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 68);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch68 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Since the destruction of the Death Star, the Empire has maintained a heavy presence in Yavin. The Death Star was not completely disintegrated in the core explosion and the remaining debris still contains valuable raw materials and technology.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: (Continue to listen.)
	if (response == "s_7a761694")
	{
		doAnimationAction (player, "listen");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Although the Imperial Navy usually handles space operations, the Imperial Engineering Corps is in charge of materials recovery. We've been slowly salvaging large portions of the Death Star to be recycled into new projects.
			string_id message = new string_id (c_stringFile, "s_18478398");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Interesting.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6598178f");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 69);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch69 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Although the Imperial Navy usually handles space operations, the Imperial Engineering Corps is in charge of materials recovery. We've been slowly salvaging large portions of the Death Star to be recycled into new projects.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Interesting.
	if (response == "s_6598178f")
	{
		doAnimationAction (player, "rub_chin_thoughtful");

		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: We aren't the only ones interested by the Death Star's potential. Various alien factions, as well as pirates, and the Rebellion has sent scavengers and special teams in to try and recover secret technology. We have a Navy division here, but lately the Rebellion has been sending in larger and larger incursions.
			string_id message = new string_id (c_stringFile, "s_6d22cae7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You think they found something?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_47f58b41");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 70);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch70 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We aren't the only ones interested by the Death Star's potential. Various alien factions, as well as pirates, and the Rebellion has sent scavengers and special teams in to try and recover secret technology. We have a Navy division here, but lately the Rebellion has been sending in larger and larger incursions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You think they found something?
	if (response == "s_47f58b41")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_multiple");

			//-- NPC: Given our calculations of their incursions and the blast pattern of the Death Star's destruction, Imperial Intelligence believes they've found something. Something big. In fact, they are hopping mad we didn't find it first.
			string_id message = new string_id (c_stringFile, "s_d1b5b50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is it they found?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81e0c16");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 71);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch71 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Given our calculations of their incursions and the blast pattern of the Death Star's destruction, Imperial Intelligence believes they've found something. Something big. In fact, they are hopping mad we didn't find it first.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is it they found?
	if (response == "s_81e0c16")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: It's priority clearance Bravo Zeta. Way above my head. All I've been told is that the Storm Squadron was being assigned to deal with the situation.
			string_id message = new string_id (c_stringFile, "s_12d564a4");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How can I help?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_146");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 72);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch72 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It's priority clearance Bravo Zeta. Way above my head. All I've been told is that the Storm Squadron was being assigned to deal with the situation.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How can I help?
	if (response == "s_146")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			//-- NPC: We've dispatched teams to search for whatever the Rebels found, but it will take time. Command has the idea that one of you Storm Squadron thugs could accelerate the process by hunting down the Rebels and beating the information out of them.
			string_id message = new string_id (c_stringFile, "s_bd3101cc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I take it you don't agree?
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d040d381");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 73);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch73 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We've dispatched teams to search for whatever the Rebels found, but it will take time. Command has the idea that one of you Storm Squadron thugs could accelerate the process by hunting down the Rebels and beating the information out of them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I take it you don't agree?
	if (response == "s_d040d381")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "sigh_deeply");

			//-- NPC: Command has us searching for something and we don't even have specs on its dimensions. We don't even know what its supposed to be. Now they want someone to go hunt down Rebels to find out the information they don't know or do know and just won't tell us? This job shouldn't be this convoluted. I should be directing walkers in battle, not grubbing around in a debris field.
			string_id message = new string_id (c_stringFile, "s_f81f75fc");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll see if I can help.
			boolean hasResponse0 = false;
			if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_38c83a93");

				utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 74);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_imperial_trainer_2b_handleBranch74 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Command has us searching for something and we don't even have specs on its dimensions. We don't even know what its supposed to be. Now they want someone to go hunt down Rebels to find out the information they don't know or do know and just won't tell us? This job shouldn't be this convoluted. I should be directing walkers in battle, not grubbing around in a debris field.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll see if I can help.
	if (response == "s_38c83a93")
	{
		//-- [NOTE] 
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			tatooine_imperial_trainer_2b_action_giveQuest1 (player, npc);

			//-- NPC: We have located an area that it would appear the rebel agents are using as a meeting place with flight commanders. We believe it is these agents that have the information we are after. If you find a Rebel, search his ship's computer for the ships activity logs and return to me when you find anything that might help us out.
			string_id message = new string_id (c_stringFile, "s_e617e5c8");
			utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.tatooine_imperial_trainer_2b");

	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	factions.setFaction( self, factions.FACTION_IMPERIAL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	factions.setFaction( self, factions.FACTION_IMPERIAL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);

	faceTo(self, player);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.tatooine_imperial_trainer_2b");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (!tatooine_imperial_trainer_2b_condition_isPilot (player, npc))
	{
		//-- NPC: I'm sorry, I can't help you right now.
		string_id message = new string_id (c_stringFile, "s_21772e5a");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_isRebel (player, npc))
	{
		//-- NPC: I'm sorry, I can't help you now.
		string_id message = new string_id (c_stringFile, "s_4");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_isPrivateer (player, npc))
	{
		//-- NPC: I'm sorry, I can't help you.
		string_id message = new string_id (c_stringFile, "s_6");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_isOnMission (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: Come back when you're done with your mission. You can abort your mission if you want to start over.
		string_id message = new string_id (c_stringFile, "s_4b074298");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (!tatooine_imperial_trainer_2b_condition_onMyTrack (player, npc))
	{
		//-- NPC: Well if it isn't another pilot for the Imperial Navy. What do you want?
		string_id message = new string_id (c_stringFile, "s_42e9d63a");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I would like to request a mission.
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4854758d");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 5);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_transferedToDenner (player, npc))
	{
		doAnimationAction (npc, "tap_head");

		//-- NPC: Do you have something wrong with your hearing, pilot? You are working for Captain Denner now. Report to him here in the Outpost on the double!
		string_id message = new string_id (c_stringFile, "s_10ee338d");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_hasWonQuest3 (player, npc))
	{
		//-- NPC: You did it. I would be lying if I said that I wasn't shocked. You have proven yourself to be one excellent pilot and an asset to the Empire. Unfortunately, for me I have just received word that you are being transferred from under my command. 
		string_id message = new string_id (c_stringFile, "s_b2d005b0");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am being transferred again?
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_71bf4315");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 10);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_hasFailedQuest3 (player, npc))
	{
		doAnimationAction (npc, "shake_head_disgust");

		//-- NPC: Blast it! You were supposed to be the best man for the job and you seriously botched it. Fortunately for you it would appear that we managed to damage the gunboat enough that it has not been able to hyperspace out of the system.
		string_id message = new string_id (c_stringFile, "s_dc229c8d");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: So the Twilight Sun is still in the Yavin system.
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1da2b1f3");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 15);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_isReadyForMission3 (player, npc))
	{
		//-- NPC: Flying Officer %NU, I have an urgent assignment for you. Stand at attention for briefing!
		string_id message = new string_id (c_stringFile, "s_7ec622db");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, sir!
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_b6b25f13");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 18);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_canBuySkill1 (player, npc))
	{
		//-- NPC: Against my better judgment it would appear that you are fit for some flight training. Personally, I wouldn't waste my time training you but I have my orders too.
		string_id message = new string_id (c_stringFile, "s_9893fb0");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am ready for my training.
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_7eed59f9");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 25);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_isReadyForDutyBlock1 (player, npc))
	{
		//-- NPC: We need to buy time. Slow down the Rebel efforts until we can determine the exact location of the relic. You have operational discretion in this regard, but let me know your plans so I can coordinate with HQ. I've also received new details on the relic from Imperial Intelligence.
		string_id message = new string_id (c_stringFile, "s_95549379");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What kind of operations can I help with?
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5a7ec1e4");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 26);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_hasWonQuest2 (player, npc))
	{
		tatooine_imperial_trainer_2b_action_giveReward2 (player, npc);

		//-- NPC: Welcome back, Officer %NU. The scanning team has submitted their data for review. It's going to take some time to process it all. The debris and the radiation fields make it difficult to get clear readings.
		string_id message = new string_id (c_stringFile, "s_7e1391b7");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: When do you expect the results?
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5365b13d");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 27);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_hasFailedQuest2 (player, npc))
	{
		doAnimationAction (npc, "gesticulate_wildly");

		//-- NPC: I've already received the report! You lost the scanning team. Unbelievable. Do you know how much it costs to manufacture and deploy a scanning freighter? I thought the Storm Squadron could handle this, but clearly I was misinformed.
		string_id message = new string_id (c_stringFile, "s_1a4113b");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I..
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_da3db7b8");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 49);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_isReadyForMission2 (player, npc))
	{
		doAnimationAction (npc, "explain");

		tatooine_imperial_trainer_2b_action_giveQuest2 (player, npc);

		//-- NPC: I'll dispatch the scanning team. I need you to go up and escort the team while they make their sweep. There are probably Rebel fighters in that region, so you'll need to stay sharp. Once the scans are complete, return to me. I have a few things you can do while we process the scan results.
		string_id message = new string_id (c_stringFile, "s_bf7cf7b8");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_hasWonQuest1 (player, npc))
	{
		//-- NPC: Any progress with the search?
		string_id message = new string_id (c_stringFile, "s_80efb61c");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I managed to find this activity log on a Rebel ship.
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4d81d507");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 55);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition_hasFailedQuest1 (player, npc))
	{
		doAnimationAction (npc, "tap_foot");

		//-- NPC: Well, it's the pilot from the Navy. Having fun in your auto cooled little cockpit? You know what its like to trudge around in the jungle wearing armor? The sun is killing me, today.
		string_id message = new string_id (c_stringFile, "s_55289b72");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I haven't had luck in finding Rebel information.
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5cab0f15");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 59);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "check_wrist_device");

		//-- NPC: I'm very busy coordinating the ground effort here at the base. I'll have to talk to you later.
		string_id message = new string_id (c_stringFile, "s_128d62a");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Commander Oberhaur told me to contact you.
		boolean hasResponse0 = false;
		if (tatooine_imperial_trainer_2b_condition_isWorkingForAlozen (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I am a member of Storm Squadron.
		boolean hasResponse1 = false;
		if (tatooine_imperial_trainer_2b_condition_isStormSquadron (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I'm sorry, I'll leave you alone.
		boolean hasResponse2 = false;
		if (tatooine_imperial_trainer_2b_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_2eaae5bc");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_53b0407b");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_a73dd488");

			utils.setScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId", 63);

			npcStartConversation (player, npc, "tatooine_imperial_trainer_2b", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "tatooine_imperial_trainer_2b")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

	if (branchId == 5 && tatooine_imperial_trainer_2b_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && tatooine_imperial_trainer_2b_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && tatooine_imperial_trainer_2b_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && tatooine_imperial_trainer_2b_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && tatooine_imperial_trainer_2b_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && tatooine_imperial_trainer_2b_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && tatooine_imperial_trainer_2b_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && tatooine_imperial_trainer_2b_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && tatooine_imperial_trainer_2b_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && tatooine_imperial_trainer_2b_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && tatooine_imperial_trainer_2b_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && tatooine_imperial_trainer_2b_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && tatooine_imperial_trainer_2b_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && tatooine_imperial_trainer_2b_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && tatooine_imperial_trainer_2b_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && tatooine_imperial_trainer_2b_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && tatooine_imperial_trainer_2b_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && tatooine_imperial_trainer_2b_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && tatooine_imperial_trainer_2b_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && tatooine_imperial_trainer_2b_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && tatooine_imperial_trainer_2b_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && tatooine_imperial_trainer_2b_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && tatooine_imperial_trainer_2b_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && tatooine_imperial_trainer_2b_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 40 && tatooine_imperial_trainer_2b_handleBranch40 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && tatooine_imperial_trainer_2b_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 44 && tatooine_imperial_trainer_2b_handleBranch44 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && tatooine_imperial_trainer_2b_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 49 && tatooine_imperial_trainer_2b_handleBranch49 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 50 && tatooine_imperial_trainer_2b_handleBranch50 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && tatooine_imperial_trainer_2b_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && tatooine_imperial_trainer_2b_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 55 && tatooine_imperial_trainer_2b_handleBranch55 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 56 && tatooine_imperial_trainer_2b_handleBranch56 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 57 && tatooine_imperial_trainer_2b_handleBranch57 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 59 && tatooine_imperial_trainer_2b_handleBranch59 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 60 && tatooine_imperial_trainer_2b_handleBranch60 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 61 && tatooine_imperial_trainer_2b_handleBranch61 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 63 && tatooine_imperial_trainer_2b_handleBranch63 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && tatooine_imperial_trainer_2b_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 65 && tatooine_imperial_trainer_2b_handleBranch65 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 66 && tatooine_imperial_trainer_2b_handleBranch66 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 67 && tatooine_imperial_trainer_2b_handleBranch67 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 68 && tatooine_imperial_trainer_2b_handleBranch68 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 69 && tatooine_imperial_trainer_2b_handleBranch69 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 70 && tatooine_imperial_trainer_2b_handleBranch70 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 71 && tatooine_imperial_trainer_2b_handleBranch71 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 72 && tatooine_imperial_trainer_2b_handleBranch72 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 73 && tatooine_imperial_trainer_2b_handleBranch73 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 74 && tatooine_imperial_trainer_2b_handleBranch74 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.tatooine_imperial_trainer_2b.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

