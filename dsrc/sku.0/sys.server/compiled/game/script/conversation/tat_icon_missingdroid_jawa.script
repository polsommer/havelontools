// ======================================================================
//
// tat_icon_missingdroid_jawa.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.34 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/tat_icon_missingdroid_jawa";

// ======================================================================
// Script Conditions
// ======================================================================

boolean tat_icon_missingdroid_jawa_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean tat_icon_missingdroid_jawa_condition_fixingJawa_e2_jawa2Droid (obj_id player, obj_id npc)
{	
	int questId1 = questGetQuestId("quest/tat_icon_fixingjawa_1");
	int tat_icon_jawa_to_droid_e2 = groundquests.getTaskId(questId1, "tat_icon_jawa_to_droid_e2"); 
	
	boolean onTask = questIsTaskActive(questId1, tat_icon_jawa_to_droid_e2, player);
	
	return onTask;

}

// ----------------------------------------------------------------------

boolean tat_icon_missingdroid_jawa_condition_fixingJawa_e1_dren2Jawa (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tat_icon_fixingjawa_1");
	int tat_icon_dren_to_jawa_e1 = groundquests.getTaskId(questId1, "tat_icon_dren_to_jawa_e1"); 
	
	boolean onTask = questIsTaskActive(questId1, tat_icon_dren_to_jawa_e1, player);
	
	return onTask;
}

// ----------------------------------------------------------------------

boolean tat_icon_missingdroid_jawa_condition_fixingJawa_e3_droid2Dren (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tat_icon_fixingjawa_1");
	int tat_icon_droid_to_dren_e3 = groundquests.getTaskId(questId1, "tat_icon_droid_to_dren_e3"); 
	
	boolean onTask = questIsTaskActive(questId1, tat_icon_droid_to_dren_e3, player);
	
	return onTask;
}

// ----------------------------------------------------------------------

boolean tat_icon_missingdroid_jawa_condition_fixingJawa_complete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tat_icon_fixingjawa_1");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;

}

// ======================================================================
// Script Actions
// ======================================================================

void tat_icon_missingdroid_jawa_action_signal_gotoDroid_e1 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "tat_icon_fixingjawa_dren_to_jawa_e1");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int tat_icon_missingdroid_jawa_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My master bids you greetings, and asks if you were able to locate the errant droid?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes I did. Turns out the reprogramming wasn't so good.
	if (response == "s_40")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh dear, Master will not like that news. What exactly went wrong if you don't mind me asking?
			string_id message = new string_id (c_stringFile, "s_41");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: It was reverting to it's military programming.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_68");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Could you tell me where the droid is again?
	if (response == "s_64")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Certainly sir, here are the coordinates.
			string_id message = new string_id (c_stringFile, "s_65");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on my way to find it now.
	if (response == "s_66")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Very good, sir. 
			string_id message = new string_id (c_stringFile, "s_67");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh dear, Master will not like that news. What exactly went wrong if you don't mind me asking?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It was reverting to it's military programming.
	if (response == "s_68")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: I see. This is most disquieting. were you able to fix the droid?
			string_id message = new string_id (c_stringFile, "s_69");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No, I was not.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Yes, I was.
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_70");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see. This is most disquieting. were you able to fix the droid?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, I was not.
	if (response == "s_70")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Unfortunate indeed. Perhaps you could find someone else to help with this issue.
			string_id message = new string_id (c_stringFile, "s_73");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I was hoping someone here would be able to fix the droid.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_74");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I was.
	if (response == "s_71")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are quite the slicer, sir. I congratulate you on your intuitive grasp of droid behavioral matrices. Pardon me, my master needs to be informed. Thank you again for taking care of this issue.
			string_id message = new string_id (c_stringFile, "s_72");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Unfortunate indeed. Perhaps you could find someone else to help with this issue.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was hoping someone here would be able to fix the droid.
	if (response == "s_74")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am most sorry sir, but our only slicer was killed recently by Tusken Raiders. Pardon me, but I must inform my master of this situation. Please try and find someone to repair the droid. Though my master would be loathe to admit it, the droid is somewhat dangerous in this state.
			string_id message = new string_id (c_stringFile, "s_75");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My master wishes me to bid you welcome, and wishes to know your business here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have been sent by one of your customers.
	if (response == "s_24")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: It is unfortunate, but my master cannot give any refunds at this time. Please read the purchase agreement regarding liability and refunds.
			string_id message = new string_id (c_stringFile, "s_26");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am not looking for a refund.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'd like to know more about this place.
	if (response == "s_96")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: This is a Jawa trading post. While the Jawas do most of their business out of the great sand crawlers on sales routes. Camps like these are often established as a temporary location for repairs and maintenance. 
			string_id message = new string_id (c_stringFile, "s_98");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How long has this camp been here?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why did you pick this location.
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: On second thought, I'm really not that interested.
			boolean hasResponse2 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_110");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_120");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is unfortunate, but my master cannot give any refunds at this time. Please read the purchase agreement regarding liability and refunds.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am not looking for a refund.
	if (response == "s_28")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Would you be looking to make a new purchase then?
			string_id message = new string_id (c_stringFile, "s_30");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No, I need to find the location of a droid you sold.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_32");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Would you be looking to make a new purchase then?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, I need to find the location of a droid you sold.
	if (response == "s_32")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My master requests the name of the purchaser.
			string_id message = new string_id (c_stringFile, "s_34");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A moisture farmer, his name is Dren Fetix.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_36");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My master requests the name of the purchaser.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A moisture farmer, his name is Dren Fetix.
	if (response == "s_36")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My master recalls that transaction. A LIN Demolitionmech retasked for moisture harvesting. 
			string_id message = new string_id (c_stringFile, "s_38");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A demolition droid? Is it dangerous?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_42");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My master recalls that transaction. A LIN Demolitionmech retasked for moisture harvesting. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A demolition droid? Is it dangerous?
	if (response == "s_42")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Impossible. My master does not deal in dangerous droids. The Jawa that reprogrammed him was very good at what he did. My master is sure the retasking was flawless.
			string_id message = new string_id (c_stringFile, "s_44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Understood. Could you help me locate the droid?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: What do you mean WAS good?
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_62");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_47");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Impossible. My master does not deal in dangerous droids. The Jawa that reprogrammed him was very good at what he did. My master is sure the retasking was flawless.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Understood. Could you help me locate the droid?
	if (response == "s_62")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Locating it isn't the problem, sir. You see, most military droids have locaters. We can easily search on a generic frequency used by all of this type of droid, and we can pinpoint it anywhere on Tatooine.
			string_id message = new string_id (c_stringFile, "s_143");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Great! So what's the catch?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_147");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you mean WAS good?
	if (response == "s_47")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: He was killed yesterday by Tusken Raiders while out on a sales route. They found his corpse as the crew was preparing the sand crawler to leave the site.
			string_id message = new string_id (c_stringFile, "s_49");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How unfortunate.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_51");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: He was killed yesterday by Tusken Raiders while out on a sales route. They found his corpse as the crew was preparing the sand crawler to leave the site.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How unfortunate.
	if (response == "s_51")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Indeed. Apparently the price of doing business according to my master.
			string_id message = new string_id (c_stringFile, "s_53");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Perhaps. I'd really like to know about finding the droid though.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_55");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Indeed. Apparently the price of doing business according to my master.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps. I'd really like to know about finding the droid though.
	if (response == "s_55")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Locating it isn't the problem, sir. You see, most military droids have locaters. We can easily search on a generic frequency used by all of this type of droid, and we can pinpoint it anywhere on Tatooine.
			string_id message = new string_id (c_stringFile, "s_143");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Great! So what's the catch?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_147");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Locating it isn't the problem, sir. You see, most military droids have locaters. We can easily search on a generic frequency used by all of this type of droid, and we can pinpoint it anywhere on Tatooine.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Great! So what's the catch?
	if (response == "s_147")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well sir, the 'catch' as you put it is this is still a military droid. If you try to alter it's behavior matrix while it is in its self-defense mode it may become violent. We have codes that can bypass the self-defense security, but...
			string_id message = new string_id (c_stringFile, "s_151");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: But? But what?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_153");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well sir, the 'catch' as you put it is this is still a military droid. If you try to alter it's behavior matrix while it is in its self-defense mode it may become violent. We have codes that can bypass the self-defense security, but...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: But? But what?
	if (response == "s_153")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My master regrets to inform you that his simpleton of a protocol droid forgot the code's proper sequence. Apparently sir, I have forgotten the code sequence.
			string_id message = new string_id (c_stringFile, "s_155");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You... forgot!?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_157");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My master regrets to inform you that his simpleton of a protocol droid forgot the code's proper sequence. Apparently sir, I have forgotten the code sequence.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You... forgot!?
	if (response == "s_157")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes sir, that is what my master tells me.
			string_id message = new string_id (c_stringFile, "s_159");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Fine, can I get the codes? I'll figure out the sequence when I get there.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_161");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes sir, that is what my master tells me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Fine, can I get the codes? I'll figure out the sequence when I get there.
	if (response == "s_161")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: Very well sir. Here are the codes.
			string_id message = new string_id (c_stringFile, "s_163");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Tell your master I must leave to track down this droid, but I appreciate his help.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_165");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Very well sir. Here are the codes.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Tell your master I must leave to track down this droid, but I appreciate his help.
	if (response == "s_165")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			tat_icon_missingdroid_jawa_action_signal_gotoDroid_e1 (player, npc);

			//-- NPC: Of course. Good luck sir.
			string_id message = new string_id (c_stringFile, "s_167");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is a Jawa trading post. While the Jawas do most of their business out of the great sand crawlers on sales routes. Camps like these are often established as a temporary location for repairs and maintenance. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How long has this camp been here?
	if (response == "s_100")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: I do not know accurately  My master informs me that this was once a temporary camp but because of its natural defenses, over time it became the only permanent camp of its kind. The other races came to know it as our trading post and my master accepted it because of the recurring sales it offered.
			string_id message = new string_id (c_stringFile, "s_102");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why did you pick this location.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Thank you for the information.
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_104");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_106");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why did you pick this location.
	if (response == "s_110")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My master tells me it was because of the natural defenses offered by this cul-de-sac, and of course the potential for profits.
			string_id message = new string_id (c_stringFile, "s_112");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How long has this camp been here?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Thank you for the information.
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_114");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_116");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: On second thought, I'm really not that interested.
	if (response == "s_120")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: As you wish sir.
			string_id message = new string_id (c_stringFile, "s_122");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I do not know accurately  My master informs me that this was once a temporary camp but because of its natural defenses, over time it became the only permanent camp of its kind. The other races came to know it as our trading post and my master accepted it because of the recurring sales it offered.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why did you pick this location.
	if (response == "s_104")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My master tells me it was because of the natural defenses offered by this cul-de-sac, and of course the potential for profits.
			string_id message = new string_id (c_stringFile, "s_112");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How long has this camp been here?
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Thank you for the information.
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_114");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_116");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you for the information.
	if (response == "s_106")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My pleasure, sir.
			string_id message = new string_id (c_stringFile, "s_108");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tat_icon_missingdroid_jawa_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My master tells me it was because of the natural defenses offered by this cul-de-sac, and of course the potential for profits.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How long has this camp been here?
	if (response == "s_114")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: I do not know accurately  My master informs me that this was once a temporary camp but because of its natural defenses, over time it became the only permanent camp of its kind. The other races came to know it as our trading post and my master accepted it because of the recurring sales it offered.
			string_id message = new string_id (c_stringFile, "s_102");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why did you pick this location.
			boolean hasResponse0 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Thank you for the information.
			boolean hasResponse1 = false;
			if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_104");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_106");

				utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you for the information.
	if (response == "s_116")
	{
		//-- [NOTE] 
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			//-- NPC: My pleasure, sir.
			string_id message = new string_id (c_stringFile, "s_118");
			utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.tat_icon_missingdroid_jawa");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.tat_icon_missingdroid_jawa");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (tat_icon_missingdroid_jawa_condition_fixingJawa_complete (player, npc))
	{
		//-- NPC: My master wishes me to thank you for your efforts in helping our customer. However, he is very busy at the moment and has no time for a visit. I do so apologize for his abrupt treatment.
		string_id message = new string_id (c_stringFile, "s_4");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tat_icon_missingdroid_jawa_condition_fixingJawa_e2_jawa2Droid (player, npc))
	{
		//-- NPC: My master bids you greetings, and asks if you were able to locate the errant droid?
		string_id message = new string_id (c_stringFile, "s_6");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes I did. Turns out the reprogramming wasn't so good.
		boolean hasResponse0 = false;
		if (tat_icon_missingdroid_jawa_condition_fixingJawa_e3_droid2Dren (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Could you tell me where the droid is again?
		boolean hasResponse1 = false;
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I'm on my way to find it now.
		boolean hasResponse2 = false;
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_40");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_64");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_66");

			utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 2);

			npcStartConversation (player, npc, "tat_icon_missingdroid_jawa", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
	{
		//-- NPC: My master wishes me to bid you welcome, and wishes to know your business here.
		string_id message = new string_id (c_stringFile, "s_22");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I have been sent by one of your customers.
		boolean hasResponse0 = false;
		if (tat_icon_missingdroid_jawa_condition_fixingJawa_e1_dren2Jawa (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'd like to know more about this place.
		boolean hasResponse1 = false;
		if (tat_icon_missingdroid_jawa_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_24");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_96");

			utils.setScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId", 10);

			npcStartConversation (player, npc, "tat_icon_missingdroid_jawa", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "tat_icon_missingdroid_jawa")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

	if (branchId == 2 && tat_icon_missingdroid_jawa_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && tat_icon_missingdroid_jawa_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && tat_icon_missingdroid_jawa_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && tat_icon_missingdroid_jawa_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && tat_icon_missingdroid_jawa_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && tat_icon_missingdroid_jawa_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && tat_icon_missingdroid_jawa_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && tat_icon_missingdroid_jawa_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && tat_icon_missingdroid_jawa_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && tat_icon_missingdroid_jawa_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && tat_icon_missingdroid_jawa_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && tat_icon_missingdroid_jawa_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && tat_icon_missingdroid_jawa_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && tat_icon_missingdroid_jawa_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && tat_icon_missingdroid_jawa_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && tat_icon_missingdroid_jawa_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && tat_icon_missingdroid_jawa_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && tat_icon_missingdroid_jawa_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && tat_icon_missingdroid_jawa_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && tat_icon_missingdroid_jawa_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.tat_icon_missingdroid_jawa.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

