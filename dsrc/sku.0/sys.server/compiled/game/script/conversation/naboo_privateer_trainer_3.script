// ======================================================================
//
// naboo_privateer_trainer_3.script
// Copyright 2003, Sony Online Entertainment
// All Rights Reserved.
//
// DO NOT EDIT THIS AUTO-GENERATED FILE.  PLEASE USE THE CONVERATION EDITOR!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.skill;
include library.space_quest;
include library.space_skill;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/naboo_privateer_trainer_3";

// ======================================================================
// Script Conditions
// ======================================================================

boolean naboo_privateer_trainer_3_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_remembersPlayer (obj_id player, obj_id npc)
{
	return ( utils.hasScriptVar( player, "metRsfTrainer" ));
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasNoviceSkillBox (obj_id player, obj_id npc)
{
	return ( space_quest.hasSkill( player, "pilot_neutral_novice" ) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_alreadyHasAQuest (obj_id player, obj_id npc)
{
	return ( space_quest.hasQuest( player ));
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_isImperialPilot (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_imperial_navy_novice" ));
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_isRebelPilot (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_rebel_navy_novice" ));
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_isPilotButNotRsfMember (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_neutral_novice" ) && (!hasObjVar( player, "rsfMember" )) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasCompletedQuestOne (obj_id player, obj_id npc)
{
	//note that for quest one, we're checking vs. completion of the surprise attack:
	return ( space_quest.hasCompletedQuest( player, "destroy_surpriseattack", "naboo_privateer_1" ) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasCompletedQuestTwo (obj_id player, obj_id npc)
{
	return ( space_quest.hasCompletedQuest( player, "destroy", "naboo_privateer_2") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasCompletedQuestThree (obj_id player, obj_id npc)
{
	return ( space_quest.hasCompletedQuest( player, "patrol", "naboo_privateer_3") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasCompletedQuestFour (obj_id player, obj_id npc)
{
	return ( space_quest.hasCompletedQuest( player, "destroy", "naboo_privateer_4") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_missionOneFailed (obj_id player, obj_id npc)
{
	//note that we are checking vs. the surprise attack in mission 1
	if ( space_quest.hasFailedQuest( player, "destroy_surpriseattack", "naboo_privateer_1" ) ||
		 space_quest.hasAbortedQuest( player, "destroy_surpriseattack", "naboo_privateer_1" ) )
		 return true;
	
	return false;	 
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_isReadyForFirstTraining (obj_id player, obj_id npc)
{
	//You have completed all 4 missions is handled by previous convo conditions
	
	if ( 	hasSkill( player, "pilot_neutral_starships_01") 	|| 
			hasSkill( player, "pilot_neutral_procedures_01") 	||
			hasSkill( player, "pilot_neutral_weapons_01") 		||
			hasSkill( player, "pilot_neutral_droid_01" ) 	)
		return false;//You have already received your initial skill (or more!)
	else	
		return true;
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_isReadyForMoreTraining (obj_id player, obj_id npc)
{
	//You have completed all 4 missions - checked via previous convo options
	//but don't have all the tier-1 skills yet, - //checked via previous convo options
	
	//if you have enough xp for this skill, then you have enough for
	//any other skill at this tier:
	return ( space_quest.isPlayerQualifiedForSkill( player, "pilot_neutral_starships_01") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasAllTierOneSkills (obj_id player, obj_id npc)
{
	if (!hasSkill( player, "pilot_neutral_starships_01") )
		return false;
	else if (!hasSkill( player, "pilot_neutral_procedures_01") )
		return false;
	else if (!hasSkill( player, "pilot_neutral_weapons_01") )
		return false;
	else if (!hasSkill( player, "pilot_neutral_droid_01" ) )
		return false;
	else	
		return true;
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_missionTwoFailed (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "destroy", "naboo_privateer_2" ) ||
		 space_quest.hasAbortedQuest( player, "destroy", "naboo_privateer_2" ) )
		 return true;
		 
	return false;	 
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_beenRewardedForQuestOne (obj_id player, obj_id npc)
{
	//if the player hasn't completed this quest, then we don't want to give
	//the reward!  So return true here.
	
	//note that we're checking vs. completion of the surpise attack:
	if ( space_quest.hasCompletedQuest( player, "destroy_surpriseattack", "naboo_privateer_1"))
		return true;

	//this returns true if you have completed this quest but have not been rewarded for it
	return (	( space_quest.hasCompletedQuest( player, "destroy_surpriseattack", "naboo_privateer_1")) && 
				( !space_quest.hasReceivedReward( player, "patrol", "naboo_privateer_1")) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_beenRewardedForQuestTwo (obj_id player, obj_id npc)
{
	//if the player hasn't completed this quest, then we don't want to give
	//the reward!  So return true here.
	if (!space_quest.hasCompletedQuest( player, "destroy", "naboo_privateer_1"))
		return true;

	//this returns true if you have completed this quest but have not been rewarded for it
	return (	( space_quest.hasCompletedQuest( player, "destroy", "naboo_privateer_1")) && 
				( space_quest.hasReceivedReward( player, "destroy", "naboo_privateer_1")) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_beenRewardedForQuestThree (obj_id player, obj_id npc)
{
	//if the player hasn't completed this quest, then we don't want to give
	//the reward!  So return true here.
	if (!space_quest.hasCompletedQuest( player, "patrol", "naboo_privateer_3"))
		return true;

	//this returns true if you have completed this quest but have not been rewarded for it
	return (	( space_quest.hasCompletedQuest( player, "patrol", "naboo_privateer_3")) && 
				( space_quest.hasReceivedReward( player, "patrol", "naboo_privateer_3")) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_beenRewardedForQuestFour (obj_id player, obj_id npc)
{
	//if the player hasn't completed this quest, then we don't want to give
	//the reward!  So return true here.
	if (!space_quest.hasCompletedQuest( player, "destroy", "naboo_privateer_4"))
		return true;
		
	//this returns true if you have completed this quest but have not been rewarded for it
	return (	( space_quest.hasCompletedQuest( player, "destroy", "naboo_privateer_4")) && 
				( space_quest.hasReceivedReward( player, "destroy", "naboo_privateer_4")) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_missionThreeFailed (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "patrol", "naboo_privateer_3" ) ||
		 space_quest.hasAbortedQuest( player, "patrol", "naboo_privateer_3" ) )
		 return true;
		 
	return false;	 
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_missionFourFailed (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "destroy", "naboo_privateer_4" ) ||
		 space_quest.hasAbortedQuest( player, "destroy", "naboo_privateer_4" ) )
		 return true;
		 
	return false;	 
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasStarshipSkill1 (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_neutral_starships_01") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasDroidSkill1 (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_neutral_droid_01") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasProceduresSkill1 (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_neutral_procedures_01") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_hasWeaponsSkill1 (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_neutral_weapons_01") );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_has_goMeetLordUnset (obj_id player, obj_id npc)
{
	return ((utils.hasScriptVar( player, "goMeetLordUnset")) &&
			!( space_quest.hasQuest( player )));
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_FAILED_mission_1 (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "inspect", "privateer_inspection_1" ) ||
		 space_quest.hasAbortedQuest( player, "inspect", "privateer_inspection_1" ) )
		 return true;
		 
	return false;
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_WON_mission_1 (obj_id player, obj_id npc)
{
	return ( space_quest.hasCompletedQuest( player, "inspect", "privateer_inspection_1" ) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_isGenderMale (obj_id player, obj_id npc)
{
	return ( getGender( player ) == GENDER_MALE );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_has_goBackToKyatt (obj_id player, obj_id npc)
{
	return ((utils.hasScriptVar( player, "goBackToKyatt")) &&
			!( space_quest.hasQuest( player )));
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_WON_mission_2 (obj_id player, obj_id npc)
{
	return ( space_quest.hasCompletedQuest( player, "patrol", "naboo_privateer_8" ) );
}

// ----------------------------------------------------------------------

boolean naboo_privateer_trainer_3_condition_FAILED_mission_2 (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "patrol", "naboo_privateer_8" ) ||
		 space_quest.hasAbortedQuest( player, "patrol", "naboo_privateer_8" ) )
		 return true;
		 
	return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void naboo_privateer_trainer_3_action_rememberPlayer (obj_id player, obj_id npc)
{
	utils.setScriptVar( player, "metRsfTrainer", true );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantNoviceSkillBox (obj_id player, obj_id npc)
{
	grantSkill( player, "pilot_neutral_novice" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
	setObjVar( player, "rsfMember", true );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_signUpForRsf (obj_id player, obj_id npc)
{
	playMusic( player, "sound/music_themequest_acc_general.snd");
	setObjVar( player, "rsfMember", true );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantMissionOne (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "patrol", "naboo_privateer_1" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantMissionTwo (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "naboo_privateer_2" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantMissionThree (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "patrol", "naboo_privateer_3" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantMissionFour (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "naboo_privateer_4" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_rewardForQuestOne (obj_id player, obj_id npc)
{
	space_quest.giveReward( player, "patrol", "naboo_privateer_1", 500 );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_rewardForQuestTwo (obj_id player, obj_id npc)
{
	space_quest.giveReward( player, "destroy", "naboo_privateer_2", 800 );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_rewardForQuestThree (obj_id player, obj_id npc)
{
	space_quest.giveReward( player, "patrol", "naboo_privateer_3", 1000 );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_rewardForQuestFour (obj_id player, obj_id npc)
{
	space_quest.giveReward( player, "destroy", "naboo_privateer_4", 2000 );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantDroidSkill (obj_id player, obj_id npc)
{
	grantSkill( player, "pilot_neutral_droid_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantStarshipSkill (obj_id player, obj_id npc)
{
	grantSkill( player, "pilot_neutral_starships_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantProceduresSkill (obj_id player, obj_id npc)
{
	grantSkill( player, "pilot_neutral_procedures_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantWeaponsSkill (obj_id player, obj_id npc)
{
	grantSkill( player, "pilot_neutral_weapons_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_buyWeaponsSkill1 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_neutral_weapons_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_buyDroidSkill1 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_neutral_droid_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_buyProcedureSkill1 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_neutral_procedures_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_buyStarshipSkill1 (obj_id player, obj_id npc)
{
	skill.purchaseSkill( player, "pilot_neutral_starships_01" );
	playMusic( player, "sound/music_themequest_acc_general.snd");
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantPatrolDutyMission (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "patrol_duty", "naboo_privateer_5" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantDestroyDutyMission (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy_duty", "naboo_privateer_6" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantEscortDutyMission (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "escort_duty", "naboo_privateer_7" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_grantQuestEight (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "naboo_privateer_8" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_set_goMeetLordUnset (obj_id player, obj_id npc)
{
	playMusic( player, "sound/music_themequest_acc_general.snd");
	utils.setScriptVar( player, "goMeetLordUnset", true );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_give_Mission_1 (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "inspect", "privateer_inspection_1" );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_set_goBackToKyatt (obj_id player, obj_id npc)
{
	utils.setScriptVar( player, "goBackToKyatt", true );
}

// ----------------------------------------------------------------------

void naboo_privateer_trainer_3_action_give_Mission_3 (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "escort_duty", "naboo_privateer_9" );
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "npc.conversation.naboo_privateer_trainer_3");

	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "npc.conversation.naboo_privateer_trainer_3");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	if (ai_lib.isInCombat (self) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_has_goBackToKyatt (player, self))
	{
		//-- NPC: Look, I have nothing for you right now. Go talk to Captain Ky'att if you're bored.
		string_id message = new string_id (c_stringFile, "s_62a2f90f");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_has_goMeetLordUnset (player, self))
	{
		doAnimationAction (self, "check_wrist_device");

		//-- NPC: You're late, Captain %TU.
		string_id message = new string_id (c_stringFile, "s_f1acfde0");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: It won't happen again.
		boolean hasResponse0 = false;
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_31dd2d63");

			setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 2);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);

			npcStartConversation (player, self, "naboo_privateer_trainer_3", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);

			chat.chat (self, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_FAILED_mission_1 (player, self))
	{
		naboo_privateer_trainer_3_action_give_Mission_1 (player, self);

		//-- NPC: You failed quest one. Yo do it again.
		string_id message = new string_id (c_stringFile, "s_aeab51da");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_WON_mission_1 (player, self))
	{
		//-- NPC: Very good performance out there, Captain %TU. The local authorities will be very pleased. Now, the Gungan traitors will be easy to apprehend.
		string_id message = new string_id (c_stringFile, "s_165b7aa9");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What's next?
		boolean hasResponse0 = false;
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_a927c891");

			setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 8);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);

			npcStartConversation (player, self, "naboo_privateer_trainer_3", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);

			chat.chat (self, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_FAILED_mission_2 (player, self))
	{
		doAnimationAction (self, "rub_chin_thoughtful");

		//-- NPC: Hm. You can't be failing missions when you're supposed to be the great Captain Ky'att. Go talk to him and set it straight...
		string_id message = new string_id (c_stringFile, "s_4089fc2d");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_WON_mission_2 (player, self))
	{
		doAnimationAction (self, "greet");

		//-- NPC: So, you've done well in Captain Ky'att's name. Congratulations. Are you ready for more serious work?
		string_id message = new string_id (c_stringFile, "s_da5e9261");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I am.
		boolean hasResponse0 = false;
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_36a4e374");

			setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 14);

			npcStartConversation (player, self, "naboo_privateer_trainer_3", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition_alreadyHasAQuest (player, self))
	{
		doAnimationAction (self, "pound_fist_palm");

		//-- NPC: You're wasting time, Captain! Get back to work!
		string_id message = new string_id (c_stringFile, "s_f25b96ad");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
	{
		doAnimationAction (self, "standing_placate");

		//-- NPC: Forgive me, but I have no time for small talk.
		string_id message = new string_id (c_stringFile, "s_4529dfcf");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "naboo_privateer_trainer_3")
		return SCRIPT_CONTINUE;

	int branchId = getIntObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

	//-- [BRANCH NOTE] 
	//-- NPC: You're late, Captain %TU.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: It won't happen again.
	if (branchId == 2 && response == "s_31dd2d63")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "wave_finger_warning");

			//-- NPC: I should say not. You must get underway immediately. Are you prepared for your first mission as the famed 'Captain Ky'at?'
			string_id message = new string_id (c_stringFile, "s_984023b3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I am.
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_36a4e374");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You're late, Captain %TU.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I should say not. You must get underway immediately. Are you prepared for your first mission as the famed 'Captain Ky'at?'
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I am.
	if (branchId == 3 && response == "s_36a4e374")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "explain");

			//-- NPC: Good. We've had some trouble with militant Gungans fleeing to the Rebel Alliance. They have help from Rebel forgers who provide fake transit documents for them. We think they are shipping these illegal documents in small quantities aboard stunt fighters and cruisers.
			string_id message = new string_id (c_stringFile, "s_91935719");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you want me to do?
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7c9c0437");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I should say not. You must get underway immediately. Are you prepared for your first mission as the famed 'Captain Ky'at?'' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Good. We've had some trouble with militant Gungans fleeing to the Rebel Alliance. They have help from Rebel forgers who provide fake transit documents for them. We think they are shipping these illegal documents in small quantities aboard stunt fighters and cruisers.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you want me to do?
	if (branchId == 4 && response == "s_7c9c0437")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "pound_fist_palm");

			naboo_privateer_trainer_3_action_give_Mission_1 (player, self);

			//-- NPC: Hunt down the Rebel smugglers. Disable their starships. Extract the fake documents. Is that simple enough for you?
			string_id message = new string_id (c_stringFile, "s_76a99d5b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes.
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d70dba34");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Good. We've had some trouble with militant Gungans fleeing to the Rebel Alliance. They have help from Rebel forgers who provide fake transit documents for them. We think they are shipping these illegal documents in small quantities aboard stunt fighters and cruisers.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Hunt down the Rebel smugglers. Disable their starships. Extract the fake documents. Is that simple enough for you?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes.
	if (branchId == 5 && response == "s_d70dba34")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "goodbye");

			//-- NPC: Check in with Captain Ky'at when you are done.
			string_id message = new string_id (c_stringFile, "s_3f06def0");
			removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Hunt down the Rebel smugglers. Disable their starships. Extract the fake documents. Is that simple enough for you?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Very good performance out there, Captain %TU. The local authorities will be very pleased. Now, the Gungan traitors will be easy to apprehend.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's next?
	if (branchId == 8 && response == "s_a927c891")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			//-- NPC: Nothing to worry about just yet. Why don't you check in with Captain Ky'att? Take a stroll around the palace, maybe?
			string_id message = new string_id (c_stringFile, "s_c5bfd569");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll check in with Ky'att, then.
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I will take a stroll.
			boolean hasResponse1 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c699352d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_31ab4807");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Very good performance out there, Captain %TU. The local authorities will be very pleased. Now, the Gungan traitors will be easy to apprehend.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Nothing to worry about just yet. Why don't you check in with Captain Ky'att? Take a stroll around the palace, maybe?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll check in with Ky'att, then.
	if (branchId == 9 && response == "s_c699352d")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition_isGenderMale (player, self))
		{
			naboo_privateer_trainer_3_action_set_goBackToKyatt (player, self);

			//-- NPC: Good, boy. You do that.
			string_id message = new string_id (c_stringFile, "s_4a211440");
			removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			naboo_privateer_trainer_3_action_set_goBackToKyatt (player, self);

			//-- NPC: That's a girl. You go on, now.
			string_id message = new string_id (c_stringFile, "s_4b698d1f");
			removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Nothing to worry about just yet. Why don't you check in with Captain Ky'att? Take a stroll around the palace, maybe?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Nothing to worry about just yet. Why don't you check in with Captain Ky'att? Take a stroll around the palace, maybe?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will take a stroll.
	if (branchId == 9 && response == "s_31ab4807")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "shrug_hands");

			naboo_privateer_trainer_3_action_set_goBackToKyatt (player, self);

			//-- NPC: Wonderful.
			string_id message = new string_id (c_stringFile, "s_8accb5db");
			removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Nothing to worry about just yet. Why don't you check in with Captain Ky'att? Take a stroll around the palace, maybe?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: So, you've done well in Captain Ky'att's name. Congratulations. Are you ready for more serious work?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I am.
	if (branchId == 14 && response == "s_36a4e374")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "bow");

			//-- NPC: First, let me thank you for breaking up the Gungan's fake identity ring. It has led to scores of arrests here on Naboo and on planet Rori. No doubt the local authorities are eager to see even more from you.
			string_id message = new string_id (c_stringFile, "s_245c99c3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What more do they want to see?
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2a4b4d30");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So, you've done well in Captain Ky'att's name. Congratulations. Are you ready for more serious work?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: First, let me thank you for breaking up the Gungan's fake identity ring. It has led to scores of arrests here on Naboo and on planet Rori. No doubt the local authorities are eager to see even more from you.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: What more do they want to see?
	if (branchId == 15 && response == "s_2a4b4d30")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "explain");

			//-- NPC: Well, we have rounded up many more traitors than we could ever process here on Naboo. Thus, we are sending them to other worlds more equipped to handle these things.
			string_id message = new string_id (c_stringFile, "s_7cce6810");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What does this mean for me?
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_574c145e");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'First, let me thank you for breaking up the Gungan's fake identity ring. It has led to scores of arrests here on Naboo and on planet Rori. No doubt the local authorities are eager to see even more from you.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Well, we have rounded up many more traitors than we could ever process here on Naboo. Thus, we are sending them to other worlds more equipped to handle these things.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: What does this mean for me?
	if (branchId == 16 && response == "s_574c145e")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "explain");

			naboo_privateer_trainer_3_action_give_Mission_3 (player, self);

			//-- NPC: You will be assigned as fighter cover for a massive relocation effort! Ensure that our prisoners make it to their destinations... and make sure that the Alliance fails to liberate them.
			string_id message = new string_id (c_stringFile, "s_523f9f83");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The Alliance is involved?
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_96b39c0d");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Well, we have rounded up many more traitors than we could ever process here on Naboo. Thus, we are sending them to other worlds more equipped to handle these things.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You will be assigned as fighter cover for a massive relocation effort! Ensure that our prisoners make it to their destinations... and make sure that the Alliance fails to liberate them.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Alliance is involved?
	if (branchId == 17 && response == "s_96b39c0d")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "explain");

			//-- NPC: Perhaps not directly... but the Alliance did fire the first shot by attempting to build fictional identities for these Gungan traitors! Now, I'd bet they're going to intercept the prisoner transports and attempt to free their comrades.
			string_id message = new string_id (c_stringFile, "s_8050d040");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am on my way.
			boolean hasResponse0 = false;
			if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f2e1c3e5");

				setObjVar (player, "conversation.naboo_privateer_trainer_3.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You will be assigned as fighter cover for a massive relocation effort! Ensure that our prisoners make it to their destinations... and make sure that the Alliance fails to liberate them.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Perhaps not directly... but the Alliance did fire the first shot by attempting to build fictional identities for these Gungan traitors! Now, I'd bet they're going to intercept the prisoner transports and attempt to free their comrades.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am on my way.
	if (branchId == 18 && response == "s_f2e1c3e5")
	{
		//-- [NOTE] 
		if (naboo_privateer_trainer_3_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "bow");

			//-- NPC: Good luck, Captain %TU. We shall look forward to your return.
			string_id message = new string_id (c_stringFile, "s_4434402f");
			removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);

			npcSpeak (player, pp);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Perhaps not directly... but the Alliance did fire the first shot by attempting to build fictional identities for these Gungan traitors! Now, I'd bet they're going to intercept the prisoner transports and attempt to free their comrades.' were false.");

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	removeObjVar (player, "conversation.naboo_privateer_trainer_3.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

