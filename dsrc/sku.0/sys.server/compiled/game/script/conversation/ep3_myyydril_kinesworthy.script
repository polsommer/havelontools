// ======================================================================
//
// ep3_myyydril_kinesworthy.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_myyydril_kinesworthy";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_myyydril_kinesworthy_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedOther (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "ep3_myyydril_yraka_talkto_6", 0) ||
			groundquests.hasCompletedTask(player, "ep3_myyydril_yraka_talkto_6", 0));
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedTaskOne (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_1", 1) &&
		   !groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_1"));
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_isActiveTaskOne (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_1", 0) ||
		groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_1", 1) ||
		groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_1", 2) ||
		groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_1", 3) ||
		groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_1", 4) ||
		groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_1", 0) ||
		groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_1", 1) ||
		groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_1", 2) ||
		groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_1", 3) ||
		groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_1", 4))
		
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedQuestOne (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_1");
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_isActiveTaskTwo (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_2", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_2", 0))
	    
	    return true;
	else
		return false; 
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedTaskTwo (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_2", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_2"));
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedQuestTwo (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_2");
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_isActiveTaskThree (obj_id player, obj_id npc)
{	
	if (groundquests.isTaskActive(player, "ep3_myyydril_kinesworthy_epic_3", 0) ||
	    groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_3", 0))
	    
	    return true;
	else
		return false; 
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedTaskThree (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_myyydril_kinesworthy_epic_3", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_3"));
}

// ----------------------------------------------------------------------

boolean ep3_myyydril_kinesworthy_condition_hasCompletedQuestThree (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_myyydril_kinesworthy_epic_3");
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_myyydril_kinesworthy_action_giveQuestOne (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_myyydril_kinesworthy_epic_1");
}

// ----------------------------------------------------------------------

void ep3_myyydril_kinesworthy_action_giveQuestTwo (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_myyydril_kinesworthy_epic_2");
}

// ----------------------------------------------------------------------

void ep3_myyydril_kinesworthy_action_giveQuestThree (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_myyydril_kinesworthy_epic_3");
}

// ----------------------------------------------------------------------

void ep3_myyydril_kinesworthy_action_giveSignal (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "phatLewts");
}

// ----------------------------------------------------------------------

void ep3_myyydril_kinesworthy_action_giveSingal2 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "talktokines");
}

// ----------------------------------------------------------------------

void ep3_myyydril_kinesworthy_action_takeItem (obj_id player, obj_id npc)
{

}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_myyydril_kinesworthy_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: By your expression, I was correct. What was Treun Lorn working on down there?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You explain to Doctor Kinesworthy the events.]
	if (response == "s_4020")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: N-K 'Necrosis'? I should have known. This was graver than I had thought. And you defeated him? Amazing. I obviously underestimated you. [Kinesworthy shakes his head, bewildered.] No matter. What is done is done. Had Treun Lorn awakened that monster on his own, our very existence would have been threatened. Truly amazing. And what a pitiful ending...
			string_id message = new string_id (c_stringFile, "s_4022");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: It seems you almost... respect him.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4024");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: N-K 'Necrosis'? I should have known. This was graver than I had thought. And you defeated him? Amazing. I obviously underestimated you. [Kinesworthy shakes his head, bewildered.] No matter. What is done is done. Had Treun Lorn awakened that monster on his own, our very existence would have been threatened. Truly amazing. And what a pitiful ending...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It seems you almost... respect him.
	if (response == "s_4024")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_giveSignal (player, npc);

			//-- NPC: My partner, Treun Lorn? Of course. He was able to manipulate the most awe-inspiring creation in the world of cybernetics. But... [The doctor frowns.] You can't even begin to understand. Here. Take this. It is all I can offer.
			string_id message = new string_id (c_stringFile, "s_4026");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you. I am glad I could help.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4028");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My partner, Treun Lorn? Of course. He was able to manipulate the most awe-inspiring creation in the world of cybernetics. But... [The doctor frowns.] You can't even begin to understand. Here. Take this. It is all I can offer.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you. I am glad I could help.
	if (response == "s_4028")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Mmm. [The doctor continues to stare. Was that anger flashing in his eyes? Perhaps Kinesworthy wishes it had been him in the Deep Depths working on that thing. It would be better not to ask.]
			string_id message = new string_id (c_stringFile, "s_4030");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have you found any information regarding Treun Lorn and his projects?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, not yet. It's hard to get down there.
	if (response == "s_4034")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't want to hear any excuses! Get down there and find out anything you can.
			string_id message = new string_id (c_stringFile, "s_4036");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thanks to you, my machine is completely working. One of the features of this hulk of metal is to detect the frequency of high-powered machinery and the presence of dense materials most commonly used in cybernetics. And as you can see, by the blip here... [The doctor points to the machine's radar.] ...there seems to be another machine operating in this very cave.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Treun Lorn?
	if (response == "s_4040")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Precisely. I know him well, and I have no doubt that he has brought his project here to the Myyydril Caverns and sought to continue it in the Deep Depths. I need to know what he's been working on all these years. Bring me whatever part you can salvage from his project.
			string_id message = new string_id (c_stringFile, "s_4042");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I hope to be back soon.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4044");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Precisely. I know him well, and I have no doubt that he has brought his project here to the Myyydril Caverns and sought to continue it in the Deep Depths. I need to know what he's been working on all these years. Bring me whatever part you can salvage from his project.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I hope to be back soon.
	if (response == "s_4044")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_giveQuestThree (player, npc);

			//-- NPC: I hope you're right. But nothing can be certain when dealing with Treun Lorn.
			string_id message = new string_id (c_stringFile, "s_4046");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You've returned. Let me see the part. [The doctor extends his hand.] I'm going to place this into the machine and hope that it works.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay. I also found this.
	if (response == "s_4050")
	{
		//-- [NOTE] I need a reward here.
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_takeItem (player, npc);

			//-- NPC: Let me see it. [Kinesworthy looks over the cybernetic part.] I see. I can fix it, if that's what you want. Let me see what I can do.
			string_id message = new string_id (c_stringFile, "s_4052");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you. I'll wait here.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4054");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] I need a reward here.
	//-- NPC: Let me see it. [Kinesworthy looks over the cybernetic part.] I see. I can fix it, if that's what you want. Let me see what I can do.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you. I'll wait here.
	if (response == "s_4054")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_giveSignal (player, npc);

			//-- NPC: [The doctor mulls around, tinkering with the cybernetic part for a moment or two.] There. It should be in working order.
			string_id message = new string_id (c_stringFile, "s_4056");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you. I'll see how it works.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4058");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [The doctor mulls around, tinkering with the cybernetic part for a moment or two.] There. It should be in working order.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you. I'll see how it works.
	if (response == "s_4058")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm going to continue fiddling with my machine. If it doesn't work, I'll need your help finding out why.
			string_id message = new string_id (c_stringFile, "s_4060");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You still haven't done what I told you to. Why are you here? I don't want to talk about it until you're successful in your job!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: All right. I'll go look again.
	if (response == "s_4064")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [The doctor nods.]
			string_id message = new string_id (c_stringFile, "s_4066");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh, it's you. [Kinesworthy frowns.] What do you want?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Hey, don't be like that. I helped you, remember?
	if (response == "s_4070")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Kinesworthy sighs.] It's just hopeless. Not all the things I need to continue my work were in the storage box. I am missing a key part to get my machine working again.
			string_id message = new string_id (c_stringFile, "s_4072");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Well, where is it?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4074");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Kinesworthy sighs.] It's just hopeless. Not all the things I need to continue my work were in the storage box. I am missing a key part to get my machine working again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well, where is it?
	if (response == "s_4074")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: It would make more sense if I told you a little more behind the story. Bear with me. During my hunt to find Treun Lorn, I was stationed at an Imperial camp. Except it wasn't a place of normal operations...
			string_id message = new string_id (c_stringFile, "s_4076");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: ... what did they make you do?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4078");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It would make more sense if I told you a little more behind the story. Bear with me. During my hunt to find Treun Lorn, I was stationed at an Imperial camp. Except it wasn't a place of normal operations...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: ... what did they make you do?
	if (response == "s_4078")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Kinesworthy frowns, eyes bleak with memories.] I was ordered to practice my expertise on Wookiee slaves. I was supposed to make them stronger by installing cybernetic parts. The Empire turned them into killing machines! They made me make it easier for the Empire to control these unfortunate slaves!
			string_id message = new string_id (c_stringFile, "s_4080");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That's terrible.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4082");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Kinesworthy frowns, eyes bleak with memories.] I was ordered to practice my expertise on Wookiee slaves. I was supposed to make them stronger by installing cybernetic parts. The Empire turned them into killing machines! They made me make it easier for the Empire to control these unfortunate slaves!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's terrible.
	if (response == "s_4082")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: I had to free them. [The Doctor continues, staring off into the distance.] I had to free them. When the Wookiees came to free their friends--Wookiees that I had experimented on--some of them choose to go with me instead. And now, they wander the cave endlessly in a daze because of those damn Urnsor'is!
			string_id message = new string_id (c_stringFile, "s_4084");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: They were infected?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4086");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I had to free them. [The Doctor continues, staring off into the distance.] I had to free them. When the Wookiees came to free their friends--Wookiees that I had experimented on--some of them choose to go with me instead. And now, they wander the cave endlessly in a daze because of those damn Urnsor'is!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: They were infected?
	if (response == "s_4086")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. And still are. Erryia, one of the Wookiees who chose to come with me, had stolen a part of my machine. He ran off with it. He had hoped it would stop me from ever hurting another Wookiee. I didn't mean to... I didn't. [Kinesworthy bows his head low.]
			string_id message = new string_id (c_stringFile, "s_4088");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So, Erryia got infested and now roams the caverns.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4090");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes. And still are. Erryia, one of the Wookiees who chose to come with me, had stolen a part of my machine. He ran off with it. He had hoped it would stop me from ever hurting another Wookiee. I didn't mean to... I didn't. [Kinesworthy bows his head low.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So, Erryia got infested and now roams the caverns.
	if (response == "s_4090")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [The doctor looks up.] Yes. Maybe he still has the part. I don't know. Just.. go look. See what you can find. I understand that many of the missing and infected have wandered down there. You may have to destroy many before finding Erryia. Beware of 'The Lost'.
			string_id message = new string_id (c_stringFile, "s_4092");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do it.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm not going to do this.
			boolean hasResponse1 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4094");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4098");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [The doctor looks up.] Yes. Maybe he still has the part. I don't know. Just.. go look. See what you can find. I understand that many of the missing and infected have wandered down there. You may have to destroy many before finding Erryia. Beware of 'The Lost'.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do it.
	if (response == "s_4094")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_giveQuestTwo (player, npc);

			//-- NPC: Then, go. I don't wish to speak of it anymore.
			string_id message = new string_id (c_stringFile, "s_4096");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm not going to do this.
	if (response == "s_4098")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: It may be better that way.
			string_id message = new string_id (c_stringFile, "s_4100");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Kinesworthy stares, expression incredulous.] My equipment? Where did you find it?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh, here and there.
	if (response == "s_4104")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_giveSignal (player, npc);

			//-- NPC: Hmm. I suppose. Let's see what's in here. [Kinesworthy opens the box and looks inside.] I haven't seen this stuff in years. [The Doctor pulls out a cybernetic arm.] Well, this model has been obsolete for awhile now. You can take it if you want.
			string_id message = new string_id (c_stringFile, "s_4106");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Wow! Thanks! I'll see what I can do with it.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4108");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmm. I suppose. Let's see what's in here. [Kinesworthy opens the box and looks inside.] I haven't seen this stuff in years. [The Doctor pulls out a cybernetic arm.] Well, this model has been obsolete for awhile now. You can take it if you want.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Wow! Thanks! I'll see what I can do with it.
	if (response == "s_4108")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Let me look through my things for awhile. It doesn't seem to be all here. I may need your help again.
			string_id message = new string_id (c_stringFile, "s_4110");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [The Doctor looks up.] What are you doing here? I thought you were going to help me find my equipment so I can help with Myyydril people?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm sorry. I'm still trying to locate them.
	if (response == "s_4114")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Kinesworthy just waves his hand dismissively.]
			string_id message = new string_id (c_stringFile, "s_4116");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Doctor Kinesworthy looks up from his work table.] I've been watching you. You come in here, help the Myyydril and you're all of a sudden a hero. Who do you think you are? Who are you? Where did you come from?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Calm down. I'm just a helpful person.
	if (response == "s_4120")
	{
		ep3_myyydril_kinesworthy_action_giveSingal2 (player, npc);

		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: If you hurt these people... [Kinesworthy shakes a finger.] It'll be the last thing you do.
			string_id message = new string_id (c_stringFile, "s_4122");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why are you so bitter?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4124");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: If you hurt these people... [Kinesworthy shakes a finger.] It'll be the last thing you do.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why are you so bitter?
	if (response == "s_4124")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: You have no idea...! [Kinesworthy starts in a raised voice. He takes a deep breath.] You have no idea what we've been through down here in this cave. How many innocent young Myyydril that have died in this place they call home. I have failed to help so many.
			string_id message = new string_id (c_stringFile, "s_4126");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: By the looks of things, you're not a 'normal' doctor.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4128");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 33);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch33 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You have no idea...! [Kinesworthy starts in a raised voice. He takes a deep breath.] You have no idea what we've been through down here in this cave. How many innocent young Myyydril that have died in this place they call home. I have failed to help so many.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: By the looks of things, you're not a 'normal' doctor.
	if (response == "s_4128")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: What *is* normal around here in this pit of despair?
			string_id message = new string_id (c_stringFile, "s_4130");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What I mean is... what do you do down here?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4132");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What *is* normal around here in this pit of despair?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What I mean is... what do you do down here?
	if (response == "s_4132")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: There are so many things you don't know. [Kinesworthy sighs, rubbing his temple.] I am a doctor specializing in making and attaching cybernetics to living tissue. I give back the hope that was lost to those who have had horrible accidents and have had their limbs rendered useless.
			string_id message = new string_id (c_stringFile, "s_4134");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you... practice anymore?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4136");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 35);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch35 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There are so many things you don't know. [Kinesworthy sighs, rubbing his temple.] I am a doctor specializing in making and attaching cybernetics to living tissue. I give back the hope that was lost to those who have had horrible accidents and have had their limbs rendered useless.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you... practice anymore?
	if (response == "s_4136")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: No. I have since lost the will and the machinery to continue my work. And... [Kinesworthy traces the scar over his eye with a finger.] Ever since Treun Lorn, my partner...
			string_id message = new string_id (c_stringFile, "s_4138");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Tell me about him.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4140");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 36);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch36 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No. I have since lost the will and the machinery to continue my work. And... [Kinesworthy traces the scar over his eye with a finger.] Ever since Treun Lorn, my partner...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Tell me about him.
	if (response == "s_4140")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Kinesworthy glares.] Why do you want to know so much? Do you belong to the Empire? Are you a spy?
			string_id message = new string_id (c_stringFile, "s_4142");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No, no! I'm just interested in your story.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4144");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 37);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Kinesworthy glares.] Why do you want to know so much? Do you belong to the Empire? Are you a spy?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, no! I'm just interested in your story.
	if (response == "s_4144")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Fine, fine. Treun Lorn and I were partners in the field of cybernetics. We had opened a practice together before he... [Kinesworthy struggles with his words.] ...went insane.
			string_id message = new string_id (c_stringFile, "s_4146");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Your partner went insane? How?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4148");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 38);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Fine, fine. Treun Lorn and I were partners in the field of cybernetics. We had opened a practice together before he... [Kinesworthy struggles with his words.] ...went insane.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Your partner went insane? How?
	if (response == "s_4148")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know, honestly. He was always a little... out there. Always working on some secret project. I knew him when he didn't know a lick of science. I taught him all about my work. He was so impressionable. Treun Lorn was a quick learner, picked up everything so easily. Then... he got involved with questionable people.
			string_id message = new string_id (c_stringFile, "s_4150");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Like who?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4152");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't know, honestly. He was always a little... out there. Always working on some secret project. I knew him when he didn't know a lick of science. I taught him all about my work. He was so impressionable. Treun Lorn was a quick learner, picked up everything so easily. Then... he got involved with questionable people.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Like who?
	if (response == "s_4152")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Uh... [Kinesworthy shakes his head.] No. You already know too much. After his 'special project', details of which I still don't know, he fled to the Myyydril Caverns. I followed, but lost him quickly thereafter. Supposedly, he's in the Deep Depths of the cavern. I haven't been able to get down there. [Kinesworthy sighs.] All of that and the Poltur Virus. It just adds up.
			string_id message = new string_id (c_stringFile, "s_4154");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Poltur Virus? What's that?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4156");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 40);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch40 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Uh... [Kinesworthy shakes his head.] No. You already know too much. After his 'special project', details of which I still don't know, he fled to the Myyydril Caverns. I followed, but lost him quickly thereafter. Supposedly, he's in the Deep Depths of the cavern. I haven't been able to get down there. [Kinesworthy sighs.] All of that and the Poltur Virus. It just adds up.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Poltur Virus? What's that?
	if (response == "s_4156")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: In all brevity, if the Virus isn't cured, the victim can lose their limbs. And I can't help them. I've since lost my equipment, all the things I need to replace dead tissue with cybernetics.
			string_id message = new string_id (c_stringFile, "s_4158");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Is the equipment around here somewhere? Can I help you?
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4160");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 41);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch41 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: In all brevity, if the Virus isn't cured, the victim can lose their limbs. And I can't help them. I've since lost my equipment, all the things I need to replace dead tissue with cybernetics.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is the equipment around here somewhere? Can I help you?
	if (response == "s_4160")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hmm. [Kinesworthy rubs his chin.] Now that you've asked... While chasing down Treun Lorn, I naturally brought my equipment with me. I had been working for the Empire and was stationed at an Imperial camp in the forest. The camp was attacked by Wookiee slaves and I wasn't able to escape with my equipment. I suppose my things would still be there.
			string_id message = new string_id (c_stringFile, "s_4162");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll get it for you.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4164");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hmm. [Kinesworthy rubs his chin.] Now that you've asked... While chasing down Treun Lorn, I naturally brought my equipment with me. I had been working for the Empire and was stationed at an Imperial camp in the forest. The camp was attacked by Wookiee slaves and I wasn't able to escape with my equipment. I suppose my things would still be there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll get it for you.
	if (response == "s_4164")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			ep3_myyydril_kinesworthy_action_giveQuestOne (player, npc);

			//-- NPC: I suppose. If only to help the Myyydril people should the Poltur Virus inflict them beyond what natural medicine can cure. Find the Imperial camp, then, and see what you can find. I doubt it's in any working condition. The camp or otherwise.
			string_id message = new string_id (c_stringFile, "s_4166");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll return soon.
			boolean hasResponse0 = false;
			if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4168");

				utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_myyydril_kinesworthy_handleBranch43 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I suppose. If only to help the Myyydril people should the Poltur Virus inflict them beyond what natural medicine can cure. Find the Imperial camp, then, and see what you can find. I doubt it's in any working condition. The camp or otherwise.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll return soon.
	if (response == "s_4168")
	{
		//-- [NOTE] 
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			//-- NPC: [The Doctor nods.]
			string_id message = new string_id (c_stringFile, "s_4170");
			utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_myyydril_kinesworthy");

	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "kines" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "kines" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_myyydril_kinesworthy");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedQuestThree (player, npc))
	{
		//-- NPC: [The doctor stares.] I have nothing else for you. I must continue my work. [The doctor turns, still staring, and mutters, '...for you alone, my master.']
		string_id message = new string_id (c_stringFile, "s_4016");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedTaskThree (player, npc))
	{
		//-- NPC: By your expression, I was correct. What was Treun Lorn working on down there?
		string_id message = new string_id (c_stringFile, "s_4018");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: [You explain to Doctor Kinesworthy the events.]
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4020");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 2);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_isActiveTaskThree (player, npc))
	{
		//-- NPC: Have you found any information regarding Treun Lorn and his projects?
		string_id message = new string_id (c_stringFile, "s_4032");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No, not yet. It's hard to get down there.
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4034");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 6);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedQuestTwo (player, npc))
	{
		//-- NPC: Thanks to you, my machine is completely working. One of the features of this hulk of metal is to detect the frequency of high-powered machinery and the presence of dense materials most commonly used in cybernetics. And as you can see, by the blip here... [The doctor points to the machine's radar.] ...there seems to be another machine operating in this very cave.
		string_id message = new string_id (c_stringFile, "s_4038");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Treun Lorn?
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4040");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 8);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedTaskTwo (player, npc))
	{
		//-- NPC: You've returned. Let me see the part. [The doctor extends his hand.] I'm going to place this into the machine and hope that it works.
		string_id message = new string_id (c_stringFile, "s_4048");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Okay. I also found this.
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4050");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 11);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_isActiveTaskTwo (player, npc))
	{
		//-- NPC: You still haven't done what I told you to. Why are you here? I don't want to talk about it until you're successful in your job!
		string_id message = new string_id (c_stringFile, "s_4062");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: All right. I'll go look again.
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4064");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 15);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedQuestOne (player, npc))
	{
		//-- NPC: Oh, it's you. [Kinesworthy frowns.] What do you want?
		string_id message = new string_id (c_stringFile, "s_4068");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Hey, don't be like that. I helped you, remember?
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4070");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 17);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedTaskOne (player, npc))
	{
		ep3_myyydril_kinesworthy_action_giveSignal (player, npc);

		//-- NPC: [Kinesworthy stares, expression incredulous.] My equipment? Where did you find it?
		string_id message = new string_id (c_stringFile, "s_4102");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Oh, here and there.
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4104");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 26);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_isActiveTaskOne (player, npc))
	{
		//-- NPC: [The Doctor looks up.] What are you doing here? I thought you were going to help me find my equipment so I can help with Myyydril people?
		string_id message = new string_id (c_stringFile, "s_4112");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm sorry. I'm still trying to locate them.
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4114");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 29);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition_hasCompletedOther (player, npc))
	{
		//-- NPC: [Doctor Kinesworthy looks up from his work table.] I've been watching you. You come in here, help the Myyydril and you're all of a sudden a hero. Who do you think you are? Who are you? Where did you come from?
		string_id message = new string_id (c_stringFile, "s_4118");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Calm down. I'm just a helpful person.
		boolean hasResponse0 = false;
		if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4120");

			utils.setScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId", 31);

			npcStartConversation (player, npc, "ep3_myyydril_kinesworthy", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_myyydril_kinesworthy_condition__defaultCondition (player, npc))
	{
		//-- NPC: Who are you and why are you here? Can't you see I'm busy? I don't talk to strangers.
		string_id message = new string_id (c_stringFile, "s_4172");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_myyydril_kinesworthy")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

	if (branchId == 2 && ep3_myyydril_kinesworthy_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && ep3_myyydril_kinesworthy_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_myyydril_kinesworthy_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && ep3_myyydril_kinesworthy_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_myyydril_kinesworthy_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_myyydril_kinesworthy_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && ep3_myyydril_kinesworthy_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && ep3_myyydril_kinesworthy_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && ep3_myyydril_kinesworthy_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && ep3_myyydril_kinesworthy_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && ep3_myyydril_kinesworthy_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && ep3_myyydril_kinesworthy_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && ep3_myyydril_kinesworthy_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_myyydril_kinesworthy_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && ep3_myyydril_kinesworthy_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && ep3_myyydril_kinesworthy_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && ep3_myyydril_kinesworthy_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && ep3_myyydril_kinesworthy_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && ep3_myyydril_kinesworthy_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && ep3_myyydril_kinesworthy_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && ep3_myyydril_kinesworthy_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && ep3_myyydril_kinesworthy_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 33 && ep3_myyydril_kinesworthy_handleBranch33 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && ep3_myyydril_kinesworthy_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 35 && ep3_myyydril_kinesworthy_handleBranch35 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 36 && ep3_myyydril_kinesworthy_handleBranch36 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && ep3_myyydril_kinesworthy_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && ep3_myyydril_kinesworthy_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && ep3_myyydril_kinesworthy_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 40 && ep3_myyydril_kinesworthy_handleBranch40 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 41 && ep3_myyydril_kinesworthy_handleBranch41 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && ep3_myyydril_kinesworthy_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 43 && ep3_myyydril_kinesworthy_handleBranch43 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_myyydril_kinesworthy.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

