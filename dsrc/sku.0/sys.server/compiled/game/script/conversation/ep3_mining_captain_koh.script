// ======================================================================
//
// ep3_mining_captain_koh.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.space_flags;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_mining_captain_koh";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_mining_captain_koh_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasQuestFour (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "ep3_mining_quest_4");
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest5Active (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_5" );
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest5 (obj_id player, obj_id npc)
{
	//debugSpeakMsg(player, "I have completed quest 5:  " + space_quest.hasWonQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_5"));
	
	
	return (space_quest.hasWonQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_5") &&
	!space_quest.hasReceivedReward( player, "space_mining_destroy", "kashyyyk_mining_quest_5"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest5 (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedQuest(player, "ep3_mining_quest_4") &&
	!space_quest.hasQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_5" ) &&
	!space_quest.hasWonQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_5"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest6 (obj_id player, obj_id npc)
{
	return (space_quest.hasReceivedReward( player, "space_mining_destroy", "kashyyyk_mining_quest_5") &&
	!space_quest.hasQuest( player, "space_mining_destroy", "lok_mining_quest_6" ) &&
	!space_quest.hasWonQuest( player, "space_mining_destroy", "lok_mining_quest_6"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest6Active (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player, "space_mining_destroy", "lok_mining_quest_6" );
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest6 (obj_id player, obj_id npc)
{
	return (space_quest.hasWonQuest(player, "space_mining_destroy", "lok_mining_quest_6") &&
	!space_quest.hasReceivedReward( player, "space_mining_destroy", "lok_mining_quest_6"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest7 (obj_id player, obj_id npc)
{
	return (space_quest.hasReceivedReward( player, "space_mining_destroy", "lok_mining_quest_6") &&
	!space_quest.hasQuest( player, "salvage", "corellia_mining_quest_7" ) &&
	!space_quest.hasWonQuest( player, "salvage", "corellia_mining_quest_7"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest7Active (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player, "salvage", "corellia_mining_quest_7" );
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest7 (obj_id player, obj_id npc)
{
	return (space_quest.hasWonQuest(player, "salvage", "corellia_mining_quest_7") &&
	!space_quest.hasReceivedReward( player, "salvage", "corellia_mining_quest_7"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest8 (obj_id player, obj_id npc)
{
	return (space_quest.hasReceivedReward( player, "salvage", "corellia_mining_quest_7") &&
	!space_quest.hasQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_8" ) &&
	!space_quest.hasWonQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_8"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest8Active (obj_id player, obj_id npc)
{
	return (space_quest.hasQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_8" ) ||
	space_quest.hasQuest( player, "space_mining_destroy", "endor_mining_quest_9" ) ||
	space_quest.hasQuest( player, "space_mining_destroy", "dathomir_mining_quest_10" ));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest8 (obj_id player, obj_id npc)
{
	return (space_quest.hasWonQuest(player, "space_mining_destroy", "dathomir_mining_quest_10") &&
	!space_quest.hasReceivedReward( player, "space_mining_destroy", "dathomir_mining_quest_10"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest9 (obj_id player, obj_id npc)
{
	return (space_quest.hasReceivedReward( player, "space_mining_destroy", "dathomir_mining_quest_10") &&
	!space_quest.hasQuest( player, "convoy", "kashyyyk_mining_quest_11" ) &&
	!space_quest.hasWonQuest( player, "convoy", "kashyyyk_mining_quest_11"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest9Active (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player, "convoy", "kashyyyk_mining_quest_11" );
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest9 (obj_id player, obj_id npc)
{
	return (space_quest.hasWonQuest(player, "convoy", "kashyyyk_mining_quest_11") &&
	!space_quest.hasReceivedReward( player, "convoy", "kashyyyk_mining_quest_11"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest10 (obj_id player, obj_id npc)
{
	return (space_quest.hasReceivedReward( player, "convoy", "kashyyyk_mining_quest_11") &&
	!space_quest.hasQuest( player, "assassinate", "kashyyyk_mining_quest_12" ) &&
	!space_quest.hasWonQuest( player, "assassinate", "kashyyyk_mining_quest_12"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest10Active (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player, "assassinate", "kashyyyk_mining_quest_12" );
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest10 (obj_id player, obj_id npc)
{
	return (space_quest.hasWonQuest(player, "assassinate", "kashyyyk_mining_quest_12") &&
	!space_quest.hasReceivedReward( player, "assassinate", "kashyyyk_mining_quest_12"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isReadyForQuest11 (obj_id player, obj_id npc)
{
	return (space_quest.hasReceivedReward( player, "assassinate", "kashyyyk_mining_quest_12") &&
	!space_quest.hasQuest( player, "space_mining_destroy", "kessel_mining_quest_13" ) &&
	!space_quest.hasWonQuest( player, "space_mining_destroy", "kessel_mining_quest_13"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_isQuest11Active (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player, "space_mining_destroy", "kessel_mining_quest_13" );
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasCompletedQuest11 (obj_id player, obj_id npc)
{
	return (space_quest.hasWonQuest(player, "space_mining_destroy", "kessel_mining_quest_13") &&
	!space_quest.hasReceivedReward( player, "space_mining_destroy", "kessel_mining_quest_13"));
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest5 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_5") ||
	    space_quest.hasFailedQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_5" ))
	{
		if (!space_quest.hasWonQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_5"))
			return true; 
	} 		
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest6 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "space_mining_destroy", "lok_mining_quest_6") ||
	    space_quest.hasFailedQuest(player, "space_mining_destroy", "lok_mining_quest_6" ))
	{
		if (!space_quest.hasWonQuest(player, "space_mining_destroy", "lok_mining_quest_6"))
			return true; 
	} 		
	
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest7 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "salvage", "corellia_mining_quest_7") ||
	    space_quest.hasFailedQuest(player, "salvage", "corellia_mining_quest_7" ))
	{
		if (!space_quest.hasWonQuest(player, "salvage", "corellia_mining_quest_7"))
			return true; 
	} 		
	
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest8 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_8") ||
	    space_quest.hasFailedQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_8" ))
	{
		if (!space_quest.hasWonQuest(player, "space_mining_destroy", "kashyyyk_mining_quest_8"))
			return true; 
	} 	
	if (space_quest.hasAbortedQuest(player, "space_mining_destroy", "endor_mining_quest_9") ||
	    space_quest.hasFailedQuest(player, "space_mining_destroy", "endor_mining_quest_9" ))
	{
		if (!space_quest.hasWonQuest(player, "space_mining_destroy", "endor_mining_quest_9"))
			return true; 
	} 	
	if (space_quest.hasAbortedQuest(player, "space_mining_destroy", "dathomir_mining_quest_10") ||
	    space_quest.hasFailedQuest(player, "space_mining_destroy", "dathomir_mining_quest_10" ))
	{
		if (!space_quest.hasWonQuest(player, "space_mining_destroy", "dathomir_mining_quest_10"))
			return true; 
	} 			
			
	
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest9 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "convoy", "kashyyyk_mining_quest_11") ||
	    space_quest.hasFailedQuest(player, "convoy", "kashyyyk_mining_quest_11" ))
	{
		if (!space_quest.hasWonQuest(player, "convoy", "kashyyyk_mining_quest_11"))
			return true; 
	} 			
			
	
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest10 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "assassinate", "kashyyyk_mining_quest_12") ||
	    space_quest.hasFailedQuest(player, "assassinate", "kashyyyk_mining_quest_12" ))
	{
		if (!space_quest.hasWonQuest(player, "assassinate", "kashyyyk_mining_quest_12"))
			return true; 
	} 			
			
	
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_mining_captain_koh_condition_hasFailedQuest11 (obj_id player, obj_id npc)
{
	if (space_quest.hasAbortedQuest(player, "space_mining_destroy", "kessel_mining_quest_13") ||
	    space_quest.hasFailedQuest(player, "space_mining_destroy", "kessel_mining_quest_13" ))
	{
		if (!space_quest.hasWonQuest(player, "space_mining_destroy", "kessel_mining_quest_13"))
			return true; 
	} 			
			
	
	return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_mining_captain_koh_action_sendSignalToPlayer (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "talkedToKoh");
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest5 (obj_id player, obj_id npc)
{
	// Animation.

	// Mission grant.
	space_quest.grantQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_5" );
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward5 (obj_id player, obj_id npc)
{
	if (space_quest.hasReceivedReward( player, "space_mining_destroy", "kashyyyk_mining_quest_5" ))
		return;
		

	
	// Give credits.

	space_quest.giveReward( player, "space_mining_destroy", "kashyyyk_mining_quest_5", 5000);
	createObjectInInventoryAllowOverload( "object/tangible/ship/components/cargo_hold/crg_starfighter_large.iff", player );
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest6 (obj_id player, obj_id npc)
{

	
	// Mission grant.
	space_quest.grantQuest( player, "space_mining_destroy", "lok_mining_quest_6" );

}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward6 (obj_id player, obj_id npc)
{
	if (space_quest.hasReceivedReward( player, "space_mining_destroy", "lok_mining_quest_6" ))
		return;
		

	// Give credits.

	space_quest.giveReward( player, "space_mining_destroy", "lok_mining_quest_6", 7500, "object/tangible/ship/components/weapon/wpn_tractor_pulse_gun.iff");
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest7 (obj_id player, obj_id npc)
{
	// Mission grant.
	space_quest.grantQuest( player, "salvage", "corellia_mining_quest_7" );

}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward7 (obj_id player, obj_id npc)
{
if (space_quest.hasReceivedReward( player, "salvage", "corellia_mining_quest_7" ))
		return;
		

	
	// Give credits.

	space_quest.giveReward( player, "salvage", "corellia_mining_quest_7", 7500);
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest8 (obj_id player, obj_id npc)
{

	
	// Mission grant.
	space_quest.grantQuest( player, "space_mining_destroy", "kashyyyk_mining_quest_8" );

}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward8 (obj_id player, obj_id npc)
{
	if (space_quest.hasReceivedReward( player, "space_mining_destroy", "dathomir_mining_quest_10" ))
		return;
		

	
	// Give credits.

	space_quest.giveReward( player, "space_mining_destroy", "dathomir_mining_quest_10", 10000, "object/tangible/ship/components/weapon/wpn_mining_laser_mk2.iff");
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest9 (obj_id player, obj_id npc)
{

	
	// Mission grant.
	space_quest.grantQuest( player, "convoy", "kashyyyk_mining_quest_11" );

}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward9 (obj_id player, obj_id npc)
{
	if (space_quest.hasReceivedReward( player, "convoy", "kashyyyk_mining_quest_11" ))
		return;
		

	// Give credits.

	space_quest.giveReward( player, "convoy", "kashyyyk_mining_quest_11", 10000);
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest10 (obj_id player, obj_id npc)
{
	// Mission grant.
	space_quest.grantQuest( player, "assassinate", "kashyyyk_mining_quest_12" );
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward10 (obj_id player, obj_id npc)
{
	if (space_quest.hasReceivedReward( player, "assassinate", "kashyyyk_mining_quest_12" ))
		return;
	// Give credits.

	space_quest.giveReward( player, "assassinate", "kashyyyk_mining_quest_12", 12500);
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantQuest11 (obj_id player, obj_id npc)
{

	// Mission grant.
	space_quest.grantQuest( player, "space_mining_destroy", "kessel_mining_quest_13" );
}

// ----------------------------------------------------------------------

void ep3_mining_captain_koh_action_grantReward11 (obj_id player, obj_id npc)
{
	if (space_quest.hasReceivedReward( player, "space_mining_destroy", "kessel_mining_quest_13" ))
		return;
	
	// Give credits.

	space_quest.giveReward( player, "space_mining_destroy", "kessel_mining_quest_13", 15000, "object/tangible/space/special_loot/y8_deed.iff");
	createObjectInInventoryAllowOverload( "object/tangible/ship/components/cargo_hold/crg_mining_small.iff", player );
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_mining_captain_koh_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No diamonds?  Your ineptitude amazes me sometimes!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do better next time.
	if (response == "s_248")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest11 (player, npc);

			//-- NPC: That has yet to be demonstrated.  Get back up there and find us some diamonds!
			string_id message = new string_id (c_stringFile, "s_249");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Do you have the diamonds?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course.
	if (response == "s_204")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm suitably impressed, pilot.  Your mining talents cannot be underestimated or overlooked.  Your work with me is done, but I have a parting gift for you, on behalf of the Mining Division of Corellian Engineering.
			string_id message = new string_id (c_stringFile, "s_205");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A gift?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_206");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm suitably impressed, pilot.  Your mining talents cannot be underestimated or overlooked.  Your work with me is done, but I have a parting gift for you, on behalf of the Mining Division of Corellian Engineering.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A gift?
	if (response == "s_206")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward11 (player, npc);

			//-- NPC: This is a deed to one of the company's new Y-8 mining vessels.  You've earned this, pilot.  Take it, along with my gratitude.  May it serve you well.
			string_id message = new string_id (c_stringFile, "s_207");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll use it well.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_208");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is a deed to one of the company's new Y-8 mining vessels.  You've earned this, pilot.  Take it, along with my gratitude.  May it serve you well.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll use it well.
	if (response == "s_208")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			//-- NPC: I'm sure we will meet again pilot.  I look forward to hearing more of your mining adventures.  Good luck!
			string_id message = new string_id (c_stringFile, "s_209");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is it pilot.  Your big break.  The mission that will put you on the map.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Tell me more.
	if (response == "s_194")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: A rare cluster of asteroids has been discovered in the highly dangerous Kessel system.  Do you know what makes these asteroids special?
			string_id message = new string_id (c_stringFile, "s_195");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Not as such.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_196");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A rare cluster of asteroids has been discovered in the highly dangerous Kessel system.  Do you know what makes these asteroids special?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not as such.
	if (response == "s_196")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Diamonds, pilot.  They have diamond cores.  Inside each of these miserable space rocks beats a pristine gemstone heart.  
			string_id message = new string_id (c_stringFile, "s_197");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ooh.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_198");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Diamonds, pilot.  They have diamond cores.  Inside each of these miserable space rocks beats a pristine gemstone heart.  

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ooh.
	if (response == "s_198")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ever been to Kessel?  Well, if you haven't, you're going now.  Head out and sample those diamond cores before anyone else can get a hold of them.  You will almost certainly be attacked by pirates while mining those rocks.
			string_id message = new string_id (c_stringFile, "s_199");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes sir.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Too dangerous.  Find someone else to mine your diamonds.
			boolean hasResponse1 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_200");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_201");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ever been to Kessel?  Well, if you haven't, you're going now.  Head out and sample those diamond cores before anyone else can get a hold of them.  You will almost certainly be attacked by pirates while mining those rocks.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.
	if (response == "s_200")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute1");

			ep3_mining_captain_koh_action_grantQuest11 (player, npc);

			//-- NPC: Report back when you have the diamonds.
			string_id message = new string_id (c_stringFile, "s_202");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Too dangerous.  Find someone else to mine your diamonds.
	if (response == "s_201")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Cowardice doesn't become you, pilot.  Off with you.
			string_id message = new string_id (c_stringFile, "s_203");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did you lose your nerve, pilot?  Or did you just fail outright?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No comment.
	if (response == "s_246")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest10 (player, npc);

			//-- NPC: Find that ship and blow it away.  NOW!
			string_id message = new string_id (c_stringFile, "s_247");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Tell me, pilot.  Did Gotal bandits keep the Gilded Wookiee from leaving the zone?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It was terrible.  Gotals everywhere...
	if (response == "s_170")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Tch tch.  A tragedy.  Really.  Tuggin' on my heartstrings there...
			string_id message = new string_id (c_stringFile, "s_171");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: My pay...for...delivering this news?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_172");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Tch tch.  A tragedy.  Really.  Tuggin' on my heartstrings there...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My pay...for...delivering this news?
	if (response == "s_172")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward10 (player, npc);

			//-- NPC: Right, right.  News.  Pay.  Good one.  Here's a little bonus for the 'news'.
			string_id message = new string_id (c_stringFile, "s_173");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The nerve!  I can't believe this!  Can you believe this?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Err...what?
	if (response == "s_160")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Remember clearing a path for that convoy?  The Gotal bandits you took out?  Yeah, thought so.  Well, another convoy---not ours, mind you---is using our same route to that hyperspace beacon!  Trying to slip in behind us, let us do the hard work...
			string_id message = new string_id (c_stringFile, "s_161");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see where this is headed...
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_162");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Remember clearing a path for that convoy?  The Gotal bandits you took out?  Yeah, thought so.  Well, another convoy---not ours, mind you---is using our same route to that hyperspace beacon!  Trying to slip in behind us, let us do the hard work...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see where this is headed...
	if (response == "s_162")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Teach them a lesson!  Their flagship, 'The Gilded Wookiee', will be starting on that route any minute.  They probably have a heavy fighter escort, despite the path you cleared.
			string_id message = new string_id (c_stringFile, "s_163");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So I should blow them up?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_164");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Teach them a lesson!  Their flagship, 'The Gilded Wookiee', will be starting on that route any minute.  They probably have a heavy fighter escort, despite the path you cleared.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So I should blow them up?
	if (response == "s_164")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you deaf?  I said teach them a lesson!  Yes, blow them up, scatter their ships across space, etcetera, ad infinitum!  And the escorts too...don't forget about the escorts.  As far as the rest of the galaxy is concerned, Gotal bandits got them before they could get out of the system.
			string_id message = new string_id (c_stringFile, "s_165");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No witnesses.  Got it.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I can't kill in such a wanton fashion!
			boolean hasResponse1 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_166");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_168");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you deaf?  I said teach them a lesson!  Yes, blow them up, scatter their ships across space, etcetera, ad infinitum!  And the escorts too...don't forget about the escorts.  As far as the rest of the galaxy is concerned, Gotal bandits got them before they could get out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No witnesses.  Got it.
	if (response == "s_166")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest10 (player, npc);

			//-- NPC: You were never here!  Get moving!
			string_id message = new string_id (c_stringFile, "s_167");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can't kill in such a wanton fashion!
	if (response == "s_168")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then we don't need to be speaking pilot!  Good day!
			string_id message = new string_id (c_stringFile, "s_169");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You dolt!  You couldn't even escort a few of our mining vessels out of the system.  What good are you to me?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Maybe I could catch up and try to help them?
	if (response == "s_244")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest9 (player, npc);

			//-- NPC: Get back up there and try to find them!  They may still need you!
			string_id message = new string_id (c_stringFile, "s_245");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So, pilot?  Did they make it out safely?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I wouldn't be here otherwise.
	if (response == "s_146")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward9 (player, npc);

			//-- NPC: Excellent work.  Stupendous.  Marvelous!  You've done our company a huge service by protecting that cargo!  You've earned this reward.  Keep it up and you may find yourself piloting a Y-8 one of these days...
			string_id message = new string_id (c_stringFile, "s_147");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have an urgent task for you, pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let's hear it.
	if (response == "s_142")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: There is a convoy of Y-8 mining vessels coming through the Kashyyyk system later today.  They're headed for a hyperspace beacon, and their path leads them through dangerous waters.  As always, we expect the worst and hope for the best.
			string_id message = new string_id (c_stringFile, "s_143");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So I'll be their escort?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_144");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There is a convoy of Y-8 mining vessels coming through the Kashyyyk system later today.  They're headed for a hyperspace beacon, and their path leads them through dangerous waters.  As always, we expect the worst and hope for the best.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So I'll be their escort?
	if (response == "s_144")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest9 (player, npc);

			//-- NPC: Indeed, pilot.  Meet them at the designated rendezvous point in the Kashyyyk system, and see to it that every ship in that convoy makes it to the hyperspace point.
			string_id message = new string_id (c_stringFile, "s_145");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let me guess...something went wrong?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Err, yeah, you could say that.  It won't happen again!
	if (response == "s_242")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest8 (player, npc);

			//-- NPC: Get back to work then, and don't show your face here until you've succeeded!
			string_id message = new string_id (c_stringFile, "s_243");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch36 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have you completed your sampling mission?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have.
	if (response == "s_119")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward8 (player, npc);

			//-- NPC: Excellent.  As usual, you can keep what you mined, we just need the data.  It is about time we gave you a new mining laser too.  Yours is looking a little old.
			string_id message = new string_id (c_stringFile, "s_120");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Is it more powerful too?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_121");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 37);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Excellent.  As usual, you can keep what you mined, we just need the data.  It is about time we gave you a new mining laser too.  Yours is looking a little old.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is it more powerful too?
	if (response == "s_121")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Indeed it is. This is the Mark II model.  You'll find mining asteroids is a bit easier using this.  We don't get many of these in---so they are only reserved for our best pilots.
			string_id message = new string_id (c_stringFile, "s_122");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Good to know I'm appreciated.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_123");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 38);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Indeed it is. This is the Mark II model.  You'll find mining asteroids is a bit easier using this.  We don't get many of these in---so they are only reserved for our best pilots.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Good to know I'm appreciated.
	if (response == "s_123")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: You've done us a great service thus far.  Come back when you are ready for another task.
			string_id message = new string_id (c_stringFile, "s_124");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch41 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome back, pilot.  It's time to earn your keep.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What now?
	if (response == "s_112")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: We're in need of a broad resource sample of several systems---Kashyyyk, which you should be familiar with already, Endor, and Dathomir.  You will fly to these three systems in that order, and procure a 125 unit sample from each.  Are you up to that task?
			string_id message = new string_id (c_stringFile, "s_113");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I think so.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not today.
			boolean hasResponse1 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_114");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_115");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We're in need of a broad resource sample of several systems---Kashyyyk, which you should be familiar with already, Endor, and Dathomir.  You will fly to these three systems in that order, and procure a 125 unit sample from each.  Are you up to that task?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I think so.
	if (response == "s_114")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest8 (player, npc);

			//-- NPC: That's the right attitude.  You have your orders, so get moving.
			string_id message = new string_id (c_stringFile, "s_116");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not today.
	if (response == "s_115")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Bah!  I'll find another pilot then!
			string_id message = new string_id (c_stringFile, "s_118");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch45 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You don't have the cargo...what went wrong up there!?!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I guess I just choked.
	if (response == "s_240")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest7 (player, npc);

			//-- NPC: Don't do it again.  You still have a short window of opportunity if you hurry!
			string_id message = new string_id (c_stringFile, "s_241");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch47 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did you get the cargo from that ship?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I sure did.
	if (response == "s_86")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward7 (player, npc);

			//-- NPC: Keep it, pilot.  The satisfaction of knowing that iron isn't in their hands is enough for me.  Here's a few credits for your troubles too.
			string_id message = new string_id (c_stringFile, "s_87");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, Captain.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_88");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 48);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch48 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Keep it, pilot.  The satisfaction of knowing that iron isn't in their hands is enough for me.  Here's a few credits for your troubles too.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, Captain.
	if (response == "s_88")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Come back when you're ready for more work.
			string_id message = new string_id (c_stringFile, "s_89");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Today is our lucky day pilot!  Do you know why?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No sir.
	if (response == "s_92")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: A rival freighter is stranded in our home system of Corellia.  It'll be a while before a rescue party can reach him, and in the meantime his cargo of resources is at our mercy.
			string_id message = new string_id (c_stringFile, "s_94");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I guess I'm headed to Corellia...
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_96");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 52);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A rival freighter is stranded in our home system of Corellia.  It'll be a while before a rescue party can reach him, and in the meantime his cargo of resources is at our mercy.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I guess I'm headed to Corellia...
	if (response == "s_96")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: You guessed correctly.  You know that tractor beam I gave you earlier?  You can use the tractor beam to transfer his cargo to your ship.  Find the stranded mining ship and siphon his cargo off into your hold.  Report back to me when you are finished.  Got it?
			string_id message = new string_id (c_stringFile, "s_98");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds easy.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't think I can wing it.
			boolean hasResponse1 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_105");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You guessed correctly.  You know that tractor beam I gave you earlier?  You can use the tractor beam to transfer his cargo to your ship.  Find the stranded mining ship and siphon his cargo off into your hold.  Report back to me when you are finished.  Got it?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds easy.
	if (response == "s_101")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest7 (player, npc);

			//-- NPC: Glad to hear it, pilot.  Off with you now.
			string_id message = new string_id (c_stringFile, "s_103");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I can wing it.
	if (response == "s_105")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Your loss!
			string_id message = new string_id (c_stringFile, "s_107");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch56 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can't even trust you as far as the Lok System?  You disappoint me severely.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Aw, please, just one more try!
	if (response == "s_238")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest6 (player, npc);

			//-- NPC: Get back up there and try again, on the double pilot!
			string_id message = new string_id (c_stringFile, "s_239");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch58 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, pilot?  Have you been to Lok yet?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: They'll have trouble finding an asteroid left to mine in the entire system.
	if (response == "s_129")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward6 (player, npc);

			//-- NPC: That's what I wanted to hear!  You aren't half bad after all.  Here's a little cash bonus for doing my dirty work.  Oh, and I also have a tool that you might find useful on future tasks.
			string_id message = new string_id (c_stringFile, "s_131");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A tool?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_133");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 59);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch59 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That's what I wanted to hear!  You aren't half bad after all.  Here's a little cash bonus for doing my dirty work.  Oh, and I also have a tool that you might find useful on future tasks.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A tool?
	if (response == "s_133")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: The tool I've given you is a starfighter mountable tractor beam.  When you blast an asteroid apart, you'll find the small chunks can be easily maneuvered with this beam weapon.  It will mount to any open weapon slot on your starfighter.
			string_id message = new string_id (c_stringFile, "s_135");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.  I'll use it well.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_137");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 60);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch60 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The tool I've given you is a starfighter mountable tractor beam.  When you blast an asteroid apart, you'll find the small chunks can be easily maneuvered with this beam weapon.  It will mount to any open weapon slot on your starfighter.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thanks.  I'll use it well.
	if (response == "s_137")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Indeed you will.  Come back when you are ready for more work!
			string_id message = new string_id (c_stringFile, "s_148");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch63 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm glad you have returned, pilot.  You won't believe what I found in your samples!  It's an outrage!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: An outrage?
	if (response == "s_154")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: You heard me!  One of your samples contained a piece of a sample drill bit used by a mining fleet based out of the Lok system!  Kashyyyk is OUR system!
			string_id message = new string_id (c_stringFile, "s_156");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And?
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_175");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 64);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You heard me!  One of your samples contained a piece of a sample drill bit used by a mining fleet based out of the Lok system!  Kashyyyk is OUR system!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And?
	if (response == "s_175")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: You seem unconcerned!  We can't lose ground to them.  Listen, Lok is full of precious obsidian asteroids.  Wouldn't it be a shame if someone...namely you...took a trip to Lok to do a little damage to their mining fields?  If you see any of their ships along the way, don't hesitate to deal with them as you see fit.
			string_id message = new string_id (c_stringFile, "s_177");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Revenge mission.  Got it.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_179");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 65);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch65 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You seem unconcerned!  We can't lose ground to them.  Listen, Lok is full of precious obsidian asteroids.  Wouldn't it be a shame if someone...namely you...took a trip to Lok to do a little damage to their mining fields?  If you see any of their ships along the way, don't hesitate to deal with them as you see fit.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Revenge mission.  Got it.
	if (response == "s_179")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest6 (player, npc);

			//-- NPC: You were never here pilot, and you never talked to me about this!  Now get going, and don't come back until you're ready to tell me all about the destruction you've unleashed on their mining fields!
			string_id message = new string_id (c_stringFile, "s_181");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch67 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: WHAT?  I don't want to hear your excuses, pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can I try again?
	if (response == "s_236")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest5 (player, npc);

			//-- NPC: I don't know why I'm letting you, but I will.  Get back up there, and DON'T fail me again!
			string_id message = new string_id (c_stringFile, "s_237");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch69 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Do you have those samples, pilot?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes sir.  Here they are.
	if (response == "s_188")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantReward5 (player, npc);

			//-- NPC: Excellent!  I'll need to analyze these to see if they confirm a suspicion of mine.  Come back in a bit to check in with me.  In the meantime, here is your pay for the mission.  Oh, and it's about time we gave you a larger cargo hold for that fighter.
			string_id message = new string_id (c_stringFile, "s_190");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll be back soon then.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_211");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 70);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch70 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Excellent!  I'll need to analyze these to see if they confirm a suspicion of mine.  Come back in a bit to check in with me.  In the meantime, here is your pay for the mission.  Oh, and it's about time we gave you a larger cargo hold for that fighter.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll be back soon then.
	if (response == "s_211")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good.  Hopefully I'll have some interesting work for you.
			string_id message = new string_id (c_stringFile, "s_213");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch73 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ready to do some work for me?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I believe I am.
	if (response == "s_219")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest5 (player, npc);

			//-- NPC: That's more like it.  Head to Kashyyyk space and get me some samples of the organometallic asteroids up there.  You can keep what you mine, I just need a little.
			string_id message = new string_id (c_stringFile, "s_221");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think so.
	if (response == "s_223")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then stop bugging me.
			string_id message = new string_id (c_stringFile, "s_225");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch76 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh?  Do you have business with me?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thom Steele sent me here to take over some mining duties in the Kashyyyk sector.
	if (response == "s_250")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_sendSignalToPlayer (player, npc);

			//-- NPC: Did he now?  Well then, I'll have to put you to work!  My name is Captain Koh, and I'll be your taskmaster while you are stationed on this planet.  You will respect my command!
			string_id message = new string_id (c_stringFile, "s_252");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds like fun.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_254");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 77);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch77 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did he now?  Well then, I'll have to put you to work!  My name is Captain Koh, and I'll be your taskmaster while you are stationed on this planet.  You will respect my command!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds like fun.
	if (response == "s_254")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Fun?  Hardly!  Mining asteroids ain't like shooting kreetles, boy!  Are you ready to be put to work or not?
			string_id message = new string_id (c_stringFile, "s_256");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sir, yes sir!
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not exactly.  Perhaps later.
			boolean hasResponse1 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_258");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_266");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 78);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch78 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Fun?  Hardly!  Mining asteroids ain't like shooting kreetles, boy!  Are you ready to be put to work or not?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sir, yes sir!
	if (response == "s_258")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			ep3_mining_captain_koh_action_grantQuest5 (player, npc);

			//-- NPC: That's more like it.  Head to Kashyyyk space and get me some samples of the organometallic asteroids up there.  You can keep what you mine, I just need a little.
			string_id message = new string_id (c_stringFile, "s_260");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do my best.
			boolean hasResponse0 = false;
			if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_262");

				utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 79);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not exactly.  Perhaps later.
	if (response == "s_266")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Hmph!  Well, come back if you change your mind.
			string_id message = new string_id (c_stringFile, "s_268");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_mining_captain_koh_handleBranch79 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That's more like it.  Head to Kashyyyk space and get me some samples of the organometallic asteroids up there.  You can keep what you mine, I just need a little.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do my best.
	if (response == "s_262")
	{
		//-- [NOTE] 
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			//-- NPC: Right you shall.
			string_id message = new string_id (c_stringFile, "s_264");
			utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_mining_captain_koh");

	setCondition (self, CONDITION_CONVERSABLE);

	setInvulnerable (self, true);
	setName (self, "Captain Koh");

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable (self, true);
	setName (self, "Captain Koh");

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_mining_captain_koh");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest11 (player, npc))
	{
		//-- NPC: No diamonds?  Your ineptitude amazes me sometimes!
		string_id message = new string_id (c_stringFile, "s_235");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'll do better next time.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_248");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 1);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest11 (player, npc))
	{
		//-- NPC: Do you have the diamonds?
		string_id message = new string_id (c_stringFile, "s_193");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Of course.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_204");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 3);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest11Active (player, npc))
	{
		//-- NPC: Is your cargo hold full of space diamonds yet?  I didn't think so!  Get back to work!
		string_id message = new string_id (c_stringFile, "s_192");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest11 (player, npc))
	{
		//-- NPC: This is it pilot.  Your big break.  The mission that will put you on the map.
		string_id message = new string_id (c_stringFile, "s_191");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Tell me more.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_194");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 8);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest10 (player, npc))
	{
		//-- NPC: Did you lose your nerve, pilot?  Or did you just fail outright?
		string_id message = new string_id (c_stringFile, "s_234");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No comment.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_246");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 14);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest10 (player, npc))
	{
		//-- NPC: Tell me, pilot.  Did Gotal bandits keep the Gilded Wookiee from leaving the zone?
		string_id message = new string_id (c_stringFile, "s_159");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: It was terrible.  Gotals everywhere...
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_170");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 16);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest10Active (player, npc))
	{
		//-- NPC: Kill, pilot!  Stop gabbing and kill!
		string_id message = new string_id (c_stringFile, "s_158");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest10 (player, npc))
	{
		//-- NPC: The nerve!  I can't believe this!  Can you believe this?
		string_id message = new string_id (c_stringFile, "s_157");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Err...what?
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_160");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 20);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest9 (player, npc))
	{
		//-- NPC: You dolt!  You couldn't even escort a few of our mining vessels out of the system.  What good are you to me?
		string_id message = new string_id (c_stringFile, "s_233");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Maybe I could catch up and try to help them?
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_244");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 26);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest9 (player, npc))
	{
		//-- NPC: So, pilot?  Did they make it out safely?
		string_id message = new string_id (c_stringFile, "s_141");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I wouldn't be here otherwise.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_146");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 28);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest9Active (player, npc))
	{
		//-- NPC: That convoy won't escort itself!  Get moving, NOW!
		string_id message = new string_id (c_stringFile, "s_140");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest9 (player, npc))
	{
		//-- NPC: I have an urgent task for you, pilot.
		string_id message = new string_id (c_stringFile, "s_139");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Let's hear it.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_142");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 31);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest8 (player, npc))
	{
		//-- NPC: Let me guess...something went wrong?
		string_id message = new string_id (c_stringFile, "s_232");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Err, yeah, you could say that.  It won't happen again!
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_242");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 34);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest8 (player, npc))
	{
		//-- NPC: Have you completed your sampling mission?
		string_id message = new string_id (c_stringFile, "s_111");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I have.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_119");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 36);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest8Active (player, npc))
	{
		//-- NPC: You have your orders pilot.  Get a move on!
		string_id message = new string_id (c_stringFile, "s_110");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest8 (player, npc))
	{
		//-- NPC: Welcome back, pilot.  It's time to earn your keep.
		string_id message = new string_id (c_stringFile, "s_109");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What now?
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_112");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 41);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest7 (player, npc))
	{
		//-- NPC: You don't have the cargo...what went wrong up there!?!
		string_id message = new string_id (c_stringFile, "s_231");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I guess I just choked.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_240");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 45);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest7 (player, npc))
	{
		//-- NPC: Did you get the cargo from that ship?
		string_id message = new string_id (c_stringFile, "s_84");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I sure did.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_86");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 47);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest7Active (player, npc))
	{
		//-- NPC: You have work you should be doing!
		string_id message = new string_id (c_stringFile, "s_85");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest7 (player, npc))
	{
		//-- NPC: Today is our lucky day pilot!  Do you know why?
		string_id message = new string_id (c_stringFile, "s_90");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No sir.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_92");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 51);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest6 (player, npc))
	{
		//-- NPC: I can't even trust you as far as the Lok System?  You disappoint me severely.
		string_id message = new string_id (c_stringFile, "s_230");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Aw, please, just one more try!
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_238");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 56);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest6 (player, npc))
	{
		//-- NPC: Well, pilot?  Have you been to Lok yet?
		string_id message = new string_id (c_stringFile, "s_127");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: They'll have trouble finding an asteroid left to mine in the entire system.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_129");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 58);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest6Active (player, npc))
	{
		//-- NPC: You should be in Lok right now!  Get moving!
		string_id message = new string_id (c_stringFile, "s_150");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest6 (player, npc))
	{
		doAnimationAction (npc, "shake_head_disgust");

		//-- NPC: I'm glad you have returned, pilot.  You won't believe what I found in your samples!  It's an outrage!
		string_id message = new string_id (c_stringFile, "s_152");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: An outrage?
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_154");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 63);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasFailedQuest5 (player, npc))
	{
		//-- NPC: WHAT?  I don't want to hear your excuses, pilot.
		string_id message = new string_id (c_stringFile, "s_229");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Can I try again?
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_236");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 67);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasCompletedQuest5 (player, npc))
	{
		//-- NPC: Do you have those samples, pilot?
		string_id message = new string_id (c_stringFile, "s_186");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes sir.  Here they are.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_188");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 69);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isQuest5Active (player, npc))
	{
		//-- NPC: You have your orders pilot, so why aren't you in space?
		string_id message = new string_id (c_stringFile, "s_215");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_isReadyForQuest5 (player, npc))
	{
		//-- NPC: Ready to do some work for me?
		string_id message = new string_id (c_stringFile, "s_217");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I believe I am.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I don't think so.
		boolean hasResponse1 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_219");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_223");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 73);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition_hasQuestFour (player, npc))
	{
		//-- NPC: Oh?  Do you have business with me?
		string_id message = new string_id (c_stringFile, "s_227");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thom Steele sent me here to take over some mining duties in the Kashyyyk sector.
		boolean hasResponse0 = false;
		if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_250");

			utils.setScriptVar (player, "conversation.ep3_mining_captain_koh.branchId", 76);

			npcStartConversation (player, npc, "ep3_mining_captain_koh", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_mining_captain_koh_condition__defaultCondition (player, npc))
	{
		//-- NPC: I don't have time for you!  Be gone!
		string_id message = new string_id (c_stringFile, "s_270");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_mining_captain_koh")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

	if (branchId == 1 && ep3_mining_captain_koh_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && ep3_mining_captain_koh_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_mining_captain_koh_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && ep3_mining_captain_koh_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_mining_captain_koh_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_mining_captain_koh_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && ep3_mining_captain_koh_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && ep3_mining_captain_koh_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && ep3_mining_captain_koh_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && ep3_mining_captain_koh_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && ep3_mining_captain_koh_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_mining_captain_koh_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && ep3_mining_captain_koh_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && ep3_mining_captain_koh_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && ep3_mining_captain_koh_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && ep3_mining_captain_koh_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && ep3_mining_captain_koh_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && ep3_mining_captain_koh_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && ep3_mining_captain_koh_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && ep3_mining_captain_koh_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 36 && ep3_mining_captain_koh_handleBranch36 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && ep3_mining_captain_koh_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && ep3_mining_captain_koh_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 41 && ep3_mining_captain_koh_handleBranch41 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && ep3_mining_captain_koh_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 45 && ep3_mining_captain_koh_handleBranch45 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 47 && ep3_mining_captain_koh_handleBranch47 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 48 && ep3_mining_captain_koh_handleBranch48 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && ep3_mining_captain_koh_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && ep3_mining_captain_koh_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && ep3_mining_captain_koh_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 56 && ep3_mining_captain_koh_handleBranch56 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 58 && ep3_mining_captain_koh_handleBranch58 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 59 && ep3_mining_captain_koh_handleBranch59 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 60 && ep3_mining_captain_koh_handleBranch60 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 63 && ep3_mining_captain_koh_handleBranch63 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && ep3_mining_captain_koh_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 65 && ep3_mining_captain_koh_handleBranch65 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 67 && ep3_mining_captain_koh_handleBranch67 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 69 && ep3_mining_captain_koh_handleBranch69 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 70 && ep3_mining_captain_koh_handleBranch70 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 73 && ep3_mining_captain_koh_handleBranch73 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 76 && ep3_mining_captain_koh_handleBranch76 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 77 && ep3_mining_captain_koh_handleBranch77 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 78 && ep3_mining_captain_koh_handleBranch78 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 79 && ep3_mining_captain_koh_handleBranch79 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_mining_captain_koh.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

