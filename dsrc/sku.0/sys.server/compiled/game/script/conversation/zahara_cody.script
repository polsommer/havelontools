// ======================================================================
//
// zahara_cody.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.37 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.buff;
include library.chat;
include library.conversation;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/zahara_cody";

// ======================================================================
// Script Conditions
// ======================================================================

boolean zahara_cody_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_isImperialNotImmunized (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	return (groundquests.isQuestActive(player, "outbreak_quest_01_imperial")
	|| groundquests.isQuestActive(player, "outbreak_quest_01_rebel")
	|| groundquests.isQuestActive(player, "outbreak_quest_01_neutral"));
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_hasTrigTask (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "outbreak_quest_01_b_imperial", "talkToTrig")
	|| groundquests.isTaskActive(player, "outbreak_quest_01_b_rebel", "talkToTrig")
	|| groundquests.isTaskActive(player, "outbreak_quest_01_b_neutral", "talkToTrig")
	);
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_hasFoundEpsilon (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "outbreak_quest_02_imperial")
	|| groundquests.hasCompletedQuest(player, "outbreak_quest_02_rebel")
	|| groundquests.hasCompletedQuest(player, "outbreak_quest_02_neutral");
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_hasDeliveredRadioEpsilon (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "outbreak_radio_delivery_03");
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_hasCompletedQuest01 (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "outbreak_quest_01_imperial")
	|| groundquests.hasCompletedQuest(player, "outbreak_quest_01_rebel")
	|| groundquests.hasCompletedQuest(player, "outbreak_quest_01_neutral");
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_hasCompletedQuestLine (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "outbreak_quest_final_imperial")
	|| groundquests.hasCompletedQuest(player, "outbreak_quest_final_neutral")
	|| groundquests.hasCompletedQuest(player, "outbreak_quest_final_rebel");
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_hasDeletedQuest01b (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedQuest(player, "outbreak_quest_01_imperial")
	&& !groundquests.isQuestActiveOrComplete(player, "outbreak_quest_01_b_imperial"))
	|| (groundquests.hasCompletedQuest(player, "outbreak_quest_01_rebel")
	&& !groundquests.isQuestActiveOrComplete(player, "outbreak_quest_01_b_rebel"))
	|| (groundquests.hasCompletedQuest(player, "outbreak_quest_01_neutral")
	&& !groundquests.isQuestActiveOrComplete(player, "outbreak_quest_01_b_neutral"));
}

// ----------------------------------------------------------------------

boolean zahara_cody_condition_doesNotHaveAntiVirus (obj_id player, obj_id npc)
{
	return !buff.hasBuff(player, "death_troopers_inoculation");
}

// ======================================================================
// Script Actions
// ======================================================================

void zahara_cody_action_giveAntiVirus (obj_id player, obj_id npc)
{
	faceTo(npc, player);
	groundquests.sendSignal(player, "hasBeenInnoculated");
	utils.setScriptVar(player, "outbreak.innoculated", 1);

	buff.applyBuff(player, "death_troopers_inoculation");
}

// ----------------------------------------------------------------------

void zahara_cody_action_makeTrigWave (obj_id player, obj_id npc)
{
	if(!hasObjVar(npc, "myTrig")) //in the triggers section
	{
		CustomerServiceLog("outbreak_themepark", "outbreak_zahara_cody conversation: Han has no Trig objvar. Self: "+npc);
		return;
	}
	
	obj_id myTrig = getObjIdObjVar(npc, "myTrig");
	if(!isValidId(myTrig) || !exists(myTrig))
	{
		CustomerServiceLog("outbreak_themepark", "outbreak_zahara_cody conversation: Cody has a trig objvar that is invalid. Self: "+ npc);	
		return;
	}
	faceTo(myTrig, player);
	doAnimationAction(myTrig, "wave1");
}

// ----------------------------------------------------------------------

void zahara_cody_action_giveQuest1b (obj_id player, obj_id npc)
{
	if(groundquests.hasCompletedQuest(player, "outbreak_quest_01_imperial")
	&& !groundquests.isQuestActiveOrComplete(player, "outbreak_quest_01_b_imperial"))
	{
		groundquests.grantQuest(player, "outbreak_quest_01_b_imperial"); 
		return;
	}	
	
	if (groundquests.hasCompletedQuest(player, "outbreak_quest_01_rebel")
	&& !groundquests.isQuestActiveOrComplete(player, "outbreak_quest_01_b_rebel"))
	{
		groundquests.grantQuest(player, "outbreak_quest_01_b_rebel"); 	
		return;
	}
		
	if (groundquests.hasCompletedQuest(player, "outbreak_quest_01_neutral")
	&& !groundquests.isQuestActiveOrComplete(player, "outbreak_quest_01_b_neutral"))
	{
		groundquests.grantQuest(player, "outbreak_quest_01_b_neutral"); 	
		return;
	}
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int zahara_cody_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I heard about the research facility and how you rescued those scientists. You are an inspiration to us all.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to renew my anti-virus!
	if (response == "s_51")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Oh, of course. Relax your arm...this will only take a second or two.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Maris reports that you have delivered a radio to camp epsilon at the research facility. I am sure those immunes can use the medical and food supplies. Great work, %TU.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to renew my anti-virus!
	if (response == "s_50")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Oh, of course. Relax your arm...this will only take a second or two.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I hear you have found a group of immunes in the research facility where this disaster started.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to renew my anti-virus!
	if (response == "s_49")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Oh, of course. Relax your arm...this will only take a second or two.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You look a little lost. You should talk to Trig. I bet he can answer your questions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to renew my anti-virus!
	if (response == "s_48")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Oh, of course. Relax your arm...this will only take a second or two.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: If you are the adventurous type, there are a few people at this camp that need help with their own projects.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to renew my anti-virus!
	if (response == "s_47")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Oh, of course. Relax your arm...this will only take a second or two.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Speak to Trig if you want to know more about the survivors at the research facility.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to renew my anti-virus!
	if (response == "s_45")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Oh, of course. Relax your arm...this will only take a second or two.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think I have seen you before. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you distributing the anti-virus?
	if (response == "s_19")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			zahara_cody_action_makeTrigWave (player, npc);

			//-- NPC: Yes, I am Dr. Zahara Cody and this is Trig Longo.
			string_id message = new string_id (c_stringFile, "s_123");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You are from the research facility?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_124");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, I am Dr. Zahara Cody and this is Trig Longo.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You are from the research facility?
	if (response == "s_124")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: You mean where this disaster started? No. We managed to get into the quarantine zone a few days after it started...of course, it wasn't as wide spread as it is now...
			string_id message = new string_id (c_stringFile, "s_128");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do you know a lot about the virus?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_64");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You mean where this disaster started? No. We managed to get into the quarantine zone a few days after it started...of course, it wasn't as wide spread as it is now...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do you know a lot about the virus?
	if (response == "s_64")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: When I was assigned to work on a prison barge for the Empire, we encountered this virus, or a close cousin, on what was believed to be an abandoned Star Destroyer. Apparently the virus had wiped out the crew of Destroyer. Once we sent a boarding party it quickly wiped out most of the prison ship. 
			string_id message = new string_id (c_stringFile, "s_66");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: By wiped out you mean?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_68");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: When I was assigned to work on a prison barge for the Empire, we encountered this virus, or a close cousin, on what was believed to be an abandoned Star Destroyer. Apparently the virus had wiped out the crew of Destroyer. Once we sent a boarding party it quickly wiped out most of the prison ship. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: By wiped out you mean?
	if (response == "s_68")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Clinically, the patient dies and the virus takes over the motor functions of the host. This results in a strong urge to eat.
			string_id message = new string_id (c_stringFile, "s_70");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Oh, uh...I see.
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Clinically, the patient dies and the virus takes over the motor functions of the host. This results in a strong urge to eat.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh, uh...I see.
	if (response == "s_72")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Was there anything else you wanted to ask?
			string_id message = new string_id (c_stringFile, "s_75");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Are you saying the insane...things, are dead?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Where is the anti-virus coming from?
			boolean hasResponse1 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Have you heard of other survivors?
			boolean hasResponse2 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Is there any good news?
			boolean hasResponse3 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: I don't have any other questions
			boolean hasResponse4 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_77");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_97");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_105");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_169");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_207");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Was there anything else you wanted to ask?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you saying the insane...things, are dead?
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The host is dead, the virus is very much alive--and semi-intelligent.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Semi-intelligent?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where is the anti-virus coming from?
	if (response == "s_97")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The anti-virus is actually easily synthesized. It was created by....it was originally based on my immunity and synthesized by my assistant aboard the prison barge.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Your assistant. I gather your assistant didn't make it?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Have you heard of other survivors?
	if (response == "s_105")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. Since we arrived at camp volunteers have been sent to search for survivors and distribute the anti-virus. 
			string_id message = new string_id (c_stringFile, "s_107");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_109");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is there any good news?
	if (response == "s_169")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, there is the anti-virus, though it doesn't provide permanent immunity to this latest strain of the virus. There is also the chance that a percentage of the population has an immunity gene.
			string_id message = new string_id (c_stringFile, "s_173");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Immunity gene?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_177");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have any other questions
	if (response == "s_207")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pet_creature_medium");

			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Make sure to talk to Trig if you want to know more about the research facility. Now, relax your arm while I give you the anti-virus.
			string_id message = new string_id (c_stringFile, "s_208");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The host is dead, the virus is very much alive--and semi-intelligent.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Semi-intelligent?
	if (response == "s_81")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: We found that where the virus is most concentrated, in this case, where it is being released at the facility, is where the most dangerous undead reside. In some cases undead can wield weapons.
			string_id message = new string_id (c_stringFile, "s_167");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Oh...great.
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_168");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We found that where the virus is most concentrated, in this case, where it is being released at the facility, is where the most dangerous undead reside. In some cases undead can wield weapons.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh...great.
	if (response == "s_168")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Was there anything else you wanted to ask?
			string_id message = new string_id (c_stringFile, "s_199");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Are you saying the insane...things, are dead?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Where is the anti-virus coming from?
			boolean hasResponse1 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Have you heard of other survivors?
			boolean hasResponse2 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Is there any good news?
			boolean hasResponse3 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: I don't have any other questions
			boolean hasResponse4 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_77");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_97");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_105");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_169");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_207");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Was there anything else you wanted to ask?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you saying the insane...things, are dead?
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The host is dead, the virus is very much alive--and semi-intelligent.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Semi-intelligent?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where is the anti-virus coming from?
	if (response == "s_97")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The anti-virus is actually easily synthesized. It was created by....it was originally based on my immunity and synthesized by my assistant aboard the prison barge.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Your assistant. I gather your assistant didn't make it?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Have you heard of other survivors?
	if (response == "s_105")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. Since we arrived at camp volunteers have been sent to search for survivors and distribute the anti-virus. 
			string_id message = new string_id (c_stringFile, "s_107");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_109");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is there any good news?
	if (response == "s_169")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, there is the anti-virus, though it doesn't provide permanent immunity to this latest strain of the virus. There is also the chance that a percentage of the population has an immunity gene.
			string_id message = new string_id (c_stringFile, "s_173");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Immunity gene?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_177");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have any other questions
	if (response == "s_207")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pet_creature_medium");

			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Make sure to talk to Trig if you want to know more about the research facility. Now, relax your arm while I give you the anti-virus.
			string_id message = new string_id (c_stringFile, "s_208");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The anti-virus is actually easily synthesized. It was created by....it was originally based on my immunity and synthesized by my assistant aboard the prison barge.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Your assistant. I gather your assistant didn't make it?
	if (response == "s_101")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: It was a 2-1B Surgical Droid destroyed by the afflicted. Was there anything else you wanted to ask?
			string_id message = new string_id (c_stringFile, "s_103");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Are you saying the insane...things, are dead?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Where is the anti-virus coming from?
			boolean hasResponse1 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Have you heard of other survivors?
			boolean hasResponse2 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Is there any good news?
			boolean hasResponse3 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: I don't have any other questions
			boolean hasResponse4 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_77");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_97");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_105");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_169");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_207");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It was a 2-1B Surgical Droid destroyed by the afflicted. Was there anything else you wanted to ask?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you saying the insane...things, are dead?
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The host is dead, the virus is very much alive--and semi-intelligent.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Semi-intelligent?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where is the anti-virus coming from?
	if (response == "s_97")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The anti-virus is actually easily synthesized. It was created by....it was originally based on my immunity and synthesized by my assistant aboard the prison barge.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Your assistant. I gather your assistant didn't make it?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Have you heard of other survivors?
	if (response == "s_105")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. Since we arrived at camp volunteers have been sent to search for survivors and distribute the anti-virus. 
			string_id message = new string_id (c_stringFile, "s_107");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_109");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is there any good news?
	if (response == "s_169")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, there is the anti-virus, though it doesn't provide permanent immunity to this latest strain of the virus. There is also the chance that a percentage of the population has an immunity gene.
			string_id message = new string_id (c_stringFile, "s_173");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Immunity gene?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_177");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have any other questions
	if (response == "s_207")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pet_creature_medium");

			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Make sure to talk to Trig if you want to know more about the research facility. Now, relax your arm while I give you the anti-virus.
			string_id message = new string_id (c_stringFile, "s_208");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes. Since we arrived at camp volunteers have been sent to search for survivors and distribute the anti-virus. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We?
	if (response == "s_109")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Trig and I. Trig has more information regarding the other camps. You may want to speak with him. 
			string_id message = new string_id (c_stringFile, "s_111");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Great. I will.
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_113");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Trig and I. Trig has more information regarding the other camps. You may want to speak with him. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Great. I will.
	if (response == "s_113")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Were there any other questions?
			string_id message = new string_id (c_stringFile, "s_115");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Are you saying the insane...things, are dead?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Where is the anti-virus coming from?
			boolean hasResponse1 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Have you heard of other survivors?
			boolean hasResponse2 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Is there any good news?
			boolean hasResponse3 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: I don't have any other questions
			boolean hasResponse4 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_77");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_97");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_105");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_169");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_207");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Were there any other questions?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you saying the insane...things, are dead?
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The host is dead, the virus is very much alive--and semi-intelligent.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Semi-intelligent?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where is the anti-virus coming from?
	if (response == "s_97")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The anti-virus is actually easily synthesized. It was created by....it was originally based on my immunity and synthesized by my assistant aboard the prison barge.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Your assistant. I gather your assistant didn't make it?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Have you heard of other survivors?
	if (response == "s_105")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. Since we arrived at camp volunteers have been sent to search for survivors and distribute the anti-virus. 
			string_id message = new string_id (c_stringFile, "s_107");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_109");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is there any good news?
	if (response == "s_169")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, there is the anti-virus, though it doesn't provide permanent immunity to this latest strain of the virus. There is also the chance that a percentage of the population has an immunity gene.
			string_id message = new string_id (c_stringFile, "s_173");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Immunity gene?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_177");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have any other questions
	if (response == "s_207")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pet_creature_medium");

			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Make sure to talk to Trig if you want to know more about the research facility. Now, relax your arm while I give you the anti-virus.
			string_id message = new string_id (c_stringFile, "s_208");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, there is the anti-virus, though it doesn't provide permanent immunity to this latest strain of the virus. There is also the chance that a percentage of the population has an immunity gene.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Immunity gene?
	if (response == "s_177")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The virus has a mortality rate of about 99.7% so there is a possibility of surviving using natural defenses alone. Were there any other questions?
			string_id message = new string_id (c_stringFile, "s_181");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Are you saying the insane...things, are dead?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Where is the anti-virus coming from?
			boolean hasResponse1 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Have you heard of other survivors?
			boolean hasResponse2 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Is there any good news?
			boolean hasResponse3 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			//-- PLAYER: I don't have any other questions
			boolean hasResponse4 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse4 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_77");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_97");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_105");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_169");

				if (hasResponse4)
					responses [responseIndex++] = new string_id (c_stringFile, "s_207");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int zahara_cody_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The virus has a mortality rate of about 99.7% so there is a possibility of surviving using natural defenses alone. Were there any other questions?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Are you saying the insane...things, are dead?
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The host is dead, the virus is very much alive--and semi-intelligent.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Semi-intelligent?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where is the anti-virus coming from?
	if (response == "s_97")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: The anti-virus is actually easily synthesized. It was created by....it was originally based on my immunity and synthesized by my assistant aboard the prison barge.
			string_id message = new string_id (c_stringFile, "s_99");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Your assistant. I gather your assistant didn't make it?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_101");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Have you heard of other survivors?
	if (response == "s_105")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. Since we arrived at camp volunteers have been sent to search for survivors and distribute the anti-virus. 
			string_id message = new string_id (c_stringFile, "s_107");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_109");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Is there any good news?
	if (response == "s_169")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, there is the anti-virus, though it doesn't provide permanent immunity to this latest strain of the virus. There is also the chance that a percentage of the population has an immunity gene.
			string_id message = new string_id (c_stringFile, "s_173");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Immunity gene?
			boolean hasResponse0 = false;
			if (zahara_cody_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_177");

				utils.setScriptVar (player, "conversation.zahara_cody.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have any other questions
	if (response == "s_207")
	{
		//-- [NOTE] 
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pet_creature_medium");

			zahara_cody_action_giveAntiVirus (player, npc);

			//-- NPC: Make sure to talk to Trig if you want to know more about the research facility. Now, relax your arm while I give you the anti-virus.
			string_id message = new string_id (c_stringFile, "s_208");
			utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isTangible (self)) || (isPlayer (self)))
		detachScript(self, "conversation.zahara_cody");

	setCondition (self, CONDITION_CONVERSABLE);
	messageTo(self, "findNpc", null, 2, false);
	CustomerServiceLog("outbreak_themepark", "outbreak_zahara_cody conversation: Cody is looking for Trig. Self: "+self);
	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	messageTo(self, "findNpc", null, 2, false);
	CustomerServiceLog("outbreak_themepark", "outbreak_zahara_cody conversation: Cody is looking for Trig. Self: "+self);
	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.zahara_cody");

	return SCRIPT_CONTINUE;
}

messageHandler findNpc()
{
	CustomerServiceLog("outbreak_themepark", "outbreak_zahara_cody findNpc(): Initialized");
	obj_id[] npcList = getAllObjectsWithObjVar(getLocation(self), 3.f, "trig");
	if(npcList == null || npcList.length <= 0)
	{
		CustomerServiceLog("outbreak_themepark", "outbreak_zahara_cody findNpc(): Failed to find NPC var on any objects within range.");	
		messageTo(self, "findNpc", null, 60, false);
		return SCRIPT_CONTINUE;
	}
	CustomerServiceLog("outbreak_themepark", "outbreak_han_solo findNpc(): Found NPC within range.");		
	setObjVar(self, "myTrig", npcList[0]);
	return SCRIPT_CONTINUE;	
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (zahara_cody_condition_hasCompletedQuestLine (player, npc))
	{
		//-- NPC: I heard about the research facility and how you rescued those scientists. You are an inspiration to us all.
		string_id message = new string_id (c_stringFile, "s_212");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I need to renew my anti-virus!
		boolean hasResponse0 = false;
		if (zahara_cody_condition_doesNotHaveAntiVirus (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_51");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 1);

			npcStartConversation (player, npc, "zahara_cody", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition_hasDeliveredRadioEpsilon (player, npc))
	{
		//-- NPC: Maris reports that you have delivered a radio to camp epsilon at the research facility. I am sure those immunes can use the medical and food supplies. Great work, %TU.
		string_id message = new string_id (c_stringFile, "s_210");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I need to renew my anti-virus!
		boolean hasResponse0 = false;
		if (zahara_cody_condition_doesNotHaveAntiVirus (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_50");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 2);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "zahara_cody", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition_hasFoundEpsilon (player, npc))
	{
		//-- NPC: I hear you have found a group of immunes in the research facility where this disaster started.
		string_id message = new string_id (c_stringFile, "s_209");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I need to renew my anti-virus!
		boolean hasResponse0 = false;
		if (zahara_cody_condition_doesNotHaveAntiVirus (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_49");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 3);

			npcStartConversation (player, npc, "zahara_cody", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition_hasDeletedQuest01b (player, npc))
	{
		zahara_cody_action_giveQuest1b (player, npc);

		//-- NPC: You look a little lost. You should talk to Trig. I bet he can answer your questions.
		string_id message = new string_id (c_stringFile, "s_213");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I need to renew my anti-virus!
		boolean hasResponse0 = false;
		if (zahara_cody_condition_doesNotHaveAntiVirus (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_48");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 4);

			npcStartConversation (player, npc, "zahara_cody", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition_hasCompletedQuest01 (player, npc))
	{
		//-- NPC: If you are the adventurous type, there are a few people at this camp that need help with their own projects.
		string_id message = new string_id (c_stringFile, "s_211");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I need to renew my anti-virus!
		boolean hasResponse0 = false;
		if (zahara_cody_condition_doesNotHaveAntiVirus (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_47");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 5);

			npcStartConversation (player, npc, "zahara_cody", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition_hasTrigTask (player, npc))
	{
		//-- NPC: Speak to Trig if you want to know more about the survivors at the research facility.
		string_id message = new string_id (c_stringFile, "s_59");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I need to renew my anti-virus!
		boolean hasResponse0 = false;
		if (zahara_cody_condition_doesNotHaveAntiVirus (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_45");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 6);

			npcStartConversation (player, npc, "zahara_cody", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition_isImperialNotImmunized (player, npc))
	{
		doAnimationAction (npc, "nod");

		//-- NPC: I don't think I have seen you before. 
		string_id message = new string_id (c_stringFile, "s_17");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Are you distributing the anti-virus?
		boolean hasResponse0 = false;
		if (zahara_cody_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_19");

			utils.setScriptVar (player, "conversation.zahara_cody.branchId", 8);

			npcStartConversation (player, npc, "zahara_cody", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (zahara_cody_condition__defaultCondition (player, npc))
	{
		//-- NPC: You are somewhat safe here. Make yourself at home, we have plenty of supplies...for now.
		string_id message = new string_id (c_stringFile, "s_73");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "zahara_cody")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.zahara_cody.branchId");

	if (branchId == 1 && zahara_cody_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 2 && zahara_cody_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && zahara_cody_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && zahara_cody_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && zahara_cody_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && zahara_cody_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && zahara_cody_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && zahara_cody_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && zahara_cody_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && zahara_cody_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && zahara_cody_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && zahara_cody_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && zahara_cody_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && zahara_cody_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && zahara_cody_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && zahara_cody_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && zahara_cody_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && zahara_cody_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && zahara_cody_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && zahara_cody_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && zahara_cody_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && zahara_cody_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.zahara_cody.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

