// ======================================================================
//
// corellia_droid_factory_sergeant_mener.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.37 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.conversation;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/corellia_droid_factory_sergeant_mener";

// ======================================================================
// Script Conditions
// ======================================================================

boolean corellia_droid_factory_sergeant_mener_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBDNotActiveOrComplete (obj_id player, obj_id npc)
{
	return !groundquests.isQuestActiveOrComplete(player, "corellia_droid_bunker_destroy_battle_droid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBDFinishTaskActive (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_droid_bunker_destroy_battle_droid", "returnTenBD");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isSBDFinishTaskActive (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_droid_bunker_destroy_super_battle_droid", "returnTenSBD");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isDroidekaFinishTaskActive (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_droid_bunker_destroy_droideka", "returnFiveDroideka");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBossDroidFinishTaskActive (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "corellia_droid_bunker_destroy_boss_droid", "returnBossDroid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBossDroidActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_droid_bunker_destroy_boss_droid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isDroidekaFinished (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "corellia_droid_bunker_destroy_droideka");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isDroidekaActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_droid_bunker_destroy_droideka");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBossDroidFinished (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "corellia_droid_bunker_destroy_boss_droid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isSBDFinished (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "corellia_droid_bunker_destroy_super_battle_droid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isSBDActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_droid_bunker_destroy_super_battle_droid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBDFinished (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "corellia_droid_bunker_destroy_battle_droid");
}

// ----------------------------------------------------------------------

boolean corellia_droid_factory_sergeant_mener_condition_isBDActive (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "corellia_droid_bunker_destroy_battle_droid");
}

// ======================================================================
// Script Actions
// ======================================================================

void corellia_droid_factory_sergeant_mener_action_signalToFinishBD (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "returnTenBD");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_signalToFinishSBD (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "returnTenSBD");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_signalToFinishDroideka (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "returnFiveDroideka");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_signalToFinishBossDroid (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "returnBossDroid");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_grantBDQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_droid_bunker_destroy_battle_droid");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_grantSBDQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_droid_bunker_destroy_super_battle_droid");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_grantDroidekaQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_droid_bunker_destroy_droideka");
}

// ----------------------------------------------------------------------

void corellia_droid_factory_sergeant_mener_action_grantBossDroidQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "corellia_droid_bunker_destroy_boss_droid");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int corellia_droid_factory_sergeant_mener_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well done. You took down five droidekas, not a small feat by any standard. However, I've had reports of a new type of droid. A prototype if you will, somewhere in the bottom of the complex. This one is supposed to be a tough one, you might want to bring some friends if you're going to try to take it down.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm up for it.
	if (response == "s_12")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_grantBossDroidQuest (player, npc);

			//-- NPC: Sounds good. Come back to me once it's destroyed. 
			string_id message = new string_id (c_stringFile, "s_14");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I think I'd better pass on this one.
	if (response == "s_16")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			//-- NPC: Understood.
			string_id message = new string_id (c_stringFile, "s_18");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well done! That's five less droidekas that'll be gunning for us.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thanks.
	if (response == "s_70")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinished (player, npc))
		{
			//-- NPC: Good to see you again. Thanks to you the droid forces are on the retreat. We'll have this place cleaned out soon.
			string_id message = new string_id (c_stringFile, "s_4");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishBossDroid (player, npc);

			//-- NPC: So you took down that prototype droid eh? Well done! I honestly didn't think you could pull it off.
			string_id message = new string_id (c_stringFile, "s_6");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidActive (player, npc))
		{
			//-- NPC: You still need to take down the prototype droid.
			string_id message = new string_id (c_stringFile, "s_8");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinished (player, npc))
		{
			//-- NPC: Well done. You took down five droidekas, not a small feat by any standard. However, I've had reports of a new type of droid. A prototype if you will, somewhere in the bottom of the complex. This one is supposed to be a tough one, you might want to bring some friends if you're going to try to take it down.
			string_id message = new string_id (c_stringFile, "s_10");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm up for it.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I think I'd better pass on this one.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_12");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_16");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishDroideka (player, npc);

			//-- NPC: Well done! That's five less droidekas that'll be gunning for us.
			string_id message = new string_id (c_stringFile, "s_36");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_70");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaActive (player, npc))
		{
			//-- NPC: You still need to take down five Droidekas.
			string_id message = new string_id (c_stringFile, "s_34");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDFinished (player, npc))
		{
			//-- NPC: With the number of Super Battle Droids reduced we're now looking to strike at the the core of the facility. If you're up for it I want you to go after the droidekas that guard the center of the facility.
			string_id message = new string_id (c_stringFile, "s_38");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Dismantled Droidekas coming right up.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I got some other things I need to see to first.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_40");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishSBD (player, npc);

			//-- NPC: Ten piles of Super Battle Droid Scrap! Good job. With those gone the eventual assault on the factory core will be a lot easier.
			string_id message = new string_id (c_stringFile, "s_48");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDActive (player, npc))
		{
			//-- NPC: I need to you cut down the number of Super Battle Droids.
			string_id message = new string_id (c_stringFile, "s_49");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDFinished (player, npc))
		{
			//-- NPC: Are you ready for another fight?
			string_id message = new string_id (c_stringFile, "s_50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure what do you need destroyed?
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I better not.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishBD (player, npc);

			//-- NPC: Looks like you cut through the battle droids without any trouble. Well done. With their numbers reduced we can start gunning for the bigger game.
			string_id message = new string_id (c_stringFile, "s_51");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So what's next?
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDActive (player, npc))
		{
			//-- NPC: You still need to thin out the numbers of Battle Droids out there.
			string_id message = new string_id (c_stringFile, "s_52");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDNotActiveOrComplete (player, npc))
		{
			//-- NPC: Hello there, I'm looking for someone to help us out by destroying the droids that are swarming the facility. Are you up for a little fighting?
			string_id message = new string_id (c_stringFile, "s_53");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That sounds simple enough.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_55");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: With the number of Super Battle Droids reduced we're now looking to strike at the the core of the facility. If you're up for it I want you to go after the droidekas that guard the center of the facility.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Dismantled Droidekas coming right up.
	if (response == "s_40")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_grantDroidekaQuest (player, npc);

			//-- NPC: That's what I like to hear. Good hunting.
			string_id message = new string_id (c_stringFile, "s_42");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I got some other things I need to see to first.
	if (response == "s_44")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			//-- NPC: Too bad. It's funny how other tasks tend to come up when the going gets tough.
			string_id message = new string_id (c_stringFile, "s_46");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ten piles of Super Battle Droid Scrap! Good job. With those gone the eventual assault on the factory core will be a lot easier.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thanks.
	if (response == "s_71")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinished (player, npc))
		{
			//-- NPC: Good to see you again. Thanks to you the droid forces are on the retreat. We'll have this place cleaned out soon.
			string_id message = new string_id (c_stringFile, "s_4");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishBossDroid (player, npc);

			//-- NPC: So you took down that prototype droid eh? Well done! I honestly didn't think you could pull it off.
			string_id message = new string_id (c_stringFile, "s_6");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidActive (player, npc))
		{
			//-- NPC: You still need to take down the prototype droid.
			string_id message = new string_id (c_stringFile, "s_8");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinished (player, npc))
		{
			//-- NPC: Well done. You took down five droidekas, not a small feat by any standard. However, I've had reports of a new type of droid. A prototype if you will, somewhere in the bottom of the complex. This one is supposed to be a tough one, you might want to bring some friends if you're going to try to take it down.
			string_id message = new string_id (c_stringFile, "s_10");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm up for it.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I think I'd better pass on this one.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_12");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_16");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishDroideka (player, npc);

			//-- NPC: Well done! That's five less droidekas that'll be gunning for us.
			string_id message = new string_id (c_stringFile, "s_36");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_70");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaActive (player, npc))
		{
			//-- NPC: You still need to take down five Droidekas.
			string_id message = new string_id (c_stringFile, "s_34");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDFinished (player, npc))
		{
			//-- NPC: With the number of Super Battle Droids reduced we're now looking to strike at the the core of the facility. If you're up for it I want you to go after the droidekas that guard the center of the facility.
			string_id message = new string_id (c_stringFile, "s_38");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Dismantled Droidekas coming right up.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I got some other things I need to see to first.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_40");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishSBD (player, npc);

			//-- NPC: Ten piles of Super Battle Droid Scrap! Good job. With those gone the eventual assault on the factory core will be a lot easier.
			string_id message = new string_id (c_stringFile, "s_48");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDActive (player, npc))
		{
			//-- NPC: I need to you cut down the number of Super Battle Droids.
			string_id message = new string_id (c_stringFile, "s_49");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDFinished (player, npc))
		{
			//-- NPC: Are you ready for another fight?
			string_id message = new string_id (c_stringFile, "s_50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure what do you need destroyed?
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I better not.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishBD (player, npc);

			//-- NPC: Looks like you cut through the battle droids without any trouble. Well done. With their numbers reduced we can start gunning for the bigger game.
			string_id message = new string_id (c_stringFile, "s_51");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So what's next?
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDActive (player, npc))
		{
			//-- NPC: You still need to thin out the numbers of Battle Droids out there.
			string_id message = new string_id (c_stringFile, "s_52");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDNotActiveOrComplete (player, npc))
		{
			//-- NPC: Hello there, I'm looking for someone to help us out by destroying the droids that are swarming the facility. Are you up for a little fighting?
			string_id message = new string_id (c_stringFile, "s_53");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That sounds simple enough.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_55");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you ready for another fight?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure what do you need destroyed?
	if (response == "s_58")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			//-- NPC: Super Battle Droids. Now that you've thinned out the numbers of the Battle Droids it's time to go for the big boys. I need you to destroy at least ten super battle droids throughout the factory. Can I count on you?
			string_id message = new string_id (c_stringFile, "s_61");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Bring 'em.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Super Battle Droids? I don't want to get myself killed.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_62");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_63");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I better not.
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			//-- NPC: Bah, get outa here.
			string_id message = new string_id (c_stringFile, "s_60");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Super Battle Droids. Now that you've thinned out the numbers of the Battle Droids it's time to go for the big boys. I need you to destroy at least ten super battle droids throughout the factory. Can I count on you?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Bring 'em.
	if (response == "s_62")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_grantSBDQuest (player, npc);

			//-- NPC: Good to hear.
			string_id message = new string_id (c_stringFile, "s_64");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Super Battle Droids? I don't want to get myself killed.
	if (response == "s_63")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			//-- NPC: Bah, get outa here.
			string_id message = new string_id (c_stringFile, "s_65");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Looks like you cut through the battle droids without any trouble. Well done. With their numbers reduced we can start gunning for the bigger game.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So what's next?
	if (response == "s_72")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinished (player, npc))
		{
			//-- NPC: Good to see you again. Thanks to you the droid forces are on the retreat. We'll have this place cleaned out soon.
			string_id message = new string_id (c_stringFile, "s_4");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishBossDroid (player, npc);

			//-- NPC: So you took down that prototype droid eh? Well done! I honestly didn't think you could pull it off.
			string_id message = new string_id (c_stringFile, "s_6");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBossDroidActive (player, npc))
		{
			//-- NPC: You still need to take down the prototype droid.
			string_id message = new string_id (c_stringFile, "s_8");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinished (player, npc))
		{
			//-- NPC: Well done. You took down five droidekas, not a small feat by any standard. However, I've had reports of a new type of droid. A prototype if you will, somewhere in the bottom of the complex. This one is supposed to be a tough one, you might want to bring some friends if you're going to try to take it down.
			string_id message = new string_id (c_stringFile, "s_10");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm up for it.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I think I'd better pass on this one.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_12");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_16");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishDroideka (player, npc);

			//-- NPC: Well done! That's five less droidekas that'll be gunning for us.
			string_id message = new string_id (c_stringFile, "s_36");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_70");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isDroidekaActive (player, npc))
		{
			//-- NPC: You still need to take down five Droidekas.
			string_id message = new string_id (c_stringFile, "s_34");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDFinished (player, npc))
		{
			//-- NPC: With the number of Super Battle Droids reduced we're now looking to strike at the the core of the facility. If you're up for it I want you to go after the droidekas that guard the center of the facility.
			string_id message = new string_id (c_stringFile, "s_38");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Dismantled Droidekas coming right up.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I got some other things I need to see to first.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_40");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishSBD (player, npc);

			//-- NPC: Ten piles of Super Battle Droid Scrap! Good job. With those gone the eventual assault on the factory core will be a lot easier.
			string_id message = new string_id (c_stringFile, "s_48");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isSBDActive (player, npc))
		{
			//-- NPC: I need to you cut down the number of Super Battle Droids.
			string_id message = new string_id (c_stringFile, "s_49");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDFinished (player, npc))
		{
			//-- NPC: Are you ready for another fight?
			string_id message = new string_id (c_stringFile, "s_50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure what do you need destroyed?
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I better not.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDFinishTaskActive (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_signalToFinishBD (player, npc);

			//-- NPC: Looks like you cut through the battle droids without any trouble. Well done. With their numbers reduced we can start gunning for the bigger game.
			string_id message = new string_id (c_stringFile, "s_51");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So what's next?
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDActive (player, npc))
		{
			//-- NPC: You still need to thin out the numbers of Battle Droids out there.
			string_id message = new string_id (c_stringFile, "s_52");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition_isBDNotActiveOrComplete (player, npc))
		{
			//-- NPC: Hello there, I'm looking for someone to help us out by destroying the droids that are swarming the facility. Are you up for a little fighting?
			string_id message = new string_id (c_stringFile, "s_53");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That sounds simple enough.
			boolean hasResponse0 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks.
			boolean hasResponse1 = false;
			if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_55");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int corellia_droid_factory_sergeant_mener_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hello there, I'm looking for someone to help us out by destroying the droids that are swarming the facility. Are you up for a little fighting?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That sounds simple enough.
	if (response == "s_55")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			corellia_droid_factory_sergeant_mener_action_grantBDQuest (player, npc);

			//-- NPC: Good to hear. I need to you to focus on destroying at least ten Battle Droids in the corridors. You'll find them all over the place once you leave the command post. Return to me once you've put down ten of the walking scrap heaps.
			string_id message = new string_id (c_stringFile, "s_57");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks.
	if (response == "s_67")
	{
		//-- [NOTE] 
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			//-- NPC: Stop wasting my time then.
			string_id message = new string_id (c_stringFile, "s_69");
			utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isTangible (self)) || (isPlayer (self)))
		detachScript(self, "conversation.corellia_droid_factory_sergeant_mener");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.corellia_droid_factory_sergeant_mener");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinished (player, npc))
	{
		//-- NPC: Good to see you again. Thanks to you the droid forces are on the retreat. We'll have this place cleaned out soon.
		string_id message = new string_id (c_stringFile, "s_4");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBossDroidFinishTaskActive (player, npc))
	{
		corellia_droid_factory_sergeant_mener_action_signalToFinishBossDroid (player, npc);

		//-- NPC: So you took down that prototype droid eh? Well done! I honestly didn't think you could pull it off.
		string_id message = new string_id (c_stringFile, "s_6");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBossDroidActive (player, npc))
	{
		//-- NPC: You still need to take down the prototype droid.
		string_id message = new string_id (c_stringFile, "s_8");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinished (player, npc))
	{
		//-- NPC: Well done. You took down five droidekas, not a small feat by any standard. However, I've had reports of a new type of droid. A prototype if you will, somewhere in the bottom of the complex. This one is supposed to be a tough one, you might want to bring some friends if you're going to try to take it down.
		string_id message = new string_id (c_stringFile, "s_10");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm up for it.
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I think I'd better pass on this one.
		boolean hasResponse1 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_12");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_16");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 4);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isDroidekaFinishTaskActive (player, npc))
	{
		corellia_droid_factory_sergeant_mener_action_signalToFinishDroideka (player, npc);

		//-- NPC: Well done! That's five less droidekas that'll be gunning for us.
		string_id message = new string_id (c_stringFile, "s_36");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thanks.
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_70");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 7);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isDroidekaActive (player, npc))
	{
		//-- NPC: You still need to take down five Droidekas.
		string_id message = new string_id (c_stringFile, "s_34");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isSBDFinished (player, npc))
	{
		//-- NPC: With the number of Super Battle Droids reduced we're now looking to strike at the the core of the facility. If you're up for it I want you to go after the droidekas that guard the center of the facility.
		string_id message = new string_id (c_stringFile, "s_38");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Dismantled Droidekas coming right up.
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I got some other things I need to see to first.
		boolean hasResponse1 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_40");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_44");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 9);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isSBDFinishTaskActive (player, npc))
	{
		corellia_droid_factory_sergeant_mener_action_signalToFinishSBD (player, npc);

		//-- NPC: Ten piles of Super Battle Droid Scrap! Good job. With those gone the eventual assault on the factory core will be a lot easier.
		string_id message = new string_id (c_stringFile, "s_48");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thanks.
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_71");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 12);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isSBDActive (player, npc))
	{
		//-- NPC: I need to you cut down the number of Super Battle Droids.
		string_id message = new string_id (c_stringFile, "s_49");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBDFinished (player, npc))
	{
		//-- NPC: Are you ready for another fight?
		string_id message = new string_id (c_stringFile, "s_50");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Sure what do you need destroyed?
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I better not.
		boolean hasResponse1 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_58");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_59");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 14);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBDFinishTaskActive (player, npc))
	{
		corellia_droid_factory_sergeant_mener_action_signalToFinishBD (player, npc);

		//-- NPC: Looks like you cut through the battle droids without any trouble. Well done. With their numbers reduced we can start gunning for the bigger game.
		string_id message = new string_id (c_stringFile, "s_51");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: So what's next?
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_72");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 19);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBDActive (player, npc))
	{
		//-- NPC: You still need to thin out the numbers of Battle Droids out there.
		string_id message = new string_id (c_stringFile, "s_52");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (corellia_droid_factory_sergeant_mener_condition_isBDNotActiveOrComplete (player, npc))
	{
		//-- NPC: Hello there, I'm looking for someone to help us out by destroying the droids that are swarming the facility. Are you up for a little fighting?
		string_id message = new string_id (c_stringFile, "s_53");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: That sounds simple enough.
		boolean hasResponse0 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: No thanks.
		boolean hasResponse1 = false;
		if (corellia_droid_factory_sergeant_mener_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_55");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_67");

			utils.setScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId", 21);

			npcStartConversation (player, npc, "corellia_droid_factory_sergeant_mener", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "corellia_droid_factory_sergeant_mener")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

	if (branchId == 4 && corellia_droid_factory_sergeant_mener_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && corellia_droid_factory_sergeant_mener_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && corellia_droid_factory_sergeant_mener_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && corellia_droid_factory_sergeant_mener_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && corellia_droid_factory_sergeant_mener_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && corellia_droid_factory_sergeant_mener_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && corellia_droid_factory_sergeant_mener_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && corellia_droid_factory_sergeant_mener_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.corellia_droid_factory_sergeant_mener.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

