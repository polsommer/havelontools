// ======================================================================
//
// death_watch_imperial_herald.script
// Copyright 2003, Sony Online Entertainment
// All Rights Reserved.
//
// DO NOT EDIT THIS AUTO-GENERATED FILE.  PLEASE USE THE CONVERATION EDITOR!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/death_watch_imperial_herald";

// ======================================================================
// Script Conditions
// ======================================================================

boolean death_watch_imperial_herald_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_ImperialCheck (obj_id player, obj_id npc)
{
	string playerFaction = factions.getFaction(player);
	if ( playerFaction.equals("Imperial") )
		return true;
	
	return false;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_BloodCheck (obj_id player, obj_id npc)
{
if ( utils.playerHasItemByTemplate(player, "object/tangible/loot/dungeon/death_watch_bunker/blood_vial.iff") )
		return true;
		
return false;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_RewardCheck (obj_id player, obj_id npc)
{
	if(!hasObjVar(player, "death_watch_herald.imperialfinish"))
		return true;
		
return false;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_dungeonInactive (obj_id player, obj_id npc)
{
	string isDungeonActive = getConfigSetting("Dungeon", "Death_Watch");
	if ( isDungeonActive == null || isDungeonActive == "false" || isDungeonActive == "0")
		return true;
		
return false;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_QuestComplete (obj_id player, obj_id npc)
{
	if(hasObjVar(player, "death_watch_herald.imperialfinish"))
		return true;

return false;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_ReturnCheck (obj_id player, obj_id npc)
{
	if (hasObjVar(player, "death_watch_herald.imperialquest"))
		return true;
		
return false;
}

// ----------------------------------------------------------------------

boolean death_watch_imperial_herald_condition_notImperial (obj_id player, obj_id npc)
{
	string playerFaction = factions.getFaction(player);
	if ( playerFaction == null || !playerFaction.equals("Imperial") )
		return true;
	
	return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void death_watch_imperial_herald_action_RewardGive (obj_id player, obj_id npc)
{
	if (!hasObjVar(player, "death_watch_herald.imperialfinish"))
	{
		if (isIdValid(player))
		{
	 		obj_id objInventory = utils.getInventoryContainer(player);
			if(isIdValid(objInventory)) 
			{
				obj_id[] objContents = utils.getContents(objInventory);
	
				if( objContents != null )
				{					
					for( int intI = 0; intI<objContents.length; intI++ )
					{
						if ( isIdValid(objContents[intI]) )
						{
							string strItemTemplate = getTemplateName(objContents[intI]);
							if( strItemTemplate=="object/tangible/loot/dungeon/death_watch_bunker/blood_vial.iff" )
							{
								destroyObject( objContents[intI] );
							
								factions.addFactionStanding(player, "Imperial", 500);
								setObjVar(player, "death_watch_herald.imperialfinish", true);
								
							}
						}
					}		
				}
			}
		}
  	}
}

// ----------------------------------------------------------------------

void death_watch_imperial_herald_action_Questaccept (obj_id player, obj_id npc)
{
setObjVar(player, "death_watch_herald.imperialquest", true);
setObjVar(player, "death_watch_herald.destroy", true);
}

// ----------------------------------------------------------------------

void death_watch_imperial_herald_action_QuestRemove (obj_id player, obj_id npc)
{
removeObjVar(player, "death_watch_herald.imperialquest");
removeObjVar(player, "death_watch_herald.destroy");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "npc.conversation.death_watch_imperial_herald");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	
	setName(self, "Commander D`krn");
	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "npc.conversation.death_watch_imperial_herald");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	if (ai_lib.isInCombat (self) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (death_watch_imperial_herald_condition_dungeonInactive (player, self))
	{
		//-- NPC: I am incredibly busy right now. The Empire demands that I concentrate fully on my assignment. Come back a little later and talk with me. I may have a task for you to do.
		string_id message = new string_id (c_stringFile, "s_2e8ff1b4");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_imperial_herald_condition_QuestComplete (player, self))
	{
		//-- NPC: Soldier. How may I help you? You are well viewed in the eyes of the Empire for your help earlier.
		string_id message = new string_id (c_stringFile, "s_68732e54");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Good! Bye!
		boolean hasResponse0 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I need to find the hideout again.
		boolean hasResponse1 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_aaed8520");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5bc39fc9");

			setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 2);

			npcStartConversation (player, self, "death_watch_imperial_herald", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_imperial_herald_condition_ReturnCheck (player, self))
	{
		//-- NPC: You have returned! Did you complete your mission?
		string_id message = new string_id (c_stringFile, "s_1a897bb0");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I have your blood sample right here.
		boolean hasResponse0 = false;
		if (death_watch_imperial_herald_condition_BloodCheck (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I need more information regarding my mission.
		boolean hasResponse1 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I quit!
		boolean hasResponse2 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: No, I'm still looking into it.
		boolean hasResponse3 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4f1e472e");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_55aa1278");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_f70821a3");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_dc839e59");

			setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 5);

			npcStartConversation (player, self, "death_watch_imperial_herald", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_imperial_herald_condition_notImperial (player, self))
	{
		//-- NPC: I do not acknowledge those that do not belong to the Empire. Be gone.
		string_id message = new string_id (c_stringFile, "s_d441c51a");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (death_watch_imperial_herald_condition_ImperialCheck (player, self))
	{
		//-- NPC: Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?
		string_id message = new string_id (c_stringFile, "s_527f9e64");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No, it sounds dangerous.
		boolean hasResponse0 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Yes, I will!
		boolean hasResponse1 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: Wait. Who are these Death Watch operatives?
		boolean hasResponse2 = false;
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_8107be6d");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_210b4c5b");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_ecc5dd3c");

			setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 12);

			npcStartConversation (player, self, "death_watch_imperial_herald", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "death_watch_imperial_herald")
		return SCRIPT_CONTINUE;

	int branchId = getIntObjVar (player, "conversation.death_watch_imperial_herald.branchId");

	//-- [BRANCH NOTE] 
	//-- NPC: Soldier. How may I help you? You are well viewed in the eyes of the Empire for your help earlier.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Good! Bye!
	if (branchId == 2 && response == "s_aaed8520")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: You are dismissed.
			string_id message = new string_id (c_stringFile, "s_406804c7");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Soldier. How may I help you? You are well viewed in the eyes of the Empire for your help earlier.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Soldier. How may I help you? You are well viewed in the eyes of the Empire for your help earlier.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to find the hideout again.
	if (branchId == 2 && response == "s_5bc39fc9")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: The Death Watch hideout can be found on Endor in the northwestern part of the planet. Be cautious and bring your friends with you. I hear they do not take prisoners and enjoying killing intruders.
			string_id message = new string_id (c_stringFile, "s_16f71658");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Soldier. How may I help you? You are well viewed in the eyes of the Empire for your help earlier.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You have returned! Did you complete your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have your blood sample right here.
	if (branchId == 5 && response == "s_4f1e472e")
	{
		//-- [NOTE] 
		if (!death_watch_imperial_herald_condition_RewardCheck (player, self))
		{
			//-- NPC: I can only accept so many samples. We have what we need now. Thank you, however, for checking back with us. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_b2cb2cbf");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (death_watch_imperial_herald_condition_RewardCheck (player, self))
		{
			death_watch_imperial_herald_action_RewardGive (player, self);

			//-- NPC: Excellent! You have done great work for the Empire. I can only give you very little. You have my gratitude.
			string_id message = new string_id (c_stringFile, "s_2c258e47");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You have returned! Did you complete your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You have returned! Did you complete your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need more information regarding my mission.
	if (branchId == 5 && response == "s_55aa1278")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: The Death Watch Hideout is located on Endor and can be found in the northwestern part of the planet. You'll need to find the leader and destroy him. Be sure to bring back a blood sample. That is all.
			string_id message = new string_id (c_stringFile, "s_4e028860");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You have returned! Did you complete your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You have returned! Did you complete your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I quit!
	if (branchId == 5 && response == "s_f70821a3")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			death_watch_imperial_herald_action_QuestRemove (player, self);

			//-- NPC: I am sorry to hear this. We were so close to our goal. Very well, then. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_79b531ae");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You have returned! Did you complete your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You have returned! Did you complete your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, I'm still looking into it.
	if (branchId == 5 && response == "s_dc839e59")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: Very well. Be quick about it and return to us with good news!
			string_id message = new string_id (c_stringFile, "s_382404f");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You have returned! Did you complete your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, it sounds dangerous.
	if (branchId == 12 && response == "s_8107be6d")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: I see. Well, then. We will wait for another promising subject to accept the mission. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_71f459c7");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I will!
	if (branchId == 12 && response == "s_210b4c5b")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.
			string_id message = new string_id (c_stringFile, "s_126d6e08");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Uh. Why do you want blood?
			boolean hasResponse0 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Yes, sir! Right away!
			boolean hasResponse1 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_43908466");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e62fc90c");

				setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Wait. Who are these Death Watch operatives?
	if (branchId == 12 && response == "s_ecc5dd3c")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: A well-trained group of killers and thieves. If I were you, I'd be careful. It would be smart to bring along a few of your friends, but it's up to you.
			string_id message = new string_id (c_stringFile, "s_1b104a9f");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay. I will help.
			boolean hasResponse0 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Sounds too dangerous for me.
			boolean hasResponse1 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6decea2a");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6405e2a0");

				setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ah, a fellow member of the glorious Empire! You came just in time. We need one of our trusted soldiers to fetch something for us. It is a chance, not only to fulfill a difficult mission and receive praise from the Empire, but to gather information regarding the Death Watch and their point of operations. Are you interested?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uh. Why do you want blood?
	if (branchId == 14 && response == "s_43908466")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?
			string_id message = new string_id (c_stringFile, "s_622c3f31");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir!
			boolean hasResponse0 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, that's just... wrong!
			boolean hasResponse1 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b6b25f13");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f61ed984");

				setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir! Right away!
	if (branchId == 14 && response == "s_e62fc90c")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			death_watch_imperial_herald_action_Questaccept (player, self);

			//-- NPC: Good! Now go to the Death Watch hideout and slay this so-called leader. Don't forget to bring back a sample of his blood for us. We'll need it for future... experimentations.
			string_id message = new string_id (c_stringFile, "s_e478107c");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir!
	if (branchId == 15 && response == "s_b6b25f13")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			death_watch_imperial_herald_action_Questaccept (player, self);

			//-- NPC: Good, then! Be quick about it!
			string_id message = new string_id (c_stringFile, "s_732f795f");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, that's just... wrong!
	if (branchId == 15 && response == "s_f61ed984")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: Morals?! Get out of here! You are a disgrace to the Empire.
			string_id message = new string_id (c_stringFile, "s_2979d13");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: A well-trained group of killers and thieves. If I were you, I'd be careful. It would be smart to bring along a few of your friends, but it's up to you.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay. I will help.
	if (branchId == 19 && response == "s_6decea2a")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.
			string_id message = new string_id (c_stringFile, "s_126d6e08");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Uh. Why do you want blood?
			boolean hasResponse0 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Yes, sir! Right away!
			boolean hasResponse1 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_43908466");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e62fc90c");

				setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'A well-trained group of killers and thieves. If I were you, I'd be careful. It would be smart to bring along a few of your friends, but it's up to you.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: A well-trained group of killers and thieves. If I were you, I'd be careful. It would be smart to bring along a few of your friends, but it's up to you.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds too dangerous for me.
	if (branchId == 19 && response == "s_6405e2a0")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: I see. Well, then. We will wait for another promising subject to accept the mission. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_71f459c7");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'A well-trained group of killers and thieves. If I were you, I'd be careful. It would be smart to bring along a few of your friends, but it's up to you.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uh. Why do you want blood?
	if (branchId == 20 && response == "s_43908466")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?
			string_id message = new string_id (c_stringFile, "s_622c3f31");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir!
			boolean hasResponse0 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, that's just... wrong!
			boolean hasResponse1 = false;
			if (death_watch_imperial_herald_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b6b25f13");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f61ed984");

				setObjVar (player, "conversation.death_watch_imperial_herald.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir! Right away!
	if (branchId == 20 && response == "s_e62fc90c")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			death_watch_imperial_herald_action_Questaccept (player, self);

			//-- NPC: Good! Now go to the Death Watch hideout and slay this so-called leader. Don't forget to bring back a sample of his blood for us. We'll need it for future... experimentations.
			string_id message = new string_id (c_stringFile, "s_e478107c");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Excellent, soldier! You'll need to find the Death Watch hideout on Endor. It can be located in the northwestern part of the planet. We need for you to find their leader and bring a sample of his blood back to us. You will be well rewarded.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir!
	if (branchId == 21 && response == "s_b6b25f13")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			death_watch_imperial_herald_action_Questaccept (player, self);

			//-- NPC: Good, then! Be quick about it!
			string_id message = new string_id (c_stringFile, "s_732f795f");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, that's just... wrong!
	if (branchId == 21 && response == "s_f61ed984")
	{
		//-- [NOTE] 
		if (death_watch_imperial_herald_condition__defaultCondition (player, self))
		{
			//-- NPC: Morals?! Get out of here! You are a disgrace to the Empire.
			string_id message = new string_id (c_stringFile, "s_2979d13");
			removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'A soldier shouldn't ask his commanding officer questions! But if you must know... The Empire seems to think that leader of the Death Watch would make a good candidate for a Prime Clone for a new batch of stormtroopers. However, we'll need for you to kill this so-called leader. There's no sense in keeping him around. We've learned our lesson from the past. Well. Will you accept your mission?' were false.");

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	removeObjVar (player, "conversation.death_watch_imperial_herald.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

