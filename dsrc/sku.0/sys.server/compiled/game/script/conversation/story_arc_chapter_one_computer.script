// ======================================================================
//
// story_arc_chapter_one_computer.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/story_arc_chapter_one_computer";

// ======================================================================
// Script Conditions
// ======================================================================

boolean story_arc_chapter_one_computer_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean story_arc_chapter_one_computer_condition_isOnFirstTask (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "som_story_arc_chapter_one_03", "mustafar_uplink_one");
}

// ----------------------------------------------------------------------

boolean story_arc_chapter_one_computer_condition_hasCompletedFirstTask (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedTask(player, "som_story_arc_chapter_one_03", "mustafar_uplink_one");
}

// ----------------------------------------------------------------------

boolean story_arc_chapter_one_computer_condition_hasCompletedMission (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "som_story_arc_chapter_one_03");
}

// ----------------------------------------------------------------------

boolean story_arc_chapter_one_computer_condition_isOnStoryArc (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "som_story_arc_chapter_one_02") || groundquests.isTaskActive(player, "som_story_arc_chapter_one_02", "mustafar_motor_four");
}

// ----------------------------------------------------------------------

boolean story_arc_chapter_one_computer_condition_ChapOneFirstStep (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "som_story_arc_chapter_one_01", "mustafar_orc_two");
}

// ----------------------------------------------------------------------

boolean story_arc_chapter_one_computer_condition_abandonedFirstMission (obj_id player, obj_id npc)
{
	if (groundquests.hasCompletedQuest(player, "som_story_arc_chapter_one_01") && !groundquests.isQuestActive(player, "som_story_arc_chapter_one_02"))
		return true;
	else
		return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void story_arc_chapter_one_computer_action_makeUpLink (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "som_story_arc_chapter_one_03");
}

// ----------------------------------------------------------------------

void story_arc_chapter_one_computer_action_fixTerminal (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "mustafar_orc_complete");
	groundquests.grantQuest(player, "som_story_arc_chapter_one_02");
}

// ----------------------------------------------------------------------

void story_arc_chapter_one_computer_action_startedComputerTalk (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "access_computer_fixed");
}

// ----------------------------------------------------------------------

void story_arc_chapter_one_computer_action_returnedToComputer (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "mustafar_uplink_make_transfer");
}

// ----------------------------------------------------------------------

void story_arc_chapter_one_computer_action_regrantMission (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "som_story_arc_chapter_one_02");
}

// ----------------------------------------------------------------------

void story_arc_chapter_one_computer_action_sendTransferSignal (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "mustafar_uplink_make_transfer");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int story_arc_chapter_one_computer_handleBranch1 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [There is no response.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh, yeah...he is gone now.
	if (response == "s_74")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: [no response]
			string_id message = new string_id (c_stringFile, "s_75");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [There is no response. The ship's AI must have already transferred itself to that facility to the northeast.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Strange...
	if (response == "s_72")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: [no response]
			string_id message = new string_id (c_stringFile, "s_73");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Shouldn't you be getting that uplink hooked back up? I know that the cavern is swarming with kubaza beetles, but they are not armed, so you shouldn't have any trouble.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, I will go get the uplink set up.
	if (response == "s_77")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Query: I wonder what would happen if kubaza beetles were armed? Does the man make the gun or does the gun make the man...or in this case, beetle.
			string_id message = new string_id (c_stringFile, "s_78");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Query: Where am I?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You mean that you don't know?
	if (response == "s_23")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Application: Searching memory banks. Thruster control; navigation computer; large, bulbous body. I think I am a starship.
			string_id message = new string_id (c_stringFile, "s_25");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, you are a crashed Old Republic cruiser.
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_26");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Application: Searching memory banks. Thruster control; navigation computer; large, bulbous body. I think I am a starship.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, you are a crashed Old Republic cruiser.
	if (response == "s_26")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: This is most interesting. I do not recall being a starship. My blasters are offline.
			string_id message = new string_id (c_stringFile, "s_27");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You do not recall... Did you... What do you need blasters for?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_28");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is most interesting. I do not recall being a starship. My blasters are offline.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You do not recall... Did you... What do you need blasters for?
	if (response == "s_28")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Statement: It is better to be safe than sorry.
			string_id message = new string_id (c_stringFile, "s_29");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't think you are going to need your blasters.
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_30");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Statement: It is better to be safe than sorry.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think you are going to need your blasters.
	if (response == "s_30")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Statement: It has been my experience that it is much harder to blow things up without them. Of course, I could just land on them, but my thrusters appear to be offline as well.
			string_id message = new string_id (c_stringFile, "s_32");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, moving on. I need to ask you some questions.
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_34");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Statement: It has been my experience that it is much harder to blow things up without them. Of course, I could just land on them, but my thrusters appear to be offline as well.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, moving on. I need to ask you some questions.
	if (response == "s_34")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I believe I have located it. I find it very odd that it isn't here. It should be, but then again I have been offline for a very long time.
			string_id message = new string_id (c_stringFile, "s_36");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Located what?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_38");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I believe I have located it. I find it very odd that it isn't here. It should be, but then again I have been offline for a very long time.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Located what?
	if (response == "s_38")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't think you need to worry about that. It is more of a personal problem. You wanted to ask me some questions? I might have answers.
			string_id message = new string_id (c_stringFile, "s_40");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I need to find out a way to increase the output in a mining facility.
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_42");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't think you need to worry about that. It is more of a personal problem. You wanted to ask me some questions? I might have answers.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need to find out a way to increase the output in a mining facility.
	if (response == "s_42")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh, I was hoping it would involve blasters. If you wait for a moment, I will search my database to see if there is any information on mining facility: increased productivity of...
			string_id message = new string_id (c_stringFile, "s_44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You really like blasters.
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh, I was hoping it would involve blasters. If you wait for a moment, I will search my database to see if there is any information on mining facility: increased productivity of...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You really like blasters.
	if (response == "s_46")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Statement: What is not to like? The light, the noise, the screaming... Oh, I have located the information on the mining facility. If you reroute the lower subroutine in the main reactor to the...QUERY MISSING...output increase of 300 percent. I hope that answered your query to satisfaction.
			string_id message = new string_id (c_stringFile, "s_48");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Wait! What about that part missing in the middle?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_50");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Statement: What is not to like? The light, the noise, the screaming... Oh, I have located the information on the mining facility. If you reroute the lower subroutine in the main reactor to the...QUERY MISSING...output increase of 300 percent. I hope that answered your query to satisfaction.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Wait! What about that part missing in the middle?
	if (response == "s_50")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: You mean the QUERY MISSING part? I am afraid that is all that is located in my memory banks. I cannot be positive, but I do not think I am functioning correctly. You should transfer me to the Republic facility that is nearby. They will definitely have the information you require.
			string_id message = new string_id (c_stringFile, "s_52");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What Republic facility?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_54");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You mean the QUERY MISSING part? I am afraid that is all that is located in my memory banks. I cannot be positive, but I do not think I am functioning correctly. You should transfer me to the Republic facility that is nearby. They will definitely have the information you require.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What Republic facility?
	if (response == "s_54")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: The one that is several clicks to the northeast of this location. Was there another 5000-year-old relic of the past in this area I was not aware of? You simply need to hook up the satellite uplink to my mainframe and I can transfer to that facility. From there, I am sure I can find what you are looking for.
			string_id message = new string_id (c_stringFile, "s_56");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Now there is a satellite uplink around here?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_58");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The one that is several clicks to the northeast of this location. Was there another 5000-year-old relic of the past in this area I was not aware of? You simply need to hook up the satellite uplink to my mainframe and I can transfer to that facility. From there, I am sure I can find what you are looking for.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Now there is a satellite uplink around here?
	if (response == "s_58")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Answer: Of course. The strange people with all the droids left it not too long ago. You just need to enter the cavern and the automated repair system will come online. Like the nice mindless droid it is, it will reconnect the uplink. Of course, the kubaza beetles might be a problem. Since you lack a guidance system, I will supply you with the location of the cavern.
			string_id message = new string_id (c_stringFile, "s_60");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kubaza beetles?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_91");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Answer: Of course. The strange people with all the droids left it not too long ago. You just need to enter the cavern and the automated repair system will come online. Like the nice mindless droid it is, it will reconnect the uplink. Of course, the kubaza beetles might be a problem. Since you lack a guidance system, I will supply you with the location of the cavern.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kubaza beetles?
	if (response == "s_91")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: While running a short-range scan of the area, I discovered that the kubaza beetles have moved into that cavern. It was probably them that tore down the uplink relay in the first place. There is a ninety-eight percent chance that they will not like you being there. I recommend that you kill them before they kill you.
			string_id message = new string_id (c_stringFile, "s_92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And then you can get me the information I need?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_94");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: While running a short-range scan of the area, I discovered that the kubaza beetles have moved into that cavern. It was probably them that tore down the uplink relay in the first place. There is a ninety-eight percent chance that they will not like you being there. I recommend that you kill them before they kill you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And then you can get me the information I need?
	if (response == "s_94")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Answer: I am close to positive that the information you need will be there. Of course, I have noticed that I am occasionally wrong. But in this case, I think I am correct. You should hook up the uplink. Besides, I am sure you will get to blast a few things along the way.
			string_id message = new string_id (c_stringFile, "s_96");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why do you think that?
			boolean hasResponse0 = false;
			if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_98");

				utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Answer: I am close to positive that the information you need will be there. Of course, I have noticed that I am occasionally wrong. But in this case, I think I am correct. You should hook up the uplink. Besides, I am sure you will get to blast a few things along the way.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why do you think that?
	if (response == "s_98")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			story_arc_chapter_one_computer_action_makeUpLink (player, npc);

			//-- NPC: Statement: Things have a tendency to get blasted when I am around. ...I wish my blasters worked.
			string_id message = new string_id (c_stringFile, "s_100");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [This terminal seems to be operational, but is missing its circuit boards.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I should get is some new circuit boards.
	if (response == "s_70")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: [no response]
			string_id message = new string_id (c_stringFile, "s_71");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [This terminal would be functional if its circuit boards were replaced.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Maybe I should find it some circuit boards.
	if (response == "s_81")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: [no response]
			string_id message = new string_id (c_stringFile, "s_83");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int story_arc_chapter_one_computer_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [This terminal appears to be offline]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: This doesn't appear to be working.
	if (response == "s_87")
	{
		//-- [NOTE] 
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			//-- NPC: [no response]
			string_id message = new string_id (c_stringFile, "s_89");
			utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.story_arc_chapter_one_computer");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition_hasCompletedMission (player, npc))
	{
		//-- NPC: [There is no response.]
		string_id message = new string_id (c_stringFile, "s_13");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Oh, yeah...he is gone now.
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_74");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 1);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition_hasCompletedFirstTask (player, npc))
	{
		story_arc_chapter_one_computer_action_sendTransferSignal (player, npc);

		//-- NPC: [There is no response. The ship's AI must have already transferred itself to that facility to the northeast.]
		string_id message = new string_id (c_stringFile, "s_7");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Strange...
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_72");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 3);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition_isOnFirstTask (player, npc))
	{
		//-- NPC: Shouldn't you be getting that uplink hooked back up? I know that the cavern is swarming with kubaza beetles, but they are not armed, so you shouldn't have any trouble.
		string_id message = new string_id (c_stringFile, "s_76");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Okay, I will go get the uplink set up.
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_77");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 5);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition_isOnStoryArc (player, npc))
	{
		story_arc_chapter_one_computer_action_startedComputerTalk (player, npc);

		//-- NPC: Query: Where am I?
		string_id message = new string_id (c_stringFile, "s_16");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You mean that you don't know?
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_23");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 7);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition_abandonedFirstMission (player, npc))
	{
		story_arc_chapter_one_computer_action_regrantMission (player, npc);

		//-- NPC: [This terminal seems to be operational, but is missing its circuit boards.]
		string_id message = new string_id (c_stringFile, "s_105");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I should get is some new circuit boards.
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_70");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 22);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition_ChapOneFirstStep (player, npc))
	{
		story_arc_chapter_one_computer_action_fixTerminal (player, npc);

		//-- NPC: [This terminal would be functional if its circuit boards were replaced.]
		string_id message = new string_id (c_stringFile, "s_80");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Maybe I should find it some circuit boards.
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_81");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 24);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
	{
		//-- NPC: [This terminal appears to be offline]
		string_id message = new string_id (c_stringFile, "s_86");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: This doesn't appear to be working.
		boolean hasResponse0 = false;
		if (story_arc_chapter_one_computer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_87");

			utils.setScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId", 26);

			npcStartConversation (player, npc, "story_arc_chapter_one_computer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "story_arc_chapter_one_computer")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

	if (branchId == 1 && story_arc_chapter_one_computer_handleBranch1 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && story_arc_chapter_one_computer_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && story_arc_chapter_one_computer_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && story_arc_chapter_one_computer_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && story_arc_chapter_one_computer_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && story_arc_chapter_one_computer_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && story_arc_chapter_one_computer_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && story_arc_chapter_one_computer_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && story_arc_chapter_one_computer_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && story_arc_chapter_one_computer_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && story_arc_chapter_one_computer_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && story_arc_chapter_one_computer_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && story_arc_chapter_one_computer_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && story_arc_chapter_one_computer_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && story_arc_chapter_one_computer_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && story_arc_chapter_one_computer_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && story_arc_chapter_one_computer_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && story_arc_chapter_one_computer_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && story_arc_chapter_one_computer_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && story_arc_chapter_one_computer_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.story_arc_chapter_one_computer.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

