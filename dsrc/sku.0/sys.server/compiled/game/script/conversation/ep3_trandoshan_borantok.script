// ======================================================================
//
// ep3_trandoshan_borantok.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_trandoshan_borantok";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_trandoshan_borantok_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_trandoshan_borantok_condition_hasCompletedTask01 (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_trando_borantok_02", "waitForSignal01");
}

// ----------------------------------------------------------------------

boolean ep3_trandoshan_borantok_condition_hasCompletedQuest02 (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_trando_borantok_02");
}

// ----------------------------------------------------------------------

boolean ep3_trandoshan_borantok_condition_isOnQuest01 (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "ep3_trando_borantok_01");
}

// ----------------------------------------------------------------------

boolean ep3_trandoshan_borantok_condition_isOnQuest02 (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedTask(player, "ep3_trando_borantok_02", "waitForSignal01");
}

// ----------------------------------------------------------------------

boolean ep3_trandoshan_borantok_condition_hasCompletedTask02 (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_trando_borantok_02", "waitForSignal03");
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_trandoshan_borantok_action_giveQuest01 (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "ep3_trando_borantok_01");
}

// ----------------------------------------------------------------------

void ep3_trandoshan_borantok_action_doSignal01 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "reportToBorantok");
}

// ----------------------------------------------------------------------

void ep3_trandoshan_borantok_action_doSignal02 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "rewardBorantok");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_trandoshan_borantok_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did your little conversation with the bartender go well?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let's just say he isn't going to be talking to anyone.
	if (response == "s_511")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "celebrate");

			ep3_trandoshan_borantok_action_doSignal02 (player, npc);

			//-- NPC: Yes. Now I can finally relax. You have done well in helping me and I won't forget the lessons I have learned from this experience. As promised here is your reward. I think I will go to the cantina and celebrate with a few of those Blessed Gutcrunchers.
			string_id message = new string_id (c_stringFile, "s_513");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So, did Unluto promise not to talk?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I haven't convinced him yet.
	if (response == "s_517")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "gesticulate_wildly");

			//-- NPC: Great...just great. How hard can it be to threaten a bartender. He is all soft and pink. Do I have to remind you that your neck is on the line too?
			string_id message = new string_id (c_stringFile, "s_519");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did you manage to get rid of those bodies yet? I really hope so because my clan chief is in a particularly bad mood today.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah, Negal and I dumped them.
	if (response == "s_523")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "laugh");

			//-- NPC: That is the best news that I have heard all day. You know how I promised to reward you if you helped me out? Well, there is one more...very minor...thing that I need you to do for me before I can pay you.
			string_id message = new string_id (c_stringFile, "s_525");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Oh really? And what would that thing be?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I did what you asked...now pay up!
			boolean hasResponse1 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_527");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_543");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is the best news that I have heard all day. You know how I promised to reward you if you helped me out? Well, there is one more...very minor...thing that I need you to do for me before I can pay you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh really? And what would that thing be?
	if (response == "s_527")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "smack_self");

			//-- NPC: I completely forgot that there was one other person in the bar when all that stuff went down...the bartender. Basically, we have to make sure that he doesn't talk either.
			string_id message = new string_id (c_stringFile, "s_529");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't want to kill a bartender!
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_531");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I did what you asked...now pay up!
	if (response == "s_543")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			//-- NPC: Listen...you are now in this as deeply as I am. So you had better help me out or you are going to face the wrath of my clan chief right along with me.
			string_id message = new string_id (c_stringFile, "s_545");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Fine...what else do I need to do?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_547");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I completely forgot that there was one other person in the bar when all that stuff went down...the bartender. Basically, we have to make sure that he doesn't talk either.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't want to kill a bartender!
	if (response == "s_531")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "slow_down");

			//-- NPC: Who said anything about killing the bartender? I don't want you to kill the bartender either. He serves up the best Blessed Gutcrunchers in the entire sector. All you need to do is go talk to the bartender and convince him not to tell anyone. I would recommend threats of physical violence but that is just my style. I don't care how you do it just get him not to talk about what he saw.
			string_id message = new string_id (c_stringFile, "s_533");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How do you know he hasn't already?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_535");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Who said anything about killing the bartender? I don't want you to kill the bartender either. He serves up the best Blessed Gutcrunchers in the entire sector. All you need to do is go talk to the bartender and convince him not to tell anyone. I would recommend threats of physical violence but that is just my style. I don't care how you do it just get him not to talk about what he saw.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How do you know he hasn't already?
	if (response == "s_535")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger2");

			//-- NPC: My head is still attached to my shoulders.
			string_id message = new string_id (c_stringFile, "s_537");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Good point.
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_539");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My head is still attached to my shoulders.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Good point.
	if (response == "s_539")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			ep3_trandoshan_borantok_action_doSignal01 (player, npc);

			//-- NPC: The bartender's name is Unluto and he is working in the Kachirho cantina. Make sure he doesn't say anything to anyone and then I promise that you will have payment.
			string_id message = new string_id (c_stringFile, "s_541");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Listen...you are now in this as deeply as I am. So you had better help me out or you are going to face the wrath of my clan chief right along with me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Fine...what else do I need to do?
	if (response == "s_547")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "smack_self");

			//-- NPC: I completely forgot that there was one other person in the bar when all that stuff went down...the bartender. Basically, we have to make sure that he doesn't talk either.
			string_id message = new string_id (c_stringFile, "s_529");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't want to kill a bartender!
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_531");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have you managed to get rid of those bodies yet?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet. I am still working on that.
	if (response == "s_551")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "gesticulate_wildly");

			//-- NPC: What! Don't hang around here. Go find those two Rodian bodies in Kachirho and bring them to Negal Tek'lon who is waiting for you on the Rryatt Trail. Now get out of here before someone sees us talking together.
			string_id message = new string_id (c_stringFile, "s_553");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You...maybe you can help me. I managed to get myself into a little bit of trouble. I need someone who isn't squeamish and can be discrete to help me out of a jam.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am listening.
	if (response == "s_557")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: There was this accident. And a few Rodian nobles accidentally died. I was there with a few of my friends and I just know we are going to get blamed for it. It wasn't like we had anything to do with their deaths...they all just slipped and fell...really, really hard.
			string_id message = new string_id (c_stringFile, "s_559");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Nice story. Now how about you tell me what really happened.
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_561");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am not interested in helping the likes of you.
	if (response == "s_593")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Bah...I should have known that an outsider like you wouldn't be of any use. Well, don't stand there attracting attention. Get out of here.
			string_id message = new string_id (c_stringFile, "s_595");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There was this accident. And a few Rodian nobles accidentally died. I was there with a few of my friends and I just know we are going to get blamed for it. It wasn't like we had anything to do with their deaths...they all just slipped and fell...really, really hard.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nice story. Now how about you tell me what really happened.
	if (response == "s_561")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "slow_down");

			//-- NPC: That is what really happened...fine...here is what really happened. It was an accident and they did...fall, or at least, one of them did. Me and a few of my friends were at the local cantina in Kachirho having a few drinks. We were the only ones in there except for these two infuriating Rodian nobles. You know how those Rodian nobles are, right?
			string_id message = new string_id (c_stringFile, "s_563");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I have ran across a few myself.
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: This sounds messy. I don't want to get involved.
			boolean hasResponse1 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_565");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_591");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is what really happened...fine...here is what really happened. It was an accident and they did...fall, or at least, one of them did. Me and a few of my friends were at the local cantina in Kachirho having a few drinks. We were the only ones in there except for these two infuriating Rodian nobles. You know how those Rodian nobles are, right?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have ran across a few myself.
	if (response == "s_565")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Yeah. Well they started running their mouths off. Naturally, we were just there to enjoy ourselves and asked them...very politely...to shut up. Those dumb stuffed shirts just kept right on flapping their gums at us like we weren't going to do anything. I am not sure who shot first...I am pretty sure it was me though.
			string_id message = new string_id (c_stringFile, "s_567");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So you shot them both?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_569");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: This sounds messy. I don't want to get involved.
	if (response == "s_591")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Bah...I should have known that an outsider like you wouldn't be of any use. Well, don't stand there attracting attention. Get out of here.
			string_id message = new string_id (c_stringFile, "s_595");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yeah. Well they started running their mouths off. Naturally, we were just there to enjoy ourselves and asked them...very politely...to shut up. Those dumb stuffed shirts just kept right on flapping their gums at us like we weren't going to do anything. I am not sure who shot first...I am pretty sure it was me though.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So you shot them both?
	if (response == "s_569")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "standing_placate");

			//-- NPC: No, of course not. I only shot one...the other one we threw over the edge outside the cantina. Did you know that Rodians are very bouncy? ...Me either. Any ways, after it was all over we realized that we were in a lot of trouble. Fortunately it was late so I am pretty sure no one saw what happened and we managed to hide their bodies before anyone noticed.
			string_id message = new string_id (c_stringFile, "s_571");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why? Trandoshans are well known for violence.
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_573");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No, of course not. I only shot one...the other one we threw over the edge outside the cantina. Did you know that Rodians are very bouncy? ...Me either. Any ways, after it was all over we realized that we were in a lot of trouble. Fortunately it was late so I am pretty sure no one saw what happened and we managed to hide their bodies before anyone noticed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why? Trandoshans are well known for violence.
	if (response == "s_573")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Even though they were just Rodians, they are nobility. When someone finally discovers their bodies there are going to be questions. And those questions will surely lead back to us. In order to avoid an incident with the Rodian government our clan chief will gladly make us expendable.
			string_id message = new string_id (c_stringFile, "s_575");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see. And how is it I can help you?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Tough break. Good luck with that. See ya.
			boolean hasResponse1 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_577");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_589");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Even though they were just Rodians, they are nobility. When someone finally discovers their bodies there are going to be questions. And those questions will surely lead back to us. In order to avoid an incident with the Rodian government our clan chief will gladly make us expendable.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see. And how is it I can help you?
	if (response == "s_577")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: We need someone who is not connected with the incident in any way to get the corpses out of Kachirho and get rid of them. We have another friend who is willing to meet whom ever we send down on the Rryatt Trail. We figure if we dump the bodies there either the beasties will eat them or, if they are found, everyone will assume it was just a hunting trip gone bad.
			string_id message = new string_id (c_stringFile, "s_579");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok. Where are the bodies hidden?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_581");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Tough break. Good luck with that. See ya.
	if (response == "s_589")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Bah...I should have known that an outsider like you wouldn't be of any use. Well, don't stand there attracting attention. Get out of here.
			string_id message = new string_id (c_stringFile, "s_595");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We need someone who is not connected with the incident in any way to get the corpses out of Kachirho and get rid of them. We have another friend who is willing to meet whom ever we send down on the Rryatt Trail. We figure if we dump the bodies there either the beasties will eat them or, if they are found, everyone will assume it was just a hunting trip gone bad.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok. Where are the bodies hidden?
	if (response == "s_581")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "tap_head");

			//-- NPC: Ummm...well that is part of the problem. We don't completely remember. By the time this incident happened we were pretty drunk. All we can remember is that we hid them in two different locations somewhere in...or around...Kachirho.
			string_id message = new string_id (c_stringFile, "s_583");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So I need to find these bodies and bring them to your friend?
			boolean hasResponse0 = false;
			if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_585");

				utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_trandoshan_borantok_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ummm...well that is part of the problem. We don't completely remember. By the time this incident happened we were pretty drunk. All we can remember is that we hid them in two different locations somewhere in...or around...Kachirho.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So I need to find these bodies and bring them to your friend?
	if (response == "s_585")
	{
		//-- [NOTE] 
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_multiple");

			ep3_trandoshan_borantok_action_giveQuest01 (player, npc);

			//-- NPC: Yeah, that's it. Find the bodies and bring them to Negal Tek'lon on the Rryatt Trail. He is a shady looking human but we know we can trust him. He said he will wait on the Rryatt Trail for as long as he can but that place isn't exactly safe. Once you have dumped the bodies come back to me and I promise to make it worth your while.
			string_id message = new string_id (c_stringFile, "s_587");
			utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_trandoshan_borantok");

	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_INTERESTING );
	setName(self, "Borantok");

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_INTERESTING );
	setName(self, "Borantok");

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);
	faceTo(self, player);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_trandoshan_borantok");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_trandoshan_borantok_condition_hasCompletedQuest02 (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: Just because you helped me before, doesn't mean that I want to be your friend.
		string_id message = new string_id (c_stringFile, "s_507");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_trandoshan_borantok_condition_hasCompletedTask02 (player, npc))
	{
		doAnimationAction (npc, "whisper");

		//-- NPC: Did your little conversation with the bartender go well?
		string_id message = new string_id (c_stringFile, "s_509");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Let's just say he isn't going to be talking to anyone.
		boolean hasResponse0 = false;
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_511");

			utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 2);

			npcStartConversation (player, npc, "ep3_trandoshan_borantok", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_trandoshan_borantok_condition_isOnQuest02 (player, npc))
	{
		doAnimationAction (npc, "rub_chin_thoughtful");

		//-- NPC: So, did Unluto promise not to talk?
		string_id message = new string_id (c_stringFile, "s_515");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I haven't convinced him yet.
		boolean hasResponse0 = false;
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_517");

			utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 4);

			npcStartConversation (player, npc, "ep3_trandoshan_borantok", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_trandoshan_borantok_condition_hasCompletedTask01 (player, npc))
	{
		doAnimationAction (npc, "whisper");

		//-- NPC: Did you manage to get rid of those bodies yet? I really hope so because my clan chief is in a particularly bad mood today.
		string_id message = new string_id (c_stringFile, "s_521");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yeah, Negal and I dumped them.
		boolean hasResponse0 = false;
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_523");

			utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 6);

			npcStartConversation (player, npc, "ep3_trandoshan_borantok", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_trandoshan_borantok_condition_isOnQuest01 (player, npc))
	{
		doAnimationAction (npc, "whisper");

		//-- NPC: Have you managed to get rid of those bodies yet?
		string_id message = new string_id (c_stringFile, "s_549");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Not yet. I am still working on that.
		boolean hasResponse0 = false;
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_551");

			utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 13);

			npcStartConversation (player, npc, "ep3_trandoshan_borantok", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "beckon");

		//-- NPC: You...maybe you can help me. I managed to get myself into a little bit of trouble. I need someone who isn't squeamish and can be discrete to help me out of a jam.
		string_id message = new string_id (c_stringFile, "s_555");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am listening.
		boolean hasResponse0 = false;
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I am not interested in helping the likes of you.
		boolean hasResponse1 = false;
		if (ep3_trandoshan_borantok_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_557");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_593");

			utils.setScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId", 15);

			npcStartConversation (player, npc, "ep3_trandoshan_borantok", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_trandoshan_borantok")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

	if (branchId == 2 && ep3_trandoshan_borantok_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_trandoshan_borantok_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && ep3_trandoshan_borantok_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && ep3_trandoshan_borantok_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_trandoshan_borantok_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_trandoshan_borantok_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && ep3_trandoshan_borantok_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && ep3_trandoshan_borantok_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && ep3_trandoshan_borantok_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && ep3_trandoshan_borantok_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && ep3_trandoshan_borantok_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && ep3_trandoshan_borantok_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && ep3_trandoshan_borantok_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && ep3_trandoshan_borantok_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_trandoshan_borantok_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && ep3_trandoshan_borantok_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && ep3_trandoshan_borantok_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_trandoshan_borantok.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

