// ======================================================================
//
// ep3_etyyy_johnson_smith.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_etyyy_johnson_smith";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_etyyy_johnson_smith_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_sentByJerrol (obj_id player, obj_id npc)
{
	if ( groundquests.isQuestActive(player, "ep3_hunt_jerrol_seek_johnson") ||
		groundquests.hasCompletedQuest(player, "ep3_hunt_jerrol_seek_johnson") )
	{
		if ( !groundquests.isQuestActive(player, "ep3_hunt_johnson_brody_johnson") && 
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_brody_johnson") )
		{
			return true;
		}
	}
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_lookingForRyoo (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_retrieve_ryoos_stash", "johnson_talkToRyoo");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_finishedHelpingRyoo (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_retrieve_ryoos_stash", "johnson_ryoosSalt");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_sentByChrilooc (obj_id player, obj_id npc)
{
	return ( groundquests.isQuestActive(player, "ep3_hunt_chrilooc_seek_johnson") ||
			groundquests.hasCompletedQuest(player, "ep3_hunt_chrilooc_seek_johnson") );
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_doesNotHaveBrodyQuest (obj_id player, obj_id npc)
{
	return (!groundquests.isQuestActive(player, "ep3_hunt_johnson_brody_johnson") && 
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_brody_johnson") );
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_hasPendant (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_brody_johnson", "johnson_foundPendant");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_lookingForBrodyCamp (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_brody_johnson", "johnson_searchCampsite");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_speakingToMada (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_brody_johnson", "johnson_talkToMada");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_returningFromMada (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_brody_johnson", "johnson_returnToSmith");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_doingSmithQuests (obj_id player, obj_id npc)
{	
	if ( groundquests.isQuestActive(player, "ep3_hunt_johnson_brody_johnson") || 
	groundquests.isQuestActive(player, "ep3_hunt_johnson_retrieve_ryoos_stash") ||
	groundquests.isQuestActive(player, "ep3_hunt_johnson_help_kara") ||
	groundquests.isQuestActive(player, "ep3_hunt_johnson_seek_kint")  )
	{
		return true;
	}
	
	if ( groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_brody_johnson") )
	{
		if ( !groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_retrieve_ryoos_stash") ||
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_help_kara") ||
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_seek_kint") )
		{
			return true;
		}
	}
	
	if ( groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_retrieve_ryoos_stash") )
	{
		if ( !groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_brody_johnson") ||
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_help_kara") ||
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_seek_kint") )
		{
			return true;
		}
	}
		
	return false;
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_helpingRyoo (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "ep3_hunt_johnson_retrieve_ryoos_stash");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_findingBrody (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "ep3_hunt_johnson_brody_johnson");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_completedSmithQuests (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_brody_johnson") && 
		groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_seek_kint");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_helpingKara (obj_id player, obj_id npc)
{
	return 	groundquests.isQuestActive(player, "ep3_hunt_johnson_help_kara");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_finishedKaraQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_help_kara", "johnson_deliveriesMade");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_sentToKint (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "ep3_hunt_johnson_seek_kint");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_notStartedRyoo (obj_id player, obj_id npc)
{
	return !groundquests.isQuestActive(player, "ep3_hunt_johnson_retrieve_ryoos_stash") &&
		!groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_retrieve_ryoos_stash");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_karaDeliveries (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_help_kara", "johnson_karaDeliveries");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_lookingForKara (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_hunt_johnson_help_kara", "johnson_talkToKara");
}

// ----------------------------------------------------------------------

boolean ep3_etyyy_johnson_smith_condition_needsKint (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_hunt_johnson_help_kara") && 
	!groundquests.isQuestActiveOrComplete(player, "ep3_hunt_johnson_seek_kint");
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_etyyy_johnson_smith_action_endBrodyQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "johnson_returnToSmith");
	groundquests.grantQuest(player, "ep3_hunt_vritol_reward_mount");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_giveRyooQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "ep3_hunt_johnson_retrieve_ryoos_stash");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_grantBrodyQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "ep3_hunt_johnson_brody_johnson");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_sendToMada (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "johnson_foundPendant");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_endRyooQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "johnson_ryoosSalt");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_giveKaraQuest (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "ep3_hunt_johnson_help_kara");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_endKaraQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "johnson_deliveriesMade");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_speakWithKint (obj_id player, obj_id npc)
{
	groundquests.grantQuest(player, "ep3_hunt_johnson_seek_kint");
}

// ----------------------------------------------------------------------

void ep3_etyyy_johnson_smith_action_spokeWithJohnson (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "chrilooc_seekJohnsonSmith");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_etyyy_johnson_smith_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You're back again. What can I help you with?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You wanted me to speak with someone about hunting a kkorrwrot?
	if (response == "s_110")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Right. Speak with Kint Szam at the Hracca glade gate camp. He'll help you. Tell him that I sent you to him.
			string_id message = new string_id (c_stringFile, "s_112");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: After helping Kara, you mentioned another task for me?
	if (response == "s_83")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes, Sordaan has been trying to hunt a kkorrwrot but has been unsuccessful. The kkorrwrot is one of the most feared creatures on Kashyyyk. It would be the most respected of all Sordaan's trophies. You are to go hunt and kill a kkorrwrot. Having someone else successfully hunt a kkorrwrot would drive Sordaan mad, which would make associates of mine very happy.
			string_id message = new string_id (c_stringFile, "s_84");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where do I find a kkorrwrot?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_122");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am helping Kara as you requested.
	if (response == "s_114")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_finishedKaraQuest (player, npc))
		{
			ep3_etyyy_johnson_smith_action_endKaraQuest (player, npc);

			//-- NPC: Excellent. Helping Kara has been a tremendous service. Thank you. I have one last task to ask of you.
			string_id message = new string_id (c_stringFile, "s_116");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, what do I do?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not right now. I'll come back later.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_118");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_134");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_karaDeliveries (player, npc))
		{
			//-- NPC: Make the deliveries Kara needs. All of the deliveries. Speak to Kara if you need a reminder of where to go.
			string_id message = new string_id (c_stringFile, "s_138");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_lookingForKara (player, npc))
		{
			//-- NPC: Kara is in one of the tents just here behind me. Go speak with her.
			string_id message = new string_id (c_stringFile, "s_140");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh la la la.
			string_id message = new string_id (c_stringFile, "s_142");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Actually, I was helping you with Ryoo.
	if (response == "s_144")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_finishedHelpingRyoo (player, npc))
		{
			//-- NPC: Ah, you retrieved his stash of salt. It was a good idea to come to me with this instead of going back to Ryoo. I'll help him with this, but he's going to have to start cutting back. I have another task for you. Kara Corlon is a Chiss... um... hunter. She needs some help making some deliveries to other systems.
			string_id message = new string_id (c_stringFile, "s_146");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, I'll help her.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I can't do that right now.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_148");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_152");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_lookingForRyoo (player, npc))
		{
			//-- NPC: Ryoo Finn is down at the main Arcona camp area. Look for the Arcona in a blue shirt and red short pants.
			string_id message = new string_id (c_stringFile, "s_156");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Do be do be do.
			string_id message = new string_id (c_stringFile, "s_158");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: About Brody Johnson.
	if (response == "s_160")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_returningFromMada (player, npc))
		{
			//-- NPC: Oh, you're back. I hope Mada wasn't too distraught. Must have been rough news for her to hear.
			string_id message = new string_id (c_stringFile, "s_162");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: She said the pendant wasn't Brody's.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_164");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_speakingToMada (player, npc))
		{
			//-- NPC: Mada Johnson is probably still in Kachirho. That's where you first spoke with her, right? Go tell her about Brody's fate and show her that pendant.
			string_id message = new string_id (c_stringFile, "s_210");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_hasPendant (player, npc))
		{
			//-- NPC: Any luck at the campsite?
			string_id message = new string_id (c_stringFile, "s_212");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [Show Johnson the pendant]
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, didn't find anything.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_214");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_218");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition_lookingForBrodyCamp (player, npc))
		{
			doAnimationAction (npc, "greet");

			//-- NPC: Brody's campsite is south of here near the river.
			string_id message = new string_id (c_stringFile, "s_223");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Okee oodle eh.
			string_id message = new string_id (c_stringFile, "s_227");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Chrilooc asked me to help you.
	if (response == "s_231")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ah, good. There are some things you could help with. Um, but actually, I could use some help with another matter. One of the Arconans, Ryoo Finn, has been really agitated lately. He only arrived recently and seems to be having trouble adjusting to this place. Could you go talk to him and see if you can find out what's bothering him? He won't tell to me. Probably thinks I'll tell Jerrol.
			string_id message = new string_id (c_stringFile, "s_267");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, I can do that.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks. Maybe later.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_269");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_273");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Chrilooc thought you might know where to find Brody Johnson?
	if (response == "s_235")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Brody Johnson? I remember him. Haven't seen him in a while though. Why are you looking for Brody? Is he in trouble?
			string_id message = new string_id (c_stringFile, "s_251");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: His sister, Mada, asked me to look for him.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_253");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, Sordaan has been trying to hunt a kkorrwrot but has been unsuccessful. The kkorrwrot is one of the most feared creatures on Kashyyyk. It would be the most respected of all Sordaan's trophies. You are to go hunt and kill a kkorrwrot. Having someone else successfully hunt a kkorrwrot would drive Sordaan mad, which would make associates of mine very happy.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where do I find a kkorrwrot?
	if (response == "s_122")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here in Etyyy actually, in the Hracca glade. I have a contact in the Hracca glade gate camp that can help you and provide more information. Go there and speak with Kint Zsam. You'll find him at the gate.
			string_id message = new string_id (c_stringFile, "s_124");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I can't do that right now. Maybe later.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_126");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_130");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Excellent. Helping Kara has been a tremendous service. Thank you. I have one last task to ask of you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, what do I do?
	if (response == "s_118")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Sordaan has been trying to hunt a kkorrwrot but has been unsuccessful. The kkorrwrot is one of the most feared creatures on Kashyyyk. It would be the most respected of all Sordaan's trophies. You are to go hunt and kill a kkorrwrot. Having someone else successfully hunt a kkorrwrot would drive Sordaan mad, which would make associates of mine very happy.
			string_id message = new string_id (c_stringFile, "s_120");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where do I find a kkorrwrot?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_122");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not right now. I'll come back later.
	if (response == "s_134")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Very well. Return when you're ready.
			string_id message = new string_id (c_stringFile, "s_136");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Sordaan has been trying to hunt a kkorrwrot but has been unsuccessful. The kkorrwrot is one of the most feared creatures on Kashyyyk. It would be the most respected of all Sordaan's trophies. You are to go hunt and kill a kkorrwrot. Having someone else successfully hunt a kkorrwrot would drive Sordaan mad, which would make associates of mine very happy.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where do I find a kkorrwrot?
	if (response == "s_122")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Here in Etyyy actually, in the Hracca glade. I have a contact in the Hracca glade gate camp that can help you and provide more information. Go there and speak with Kint Zsam. You'll find him at the gate.
			string_id message = new string_id (c_stringFile, "s_124");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm on my way.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I can't do that right now. Maybe later.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_126");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_130");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Here in Etyyy actually, in the Hracca glade. I have a contact in the Hracca glade gate camp that can help you and provide more information. Go there and speak with Kint Zsam. You'll find him at the gate.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm on my way.
	if (response == "s_126")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_speakWithKint (player, npc);

			//-- NPC: Good. Speak with Kint. He'll not only tell you more about hunting the kkorrwrot, but he can also get you into the Hracca glade. Without his help, you won't be able to enter. Oh, and be sure to let him know that I sent you.
			string_id message = new string_id (c_stringFile, "s_128");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can't do that right now. Maybe later.
	if (response == "s_130")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Very well. Return when you're ready.
			string_id message = new string_id (c_stringFile, "s_132");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, you retrieved his stash of salt. It was a good idea to come to me with this instead of going back to Ryoo. I'll help him with this, but he's going to have to start cutting back. I have another task for you. Kara Corlon is a Chiss... um... hunter. She needs some help making some deliveries to other systems.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, I'll help her.
	if (response == "s_148")
	{
		ep3_etyyy_johnson_smith_action_endRyooQuest (player, npc);

		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_giveKaraQuest (player, npc);

			//-- NPC: Great! She's in the tent behind me. Go speak with her.
			string_id message = new string_id (c_stringFile, "s_150");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can't do that right now.
	if (response == "s_152")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Okay, return when you can.
			string_id message = new string_id (c_stringFile, "s_154");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh, you're back. I hope Mada wasn't too distraught. Must have been rough news for her to hear.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: She said the pendant wasn't Brody's.
	if (response == "s_164")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: What? No, she's mistaken. Go show it to her again.
			string_id message = new string_id (c_stringFile, "s_166");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You notice Brody's pendant is very similar]
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_168");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What? No, she's mistaken. Go show it to her again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You notice Brody's pendant is very similar]
	if (response == "s_168")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: This old thing? No, it's nothing really. It's just something I picked up somewhere. Cheap. Not even real metal. You can buy 100 for 10 credits. It's, um, nothing, seriously.
			string_id message = new string_id (c_stringFile, "s_170");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yeah, okay. I believe you. But the pendant really is similar.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No, I don't believe you. What's going on?
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_172");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_176");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This old thing? No, it's nothing really. It's just something I picked up somewhere. Cheap. Not even real metal. You can buy 100 for 10 credits. It's, um, nothing, seriously.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah, okay. I believe you. But the pendant really is similar.
	if (response == "s_172")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Right. Good. Of course you do. Why wouldn't you? Good.
			string_id message = new string_id (c_stringFile, "s_174");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, I don't believe you. What's going on?
	if (response == "s_176")
	{
		//-- [NOTE] But I'm doing some stuff for Chrilooc and didn't want to drag Mada into it. If the Rodians found out, it could get ugly.
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Okay, okay. I can't believe Mada could tell that other pendant was a fake. The truth is... I'm Brody Johnson.
			string_id message = new string_id (c_stringFile, "s_178");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You are Brody Johnson?!!? Okay seriously, what's going on?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Of course you're Brody Johnson. I've known that from the first time we met.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_180");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_200");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] But I'm doing some stuff for Chrilooc and didn't want to drag Mada into it. If the Rodians found out, it could get ugly.
	//-- NPC: Okay, okay. I can't believe Mada could tell that other pendant was a fake. The truth is... I'm Brody Johnson.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You are Brody Johnson?!!? Okay seriously, what's going on?
	if (response == "s_180")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: I came here originally to try and tame creatures here and sell them as pets on other planets. But creatures on Kashyyyk are far too fierce to make good pets on other worlds. Well, most of them anyway. And, to be honest, training an animal is a lot more work than I ever imagined it to be. I don't know how Wrelaac and Vritol do it. Oh, those are two Wookiees I know. Wrelaac is a retired creature trainer, and Vritol was one of his students.
			string_id message = new string_id (c_stringFile, "s_182");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Go on.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_184");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course you're Brody Johnson. I've known that from the first time we met.
	if (response == "s_200")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Really, you have?
			string_id message = new string_id (c_stringFile, "s_202");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Changing your name to 'Johnson Smith' wasn't exactly a clever disguise.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_204");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 29);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I came here originally to try and tame creatures here and sell them as pets on other planets. But creatures on Kashyyyk are far too fierce to make good pets on other worlds. Well, most of them anyway. And, to be honest, training an animal is a lot more work than I ever imagined it to be. I don't know how Wrelaac and Vritol do it. Oh, those are two Wookiees I know. Wrelaac is a retired creature trainer, and Vritol was one of his students.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Go on.
	if (response == "s_184")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Right. So with the pet idea not working out, I was once again a failure. This kind of thing has happened before. There was the flying cheese grater fiasco, the incident with gnorts in Tyrena, the time my cantina, 'The Flaming Ewok,' sank into the swamp on Naboo, and so on. I didn't want anyone to know I'd failed again, so I decided to just disappear for a while.
			string_id message = new string_id (c_stringFile, "s_186");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: And let your sister think you're dead?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_188");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Right. So with the pet idea not working out, I was once again a failure. This kind of thing has happened before. There was the flying cheese grater fiasco, the incident with gnorts in Tyrena, the time my cantina, 'The Flaming Ewok,' sank into the swamp on Naboo, and so on. I didn't want anyone to know I'd failed again, so I decided to just disappear for a while.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And let your sister think you're dead?
	if (response == "s_188")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: I admit that was a bad idea. I just kind of reacted and didn't really think things through all the way. On the other hand, it's not nearly as bad as the time I taught a cantina full of Imperial officers to speak with a funny accent. Anyway, I apologize that you got caught up in my tar pit of a life. Maybe I can make it up to you in some small way. Remember Vritol, the creature trainer I mentioned?
			string_id message = new string_id (c_stringFile, "s_190");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The Wookiee on the Rryatt Trail?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_192");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I admit that was a bad idea. I just kind of reacted and didn't really think things through all the way. On the other hand, it's not nearly as bad as the time I taught a cantina full of Imperial officers to speak with a funny accent. Anyway, I apologize that you got caught up in my tar pit of a life. Maybe I can make it up to you in some small way. Remember Vritol, the creature trainer I mentioned?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Wookiee on the Rryatt Trail?
	if (response == "s_192")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_endBrodyQuest (player, npc);

			//-- NPC: Right. If you go to the Trail and travel a little way from the gate, you'll find his house. It's near where the wallugas are. I'll let him know to give you a trained Kashyyyk bantha as a gift from me. They make good mounts and are adept at climbing up hills and the like. Oh, and if you see my sister again, please apologize to her for me.
			string_id message = new string_id (c_stringFile, "s_194");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, whatever. Good-bye then, Brody Johnson.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_196");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Right. If you go to the Trail and travel a little way from the gate, you'll find his house. It's near where the wallugas are. I'll let him know to give you a trained Kashyyyk bantha as a gift from me. They make good mounts and are adept at climbing up hills and the like. Oh, and if you see my sister again, please apologize to her for me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, whatever. Good-bye then, Brody Johnson.
	if (response == "s_196")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Farewell.
			string_id message = new string_id (c_stringFile, "s_198");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Really, you have?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Changing your name to 'Johnson Smith' wasn't exactly a clever disguise.
	if (response == "s_204")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh. I see. But it was easier for me to remember than something like Merrick Chi'thiac.
			string_id message = new string_id (c_stringFile, "s_206");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Uh, yeah. So what's going on here? Why the name change?
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_208");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh. I see. But it was easier for me to remember than something like Merrick Chi'thiac.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uh, yeah. So what's going on here? Why the name change?
	if (response == "s_208")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: I came here originally to try and tame creatures here and sell them as pets on other planets. But creatures on Kashyyyk are far too fierce to make good pets on other worlds. Well, most of them anyway. And, to be honest, training an animal is a lot more work than I ever imagined it to be. I don't know how Wrelaac and Vritol do it. Oh, those are two Wookiees I know. Wrelaac is a retired creature trainer, and Vritol was one of his students.
			string_id message = new string_id (c_stringFile, "s_182");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Go on.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_184");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Any luck at the campsite?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [Show Johnson the pendant]
	if (response == "s_214")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_sendToMada (player, npc);

			//-- NPC: You found this on a corpse at the campsite? Hmm, that's bad news. This was definitely Brody's pendant. I think he got it from his father or something like that. Bad news indeed. You should show that to his sister and let her know what you've discovered.
			string_id message = new string_id (c_stringFile, "s_216");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, didn't find anything.
	if (response == "s_218")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: That's too bad. You should have tried harder.
			string_id message = new string_id (c_stringFile, "s_220");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm busy right now. These people need a lot of attention to get through their tough battle against salt.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Chrilooc sent me.
	if (response == "s_243")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_spokeWithJohnson (player, npc);

			//-- NPC: I see. Why did he send you to me exactly?
			string_id message = new string_id (c_stringFile, "s_245");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: He said you might know where to find Brody Johnson.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition_doesNotHaveBrodyQuest (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: He asked me to help you with some project of his.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_249");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_265");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 38);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Oh, I see. Good day then.
	if (response == "s_279")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yeah, good bye.
			string_id message = new string_id (c_stringFile, "s_281");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see. Why did he send you to me exactly?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: He said you might know where to find Brody Johnson.
	if (response == "s_249")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Brody Johnson? I remember him. Haven't seen him in a while though. Why are you looking for Brody? Is he in trouble?
			string_id message = new string_id (c_stringFile, "s_251");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: His sister, Mada, asked me to look for him.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_253");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: He asked me to help you with some project of his.
	if (response == "s_265")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ah, good. There are some things you could help with. Um, but actually, I could use some help with another matter. One of the Arconans, Ryoo Finn, has been really agitated lately. He only arrived recently and seems to be having trouble adjusting to this place. Could you go talk to him and see if you can find out what's bothering him? He won't tell to me. Probably thinks I'll tell Jerrol.
			string_id message = new string_id (c_stringFile, "s_267");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, I can do that.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks. Maybe later.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_269");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_273");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Brody Johnson? I remember him. Haven't seen him in a while though. Why are you looking for Brody? Is he in trouble?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: His sister, Mada, asked me to look for him.
	if (response == "s_253")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: I think he had a small campsite not far from here. I haven't seen him in a while though. Been a few months. I don't know if he's okay or if maybe he left. You should go check his campsite.
			string_id message = new string_id (c_stringFile, "s_255");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I think I will go check that campsite.
			boolean hasResponse0 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Maybe later.
			boolean hasResponse1 = false;
			if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_257");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_261");

				utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 40);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch40 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I think he had a small campsite not far from here. I haven't seen him in a while though. Been a few months. I don't know if he's okay or if maybe he left. You should go check his campsite.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I think I will go check that campsite.
	if (response == "s_257")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_grantBrodyQuest (player, npc);

			//-- NPC: Okay. And if you don't mind, please come back here and let me know if you find any sign of him.
			string_id message = new string_id (c_stringFile, "s_259");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Maybe later.
	if (response == "s_261")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: Whatever you want.
			string_id message = new string_id (c_stringFile, "s_263");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_etyyy_johnson_smith_handleBranch43 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, good. There are some things you could help with. Um, but actually, I could use some help with another matter. One of the Arconans, Ryoo Finn, has been really agitated lately. He only arrived recently and seems to be having trouble adjusting to this place. Could you go talk to him and see if you can find out what's bothering him? He won't tell to me. Probably thinks I'll tell Jerrol.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, I can do that.
	if (response == "s_269")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			ep3_etyyy_johnson_smith_action_giveRyooQuest (player, npc);

			//-- NPC: Great! Ryoo is down in the main camp. He should be easy to find; Ryoo is the only Arcona not wearing a robe. Well, neither is Jerrol, but he runs this camp. Return to me after you help Ryoo.
			string_id message = new string_id (c_stringFile, "s_271");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks. Maybe later.
	if (response == "s_273")
	{
		//-- [NOTE] 
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			//-- NPC: I thought you were here to help? Oh well, return if you change your mind.
			string_id message = new string_id (c_stringFile, "s_275");
			utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_etyyy_johnson_smith");

	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable (self, true);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable (self, true);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_etyyy_johnson_smith");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_etyyy_johnson_smith_condition_completedSmithQuests (player, npc))
	{
		//-- NPC: Thanks for your help, especially with Mada. It's good to have her to talk with. I don't know what I was thinking.
		string_id message = new string_id (c_stringFile, "s_106");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_etyyy_johnson_smith_condition_doingSmithQuests (player, npc))
	{
		//-- NPC: You're back again. What can I help you with?
		string_id message = new string_id (c_stringFile, "s_108");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You wanted me to speak with someone about hunting a kkorrwrot?
		boolean hasResponse0 = false;
		if (ep3_etyyy_johnson_smith_condition_sentToKint (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: After helping Kara, you mentioned another task for me?
		boolean hasResponse1 = false;
		if (ep3_etyyy_johnson_smith_condition_needsKint (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I am helping Kara as you requested.
		boolean hasResponse2 = false;
		if (ep3_etyyy_johnson_smith_condition_helpingKara (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: Actually, I was helping you with Ryoo.
		boolean hasResponse3 = false;
		if (ep3_etyyy_johnson_smith_condition_helpingRyoo (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		//-- PLAYER: About Brody Johnson.
		boolean hasResponse4 = false;
		if (ep3_etyyy_johnson_smith_condition_findingBrody (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse4 = true;
		}

		//-- PLAYER: Chrilooc asked me to help you.
		boolean hasResponse5 = false;
		if (ep3_etyyy_johnson_smith_condition_notStartedRyoo (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse5 = true;
		}

		//-- PLAYER: Chrilooc thought you might know where to find Brody Johnson?
		boolean hasResponse6 = false;
		if (ep3_etyyy_johnson_smith_condition_doesNotHaveBrodyQuest (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse6 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_110");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_83");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_114");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_144");

			if (hasResponse4)
				responses [responseIndex++] = new string_id (c_stringFile, "s_160");

			if (hasResponse5)
				responses [responseIndex++] = new string_id (c_stringFile, "s_231");

			if (hasResponse6)
				responses [responseIndex++] = new string_id (c_stringFile, "s_235");

			utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 2);

			npcStartConversation (player, npc, "ep3_etyyy_johnson_smith", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
	{
		//-- NPC: I'm busy right now. These people need a lot of attention to get through their tough battle against salt.
		string_id message = new string_id (c_stringFile, "s_239");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Chrilooc sent me.
		boolean hasResponse0 = false;
		if (ep3_etyyy_johnson_smith_condition_sentByChrilooc (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Oh, I see. Good day then.
		boolean hasResponse1 = false;
		if (ep3_etyyy_johnson_smith_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_243");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_279");

			utils.setScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId", 37);

			npcStartConversation (player, npc, "ep3_etyyy_johnson_smith", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_etyyy_johnson_smith")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

	if (branchId == 2 && ep3_etyyy_johnson_smith_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && ep3_etyyy_johnson_smith_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && ep3_etyyy_johnson_smith_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && ep3_etyyy_johnson_smith_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && ep3_etyyy_johnson_smith_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && ep3_etyyy_johnson_smith_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && ep3_etyyy_johnson_smith_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_etyyy_johnson_smith_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && ep3_etyyy_johnson_smith_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && ep3_etyyy_johnson_smith_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && ep3_etyyy_johnson_smith_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && ep3_etyyy_johnson_smith_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && ep3_etyyy_johnson_smith_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && ep3_etyyy_johnson_smith_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && ep3_etyyy_johnson_smith_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && ep3_etyyy_johnson_smith_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && ep3_etyyy_johnson_smith_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && ep3_etyyy_johnson_smith_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && ep3_etyyy_johnson_smith_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && ep3_etyyy_johnson_smith_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 40 && ep3_etyyy_johnson_smith_handleBranch40 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 43 && ep3_etyyy_johnson_smith_handleBranch43 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_etyyy_johnson_smith.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

