// ======================================================================
//
// story_loot_eisley.script
// Copyright 2003, Sony Online Entertainment
// All Rights Reserved.
//
// DO NOT EDIT THIS AUTO-GENERATED FILE.  PLEASE USE THE CONVERATION EDITOR!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.features;
include library.money;
include library.prose;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/story_loot_eisley";

// ======================================================================
// Script Conditions
// ======================================================================

boolean story_loot_eisley_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkAll (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("all"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkTatooine (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("tatooine"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkNaboo (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("naboo"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkCorellia (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("corellia"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkLok (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("lok"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkDantooine (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("dantooine"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkYavin4 (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("yavin4"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkEndor (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("endor"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkDathomir (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.planet"))
	{
		string planet = utils.getStringScriptVar(player, "story_loot.planet");
		
		if(planet.equals("dathomir"))
			return true;
	}
		
return false;
}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_hasSpaceExp (obj_id player, obj_id npc)
{
	return features.isSpaceEdition(player);

}

// ----------------------------------------------------------------------

boolean story_loot_eisley_condition_checkRem (obj_id player, obj_id npc)
{
	if (utils.hasScriptVar (player, "story_loot.rem"))
		return true;
		
return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void story_loot_eisley_action_Tatooine (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 1500;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Naboo (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 1500;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Corellia (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 1500;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Dantooine (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 3000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Lok (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 3000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Yavin4 (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 3000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Endor (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 4000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_Dathomir (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 4000;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_All (obj_id player, obj_id npc)
{
	obj_id item = utils.getObjIdScriptVar(player, "story_loot.item");
	
	if(!isIdValid(item))
		return;
	
	destroyObject(item);
	
	utils.removeScriptVar(player, "story_loot.planet");
	utils.removeScriptVar(player, "story_loot.item");

	int amount = 150;

	prose_package pp = prose.getPackage(new string_id("space/story_loot_d", "systemmessage"), amount);
	sendSystemMessageProse(player, pp);
	
	money.systemPayout(money.ACCT_RELIC_DEALER, player, amount, "noHandler", null);
	return;	
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_animBow (obj_id player, obj_id npc)
{
	doAnimationAction( npc, "bow" );
}

// ----------------------------------------------------------------------

void story_loot_eisley_action_storyLoot (obj_id player, obj_id npc)
{
	utils.setScriptVar(player, "story_loot.rem", true);
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

string story_loot_eisley_tokenTO_species (obj_id player, obj_id npc)
{
	int speciesNum = getSpecies(player);
	string speciesName = "name_human";
	switch (speciesNum)
	{
		case SPECIES_HUMAN:
			speciesName = "name_human";
			break;
		case SPECIES_ZABRAK:
			speciesName = "name_zabrak";
			break;
		case SPECIES_WOOKIEE:
			speciesName = "name_wookie";
			break;
		case SPECIES_TWILEK:
			speciesName = "name_twilek";
			break;
		case SPECIES_TRANDOSHAN:
			speciesName = "name_trandoshan";
			break;
		case SPECIES_ITHORIAN:
			speciesName = "name_ithorian";
			break;
		case SPECIES_SULLUSTAN:
			speciesName = "name_sullustan";
			break;
		case SPECIES_MON_CALAMARI:
			speciesName = "name_moncal";
			break;
		case SPECIES_RODIAN:
			speciesName = "name_rodian";
			break;
		case SPECIES_BOTHAN:
			speciesName = "name_bothan";
			break;
			
	}
			
	return new string(utils.packStringId(new string_id ("player_species", speciesName)));
}

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "npc.conversation.story_loot_eisley");
		
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	setName(self, "Neess Achessa");

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	setName(self, "Neess Achessa");

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "npc.conversation.story_loot_eisley");

	return SCRIPT_CONTINUE;
}

trigger OnGiveItem(obj_id item, obj_id player)
{
	if (hasObjVar(item, "story_loot.planet"))
	{
		string planet = getStringObjVar(item, "story_loot.planet");
		
		utils.setScriptVar(player, "story_loot.planet", planet);
		utils.setScriptVar(player, "story_loot.item", item);
		
		OnStartNpcConversation(self, player);
	}
	
	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	if (ai_lib.isInCombat (self) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkAll (player, self))
	{
		doAnimationAction (self, "curtsey");

		story_loot_eisley_action_All (player, self);

		//-- NPC: I don't know where this is from, but it seems interesting. Thank you, kind %TO.
		string_id message = new string_id (c_stringFile, "s_39ab0bf8");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);
			pp.other.set (story_loot_eisley_tokenTO_species (player, self));

			chat.chat (self, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkCorellia (player, self))
	{
		doAnimationAction (self, "curtsey");

		story_loot_eisley_action_Corellia (player, self);

		//-- NPC: I've been to Corellia a couple of times. It's kinda depressing, though. The colors are too grey. Oh--thank you for the information. Here's your pay.
		string_id message = new string_id (c_stringFile, "s_7c4f443");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkDantooine (player, self))
	{
		doAnimationAction (self, "curtsey1");

		story_loot_eisley_action_Dantooine (player, self);

		//-- NPC: Thank you for the information. My master will be most happy!
		string_id message = new string_id (c_stringFile, "s_a128c839");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkDathomir (player, self))
	{
		doAnimationAction (self, "applause_excited");

		story_loot_eisley_action_Dathomir (player, self);

		//-- NPC: Wow! Dathomir! I've heard so many things about the nasty Imperials and their prison on that planet--oh, I better be quiet, my master says. There are a lot of Imperial friends around here.
		string_id message = new string_id (c_stringFile, "s_9f7731a8");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkEndor (player, self))
	{
		doAnimationAction (self, "curtsey1");

		story_loot_eisley_action_Endor (player, self);

		//-- NPC: Endor... I've never been there before either. I really need to travel one of these days. It's one of my dreams.. Oh well. Thank you for this.
		string_id message = new string_id (c_stringFile, "s_ca583977");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkLok (player, self))
	{
		doAnimationAction (self, "kiss");

		story_loot_eisley_action_Lok (player, self);

		//-- NPC: I don't know anything about Lok. I wonder what it's like. Maybe I'll go there one day. Oh--sorry. Thank you for this. Here's your pay.
		string_id message = new string_id (c_stringFile, "s_1938855f");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkNaboo (player, self))
	{
		doAnimationAction (self, "curtsey");

		story_loot_eisley_action_Naboo (player, self);

		//-- NPC: Naboo.. I hear it's such a nice, pleasant place. I want to go there one day, but my master won't let me yet. He's very protective. Thank you for this.
		string_id message = new string_id (c_stringFile, "s_6acea54");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkTatooine (player, self))
	{
		doAnimationAction (self, "embarrassed");

		story_loot_eisley_action_Tatooine (player, self);

		//-- NPC: Tatoo--Tatooine! That's where we are now! Sorry, I'm just learning how to read. My master will be very happy with this.
		string_id message = new string_id (c_stringFile, "s_60682af");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkYavin4 (player, self))
	{
		doAnimationAction (self, "curtsey");

		story_loot_eisley_action_Yavin4 (player, self);

		//-- NPC: You're the best %TO! This is great information for my master.
		string_id message = new string_id (c_stringFile, "s_95de3587");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (self);
			pp.other.set (story_loot_eisley_tokenTO_species (player, self));

			chat.chat (self, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_checkRem (player, self))
	{
		doAnimationAction (self, "applause_excited");

		//-- NPC: I'm so glad you've returned. You didn't forget about me! Did you find anything up there? If you did, you can just drag it on me. I will pay you for each. My master will be so happy!
		string_id message = new string_id (c_stringFile, "s_db040e63");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition_hasSpaceExp (player, self))
	{
		doAnimationAction (self, "nervous");

		//-- NPC: My master says I can speak with you. You seem to be a pilot and we--or at least, he--could use your help with a small task. If you don't say yes, my master will be very angry at me.
		string_id message = new string_id (c_stringFile, "s_5fea04c");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: That mouse thing is your master?
		boolean hasResponse0 = false;
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Uh.. no thanks. I'll be going now.
		boolean hasResponse1 = false;
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3e114acc");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_579e662c");

			setObjVar (player, "conversation.story_loot_eisley.branchId", 11);

			npcStartConversation (player, self, "story_loot_eisley", message, responses);
		}
		else
		{
			chat.chat (self, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (story_loot_eisley_condition__defaultCondition (player, self))
	{
		doAnimationAction (self, "curtsey1");

		//-- NPC: My master says I can't talk to you because you're not a pilot. Please forgive me.
		string_id message = new string_id (c_stringFile, "s_e0574420");
		chat.chat (self, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "story_loot_eisley")
		return SCRIPT_CONTINUE;

	int branchId = getIntObjVar (player, "conversation.story_loot_eisley.branchId");

	//-- [BRANCH NOTE] 
	//-- NPC: My master says I can speak with you. You seem to be a pilot and we--or at least, he--could use your help with a small task. If you don't say yes, my master will be very angry at me.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: That mouse thing is your master?
	if (branchId == 11 && response == "s_3e114acc")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			//-- NPC: My master is a Chadra-Fan. He does kinda look like a mouse, doesn't he? We came to Mos Eisley because Chadra-Fan are very afraid of drowning. Since there's no water here on Tatooine, it really isn't a problem for him.
			string_id message = new string_id (c_stringFile, "s_4dcc9c02");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Weird. How did he become your master?
			boolean hasResponse0 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Okay. What about this task?
			boolean hasResponse1 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_da79c836");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4cf73d47");

				setObjVar (player, "conversation.story_loot_eisley.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_eisley.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'My master says I can speak with you. You seem to be a pilot and we--or at least, he--could use your help with a small task. If you don't say yes, my master will be very angry at me.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: My master says I can speak with you. You seem to be a pilot and we--or at least, he--could use your help with a small task. If you don't say yes, my master will be very angry at me.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Uh.. no thanks. I'll be going now.
	if (branchId == 11 && response == "s_579e662c")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "weeping");

			//-- NPC: Oh no!
			string_id message = new string_id (c_stringFile, "s_249fa88e");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'My master says I can speak with you. You seem to be a pilot and we--or at least, he--could use your help with a small task. If you don't say yes, my master will be very angry at me.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: My master is a Chadra-Fan. He does kinda look like a mouse, doesn't he? We came to Mos Eisley because Chadra-Fan are very afraid of drowning. Since there's no water here on Tatooine, it really isn't a problem for him.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Weird. How did he become your master?
	if (branchId == 12 && response == "s_da79c836")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "explain");

			//-- NPC: Well, I was orphaned at a very young age and was found by a slave smuggler. He sold me to a Chadra-Fan whom took me to his homeworld on Chad. I met my master, Peraw, soon afterward and he taught me the Chadra-Fan language. I'm a loyal servant who happens to know Basic as well.
			string_id message = new string_id (c_stringFile, "s_8aa2d689");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I hope he treats you nicely.
			boolean hasResponse0 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Interesting. What task did you want me to do?
			boolean hasResponse1 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a5a29e5e");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a27729d9");

				setObjVar (player, "conversation.story_loot_eisley.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_eisley.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'My master is a Chadra-Fan. He does kinda look like a mouse, doesn't he? We came to Mos Eisley because Chadra-Fan are very afraid of drowning. Since there's no water here on Tatooine, it really isn't a problem for him.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: My master is a Chadra-Fan. He does kinda look like a mouse, doesn't he? We came to Mos Eisley because Chadra-Fan are very afraid of drowning. Since there's no water here on Tatooine, it really isn't a problem for him.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay. What about this task?
	if (branchId == 12 && response == "s_4cf73d47")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "embarrassed");

			//-- NPC: Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
			string_id message = new string_id (c_stringFile, "s_a1368bc4");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds good. I'll do it.
			boolean hasResponse0 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks.
			boolean hasResponse1 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b73ef16b");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d6695e83");

				setObjVar (player, "conversation.story_loot_eisley.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_eisley.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'My master is a Chadra-Fan. He does kinda look like a mouse, doesn't he? We came to Mos Eisley because Chadra-Fan are very afraid of drowning. Since there's no water here on Tatooine, it really isn't a problem for him.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Well, I was orphaned at a very young age and was found by a slave smuggler. He sold me to a Chadra-Fan whom took me to his homeworld on Chad. I met my master, Peraw, soon afterward and he taught me the Chadra-Fan language. I'm a loyal servant who happens to know Basic as well.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I hope he treats you nicely.
	if (branchId == 13 && response == "s_a5a29e5e")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "curtsey1");

			//-- NPC: Oh, he does. You're such a nice %TO.
			string_id message = new string_id (c_stringFile, "s_914ec8cb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thanks. About this task you mentioned...
			boolean hasResponse0 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_9c4a22e");

				setObjVar (player, "conversation.story_loot_eisley.branchId", 14);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (self);
				pp.other.set (story_loot_eisley_tokenTO_species (player, self));

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_eisley.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (self);
				pp.other.set (story_loot_eisley_tokenTO_species (player, self));

				npcSpeak (player, pp);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Well, I was orphaned at a very young age and was found by a slave smuggler. He sold me to a Chadra-Fan whom took me to his homeworld on Chad. I met my master, Peraw, soon afterward and he taught me the Chadra-Fan language. I'm a loyal servant who happens to know Basic as well.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Well, I was orphaned at a very young age and was found by a slave smuggler. He sold me to a Chadra-Fan whom took me to his homeworld on Chad. I met my master, Peraw, soon afterward and he taught me the Chadra-Fan language. I'm a loyal servant who happens to know Basic as well.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Interesting. What task did you want me to do?
	if (branchId == 13 && response == "s_a27729d9")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "embarrassed");

			//-- NPC: Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
			string_id message = new string_id (c_stringFile, "s_a1368bc4");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds good. I'll do it.
			boolean hasResponse0 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks.
			boolean hasResponse1 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b73ef16b");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d6695e83");

				setObjVar (player, "conversation.story_loot_eisley.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_eisley.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Well, I was orphaned at a very young age and was found by a slave smuggler. He sold me to a Chadra-Fan whom took me to his homeworld on Chad. I met my master, Peraw, soon afterward and he taught me the Chadra-Fan language. I'm a loyal servant who happens to know Basic as well.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh, he does. You're such a nice %TO.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thanks. About this task you mentioned...
	if (branchId == 14 && response == "s_9c4a22e")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "embarrassed");

			//-- NPC: Oh yeah. Sorry. I can get so talkative sometimes. My master doesn't like it so much. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
			string_id message = new string_id (c_stringFile, "s_cbf9648e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds good. I'll do it.
			boolean hasResponse0 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thanks.
			boolean hasResponse1 = false;
			if (story_loot_eisley_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b73ef16b");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d6695e83");

				setObjVar (player, "conversation.story_loot_eisley.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.story_loot_eisley.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh, he does. You're such a nice %TO.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh yeah. Sorry. I can get so talkative sometimes. My master doesn't like it so much. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds good. I'll do it.
	if (branchId == 15 && response == "s_b73ef16b")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "applause_excited");

			story_loot_eisley_action_storyLoot (player, self);

			//-- NPC: I'm so happy! Please come back as soon as you can. I always get a good behavior treat when I do well for my master.
			string_id message = new string_id (c_stringFile, "s_c28b61a1");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh yeah. Sorry. I can get so talkative sometimes. My master doesn't like it so much. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh yeah. Sorry. I can get so talkative sometimes. My master doesn't like it so much. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks.
	if (branchId == 15 && response == "s_d6695e83")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "weeping");

			//-- NPC: I'm going to get into so much trouble.
			string_id message = new string_id (c_stringFile, "s_3a570abb");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh yeah. Sorry. I can get so talkative sometimes. My master doesn't like it so much. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds good. I'll do it.
	if (branchId == 18 && response == "s_b73ef16b")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			story_loot_eisley_action_storyLoot (player, self);

			//-- NPC: I'm so happy! Please come back as soon as you can. I always get a good behavior treat when I do well for my master.
			string_id message = new string_id (c_stringFile, "s_c28b61a1");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks.
	if (branchId == 18 && response == "s_d6695e83")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "weeping");

			//-- NPC: I'm going to get into so much trouble.
			string_id message = new string_id (c_stringFile, "s_3a570abb");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds good. I'll do it.
	if (branchId == 21 && response == "s_b73ef16b")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "applause_excited");

			story_loot_eisley_action_storyLoot (player, self);

			//-- NPC: I'm so happy! Please come back as soon as you can. I always get a good behavior treat when I do well for my master.
			string_id message = new string_id (c_stringFile, "s_c28b61a1");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.
	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thanks.
	if (branchId == 21 && response == "s_d6695e83")
	{
		//-- [NOTE] 
		if (story_loot_eisley_condition__defaultCondition (player, self))
		{
			doAnimationAction (self, "weeping");

			//-- NPC: I'm going to get into so much trouble.
			string_id message = new string_id (c_stringFile, "s_3a570abb");
			removeObjVar (player, "conversation.story_loot_eisley.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Oh yeah. Sorry. The task... My master needs information from the.. uh, space systems, I guess it is? I'm not really too smart about those beyond the ground. Anyway, the information can be 'a log', or 'a diary', or anything like that. If you find them, just give them to me. My master trusts me when it comes in his money. I can give you some for the information you bring us.' were false.");

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	removeObjVar (player, "conversation.story_loot_eisley.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

