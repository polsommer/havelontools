// ======================================================================
//
// naboo_deeja_peak_tanoa_vills.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/naboo_deeja_peak_tanoa_vills";

// ======================================================================
// Script Conditions
// ======================================================================

boolean naboo_deeja_peak_tanoa_vills_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_startSequencerQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_goto_tanoa") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_goto_prof_hudmasse");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_onPartsQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_sequencer_parts");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_finishedPartsQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_sequencer_parts", "deeja_peak_sequencer_parts_04") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_sequencer_parts");
	
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_onCrashQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_sequencer_crash");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_finishedCrashQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_sequencer_crash", "deeja_peak_sequencer_crash_06") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_sequencer_crash");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_onMissingQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_sequencer_missing");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_finishedMissingQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_sequencer_missing", "deeja_peak_sequencer_missing_06") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_sequencer_missing");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_completedSequencerQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_sequencer_scanner", "deeja_peak_sequencer_scanner_07") ||
	groundquests.hasCompletedQuest(player, "naboo_deeja_peak_sequencer_scanner");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_onScannerQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActive(player, "naboo_deeja_peak_sequencer_scanner");
}

// ----------------------------------------------------------------------

boolean naboo_deeja_peak_tanoa_vills_condition_finishedScannerQuest (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "naboo_deeja_peak_sequencer_scanner", "deeja_peak_sequencer_scanner_06");
}

// ======================================================================
// Script Actions
// ======================================================================

void naboo_deeja_peak_tanoa_vills_action_grantPartsQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_sequencer_parts");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_grantCrashQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_sequencer_crash");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_grantMissingQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_sequencer_missing");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_grantScannerQuest (obj_id player, obj_id npc)
{	
	groundquests.requestGrantQuest(player, "naboo_deeja_peak_sequencer_scanner");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_signel_scanner_06 (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_sequencer_scanner_06");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_endMissingQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_sequencer_missing_06");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_endCrashQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_sequencer_crash_06");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_endPartsQuest (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_sequencer_parts_04");
}

// ----------------------------------------------------------------------

void naboo_deeja_peak_tanoa_vills_action_endGotoTanoa (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "deeja_peak_goto_tanoa");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int naboo_deeja_peak_tanoa_vills_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Wow, you actually got the bio-scanner from the Darkwalkers. Impressive. Not that I doubted you for even a minute. I've completed your sequencer as well.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you.
	if (response == "s_87")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_tanoa_vills_action_signel_scanner_06 (player, npc);

			//-- NPC: You're welcome. You should return to Professor Hudmasse with it.
			string_id message = new string_id (c_stringFile, "s_88");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A bio-scanner? Odd. I wonder what the Darkwalkers could possibly want with one of those? And they wanted it badly enough that they shot down that shuttle. It makes no sense. I know one thing, though, they cannot want that bio-scanner for anything good. I think we should get it back.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We should get it back?
	if (response == "s_58")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Okay, I mean that you should. I would not be able to do something like that.
			string_id message = new string_id (c_stringFile, "s_59");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How would I get the bio-scanner from them?
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Okay, I mean that you should. I would not be able to do something like that.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How would I get the bio-scanner from them?
	if (response == "s_83")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, I imagine you'll have to attack them at their base. I'd guess that one of their leaders, Flangolial or Trienial, would have it. You'll probably want to soften up their defenses first. Their base is not far from the city, though you probably already know that.
			string_id message = new string_id (c_stringFile, "s_84");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, I'll invade the Darkwalker base.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_85");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 7);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, I imagine you'll have to attack them at their base. I'd guess that one of their leaders, Flangolial or Trienial, would have it. You'll probably want to soften up their defenses first. Their base is not far from the city, though you probably already know that.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, I'll invade the Darkwalker base.
	if (response == "s_85")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_tanoa_vills_action_grantScannerQuest (player, npc);

			//-- NPC: Good luck. Not that I really think you'll need luck. Probably.
			string_id message = new string_id (c_stringFile, "s_86");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thank you for getting this equipment from the crashed shuttle, but I can't imagine what the Darkwalkers would want from the empty crate. I wonder what they took? Seems like we should find out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You don't know what was in the crate they emptied?
	if (response == "s_53")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, no. So much of the cargo was destroyed that it's difficult to be sure. Maybe the shipping terminal at the shuttleport will have a listing for the empty crate. If not, perhaps you could convince some Darkwalkers to tell you what they took.
			string_id message = new string_id (c_stringFile, "s_54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll try and find out what the Darkwalkers took.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_81");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, no. So much of the cargo was destroyed that it's difficult to be sure. Maybe the shipping terminal at the shuttleport will have a listing for the empty crate. If not, perhaps you could convince some Darkwalkers to tell you what they took.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll try and find out what the Darkwalkers took.
	if (response == "s_81")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_tanoa_vills_action_grantMissingQuest (player, npc);

			//-- NPC: Thank you. Let me know when you learn something. I'll continue working on your sequencer.
			string_id message = new string_id (c_stringFile, "s_82");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, very good. These look perfect. I'll start on the sequencer right away. In the meantime, I wonder if you would do me a favor?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of favor?
	if (response == "s_73")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: A shuttle carrying research equipment was shot down outside of Dee'ja Peak as it was nearing the city. I needed that equipment. Can you go to the crash site and salvage anything you can?
			string_id message = new string_id (c_stringFile, "s_74");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why haven't you gone yourself?
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_75");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A shuttle carrying research equipment was shot down outside of Dee'ja Peak as it was nearing the city. I needed that equipment. Can you go to the crash site and salvage anything you can?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why haven't you gone yourself?
	if (response == "s_75")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well, for one thing, I'm building the sequencer you requested. But mostly it's because of the wild animals that appear to have moved in at the crash site. You'll probably need to clear those before you can salvage anything.
			string_id message = new string_id (c_stringFile, "s_76");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, I'll go to the crash site.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well, for one thing, I'm building the sequencer you requested. But mostly it's because of the wild animals that appear to have moved in at the crash site. You'll probably need to clear those before you can salvage anything.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, I'll go to the crash site.
	if (response == "s_78")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_tanoa_vills_action_grantCrashQuest (player, npc);

			//-- NPC: Thank you! I'll be working on your sequencer.
			string_id message = new string_id (c_stringFile, "s_80");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, I see what's wrong. I need to adjust the chromatic spectrograph before tuning it. I, oh, hello. Please excuse me, I must get back to work.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Professor Hudmasse sent me to you.
	if (response == "s_37")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Professor Hudmasse sent you? I wonder why he would do that? Why did he send you to me?
			string_id message = new string_id (c_stringFile, "s_39");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I need a sequencer.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_41");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Professor Hudmasse sent you? I wonder why he would do that? Why did he send you to me?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I need a sequencer.
	if (response == "s_41")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: A sequencer? What kind of sequencer?
			string_id message = new string_id (c_stringFile, "s_60");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: One that can be used in a security beacon for Stonewall Labs.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_61");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A sequencer? What kind of sequencer?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: One that can be used in a security beacon for Stonewall Labs.
	if (response == "s_61")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ah, I see. And what will this sequencer need to do?
			string_id message = new string_id (c_stringFile, "s_62");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Be able to override the security protocol in a droideka at the Labs.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_63");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, I see. And what will this sequencer need to do?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Be able to override the security protocol in a droideka at the Labs.
	if (response == "s_63")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Right. That should not be too difficult. I'll need some parts in order to get started.
			string_id message = new string_id (c_stringFile, "s_64");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What parts do you need?
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_65");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Right. That should not be too difficult. I'll need some parts in order to get started.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What parts do you need?
	if (response == "s_65")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'll need an XJ5 circuit board,some fractal transmitters, and some octave regulators. I have everything else I'll need.
			string_id message = new string_id (c_stringFile, "s_66");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, I'll get the parts you need.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't think I'm interested after all.
			boolean hasResponse1 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_79");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'll need an XJ5 circuit board,some fractal transmitters, and some octave regulators. I have everything else I'll need.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, I'll get the parts you need.
	if (response == "s_67")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: Mummer scientists often have XJ5 circuit board. Unfortunately, there's no other reliable place to find those. The fractal transmitters can be found in older data terminals. You can probably find some at the junkyard near the city. Hmmm, octave regulators. I think you'll have to get those from Skaak Tipper machinists. Start with the circuit boards and then move on from there.
			string_id message = new string_id (c_stringFile, "s_68");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, I'll go start with the circuit board.
			boolean hasResponse0 = false;
			if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71");

				utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't think I'm interested after all.
	if (response == "s_79")
	{
		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			//-- NPC: I see. Then it's back to work for me. Farewell.
			string_id message = new string_id (c_stringFile, "s_90");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int naboo_deeja_peak_tanoa_vills_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Mummer scientists often have XJ5 circuit board. Unfortunately, there's no other reliable place to find those. The fractal transmitters can be found in older data terminals. You can probably find some at the junkyard near the city. Hmmm, octave regulators. I think you'll have to get those from Skaak Tipper machinists. Start with the circuit boards and then move on from there.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, I'll go start with the circuit board.
	if (response == "s_71")
	{
		naboo_deeja_peak_tanoa_vills_action_endGotoTanoa (player, npc);

		//-- [NOTE] 
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			naboo_deeja_peak_tanoa_vills_action_grantPartsQuest (player, npc);

			//-- NPC: Excellent. Return to me when you have all of the parts.
			string_id message = new string_id (c_stringFile, "s_72");
			utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.naboo_deeja_peak_tanoa_vills");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	
	faceTo( self, player );

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.naboo_deeja_peak_tanoa_vills");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_completedSequencerQuest (player, npc))
	{
		//-- NPC: The Darkwalkers were going to use the bio-scanner to make a bomb that would sit inert until someone with the right bio-signature walked nearby. It would then explode. Evil, but truly ingenious.
		string_id message = new string_id (c_stringFile, "s_57");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_finishedScannerQuest (player, npc))
	{
		//-- NPC: Wow, you actually got the bio-scanner from the Darkwalkers. Impressive. Not that I doubted you for even a minute. I've completed your sequencer as well.
		string_id message = new string_id (c_stringFile, "s_20");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you.
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_87");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 2);

			npcStartConversation (player, npc, "naboo_deeja_peak_tanoa_vills", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_onScannerQuest (player, npc))
	{
		//-- NPC: Go get that bio-scanner back from those Darkwalkers. I'm almost completely sure it's for the good of the planet.
		string_id message = new string_id (c_stringFile, "s_21");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_finishedMissingQuest (player, npc))
	{
		naboo_deeja_peak_tanoa_vills_action_endMissingQuest (player, npc);

		//-- NPC: A bio-scanner? Odd. I wonder what the Darkwalkers could possibly want with one of those? And they wanted it badly enough that they shot down that shuttle. It makes no sense. I know one thing, though, they cannot want that bio-scanner for anything good. I think we should get it back.
		string_id message = new string_id (c_stringFile, "s_56");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: We should get it back?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_58");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 5);

			npcStartConversation (player, npc, "naboo_deeja_peak_tanoa_vills", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_onMissingQuest (player, npc))
	{
		//-- NPC: Let me know what you learn about what the Darkwalkers took from the crashed shuttle.
		string_id message = new string_id (c_stringFile, "s_55");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_finishedCrashQuest (player, npc))
	{
		naboo_deeja_peak_tanoa_vills_action_endCrashQuest (player, npc);

		//-- NPC: Thank you for getting this equipment from the crashed shuttle, but I can't imagine what the Darkwalkers would want from the empty crate. I wonder what they took? Seems like we should find out.
		string_id message = new string_id (c_stringFile, "s_52");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: You don't know what was in the crate they emptied?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_53");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 10);

			npcStartConversation (player, npc, "naboo_deeja_peak_tanoa_vills", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_onCrashQuest (player, npc))
	{
		//-- NPC: You'll need to get rid of those wild animals before you can salvage any of the equipment.
		string_id message = new string_id (c_stringFile, "s_51");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_finishedPartsQuest (player, npc))
	{
		naboo_deeja_peak_tanoa_vills_action_endPartsQuest (player, npc);

		//-- NPC: Ah, very good. These look perfect. I'll start on the sequencer right away. In the meantime, I wonder if you would do me a favor?
		string_id message = new string_id (c_stringFile, "s_48");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What kind of favor?
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_73");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 14);

			npcStartConversation (player, npc, "naboo_deeja_peak_tanoa_vills", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition_onPartsQuest (player, npc))
	{
		//-- NPC: Find the parts I need. I'll need an XJ5 circuit board,some fractal transmitters, and some octave regulators. I have everything else.
		string_id message = new string_id (c_stringFile, "s_47");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (naboo_deeja_peak_tanoa_vills_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "check_wrist_device");

		//-- NPC: Ah, I see what's wrong. I need to adjust the chromatic spectrograph before tuning it. I, oh, hello. Please excuse me, I must get back to work.
		string_id message = new string_id (c_stringFile, "s_43");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Professor Hudmasse sent me to you.
		boolean hasResponse0 = false;
		if (naboo_deeja_peak_tanoa_vills_condition_startSequencerQuest (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_37");

			utils.setScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId", 19);

			npcStartConversation (player, npc, "naboo_deeja_peak_tanoa_vills", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "naboo_deeja_peak_tanoa_vills")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

	if (branchId == 2 && naboo_deeja_peak_tanoa_vills_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && naboo_deeja_peak_tanoa_vills_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && naboo_deeja_peak_tanoa_vills_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && naboo_deeja_peak_tanoa_vills_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && naboo_deeja_peak_tanoa_vills_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && naboo_deeja_peak_tanoa_vills_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && naboo_deeja_peak_tanoa_vills_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && naboo_deeja_peak_tanoa_vills_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && naboo_deeja_peak_tanoa_vills_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && naboo_deeja_peak_tanoa_vills_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && naboo_deeja_peak_tanoa_vills_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && naboo_deeja_peak_tanoa_vills_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && naboo_deeja_peak_tanoa_vills_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && naboo_deeja_peak_tanoa_vills_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && naboo_deeja_peak_tanoa_vills_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && naboo_deeja_peak_tanoa_vills_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.naboo_deeja_peak_tanoa_vills.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

