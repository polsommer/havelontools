// ======================================================================
//
// ep3_forest_kerritamba.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.badge;
include library.chat;
include library.groundquests;
include library.space_dungeon;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/ep3_forest_kerritamba";

// ======================================================================
// Script Conditions
// ======================================================================

boolean ep3_forest_kerritamba_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveOne (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_1", "cure");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_EpicTaskCompletedOne (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_1", "return");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasCompletedQuestOne (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_1");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveTwo (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_2", "waiting");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_EpicTaskCompletedTwo (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_2", "return");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasCompletedQuestTwo (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_2");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveThree (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_3", 0);
		   
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_EpicTaskCompletedThree (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_3", "return");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasCompletedQuestThree (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_3");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveFour (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_4", 0);
		   
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_EpicTaskCompletedFour (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_kerritamba_epic_4", 0) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_4"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasCompletedQuestFour (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_4");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveFive (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_5", "squeen");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_EpicTaskCompletedFive (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_kerritamba_epic_5", "squeen") &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_5"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasCompletedQuestFive (obj_id player, obj_id npc)
{
	return groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_5");
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveSix (obj_id player, obj_id npc)
{
	boolean isEpicActive = groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_6", 0);
	
	if (isEpicActive)
	{
		groundquests.grantQuest(player, "ep3_arena_challenge");
	}
	
	return isEpicActive;
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveGood (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_3", 0);
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveBad (obj_id player, obj_id npc)
{
	return	(groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_2", 0) ||
			groundquests.hasCompletedTask(player, "ep3_forest_wirartu_epic_2", 0));
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isEpicTaskActiveSeven (obj_id player, obj_id npc)
{
	return (groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_7", 1) &&
		    groundquests.isTaskActive(player, "ep3_forest_kerritamba_epic_7", 2));
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_EpicTaskCompletedSeven (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedTask(player, "ep3_forest_kerritamba_epic_7", 1) &&
	        groundquests.hasCompletedTask(player, "ep3_forest_kerritamba_epic_7", 2) &&
		   !groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_7"));
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_AllComplete (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedQuest(player, "ep3_forest_kerritamba_epic_7") ||
			groundquests.hasCompletedQuest(player, "ep3_forest_wirartu_epic_3")); 
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_isOnHold (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "ep3_forest_on_hold", 0);
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_AAlwaysTrue (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasLanguage (obj_id player, obj_id npc)
{
	return utils.canSpeakWookiee(player, npc);
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_hasCure (obj_id player, obj_id npc)
{
	obj_id inventory = utils.getInventoryContainer(player);
	obj_id[] invAndEquip = getInventoryAndEquipment(player);
	boolean ep3_forest_kerritamba_condition_hasCure = false;
	for(int i = 0; i < invAndEquip.length; i++)
	{
		string templateName = getTemplateName(invAndEquip[i]);
		if(templateName == "object/tangible/loot/quest/ep3_forest_cure.iff")
			ep3_forest_kerritamba_condition_hasCure = true;
	}
	return ep3_forest_kerritamba_condition_hasCure;
}

// ----------------------------------------------------------------------

boolean ep3_forest_kerritamba_condition_badQuest (obj_id player, obj_id npc)
{
	return groundquests.isQuestActiveOrComplete(player, "ep3_forest_kerritamba_assassin");
}

// ======================================================================
// Script Actions
// ======================================================================

void ep3_forest_kerritamba_action_giveQuestOne (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_1");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestTwo (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_2");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalOne (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "steps");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalTwo (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "curestuff");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestThree (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_3");
	// Give cure here
	if(!ep3_forest_kerritamba_condition_hasCure(player, npc))
		ep3_forest_kerritamba_action_giveCure(player,npc);
	
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalThree (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "curereward");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestFour (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_4");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalFour (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "sayormi");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestFive (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_5");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalFive (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "epic5");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestSix (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.clearQuest(player, "ep3_forest_kerritamba_epic_6");
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_6");
	groundquests.grantQuest(player, "ep3_arena_challenge");
	//space_dungeon.createTicket(player, "kashyyyk_dead_forest", "kashyyyk_dead_forest", space_dungeon.KASH_THE_ARENA);
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalGood (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "goodguys");
	badge.grantBadge(player, "bdg_kash_arena_champ");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalBad (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "badguys");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestAssassin (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_assassin", false);
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveQuestSeven (obj_id player, obj_id npc)
{
	// Apply the first quest to the player here
	groundquests.grantQuest(player, "ep3_forest_kerritamba_epic_7");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveSignalSeven (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "alldone");
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_giveCure (obj_id player, obj_id npc)
{
	// Give cure here
	obj_id cureItem = createObjectInInventoryAllowOverload("object/tangible/loot/quest/ep3_forest_cure.iff", player);
	obj_id[] cure = new obj_id[1];
	cure[0] = cureItem;
	showLootBox(player, cure);
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_Language (obj_id player, obj_id npc)
{
	utils.emoteWookieeConfusion (player, npc);
}

// ----------------------------------------------------------------------

void ep3_forest_kerritamba_action_fixBrokenPlayer (obj_id player, obj_id npc)
{
	if (groundquests.isTaskActive(player, "ep3_forest_wirartu_epic_2", 0) && groundquests.isQuestActiveOrComplete(player, "ep3_forest_kerritamba_epic_7"))
	{	
		groundquests.sendSignal(player, "badguys");
	}		
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int ep3_forest_kerritamba_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba nods.] I expect you have returned with the Mysess Blossom and the Mystical Bag of Dust, correct?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, here they are.
	if (response == "s_607")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalSeven (player, npc);

			//-- NPC: Good. You have now been forgiven by the people. Embrace kindness and mercy, friend. I will be watching to see that you do.
			string_id message = new string_id (c_stringFile, "s_609");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You bow.]
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_611");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good. You have now been forgiven by the people. Embrace kindness and mercy, friend. I will be watching to see that you do.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You bow.]
	if (response == "s_611")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Now go.. I must meditate.
			string_id message = new string_id (c_stringFile, "s_613");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba frowns.] I am displeased with your actions in the Arena. You did not show mercy, a trait our people hold dear. What do you have to say for yourself?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: He deserved it.
	if (response == "s_619")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba inhales deeply and sterns his jaw.] My tolerance for unspeakable evil grows thin.  If you do not explain yourself regarding your horrible deed, you will be banished from the village. Now... explain yourself.
			string_id message = new string_id (c_stringFile, "s_621");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't explain myself to would-be slaves... Chief.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_623");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I--don't know what came over me. Please forgive me.
	if (response == "s_627")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Perhaps. [Chief Kerritamba looks you over.] It is the desire to kill when one begs for your mercy that has me concerned. You did not kill Wirartu. However, the blow has knocked him unconscious and we cannot wake him from his slumber. You must help us.
			string_id message = new string_id (c_stringFile, "s_629");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will. Anything to set things right.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_631");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba inhales deeply and sterns his jaw.] My tolerance for unspeakable evil grows thin.  If you do not explain yourself regarding your horrible deed, you will be banished from the village. Now... explain yourself.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't explain myself to would-be slaves... Chief.
	if (response == "s_623")
	{
		ep3_forest_kerritamba_action_giveSignalBad (player, npc);

		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestAssassin (player, npc);

			//-- NPC: [Chief Kerritamba growls.] Get.. out. And never return. You have been banished from village Kerritamba. Now go!
			string_id message = new string_id (c_stringFile, "s_625");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Perhaps. [Chief Kerritamba looks you over.] It is the desire to kill when one begs for your mercy that has me concerned. You did not kill Wirartu. However, the blow has knocked him unconscious and we cannot wake him from his slumber. You must help us.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will. Anything to set things right.
	if (response == "s_631")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba only nods.] I require a rare Mysess Blossom and a Bag of Dust from the Sayormi witches. Go, then, and find the items I require. Only then will you be forgiven for your actions.
			string_id message = new string_id (c_stringFile, "s_633");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you. I will go quickly.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_635");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba only nods.] I require a rare Mysess Blossom and a Bag of Dust from the Sayormi witches. Go, then, and find the items I require. Only then will you be forgiven for your actions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you. I will go quickly.
	if (response == "s_635")
	{
		ep3_forest_kerritamba_action_giveSignalBad (player, npc);

		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestSeven (player, npc);

			//-- NPC: [Chief Kerritamba nods.]
			string_id message = new string_id (c_stringFile, "s_637");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see you have returned... and safely. I heard the news regarding Wirartu and his challenge. And the fact that you spared his life when you could have easily destroyed him. You show signs of a true hero and we welcome you into our village as the new Arena Champion. Welcome home.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, Chief Kerritamba.
	if (response == "s_641")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalGood (player, npc);

			//-- NPC: Please enjoy the kindness our village has to offer. The people will recognize you as hero and treat you accordingly.
			string_id message = new string_id (c_stringFile, "s_643");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have... some unfortunate news, my friend. [Chief Kerritamba begins, sadly.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is it? Sayormi? Myyydril Caverns?
	if (response == "s_649")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: No, no. It is entirely my fault that this has come up. I shouldn't have asked for your help...
			string_id message = new string_id (c_stringFile, "s_651");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't understand.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_653");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No, no. It is entirely my fault that this has come up. I shouldn't have asked for your help...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't understand.
	if (response == "s_653")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba sighs.] It is the honor of the Arena Champion to perform tasks for his people and his Chief. Wirartu is the Shoartu Arena Champion, the hero of our village. His honor was insulted when I overlooked him and asked for your help with the situations that ailed our village. Now, he wishes to challenge you and requests your presence in the arena.
			string_id message = new string_id (c_stringFile, "s_655");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: But... I didn't mean to.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_657");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba sighs.] It is the honor of the Arena Champion to perform tasks for his people and his Chief. Wirartu is the Shoartu Arena Champion, the hero of our village. His honor was insulted when I overlooked him and asked for your help with the situations that ailed our village. Now, he wishes to challenge you and requests your presence in the arena.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: But... I didn't mean to.
	if (response == "s_657")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I know. It is I who has placed you in this dire situation. I can only deeply apologize for my ignorance. But you must face him. You must defend your honor or risk becoming a disgrace to our village. It is the Shoartu way.
			string_id message = new string_id (c_stringFile, "s_659");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see. I'll do the best I can.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I can't do this right now.
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_661");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_669");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I know. It is I who has placed you in this dire situation. I can only deeply apologize for my ignorance. But you must face him. You must defend your honor or risk becoming a disgrace to our village. It is the Shoartu way.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see. I'll do the best I can.
	if (response == "s_661")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestSix (player, npc);

			//-- NPC: It is all I can expect. However, it is not beyond your ability to bring along allies. Perhaps, it is best that you do. The challenge would be difficult for a single man. However, it would be most suited for a group of three individuals. Any more and the challenge set forth by Wirartu would be considered... not a challenge at all. Present this to the Arena Guard and he will show you in.
			string_id message = new string_id (c_stringFile, "s_663");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. Thank you for fore-warning me.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_665");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can't do this right now.
	if (response == "s_669")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. It is a hard decision.
			string_id message = new string_id (c_stringFile, "s_671");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is all I can expect. However, it is not beyond your ability to bring along allies. Perhaps, it is best that you do. The challenge would be difficult for a single man. However, it would be most suited for a group of three individuals. Any more and the challenge set forth by Wirartu would be considered... not a challenge at all. Present this to the Arena Guard and he will show you in.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. Thank you for fore-warning me.
	if (response == "s_665")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: May the spirits choose your fate.
			string_id message = new string_id (c_stringFile, "s_667");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please tell me you were successful in your journey.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Cyrans and his Queen have been defeated.
	if (response == "s_675")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalFive (player, npc);

			//-- NPC: Then our forests can rest once more... [Chief Kerritamba nods his head in reverence.] You are an unbelievable send from the spirits beyond. We thank you for helping us in our time of need.
			string_id message = new string_id (c_stringFile, "s_677");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I was glad to be of help.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_679");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then our forests can rest once more... [Chief Kerritamba nods his head in reverence.] You are an unbelievable send from the spirits beyond. We thank you for helping us in our time of need.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was glad to be of help.
	if (response == "s_679")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Now, I too can finally rest. [Chief Kerritamba bows his head.]
			string_id message = new string_id (c_stringFile, "s_681");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Cyrans and his Queen are still roaming the Dead Forest. I need to know why you are here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I haven't been able to defeat them. I'm still trying.
	if (response == "s_685")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Continue your task. I hope good fortune finds you and aids you.
			string_id message = new string_id (c_stringFile, "s_687");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let us continue... [Chief Kerritamba nods.] Now that their defenses have weakened, we must strike at the core of the Sayormi people. The Sayormi Queen commands her people with a fierce fist, her wit, cunning and her knowledge of war and tactics are remarkable. We must defeat her, that is the first step...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: And the second?
	if (response == "s_691")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Cyrans the Unfeeling. [Chief Kerritamba's eyes flicker with memories of the past.] He is our most pronounced threat and has been for many years. I remember him... I-- [Chief Kerritamba shakes his head.]
			string_id message = new string_id (c_stringFile, "s_693");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's the history between you two?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_695");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Cyrans the Unfeeling. [Chief Kerritamba's eyes flicker with memories of the past.] He is our most pronounced threat and has been for many years. I remember him... I-- [Chief Kerritamba shakes his head.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the history between you two?
	if (response == "s_695")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba sterns his jaw.] At the time, I was a young warrior. And I had not yet proven myself to the tribe. It was he, Cyrans the Unfeeling, who killed my father, my beloved family. As a result, I was thrown into the leadership role, one I had not yet earned. It was a hard time, a time I would rather not remember.
			string_id message = new string_id (c_stringFile, "s_697");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: [You nod.]
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_699");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba sterns his jaw.] At the time, I was a young warrior. And I had not yet proven myself to the tribe. It was he, Cyrans the Unfeeling, who killed my father, my beloved family. As a result, I was thrown into the leadership role, one I had not yet earned. It was a hard time, a time I would rather not remember.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [You nod.]
	if (response == "s_699")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Since then, our people have thrived. We came back from the ashes that Cyrans the Unfeeling had thrown behind him in his wake. We rose from despair and hopelessness. Our fight with him is not yet won. And we must strike at him where he is weakest.
			string_id message = new string_id (c_stringFile, "s_701");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Then, my task is to defeat Cyrans the Unfeeling and his Queen.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_703");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Since then, our people have thrived. We came back from the ashes that Cyrans the Unfeeling had thrown behind him in his wake. We rose from despair and hopelessness. Our fight with him is not yet won. And we must strike at him where he is weakest.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Then, my task is to defeat Cyrans the Unfeeling and his Queen.
	if (response == "s_703")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: You are correct. [Chief Kerritamba points east.] They live in the Dead Forest where the rest of his minions were found. Find them, defeat them and we will be safe.
			string_id message = new string_id (c_stringFile, "s_705");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will do so.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Perhaps I'll take them on another time.
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_707");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_711");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 33);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch33 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are correct. [Chief Kerritamba points east.] They live in the Dead Forest where the rest of his minions were found. Find them, defeat them and we will be safe.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will do so.
	if (response == "s_707")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestFive (player, npc);

			//-- NPC: You make me proud. May safety be with you.
			string_id message = new string_id (c_stringFile, "s_709");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps I'll take them on another time.
	if (response == "s_711")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: May that time be soon and not too late.
			string_id message = new string_id (c_stringFile, "s_713");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch36 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see you have returned safely. What news do you have from the Dead Forest?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Sayormi threat has been taken care of.
	if (response == "s_717")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalFour (player, npc);

			//-- NPC: Mmm... [Chief Kerritamba nods.] Good. There is one last thing you must do for us, however. Your path has been chosen, my friend. But first, I must meditate on this with the spirits. Come speak with me again.
			string_id message = new string_id (c_stringFile, "s_719");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_721");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 37);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Mmm... [Chief Kerritamba nods.] Good. There is one last thing you must do for us, however. Your path has been chosen, my friend. But first, I must meditate on this with the spirits. Come speak with me again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you.
	if (response == "s_721")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba nods and begins to hum an ancient tune.]
			string_id message = new string_id (c_stringFile, "s_723");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Sayormi still stalk the forests in large numbers. You have not completed your duty. Am I correct?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm still working on the issue.
	if (response == "s_727")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Hurry, my friend. The end times draw near.
			string_id message = new string_id (c_stringFile, "s_729");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch41 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Great Tree has been healed, but... another threat looms on our horizon.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is it?
	if (response == "s_733")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: The Sayormi. Dedicated to the mortal ties of death and decay, the Sayormi try desperately to destroy our lush, green forests with their dark rituals. You can find them east of us, in a small part we call the 'Dead Forest'. It is beyond hope. We cannot muster our soldiers against them. Their powers are too great and their tricks too vast for us to handle.
			string_id message = new string_id (c_stringFile, "s_735");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: How am I able to help you?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_737");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 42);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Sayormi. Dedicated to the mortal ties of death and decay, the Sayormi try desperately to destroy our lush, green forests with their dark rituals. You can find them east of us, in a small part we call the 'Dead Forest'. It is beyond hope. We cannot muster our soldiers against them. Their powers are too great and their tricks too vast for us to handle.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How am I able to help you?
	if (response == "s_737")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: The curing of the Great Tree has stirred the Sayormi. Where they once slept, they now roam, destroying our forests. Our souls cry. Please help us. We must lower their numbers. We must show them that those of the Shoartu Tribe of Kerritamba village will not stand idle and watch our forests die. I need you to defeat 20 of them.
			string_id message = new string_id (c_stringFile, "s_739");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You have my word, Chief Kerritamba.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I.. can't at this time.
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_741");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_745");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch43 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The curing of the Great Tree has stirred the Sayormi. Where they once slept, they now roam, destroying our forests. Our souls cry. Please help us. We must lower their numbers. We must show them that those of the Shoartu Tribe of Kerritamba village will not stand idle and watch our forests die. I need you to defeat 20 of them.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have my word, Chief Kerritamba.
	if (response == "s_741")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestFour (player, npc);

			//-- NPC: You are an honorable friend. Please go forth and be careful. The Sayormi are devious foes.
			string_id message = new string_id (c_stringFile, "s_743");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I.. can't at this time.
	if (response == "s_745")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand. [Chief Kerritamba lowers his head, saddened by the decision.]
			string_id message = new string_id (c_stringFile, "s_747");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My friend.. [Chief Kerritamba smiles kindly.] You cured the Great Tree. Now, we can finally focus our efforts into helping the forest return to its beautiful vitality once more. There is no end to our gratitude.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was glad to be of help.
	if (response == "s_751")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalThree (player, npc);

			//-- NPC: You did more than just help. You saved our forest! You're a hero in our eyes now. Please take this, a gift of our sincerest gratitude.
			string_id message = new string_id (c_stringFile, "s_753");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch48 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I grow more and more concerned. Has the Great Tree been cured, my friend?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet. I'm still working on it.
	if (response == "s_757")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: We need to hurry. My people grow anxious to hear the news. Cure the Great Tree and come back a hero.
			string_id message = new string_id (c_stringFile, "s_759");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I lost the cure.
	if (response == "s_761")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveCure (player, npc);

			//-- NPC: [Chief Kerritamba rolls his eyes.] This isn't a subject to be regarded lightly! Don't lose this one.
			string_id message = new string_id (c_stringFile, "s_763");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Finally... [Chief Kerritamba opens his hands. You can see a mystical vial.] The cure. We must apply it to the roots of the Great Tree and hope it will extinguish the evil from it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I hope it works. I'll give it to the Great Tree.
	if (response == "s_767")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestThree (player, npc);

			//-- NPC: Be quick about it. We guard the Great Tree well. Therefore, it should be an easy journey.
			string_id message = new string_id (c_stringFile, "s_769");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the story behind the Great Tree?
	if (response == "s_771")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: The Great Tree provided us with great shelter and lifted our hopes and spirits during our darkest hour. From the vantage point of the Great Tree, we were able to fend of the advances of the Varactyl creatures hoping to destroy us. We were able to drive them out of the Kkowir Forest. This was a long time ago...
			string_id message = new string_id (c_stringFile, "s_773");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see that the Great Tree is important to you and your people.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_775");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Great Tree provided us with great shelter and lifted our hopes and spirits during our darkest hour. From the vantage point of the Great Tree, we were able to fend of the advances of the Varactyl creatures hoping to destroy us. We were able to drive them out of the Kkowir Forest. This was a long time ago...

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see that the Great Tree is important to you and your people.
	if (response == "s_775")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Indeed. It is a vigil in our lives and serves as a beacon of the victory we shared in that time.
			string_id message = new string_id (c_stringFile, "s_777");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The cure...
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_779");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch54 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Indeed. It is a vigil in our lives and serves as a beacon of the victory we shared in that time.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The cure...
	if (response == "s_779")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes, yes of course! Please, give this to the Great Tree. Let us hope it works.
			string_id message = new string_id (c_stringFile, "s_781");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do it.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_783");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 55);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch55 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, yes of course! Please, give this to the Great Tree. Let us hope it works.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do it.
	if (response == "s_783")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestThree (player, npc);

			//-- NPC: It should be an easy journey. We guard the Great Tree well.
			string_id message = new string_id (c_stringFile, "s_785");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch57 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba seems deep in thought.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Chief Kerritamba? I have the ingredients for your cure.
	if (response == "s_789")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalTwo (player, npc);

			//-- NPC: Ah, perfect. Now... let us hope it works. I will mix the ingredients and prepare it for you momentarily. If the cure works, it will easily cure our Great Tree.
			string_id message = new string_id (c_stringFile, "s_791");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The Great Tree?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_793");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 58);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch58 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Ah, perfect. Now... let us hope it works. I will mix the ingredients and prepare it for you momentarily. If the cure works, it will easily cure our Great Tree.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Great Tree?
	if (response == "s_793")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I will explain to you the history of our Great Tree in due time, my friend. Come back after I have mixed the cure.
			string_id message = new string_id (c_stringFile, "s_795");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch60 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm glad to see you have returned safely. Were you able to collect the items I requested?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not yet. I hope to find them soon, however.
	if (response == "s_799")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good. Please return when you have the items in hand for me. [Chief Kerritamba nods in reverence.]
			string_id message = new string_id (c_stringFile, "s_801");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch62 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We may have a cure in mind, my friend. [Chief Kerritamba nods his head low in reverence.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What did you find out?
	if (response == "s_805")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: It seems that with the hightened activity within the Myyydril Caverns, certain chemical reactions have set forth a spiral of rot and decay. It exits from the small streams from within the Caverns out to our beloved forests. We must counteract it with certain elements.
			string_id message = new string_id (c_stringFile, "s_807");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What are the elements? Where can they be found?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_809");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 63);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch63 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It seems that with the hightened activity within the Myyydril Caverns, certain chemical reactions have set forth a spiral of rot and decay. It exits from the small streams from within the Caverns out to our beloved forests. We must counteract it with certain elements.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What are the elements? Where can they be found?
	if (response == "s_809")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I cannot go into the details, only tell you what I need from the surrounding forest. You must find an Osera seed from the Mouf, Webweaver Silk from Webweaver Spiders, a mystical Ranrt Crystal from a Sayormi Witch, and a Mysess Blossom, a rare plant found throughout the forest.
			string_id message = new string_id (c_stringFile, "s_811");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do it.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'll have to complete such a task later.
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_813");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_817");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 64);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch64 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I cannot go into the details, only tell you what I need from the surrounding forest. You must find an Osera seed from the Mouf, Webweaver Silk from Webweaver Spiders, a mystical Ranrt Crystal from a Sayormi Witch, and a Mysess Blossom, a rare plant found throughout the forest.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do it.
	if (response == "s_813")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestTwo (player, npc);

			//-- NPC: My people and I thank you. I only hope you return quickly so that we may cure our beloved forest in due time.
			string_id message = new string_id (c_stringFile, "s_815");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll have to complete such a task later.
	if (response == "s_817")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand.
			string_id message = new string_id (c_stringFile, "s_819");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch67 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What have you found, my friend? I hope you bring good news.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was able to find the samples.
	if (response == "s_823")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good, good. [Chief Kerritamba takes the samples.] It is time to test my theories. Please return after I have tested the mixture on one of the plants I have here.
			string_id message = new string_id (c_stringFile, "s_825");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I hope it goes well and that we find the cure soon.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_827");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 68);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch68 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good, good. [Chief Kerritamba takes the samples.] It is time to test my theories. Please return after I have tested the mixture on one of the plants I have here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I hope it goes well and that we find the cure soon.
	if (response == "s_827")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveSignalOne (player, npc);

			//-- NPC: I hope so too. Come back in a few moments.
			string_id message = new string_id (c_stringFile, "s_829");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch70 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome, my friend. [Chief Kerritamba nods in reverence.] I sense that you are empty handed. Do you have the samples I requested?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, not yet. I'm diligently working to get them.
	if (response == "s_833")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba nods.] Please go forth and acquire these items for me.
			string_id message = new string_id (c_stringFile, "s_835");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch72 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [Chief Kerritamba nods.] Welcome to our humble village, friend. I assume you have met some of our gentle people. I hope they have treated you well.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well...
	if (response == "s_839")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes, I know. Unfortunately, we are a skeptical, untrusting people. I wish it were different. [Chief Kerritamba nods, expression troubled.]
			string_id message = new string_id (c_stringFile, "s_841");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Something ails you. Might I ask what it is?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_843");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 73);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch73 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, I know. Unfortunately, we are a skeptical, untrusting people. I wish it were different. [Chief Kerritamba nods, expression troubled.]

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Something ails you. Might I ask what it is?
	if (response == "s_843")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Our forest... [Chief Kerritamba closes his eyes.] It's dying. Can you feel it? I can. We all can. It pains us everyday to hear the cries of our forest. We can't escape it. The pain... [Chief Kerritamba opens his eyes wide.] ..it haunts us.
			string_id message = new string_id (c_stringFile, "s_845");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's killing the forest?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_847");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 74);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch74 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Our forest... [Chief Kerritamba closes his eyes.] It's dying. Can you feel it? I can. We all can. It pains us everyday to hear the cries of our forest. We can't escape it. The pain... [Chief Kerritamba opens his eyes wide.] ..it haunts us.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's killing the forest?
	if (response == "s_847")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: We have our suspicions, but no real answers. Some suspect that the Myyydril have caused this. The mystics believe they placed a curse on us when we banished them from our village. It is the only plausible answer.
			string_id message = new string_id (c_stringFile, "s_849");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Can we help the forest in some way?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why were the Myyydril banished?
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_851");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_867");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 75);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch75 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We have our suspicions, but no real answers. Some suspect that the Myyydril have caused this. The mystics believe they placed a curse on us when we banished them from our village. It is the only plausible answer.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can we help the forest in some way?
	if (response == "s_851")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Perhaps. But we must try and find the source of the problem. The Myyydril people have gone through enough. I don't want to cause them unnecessary strife where it isn't warranted.
			string_id message = new string_id (c_stringFile, "s_853");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I agree. So, what's first?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_855");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 76);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why were the Myyydril banished?
	if (response == "s_867")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: It is a painful event to remember. [The chief begins sadly.] It was long ago. They came to us from the depths of the forest. No one knew their origins or where they came from. Without a thought, we welcomed the needy, forgotten tribe and opened our hearts to them. It was they who betrayed us soon afterward. Their chief, Hosdra, took it upon himself to assassinate my great grandfather and try to take the village as his own.
			string_id message = new string_id (c_stringFile, "s_869");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That's horrible. Did the Myyydril help Hosdra?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_871");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 80);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch76 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Perhaps. But we must try and find the source of the problem. The Myyydril people have gone through enough. I don't want to cause them unnecessary strife where it isn't warranted.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I agree. So, what's first?
	if (response == "s_855")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I need samples. There are unspeakable creatures living in the Myyydril Caverns, living amongst radiated crystals and toxic mushrooms. I need a sample of each; a crystal, a mushroom, and secretions from a creature they call the 'Urnsori's.' I don't expect the journey to be easy. Will you help us cure our forest?
			string_id message = new string_id (c_stringFile, "s_857");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I will. You can count on me.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Perhaps another time.
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_859");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_863");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 77);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch77 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I need samples. There are unspeakable creatures living in the Myyydril Caverns, living amongst radiated crystals and toxic mushrooms. I need a sample of each; a crystal, a mushroom, and secretions from a creature they call the 'Urnsori's.' I don't expect the journey to be easy. Will you help us cure our forest?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I will. You can count on me.
	if (response == "s_859")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestOne (player, npc);

			//-- NPC: You make an old soul very happy, my friend. The Myyydril Caverns is to the north across the river. You can spot it easily. The path is concealed by mossy rocks and trees. It can be hard to find on occassion. Go, then, and return swiftly.
			string_id message = new string_id (c_stringFile, "s_861");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps another time.
	if (response == "s_863")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba nods.] I understand, my friend. Please enjoy the rest our village has to offer.
			string_id message = new string_id (c_stringFile, "s_865");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch80 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is a painful event to remember. [The chief begins sadly.] It was long ago. They came to us from the depths of the forest. No one knew their origins or where they came from. Without a thought, we welcomed the needy, forgotten tribe and opened our hearts to them. It was they who betrayed us soon afterward. Their chief, Hosdra, took it upon himself to assassinate my great grandfather and try to take the village as his own.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's horrible. Did the Myyydril help Hosdra?
	if (response == "s_871")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: No. However, it was the consensus of the people of Kerritamba to oust them for Hosdra's horrible deed. We couldn't risk the lives of our people. The Myyydril disappeared into the cave just north of us, across the river. We haven't heard, or seen them, since. But they are the least of our troubles.
			string_id message = new string_id (c_stringFile, "s_873");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The forest...
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_875");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 81);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch81 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: No. However, it was the consensus of the people of Kerritamba to oust them for Hosdra's horrible deed. We couldn't risk the lives of our people. The Myyydril disappeared into the cave just north of us, across the river. We haven't heard, or seen them, since. But they are the least of our troubles.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The forest...
	if (response == "s_875")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Indeed. [Chief Kerritamba lowers his head.] We must find the root of the problem, the cause of our beloved forest's death. The plague is spreading. We can't let it reach the village.
			string_id message = new string_id (c_stringFile, "s_877");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Can we help the forest in some way?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_879");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 82);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch82 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Indeed. [Chief Kerritamba lowers his head.] We must find the root of the problem, the cause of our beloved forest's death. The plague is spreading. We can't let it reach the village.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Can we help the forest in some way?
	if (response == "s_879")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: Perhaps. But we must try and find the source of the problem. The Myyydril people have gone through enough. I don't want to cause them unnecessary strife where it isn't warranted.
			string_id message = new string_id (c_stringFile, "s_881");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I agree. So, what's first?
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_883");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 83);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch83 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Perhaps. But we must try and find the source of the problem. The Myyydril people have gone through enough. I don't want to cause them unnecessary strife where it isn't warranted.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I agree. So, what's first?
	if (response == "s_883")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: I need samples. There are unspeakable creatures living in the Myyydril Caverns, living amongst radiated crystals and toxic mushrooms. I need a sample of each; a crystal, a mushroom, and secretions from a creature they call the 'Urnsori's.' I don't expect the journey to be easy. Will you help us cure our forest?
			string_id message = new string_id (c_stringFile, "s_885");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I will. You can count on me.
			boolean hasResponse0 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Perhaps another time.
			boolean hasResponse1 = false;
			if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_887");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_891");

				utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 84);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int ep3_forest_kerritamba_handleBranch84 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I need samples. There are unspeakable creatures living in the Myyydril Caverns, living amongst radiated crystals and toxic mushrooms. I need a sample of each; a crystal, a mushroom, and secretions from a creature they call the 'Urnsori's.' I don't expect the journey to be easy. Will you help us cure our forest?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I will. You can count on me.
	if (response == "s_887")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			ep3_forest_kerritamba_action_giveQuestOne (player, npc);

			//-- NPC: You make an old soul very happy, my friend. The Myyydril Caverns is to the north across the river. You can spot it easily. The path is concealed by mossy rocks and trees. It can be hard to find on occassion. Go, then, and return swiftly.
			string_id message = new string_id (c_stringFile, "s_889");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perhaps another time.
	if (response == "s_891")
	{
		//-- [NOTE] 
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			//-- NPC: [Chief Kerritamba nods.] I understand, my friend. Please enjoy the rest our village has to offer.
			string_id message = new string_id (c_stringFile, "s_893");
			utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.ep3_forest_kerritamba");

	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "kerritamba" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setName (self, new string_id( "ep3/npc_names", "kerritamba" ));
	setInvulnerable(self, true);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.ep3_forest_kerritamba");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_hasLanguage (player, npc))
	{
		ep3_forest_kerritamba_action_Language (player, npc);

		//-- NPC: Rrworrr!
		string_id message = new string_id (c_stringFile, "s_690");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_badQuest (player, npc))
	{
		//-- NPC: You are no longer welcome here, leave this place immediately!
		string_id message = new string_id (c_stringFile, "s_149");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_AllComplete (player, npc))
	{
		ep3_forest_kerritamba_action_fixBrokenPlayer (player, npc);

		//-- NPC: [Chief Kerritamba hums an ancient tune. He seems to be meditating.]
		string_id message = new string_id (c_stringFile, "s_603");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_EpicTaskCompletedSeven (player, npc))
	{
		//-- NPC: [Chief Kerritamba nods.] I expect you have returned with the Mysess Blossom and the Mystical Bag of Dust, correct?
		string_id message = new string_id (c_stringFile, "s_605");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, here they are.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_607");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 4);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveSeven (player, npc))
	{
		//-- NPC: My patience wears thin... You have not yet brought me the items I require. Return only when you have them.
		string_id message = new string_id (c_stringFile, "s_615");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveBad (player, npc))
	{
		//-- NPC: [Chief Kerritamba frowns.] I am displeased with your actions in the Arena. You did not show mercy, a trait our people hold dear. What do you have to say for yourself?
		string_id message = new string_id (c_stringFile, "s_617");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: He deserved it.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I--don't know what came over me. Please forgive me.
		boolean hasResponse1 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_619");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_627");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 8);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveGood (player, npc))
	{
		//-- NPC: I see you have returned... and safely. I heard the news regarding Wirartu and his challenge. And the fact that you spared his life when you could have easily destroyed him. You show signs of a true hero and we welcome you into our village as the new Arena Champion. Welcome home.
		string_id message = new string_id (c_stringFile, "s_639");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you, Chief Kerritamba.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_641");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 14);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveSix (player, npc))
	{
		//-- NPC: You must speak with Wirartu at the Arena, my friend. Your reputation and honor have been challenged.
		string_id message = new string_id (c_stringFile, "s_645");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_hasCompletedQuestFive (player, npc))
	{
		//-- NPC: I have... some unfortunate news, my friend. [Chief Kerritamba begins, sadly.]
		string_id message = new string_id (c_stringFile, "s_647");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What is it? Sayormi? Myyydril Caverns?
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_649");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 17);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_EpicTaskCompletedFive (player, npc))
	{
		//-- NPC: Please tell me you were successful in your journey.
		string_id message = new string_id (c_stringFile, "s_673");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Cyrans and his Queen have been defeated.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_675");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 24);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveFive (player, npc))
	{
		//-- NPC: Cyrans and his Queen are still roaming the Dead Forest. I need to know why you are here.
		string_id message = new string_id (c_stringFile, "s_683");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I haven't been able to defeat them. I'm still trying.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_685");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 27);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_hasCompletedQuestFour (player, npc))
	{
		//-- NPC: Let us continue... [Chief Kerritamba nods.] Now that their defenses have weakened, we must strike at the core of the Sayormi people. The Sayormi Queen commands her people with a fierce fist, her wit, cunning and her knowledge of war and tactics are remarkable. We must defeat her, that is the first step...
		string_id message = new string_id (c_stringFile, "s_689");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: And the second?
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_691");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 29);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_EpicTaskCompletedFour (player, npc))
	{
		//-- NPC: I see you have returned safely. What news do you have from the Dead Forest?
		string_id message = new string_id (c_stringFile, "s_715");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: The Sayormi threat has been taken care of.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_717");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 36);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveFour (player, npc))
	{
		//-- NPC: The Sayormi still stalk the forests in large numbers. You have not completed your duty. Am I correct?
		string_id message = new string_id (c_stringFile, "s_725");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm still working on the issue.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_727");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 39);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_hasCompletedQuestThree (player, npc))
	{
		//-- NPC: The Great Tree has been healed, but... another threat looms on our horizon.
		string_id message = new string_id (c_stringFile, "s_731");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What is it?
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_733");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 41);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_EpicTaskCompletedThree (player, npc))
	{
		//-- NPC: My friend.. [Chief Kerritamba smiles kindly.] You cured the Great Tree. Now, we can finally focus our efforts into helping the forest return to its beautiful vitality once more. There is no end to our gratitude.
		string_id message = new string_id (c_stringFile, "s_749");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I was glad to be of help.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_751");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 46);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveThree (player, npc))
	{
		//-- NPC: I grow more and more concerned. Has the Great Tree been cured, my friend?
		string_id message = new string_id (c_stringFile, "s_755");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Not yet. I'm still working on it.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I lost the cure.
		boolean hasResponse1 = false;
		if (!ep3_forest_kerritamba_condition_hasCure (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_757");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_761");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 48);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_hasCompletedQuestTwo (player, npc))
	{
		//-- NPC: Finally... [Chief Kerritamba opens his hands. You can see a mystical vial.] The cure. We must apply it to the roots of the Great Tree and hope it will extinguish the evil from it.
		string_id message = new string_id (c_stringFile, "s_765");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I hope it works. I'll give it to the Great Tree.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: What's the story behind the Great Tree?
		boolean hasResponse1 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_767");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_771");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 51);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_EpicTaskCompletedTwo (player, npc))
	{
		//-- NPC: [Chief Kerritamba seems deep in thought.]
		string_id message = new string_id (c_stringFile, "s_787");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Chief Kerritamba? I have the ingredients for your cure.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_789");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 57);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveTwo (player, npc))
	{
		//-- NPC: I'm glad to see you have returned safely. Were you able to collect the items I requested?
		string_id message = new string_id (c_stringFile, "s_797");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Not yet. I hope to find them soon, however.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_799");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 60);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_hasCompletedQuestOne (player, npc))
	{
		//-- NPC: We may have a cure in mind, my friend. [Chief Kerritamba nods his head low in reverence.]
		string_id message = new string_id (c_stringFile, "s_803");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What did you find out?
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_805");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 62);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_EpicTaskCompletedOne (player, npc))
	{
		//-- NPC: What have you found, my friend? I hope you bring good news.
		string_id message = new string_id (c_stringFile, "s_821");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I was able to find the samples.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_823");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 67);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition_isEpicTaskActiveOne (player, npc))
	{
		//-- NPC: Welcome, my friend. [Chief Kerritamba nods in reverence.] I sense that you are empty handed. Do you have the samples I requested?
		string_id message = new string_id (c_stringFile, "s_831");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No, not yet. I'm diligently working to get them.
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_833");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 70);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
	{
		//-- NPC: [Chief Kerritamba nods.] Welcome to our humble village, friend. I assume you have met some of our gentle people. I hope they have treated you well.
		string_id message = new string_id (c_stringFile, "s_837");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Well...
		boolean hasResponse0 = false;
		if (ep3_forest_kerritamba_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_839");

			utils.setScriptVar (player, "conversation.ep3_forest_kerritamba.branchId", 72);

			npcStartConversation (player, npc, "ep3_forest_kerritamba", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "ep3_forest_kerritamba")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

	if (branchId == 4 && ep3_forest_kerritamba_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && ep3_forest_kerritamba_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && ep3_forest_kerritamba_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && ep3_forest_kerritamba_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && ep3_forest_kerritamba_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && ep3_forest_kerritamba_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && ep3_forest_kerritamba_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && ep3_forest_kerritamba_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && ep3_forest_kerritamba_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && ep3_forest_kerritamba_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && ep3_forest_kerritamba_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && ep3_forest_kerritamba_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && ep3_forest_kerritamba_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && ep3_forest_kerritamba_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && ep3_forest_kerritamba_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && ep3_forest_kerritamba_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && ep3_forest_kerritamba_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && ep3_forest_kerritamba_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && ep3_forest_kerritamba_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 33 && ep3_forest_kerritamba_handleBranch33 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 36 && ep3_forest_kerritamba_handleBranch36 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && ep3_forest_kerritamba_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && ep3_forest_kerritamba_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 41 && ep3_forest_kerritamba_handleBranch41 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && ep3_forest_kerritamba_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 43 && ep3_forest_kerritamba_handleBranch43 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && ep3_forest_kerritamba_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 48 && ep3_forest_kerritamba_handleBranch48 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && ep3_forest_kerritamba_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && ep3_forest_kerritamba_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 54 && ep3_forest_kerritamba_handleBranch54 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 55 && ep3_forest_kerritamba_handleBranch55 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 57 && ep3_forest_kerritamba_handleBranch57 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 58 && ep3_forest_kerritamba_handleBranch58 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 60 && ep3_forest_kerritamba_handleBranch60 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 62 && ep3_forest_kerritamba_handleBranch62 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 63 && ep3_forest_kerritamba_handleBranch63 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 64 && ep3_forest_kerritamba_handleBranch64 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 67 && ep3_forest_kerritamba_handleBranch67 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 68 && ep3_forest_kerritamba_handleBranch68 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 70 && ep3_forest_kerritamba_handleBranch70 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 72 && ep3_forest_kerritamba_handleBranch72 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 73 && ep3_forest_kerritamba_handleBranch73 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 74 && ep3_forest_kerritamba_handleBranch74 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 75 && ep3_forest_kerritamba_handleBranch75 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 76 && ep3_forest_kerritamba_handleBranch76 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 77 && ep3_forest_kerritamba_handleBranch77 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 80 && ep3_forest_kerritamba_handleBranch80 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 81 && ep3_forest_kerritamba_handleBranch81 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 82 && ep3_forest_kerritamba_handleBranch82 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 83 && ep3_forest_kerritamba_handleBranch83 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 84 && ep3_forest_kerritamba_handleBranch84 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.ep3_forest_kerritamba.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

