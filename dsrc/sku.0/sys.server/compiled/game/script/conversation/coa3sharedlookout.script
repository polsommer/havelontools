// ======================================================================
//
// coa3sharedlookout.script
// Copyright 2003, Sony Online Entertainment
// All Rights Reserved.
//
// DO NOT EDIT THIS AUTO-GENERATED FILE.  PLEASE USE THE CONVERATION EDITOR!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/coa3sharedlookout";

// ======================================================================
// Script Conditions
// ======================================================================

boolean coa3sharedlookout_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutTrial1 (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	return (getIntObjVar (player, "coa3.convTracker") == 200);
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutTrial2 (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	return (getIntObjVar (player, "coa3.convTracker") == 201);
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutTrial3 (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	return (getIntObjVar (player, "coa3.convTracker") == 202);
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutTrialPass (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	// Completed the lookout conversation and the lookout still likes us
	if (getIntObjVar(player, "coa3.lookoutLikeMeter") >= 2 && getIntObjVar(player, "coa3.convTracker") == 203)
		return true;

	// Detected pass of lookout trial yet haven't started the mission
	if (getIntObjVar(player, "coa3.convTracker") == 204)
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutTrialFail (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	if (getIntObjVar(player, "coa3.lookoutLikeMeter") < 2 && getIntObjVar(player, "coa3.convTracker") == 203)
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutMissionWait (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	return (getIntObjVar (player, "coa3.convTracker") == 205);
}

// ----------------------------------------------------------------------

boolean coa3sharedlookout_condition_lookoutMissionActive (obj_id player, obj_id npc)
{
	if ((getObjIdObjVar(player, "coa3.imperial.missionNpcId") != npc) && 
		(getObjIdObjVar(player, "coa3.rebel.missionNpcId") != npc))
		return false;

	return (getIntObjVar (player, "coa3.convTracker") == 206);
}

// ======================================================================
// Script Actions
// ======================================================================

void coa3sharedlookout_action__defaultAction (obj_id player, obj_id npc)
{
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_StartLikeMeterNeg (obj_id player, obj_id npc)
{
	setObjVar (player, "coa3.lookoutLikeMeter", -1);
	setObjVar (player, "coa3.convTracker", 201);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_StartLikeMeterPos (obj_id player, obj_id npc)
{
	setObjVar (player, "coa3.lookoutLikeMeter", 1);
	setObjVar (player, "coa3.convTracker", 201);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_StartLikeMeterNeut (obj_id player, obj_id npc)
{
	setObjVar (player, "coa3.lookoutLikeMeter", 0);
	setObjVar (player, "coa3.convTracker", 201);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_decLikeMeterTrial2 (obj_id player, obj_id npc)
{
	int likeMeter = getIntObjVar(player, "coa3.lookoutLikeMeter");
	setObjVar (player, "coa3.lookoutLikeMeter", (likeMeter-1));
	setObjVar (player, "coa3.convTracker", 202);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_incLikeMeterTrial2 (obj_id player, obj_id npc)
{
	int likeMeter = getIntObjVar(player, "coa3.lookoutLikeMeter");
	setObjVar (player, "coa3.lookoutLikeMeter", (likeMeter+1));
	setObjVar (player, "coa3.convTracker", 202);	
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_likeMeterTrialBonus (obj_id player, obj_id npc)
{
	int likeMeter = getIntObjVar(player, "coa3.lookoutLikeMeter");
	setObjVar (player, "coa3.lookoutLikeMeter", (likeMeter+1));
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_neutLikeMeterTrial3 (obj_id player, obj_id npc)
{
	setObjVar (player, "coa3.convTracker", 203);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_decLikeMeterTrial3 (obj_id player, obj_id npc)
{
	int likeMeter = getIntObjVar(player, "coa3.lookoutLikeMeter");
	setObjVar (player, "coa3.lookoutLikeMeter", (likeMeter-1));
	setObjVar (player, "coa3.convTracker", 203);	
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_incLikeMeterTrial3 (obj_id player, obj_id npc)
{
	int likeMeter = getIntObjVar(player, "coa3.lookoutLikeMeter");
	setObjVar (player, "coa3.lookoutLikeMeter", (likeMeter+1));
	setObjVar (player, "coa3.convTracker", 203);	
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_passLookoutTrial (obj_id player, obj_id npc)
{
	removeObjVar (player, "coa3.lookoutLikeMeter");
	setObjVar (player, "coa3.convTracker", 204);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_failLookoutTrial (obj_id player, obj_id npc)
{
// NPC aggros on the player
	dictionary params = new dictionary();
	params.put("player", player);
	
	messageTo(npc, "handleAttackPlayer", params, 0, false);	
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_lookoutAcceptMission (obj_id player, obj_id npc)
{
	setObjVar (player, "coa3.convTracker", 206);
	// if the player does not have a 100-GU Anti-Gravity Unit Repair Kit
	// give player the 100-GU Anti-Gravity Unit Repair Kit
	// give player the mission waypoint
	dictionary params = new dictionary();
	params.put("player", player);
	params.put("npc", npc);
	params.put("value", 2);
	
	messageTo(npc, "handleStartCaravanMission", params, 0, false);	
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_lookoutWaitMissionAccept (obj_id player, obj_id npc)
{
	setObjVar (player, "coa3.convTracker", 205);
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_lookoutRefreshMission (obj_id player, obj_id npc)
{
	// Give the player a new waypoint
	dictionary params = new dictionary();
	params.put("player", player);
	params.put("npc", npc);
	params.put("value", 2);
	
	messageTo(npc, "handleStartCaravanMission", params, 0, false);	
}

// ----------------------------------------------------------------------

void coa3sharedlookout_action_lookoutAbortMission (obj_id player, obj_id npc)
{
	// abort the mission
	setObjVar (player, "coa3.convTracker", 205);

	dictionary params = new dictionary();
	params.put("player", player);
	params.put("npc", npc);
	params.put("value", 2);
	
	messageTo(npc, "handleAbortCaravanMission", params, 0, false);	
}

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "npc.conversation.coa3sharedlookout");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "npc.conversation.coa3sharedlookout");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

trigger OnStartNpcConversation (obj_id player)
{
	if (ai_lib.isInCombat (self) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] By accepting the mission from the coordinator, the tracking ObjVar should have been set to 200.
	if (coa3sharedlookout_condition_lookoutTrial1 (player, self))
	{
		//-- NPC: Ya talkin' to me? Who sent ya?
		string_id message = new string_id (c_stringFile, "s_74f0143a");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I come on behalf of Valerian.
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I work for Jabba.
		boolean hasResponse1 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: Alkhara sent me.
		boolean hasResponse2 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: I'm sorry I thought you were someone else.
		boolean hasResponse3 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_70614d9f");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_f9883674");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_dbe291a4");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_b1f8b064");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 1);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] Player has successfully conversed once and objvar is 201.
	if (coa3sharedlookout_condition_lookoutTrial2 (player, self))
	{
		//-- NPC: You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?
		string_id message = new string_id (c_stringFile, "s_6273debb");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Did you hear anything about the caravan in this area?
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: What do you know about Alderaanian flora?
		boolean hasResponse1 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: What do you do for fun?
		boolean hasResponse2 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_8aa225b4");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_bcb9ba12");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_43af83df");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 9);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] Conv tracker = 202
	if (coa3sharedlookout_condition_lookoutTrial3 (player, self))
	{
		//-- NPC: So... What do you like to do for fun?
		string_id message = new string_id (c_stringFile, "s_e6e3a9f7");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I collect weapons. The bigger the better.
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I like dancing and reading poetry.
		boolean hasResponse1 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		//-- PLAYER: I love playing Sabacc.
		boolean hasResponse2 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse2 = true;
		}

		//-- PLAYER: Enough chit chat. What do you know about the caravan?
		boolean hasResponse3 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse3 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5d8182f2");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_fcb2a3f3");

			if (hasResponse2)
				responses [responseIndex++] = new string_id (c_stringFile, "s_46c66c6d");

			if (hasResponse3)
				responses [responseIndex++] = new string_id (c_stringFile, "s_b3049ce7");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 16);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] If lookoutLikeMeter is 2 or more AND the convTracker is at 203 OR the convTracker is at 204, they win.
	if (coa3sharedlookout_condition_lookoutTrialPass (player, self))
	{
		//-- NPC: Say. There's something I need to ask you.
		string_id message = new string_id (c_stringFile, "s_eff5d25");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What is it?
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1c8bddbb");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 24);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] If the lookoutLikeMeter is less then 2 and the convTracker is at 203, the fail.
	if (coa3sharedlookout_condition_lookoutTrialFail (player, self))
	{
		//-- NPC: Say. There's something I need to ask you.
		string_id message = new string_id (c_stringFile, "s_eff5d25");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What is it?
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1c8bddbb");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 29);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] The player has passed the trial but has not accepted the mission yet.
	if (coa3sharedlookout_condition_lookoutMissionWait (player, self))
	{
		//-- NPC: So, can ya go and make those repairs then?
		string_id message = new string_id (c_stringFile, "s_82fdf085");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Sure, sounds easy enough.
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I told you, I'm not mechanically inclined.
		boolean hasResponse1 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_69fbc643");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_da6c5185");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 31);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] The player has already accepted the mission.
	if (coa3sharedlookout_condition_lookoutMissionActive (player, self))
	{
		//-- NPC: Hey, shouldn't you be out making those repairs? We have to get that caravan moving pronto!
		string_id message = new string_id (c_stringFile, "s_8cf78df2");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yeah, I'm on my way there right now.
		boolean hasResponse0 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I wasn't able to find the caravan.
		boolean hasResponse1 = false;
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_869a3fda");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_b4e5d3ef");

			setObjVar (player, "conversation.coa3sharedlookout.branchId", 34);

			npcStartConversation (player, self, "coa3sharedlookout", message, responses);
		}
		else
		{
			chat.chat (self, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (coa3sharedlookout_condition__defaultCondition (player, self))
	{
		//-- NPC: Listen pal, I don't know who you are but you better get lost. Strangers make me nervous and when I get nervous, it makes me want to start shootin' if ya know what I mean. Now beat it!
		string_id message = new string_id (c_stringFile, "s_3029f004");
		chat.chat (self, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "coa3sharedlookout")
		return SCRIPT_CONTINUE;

	int branchId = getIntObjVar (player, "conversation.coa3sharedlookout.branchId");

	//-- [BRANCH NOTE] By accepting the mission from the coordinator, the tracking ObjVar should have been set to 200.
	//-- NPC: Ya talkin' to me? Who sent ya?
	//-- [RESPONSE NOTE] Incorrect response. LookoutLikeMeter starts at -1. COA3ConvTracker is set to 201.
	//-- PLAYER: I come on behalf of Valerian.
	if (branchId == 1 && response == "s_70614d9f")
	{
		coa3sharedlookout_action_StartLikeMeterNeg (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: What!? I mean... I hope she's doing ok and all... Uh... Never mind.
			string_id message = new string_id (c_stringFile, "s_8c75fac0");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya talkin' to me? Who sent ya?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] By accepting the mission from the coordinator, the tracking ObjVar should have been set to 200.
	//-- NPC: Ya talkin' to me? Who sent ya?
	//-- [RESPONSE NOTE] Good answer. lookoutLikeMeter starts at 1. COA3ConvTracker set to 201.
	//-- PLAYER: I work for Jabba.
	if (branchId == 1 && response == "s_f9883674")
	{
		coa3sharedlookout_action_StartLikeMeterPos (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?
			string_id message = new string_id (c_stringFile, "s_c6ca8aca");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Whatever Jabba asks me to do.
			boolean hasResponse0 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Whatever makes me the most money.
			boolean hasResponse1 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: None of your business.
			boolean hasResponse2 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e1e1e0ac");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_90b36308");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_bb54f6cc");

				setObjVar (player, "conversation.coa3sharedlookout.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.coa3sharedlookout.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya talkin' to me? Who sent ya?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] By accepting the mission from the coordinator, the tracking ObjVar should have been set to 200.
	//-- NPC: Ya talkin' to me? Who sent ya?
	//-- [RESPONSE NOTE] Incorrect response. LookoutLikeMeter starts at -1. COA3ConvTracker is set to 201.
	//-- PLAYER: Alkhara sent me.
	if (branchId == 1 && response == "s_dbe291a4")
	{
		coa3sharedlookout_action_StartLikeMeterNeg (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Really? That's mighty... fine...
			string_id message = new string_id (c_stringFile, "s_fac80094");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya talkin' to me? Who sent ya?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] By accepting the mission from the coordinator, the tracking ObjVar should have been set to 200.
	//-- NPC: Ya talkin' to me? Who sent ya?
	//-- [RESPONSE NOTE] Neutral response. lookoutLikeMeter starts a 0. COA3ConvTracker set to 201.
	//-- PLAYER: I'm sorry I thought you were someone else.
	if (branchId == 1 && response == "s_b1f8b064")
	{
		coa3sharedlookout_action_StartLikeMeterNeut (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: You're darn right you're sorry and I am someone else. In fact, lets just say ya never saw me okay? That would be better for both of us. Got it? Now get out of here before you wind up with a nice blaster hole in your head!
			string_id message = new string_id (c_stringFile, "s_b6a2f31");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya talkin' to me? Who sent ya?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Whatever Jabba asks me to do.
	if (branchId == 3 && response == "s_e1e1e0ac")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Yeah I hear you there. Do this, do that, go here, blah blah blah. It all gets old, ya know?
			string_id message = new string_id (c_stringFile, "s_74476a3d");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?
	//-- [RESPONSE NOTE] Bling. Bonus point.
	//-- PLAYER: Whatever makes me the most money.
	if (branchId == 3 && response == "s_90b36308")
	{
		coa3sharedlookout_action_likeMeterTrialBonus (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Now we're talkin'! That's a good philosophy to stick too. The pay's not bad but the kick-backs you get from making Jabba happy, that's what makes it all worth it.
			string_id message = new string_id (c_stringFile, "s_4ae032b9");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: None of your business.
	if (branchId == 3 && response == "s_bb54f6cc")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Fine.
			string_id message = new string_id (c_stringFile, "s_7eb4d42");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Ya do? I can't give ya anything, what I have is mine. But take a rest if ya need it. So what sort of work do you do do?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Player has successfully conversed once and objvar is 201.
	//-- NPC: You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?
	//-- [RESPONSE NOTE] Incorrect response. lookoutLikeMeter -1. ConvTracker set to 202.
	//-- PLAYER: Did you hear anything about the caravan in this area?
	if (branchId == 9 && response == "s_8aa225b4")
	{
		coa3sharedlookout_action_decLikeMeterTrial2 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Who said anythin' about a caravan? I'm starting to think maybe you're not on the up and up here asking things like that.
			string_id message = new string_id (c_stringFile, "s_8dccb521");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Player has successfully conversed once and objvar is 201.
	//-- NPC: You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?
	//-- [RESPONSE NOTE] Incorrect response. lookoutLikeMeter -1. ConvTracker set to 202.
	//-- PLAYER: What do you know about Alderaanian flora?
	if (branchId == 9 && response == "s_bcb9ba12")
	{
		coa3sharedlookout_action_decLikeMeterTrial2 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Anyone workin' for the big guy would know the answer to that or would know better not to ask!
			string_id message = new string_id (c_stringFile, "s_33d80544");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Player has successfully conversed once and objvar is 201.
	//-- NPC: You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?
	//-- [RESPONSE NOTE] Correct response. likeMeter +1. ConvTracker = 202.
	//-- PLAYER: What do you do for fun?
	if (branchId == 9 && response == "s_43af83df")
	{
		coa3sharedlookout_action_incLikeMeterTrial2 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?
			string_id message = new string_id (c_stringFile, "s_efba54e2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'm more of a Lugjack person.
			boolean hasResponse0 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Games are a foolish waste of time.
			boolean hasResponse1 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Yes, lots of money to be made at that game.
			boolean hasResponse2 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4957d505");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f33a89f5");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5b9f69a4");

				setObjVar (player, "conversation.coa3sharedlookout.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.coa3sharedlookout.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You're a chatty one. Then again, it gets a little lonely bein' out here so it's nice to have someone to chat with. But let's just keep it to small talk okay?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm more of a Lugjack person.
	if (branchId == 12 && response == "s_4957d505")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: One of them huh? Well that's not game for me.
			string_id message = new string_id (c_stringFile, "s_93295f8c");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Games are a foolish waste of time.
	if (branchId == 12 && response == "s_f33a89f5")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Well, a little fun never hurt no one. It ain't right stayin' so focused on work all the time. You need to learn to lighten up.
			string_id message = new string_id (c_stringFile, "s_24813e89");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?
	//-- [RESPONSE NOTE] Bling. Bonus point.
	//-- PLAYER: Yes, lots of money to be made at that game.
	if (branchId == 12 && response == "s_5b9f69a4")
	{
		coa3sharedlookout_action_likeMeterTrialBonus (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Don't you know it! If I had better luck, I'd play it for a livin'. It would probably less risky then this line of work.
			string_id message = new string_id (c_stringFile, "s_48a4f87f");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I like gamblin'. Mostly Sabacc, ya know? I stay away from those Lugjack machines. Ya may as well be throwin' credits into the Sarlacc Pit playin' that game. That's a game for old women and clueless nobles who can't appreciate the subtleties of a real man's game. You like Sabacc?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Conv tracker = 202
	//-- NPC: So... What do you like to do for fun?
	//-- [RESPONSE NOTE] Neutral response. No change in likeMeter. ConvTracker set to 203.
	//-- PLAYER: I collect weapons. The bigger the better.
	if (branchId == 16 && response == "s_5d8182f2")
	{
		coa3sharedlookout_action_neutLikeMeterTrial3 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Weapon collector huh? That's too rich a hobby for someone like me. Nah, a reliable blaster is really all I need.
			string_id message = new string_id (c_stringFile, "s_68196cce");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So... What do you like to do for fun?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Conv tracker = 202
	//-- NPC: So... What do you like to do for fun?
	//-- [RESPONSE NOTE] Definately the wrong answer. LikeMeter -1. ConvTracker set to 203.
	//-- PLAYER: I like dancing and reading poetry.
	if (branchId == 16 && response == "s_fcb2a3f3")
	{
		coa3sharedlookout_action_decLikeMeterTrial3 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Oh...
			string_id message = new string_id (c_stringFile, "s_1cace673");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So... What do you like to do for fun?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Conv tracker = 202
	//-- NPC: So... What do you like to do for fun?
	//-- [RESPONSE NOTE] Right answer. likeMeter +1 and convTracker set to 203.
	//-- PLAYER: I love playing Sabacc.
	if (branchId == 16 && response == "s_46c66c6d")
	{
		coa3sharedlookout_action_incLikeMeterTrial3 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?
			string_id message = new string_id (c_stringFile, "s_1d45a1b2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Random Sabacc.
			boolean hasResponse0 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: The regular kind of Sabacc.
			boolean hasResponse1 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: There's more then one way to play?
			boolean hasResponse2 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a31bb6a5");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ab11e3a9");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_789d30e1");

				setObjVar (player, "conversation.coa3sharedlookout.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.coa3sharedlookout.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So... What do you like to do for fun?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] Conv tracker = 202
	//-- NPC: So... What do you like to do for fun?
	//-- [RESPONSE NOTE] Wrong answer. LikeMeter -1 and convTracker set to 203.
	//-- PLAYER: Enough chit chat. What do you know about the caravan?
	if (branchId == 16 && response == "s_b3049ce7")
	{
		coa3sharedlookout_action_decLikeMeterTrial3 (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: You better watch your step kiddo.
			string_id message = new string_id (c_stringFile, "s_c8af5b42");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So... What do you like to do for fun?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?
	//-- [RESPONSE NOTE] Bling, bonus point.
	//-- PLAYER: Random Sabacc.
	if (branchId == 19 && response == "s_a31bb6a5")
	{
		coa3sharedlookout_action_likeMeterTrialBonus (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Wow, you must be good! I can't keep up with all that constant rule changin'.
			string_id message = new string_id (c_stringFile, "s_4fe0cc64");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: The regular kind of Sabacc.
	if (branchId == 19 && response == "s_ab11e3a9")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: The "regular kind" huh? Hehe, alright then.
			string_id message = new string_id (c_stringFile, "s_e0ec2153");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: There's more then one way to play?
	if (branchId == 19 && response == "s_789d30e1")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Yeah, there's lots of different rule variations used throughout the galaxy. You don't know as much about the game as I thought. Now I really wish we had some cards, you sound like easy money to me.
			string_id message = new string_id (c_stringFile, "s_be39516b");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'You too huh? Well it's great we have something in common! Too bad we don't have cards or we could have us a game. Say, what's your favorite Sabacc variant?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] If lookoutLikeMeter is 2 or more AND the convTracker is at 203 OR the convTracker is at 204, they win.
	//-- NPC: Say. There's something I need to ask you.
	//-- [RESPONSE NOTE] Remove the temporary lookoutLikeMeter objvar from the player.
	//-- PLAYER: What is it?
	if (branchId == 24 && response == "s_1c8bddbb")
	{
		coa3sharedlookout_action_passLookoutTrial (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!
			string_id message = new string_id (c_stringFile, "s_e9a05b92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Err... Yeah I'm great at fixing things.
			boolean hasResponse0 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm feeling lazy. Why can't you do it?
			boolean hasResponse1 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Sorry. I'm not good at that sort of thing
			boolean hasResponse2 = false;
			if (coa3sharedlookout_condition__defaultCondition (player, self))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_39c1d4f4");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2c2f4605");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2b3ee988");

				setObjVar (player, "conversation.coa3sharedlookout.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				removeObjVar (player, "conversation.coa3sharedlookout.branchId");

				npcSpeak (player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Say. There's something I need to ask you.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!
	//-- [RESPONSE NOTE] Player is given a 100-GU Anti-Gravity Unit Repair Kit and a waypoint to the caravan. ConvTracker set to 206.
	//-- PLAYER: Err... Yeah I'm great at fixing things.
	if (branchId == 25 && response == "s_39c1d4f4")
	{
		coa3sharedlookout_action_lookoutAcceptMission (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: You're a real sport. This is a really important shipment and if it's lost, Jabba will have all our heads. Take this repair kit and get that part fixed. They'll give you an encoded disk that explains their status. Just deliver that disk and I'm sure you'll be paid well. Just don't lose it! Even though it is encoded, I'd hate to be you if you let it fall into the wrong hands.
			string_id message = new string_id (c_stringFile, "s_f513f012");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!
	//-- [RESPONSE NOTE] Player is being stubborn. Conv tracker set to 205.
	//-- PLAYER: I'm feeling lazy. Why can't you do it?
	if (branchId == 25 && response == "s_2c2f4605")
	{
		coa3sharedlookout_action_lookoutWaitMissionAccept (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: I can't leave this camp! Jabba wants me planted here to keep an eye on our over-land shipping routes. The last thing we need is to lose a valuable shipment to the likes of Valerian or the Alkharans. But if that part isn't fixed, that's just what's going to happen! Those guys are stranded out there and its only a matter of time before someone sees them. Lots of people want to get their hands on that cargo.
			string_id message = new string_id (c_stringFile, "s_4e7b2666");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] 
	//-- NPC: I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!
	//-- [RESPONSE NOTE] Player is being stubborn. Conv tracker set to 205.
	//-- PLAYER: Sorry. I'm not good at that sort of thing
	if (branchId == 25 && response == "s_2b3ee988")
	{
		coa3sharedlookout_action_lookoutWaitMissionAccept (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Oh come on! It won't take ya any time to do and with that repair kit it will be so easy a Wookiee could do it! You need to help us out here; we'll all end up as rancor kibble if something happens to this shipment, don't make me beg!
			string_id message = new string_id (c_stringFile, "s_41d587bc");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'I'm in sort of a jam right now. You wouldn't happen to be good at fixin' things would ya? One of the speeders in our caravan has a busted 100-GU anti-gravity unit and it ain't goin' no where until it gets repaired. Jabba's got a lot of money tied up in this shipment so I'm sure he'd pay ya well for your trouble!' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] If the lookoutLikeMeter is less then 2 and the convTracker is at 203, the fail.
	//-- NPC: Say. There's something I need to ask you.
	//-- [RESPONSE NOTE] Attack player.
	//-- PLAYER: What is it?
	if (branchId == 29 && response == "s_1c8bddbb")
	{
		coa3sharedlookout_action_failLookoutTrial (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Why do you think you can fool me into thinkin' you're someone you ain't? Now I have no choice but to kill ya!
			string_id message = new string_id (c_stringFile, "s_8591381a");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Say. There's something I need to ask you.' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] The player has passed the trial but has not accepted the mission yet.
	//-- NPC: So, can ya go and make those repairs then?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, sounds easy enough.
	if (branchId == 31 && response == "s_69fbc643")
	{
		coa3sharedlookout_action_lookoutAcceptMission (player, self);

		//-- [NOTE] Give player waypoint to spawned caravan.
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: You're a real sport. That caravan's deliverin' an important shipment but one of our speeders had a breakdown and lost one of its anti-gravity units. Take this repair kit and get that speeder up and running. They'll give you a disk explainin' their status and their new ETA. Just be careful you don't lose it! Even though it is encoded, it contains a lot of sensitive information. If you lose the disk, not getting paid would be the least of your worries.
			string_id message = new string_id (c_stringFile, "s_7d2ae36c");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So, can ya go and make those repairs then?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] The player has passed the trial but has not accepted the mission yet.
	//-- NPC: So, can ya go and make those repairs then?
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I told you, I'm not mechanically inclined.
	if (branchId == 31 && response == "s_da6c5185")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: The twin suns take ya, you're exasperating! Listen, I trust you and you look smart enough to figure out what is supposed to go where on a simple part. Aside from the shipment, there are lives on the line here and some of the guys in that caravan owe me a lot of money. Are ya sure ya won't reconsider, I'm beggin' ya here?
			string_id message = new string_id (c_stringFile, "s_fdb57c0");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'So, can ya go and make those repairs then?' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] The player has already accepted the mission.
	//-- NPC: Hey, shouldn't you be out making those repairs? We have to get that caravan moving pronto!
	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah, I'm on my way there right now.
	if (branchId == 34 && response == "s_869a3fda")
	{
		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Well get on it already!
			string_id message = new string_id (c_stringFile, "s_e9f1af41");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Hey, shouldn't you be out making those repairs? We have to get that caravan moving pronto!' were false.");

		return SCRIPT_CONTINUE;
	}

	//-- [BRANCH NOTE] The player has already accepted the mission.
	//-- NPC: Hey, shouldn't you be out making those repairs? We have to get that caravan moving pronto!
	//-- [RESPONSE NOTE] 
	//-- PLAYER: I wasn't able to find the caravan.
	if (branchId == 34 && response == "s_b4e5d3ef")
	{
		coa3sharedlookout_action_lookoutRefreshMission (player, self);

		//-- [NOTE] 
		if (coa3sharedlookout_condition__defaultCondition (player, self))
		{
			//-- NPC: Those guys are always getting lost. I'll upload their last known location to your datapad again.
			string_id message = new string_id (c_stringFile, "s_2fe8f4b5");
			removeObjVar (player, "conversation.coa3sharedlookout.branchId");

			npcSpeak (player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

		chat.chat (self, "Error:  All conditions for OnNpcConversationResponse for branch 'Hey, shouldn't you be out making those repairs? We have to get that caravan moving pronto!' were false.");

		return SCRIPT_CONTINUE;
	}

	chat.chat (self, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	removeObjVar (player, "conversation.coa3sharedlookout.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

