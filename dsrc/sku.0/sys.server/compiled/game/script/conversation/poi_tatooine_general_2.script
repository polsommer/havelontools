// ======================================================================
//
// poi_tatooine_general_2.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.28 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.space_combat;
include library.space_flags;
include library.space_quest;
include library.space_skill;
include library.space_transition;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/poi_tatooine_general_2";

// ======================================================================
// Script Conditions
// ======================================================================

boolean poi_tatooine_general_2_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_failedQuestOne (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuestRecursive( player, "escort", "poi_tatooine_general2_1" ) ||
		 space_quest.hasAbortedQuestRecursive( player, "escort", "poi_tatooine_general2_1" ) )
		 {
		 	return true;
		 }
	return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_failedQuestTwo (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuestRecursive( player, "destroy", "poi_tatooine_general2_2" ) ||
		 space_quest.hasAbortedQuestRecursive( player, "destroy", "poi_tatooine_general2_2" ) )
		 {
		 	return true;
		 }
	return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_failedQuestThree (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuestRecursive( player, "recovery", "poi_tatooine_general2_3" ) ||
		 space_quest.hasAbortedQuestRecursive( player, "recovery", "poi_tatooine_general2_3" ) )
		 {
		 	return true;
		 }
	return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_hasCompletedQuestOne (obj_id player, obj_id npc)
{
	if ( space_quest.hasCompletedQuestRecursive( player, "escort", "poi_tatooine_general2_1"))
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_hasCompletedQuestTwo (obj_id player, obj_id npc)
{
	if ( space_quest.hasCompletedQuestRecursive( player, "destroy", "poi_tatooine_general2_2"))
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_hasCompletedQuestThree (obj_id player, obj_id npc)
{
	if ( space_quest.hasCompletedQuestRecursive( player, "recovery", "poi_tatooine_general2_3"))
		return true;

	return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_collectingQuestOneReward (obj_id player, obj_id npc)
{
	//if the player has WON this quest, but has not been rewarded for it
	//then return TRUE so the NPC can grant the reward!
	if (space_quest.hasCompletedQuestRecursive( player, "escort", "poi_tatooine_general2_1") &&
		!space_quest.hasReceivedReward( player, "escort", "poi_tatooine_general2_1" ))
		
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_collectingQuestTwoReward (obj_id player, obj_id npc)
{
	//if the player has WON this quest, but has not been rewarded for it
	//then return TRUE so the NPC can grant the reward!
	if (space_quest.hasCompletedQuestRecursive( player, "destroy", "poi_tatooine_general2_2") &&
		!space_quest.hasReceivedReward( player, "destroy", "poi_tatooine_general2_2" ))
		
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_collectingQuestThreeReward (obj_id player, obj_id npc)
{
	//if the player has WON this quest, but has not been rewarded for it
	//then return TRUE so the NPC can grant the reward!
	if (space_quest.hasCompletedQuestRecursive( player, "recovery", "poi_tatooine_general2_3") &&
		!space_quest.hasReceivedReward( player, "recovery", "poi_tatooine_general2_3" ))
		
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_isCorrectFaction (obj_id player, obj_id npc)
{
	//if this is an Imperial trainer, make sure the player is an Imperial Pilot
	//if it is Rebel, then make sure the player is a rebel pilot, etc.
	//return FALSE if this NPC should NOT talk to this player!
	
	return ( hasSkill( player, "pilot_neutral_novice" ) );
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_isNegativeFaction (obj_id player, obj_id npc)
{
	return ( factions.getFactionStanding( player, "jabba" ) < 0.0f );
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_hasAnyQuest (obj_id player, obj_id npc)
{
	return space_quest.hasQuest ( player );
}

// ----------------------------------------------------------------------

boolean poi_tatooine_general_2_condition_isTooFar (obj_id player, obj_id npc)
{
	space_combat.playCombatTauntSound( player );
	obj_id containingShip = space_transition.getContainingShip(player);
	return ( getDistance( npc, containingShip ) > space_transition.STATION_COMM_MAX_DISTANCE );
}

// ======================================================================
// Script Actions
// ======================================================================

void poi_tatooine_general_2_action_grantQuestOne (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "escort", "poi_tatooine_general2_1" );
}

// ----------------------------------------------------------------------

void poi_tatooine_general_2_action_grantQuestTwo (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "poi_tatooine_general2_2" );
}

// ----------------------------------------------------------------------

void poi_tatooine_general_2_action_grantQuestThree (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "recovery", "poi_tatooine_general2_3" );
}

// ----------------------------------------------------------------------

void poi_tatooine_general_2_action_rewardForQuestOne (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "escort", "poi_tatooine_general2_1" ))
	{
		space_quest.giveReward( player, "escort", "poi_tatooine_general2_1", 7000 );
	}
}

// ----------------------------------------------------------------------

void poi_tatooine_general_2_action_rewardForQuestTwo (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "destroy", "poi_tatooine_general2_2" ))
	{
		space_quest.giveReward( player, "destroy", "poi_tatooine_general2_2", 15000 );
	}
}

// ----------------------------------------------------------------------

void poi_tatooine_general_2_action_rewardForQuestThree (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "recovery", "poi_tatooine_general2_3" ))
	{
		space_quest.giveReward( player, "recovery", "poi_tatooine_general2_3", 25000 );
	}
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int poi_tatooine_general_2_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Why are you back already?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I failed my mission.
	if (response == "s_14b13184")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_grantQuestTwo (player, npc);

			//-- NPC: I see. It was fairly difficult. The Zynt'aia Order has moved into the area and replenished its numbers. You can go out there again. Go.
			string_id message = new string_id (c_stringFile, "s_2d25ead");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am slightly disappointed about your failure. I realize, however, it was quite difficult out there. The Zynt'aia Order can be vicious.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm not afraid to try again.
	if (response == "s_d215c307")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_grantQuestThree (player, npc);

			//-- NPC: That's good. I have faith in you and your abilities as a pilot. Go.
			string_id message = new string_id (c_stringFile, "s_70fb2f96");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see you have failed your mission. Your tasks were simple enough.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I know. I shouldn't have failed.
	if (response == "s_5517628d")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_grantQuestOne (player, npc);

			//-- NPC: Stop moping around and go back out there. You still have a task to do.
			string_id message = new string_id (c_stringFile, "s_2d737038");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [nod] Pilot. I heard about the great work you're doing out there for us. I hope this will be the first of many rewards for the help you've given us.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why, thank you.
	if (response == "s_6613e8a2")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_rewardForQuestOne (player, npc);

			//-- NPC: Soon, I will have more work for you. Visit me when you have the time.
			string_id message = new string_id (c_stringFile, "s_c5afcca4");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is a shame I have no more work for you. However, I do have the last of your rewards. I hope it is enough. I hope to work with you again in the future.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you. No more work, huh?
	if (response == "s_6fc5551a")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_rewardForQuestThree (player, npc);

			//-- NPC: Sadly no. Perhaps it will change in the future.
			string_id message = new string_id (c_stringFile, "s_c6f02543");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: [nod] Pilot. You've done your tasks well. I have decided to grant you another reward for your services. Our mining operation is appreciative of your efforts.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you again.
	if (response == "s_e9aeb150")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_rewardForQuestTwo (player, npc);

			//-- NPC: I have more work for you. It would be best if you contacted me in a few moments.
			string_id message = new string_id (c_stringFile, "s_b755a869");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am astonished at how well you handled yourself out there, pilot. You are gifted, indeed. Unfortunately, I have no more work for you to do. Our freighters can now access the mining field without a hitch and the Zynt'aia Order seems to have packed their bags and gone away. You've done so much for us.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No more work? That's a shame.
	if (response == "s_44e3e0d3")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'll definitely contact you if I need more assistance. You're the first on my list.
			string_id message = new string_id (c_stringFile, "s_fa21b24b");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome back. You've done so much for us already. I've heard of the daring rescue you braved out there. If you're willing, I have one more task I'd like to have done. The work I will give you is by far the most important.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm interested in helping you.
	if (response == "s_5680cda2")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm glad to hear of it. The more we try, the more the Zynt'aia Order reacts. This time, we'll have to take matters into our own hands. We just can't seem to get the samples we need from the rocks we've found in that asteroid field. I need you to recover a freighter belonging to the Zynt'aia Order and bring it back. Don't give me that look. We have to fight dirty now. Will you help us?
			string_id message = new string_id (c_stringFile, "s_2961542d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, I'll help you.
			boolean hasResponse0 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I really don't want to help right now.
			boolean hasResponse1 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b034d9ae");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8d73b3f1");

				utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm glad to hear of it. The more we try, the more the Zynt'aia Order reacts. This time, we'll have to take matters into our own hands. We just can't seem to get the samples we need from the rocks we've found in that asteroid field. I need you to recover a freighter belonging to the Zynt'aia Order and bring it back. Don't give me that look. We have to fight dirty now. Will you help us?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, I'll help you.
	if (response == "s_b034d9ae")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_grantQuestThree (player, npc);

			//-- NPC: Good. The targeted freighter should arrive soon. I'll upload all the data you'll need to successfully accomplish your mission.
			string_id message = new string_id (c_stringFile, "s_692ea4e6");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I really don't want to help right now.
	if (response == "s_8d73b3f1")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: How very disappointing.
			string_id message = new string_id (c_stringFile, "s_3f54925e");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm so glad you've returned. I heard that you were attacked by pirates. No doubt, it's the Zynt'aia Order. Ugh! We've had such a problem with them lately.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do they want?
	if (response == "s_3988ce81")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess I can tell you the details. You see, the asteroid field we've discovered recently is peppered with rocks which we've yet to get near or attain. The Zynt'aia Order has been hounding us ever since they've settled in the Tatoo System, watching our every move. I expected them to try and take over our mining field, just not this soon.
			string_id message = new string_id (c_stringFile, "s_40f49d32");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What can I help with? There must be something.
			boolean hasResponse0 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm going to think about doing this later..
			boolean hasResponse1 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_87d3a522");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a18139bb");

				utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I guess I can tell you the details. You see, the asteroid field we've discovered recently is peppered with rocks which we've yet to get near or attain. The Zynt'aia Order has been hounding us ever since they've settled in the Tatoo System, watching our every move. I expected them to try and take over our mining field, just not this soon.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I help with? There must be something.
	if (response == "s_87d3a522")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: In fact, there is. You've proven your worth so far. I can trust you with a little more than just a simple escort. Here's the deal. We can't tolerate any more harassment from the Zynt'aia Order. We must strike back at them. I'll transmit the data you'll need to find them and hunt them down. We need to clear the area so the freighters can move safely by. Will you do this?
			string_id message = new string_id (c_stringFile, "s_f0016326");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sure, I guess.
			boolean hasResponse0 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'd rather not take this on quite yet.
			boolean hasResponse1 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ec4258cd");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1c914ce3");

				utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm going to think about doing this later..
	if (response == "s_a18139bb")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I see.
			string_id message = new string_id (c_stringFile, "s_61657d0f");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: In fact, there is. You've proven your worth so far. I can trust you with a little more than just a simple escort. Here's the deal. We can't tolerate any more harassment from the Zynt'aia Order. We must strike back at them. I'll transmit the data you'll need to find them and hunt them down. We need to clear the area so the freighters can move safely by. Will you do this?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sure, I guess.
	if (response == "s_ec4258cd")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_grantQuestTwo (player, npc);

			//-- NPC: Good. I'm glad to hear of it. I wish you well in your mission. Hurry back.
			string_id message = new string_id (c_stringFile, "s_8f164fcb");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'd rather not take this on quite yet.
	if (response == "s_1c914ce3")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am disappointed.
			string_id message = new string_id (c_stringFile, "s_c2c9b283");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We need you to--oh. You're not a miner, are you? What are you doing all the way out here?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I was just looking for some work.
	if (response == "s_2613d24b")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I see. Another one of 'those' types.
			string_id message = new string_id (c_stringFile, "s_3f9fe110");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you mean? You seem kind of bitter.
			boolean hasResponse0 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a401c759");

				utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 28);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see. Another one of 'those' types.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you mean? You seem kind of bitter.
	if (response == "s_a401c759")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: Exactly right. You have no idea how many individuals we've been cheated by these days, most of whom come from the Hutt side of the Tatoo System. Are you really looking for work?
			string_id message = new string_id (c_stringFile, "s_f6936e2a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, I am, in fact.
			boolean hasResponse0 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c27d920f");

				utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 29);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Exactly right. You have no idea how many individuals we've been cheated by these days, most of whom come from the Hutt side of the Tatoo System. Are you really looking for work?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I am, in fact.
	if (response == "s_c27d920f")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: I guess we could use you. I don't trust you, however. Maybe some small tasks at first before giving you more important ones. Yeah, that'll work. If you're really committed to helping us out, you'll escort freighters to and from a new mining field we've discovered. What do you say?
			string_id message = new string_id (c_stringFile, "s_53ed657a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yeah, I guess so.
			boolean hasResponse0 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Nah. I changed my mind.
			boolean hasResponse1 = false;
			if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a99397a");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_31881ef");

				utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int poi_tatooine_general_2_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I guess we could use you. I don't trust you, however. Maybe some small tasks at first before giving you more important ones. Yeah, that'll work. If you're really committed to helping us out, you'll escort freighters to and from a new mining field we've discovered. What do you say?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yeah, I guess so.
	if (response == "s_a99397a")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			poi_tatooine_general_2_action_grantQuestOne (player, npc);

			//-- NPC: All right. You'll meet the first freighter here and escort it and its crew to the mining field. It should be simple enough. Come back when you've completed your duty.
			string_id message = new string_id (c_stringFile, "s_62d05d14");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Nah. I changed my mind.
	if (response == "s_31881ef")
	{
		//-- [NOTE] 
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			//-- NPC: Fine. I knew I couldn't count on someone like you.
			string_id message = new string_id (c_stringFile, "s_56b87409");
			utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.poi_tatooine_general_2");

	setCondition (self, CONDITION_CONVERSABLE);
	
	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.poi_tatooine_general_2");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_isTooFar (player, npc))
	{
		//-- NPC: I can't seem to get your signal. You must be too far away.
		string_id message = new string_id (c_stringFile, "s_630c1e1a");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_hasAnyQuest (player, npc))
	{
		//-- NPC: You're already busy with another task. I guess that's why you're all the way out here by yourself.
		string_id message = new string_id (c_stringFile, "s_c4a3c855");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_failedQuestTwo (player, npc))
	{
		//-- NPC: Why are you back already?
		string_id message = new string_id (c_stringFile, "s_255d3625");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I failed my mission.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_14b13184");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 3);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_failedQuestThree (player, npc))
	{
		//-- NPC: I am slightly disappointed about your failure. I realize, however, it was quite difficult out there. The Zynt'aia Order can be vicious.
		string_id message = new string_id (c_stringFile, "s_102ed493");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm not afraid to try again.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d215c307");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 5);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_failedQuestOne (player, npc))
	{
		//-- NPC: I see you have failed your mission. Your tasks were simple enough.
		string_id message = new string_id (c_stringFile, "s_9f495275");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I know. I shouldn't have failed.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5517628d");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 7);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_collectingQuestOneReward (player, npc))
	{
		//-- NPC: [nod] Pilot. I heard about the great work you're doing out there for us. I hope this will be the first of many rewards for the help you've given us.
		string_id message = new string_id (c_stringFile, "s_bb5aa311");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Why, thank you.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_6613e8a2");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 9);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_collectingQuestThreeReward (player, npc))
	{
		//-- NPC: It is a shame I have no more work for you. However, I do have the last of your rewards. I hope it is enough. I hope to work with you again in the future.
		string_id message = new string_id (c_stringFile, "s_d55f7726");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you. No more work, huh?
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_6fc5551a");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 11);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_collectingQuestTwoReward (player, npc))
	{
		//-- NPC: [nod] Pilot. You've done your tasks well. I have decided to grant you another reward for your services. Our mining operation is appreciative of your efforts.
		string_id message = new string_id (c_stringFile, "s_544993c3");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thank you again.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_e9aeb150");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 13);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_hasCompletedQuestThree (player, npc))
	{
		//-- NPC: I am astonished at how well you handled yourself out there, pilot. You are gifted, indeed. Unfortunately, I have no more work for you to do. Our freighters can now access the mining field without a hitch and the Zynt'aia Order seems to have packed their bags and gone away. You've done so much for us.
		string_id message = new string_id (c_stringFile, "s_3bb73ee3");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No more work? That's a shame.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_44e3e0d3");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 15);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_hasCompletedQuestTwo (player, npc))
	{
		//-- NPC: Welcome back. You've done so much for us already. I've heard of the daring rescue you braved out there. If you're willing, I have one more task I'd like to have done. The work I will give you is by far the most important.
		string_id message = new string_id (c_stringFile, "s_1a834cf5");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'm interested in helping you.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_5680cda2");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 17);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition_hasCompletedQuestOne (player, npc))
	{
		//-- NPC: I'm so glad you've returned. I heard that you were attacked by pirates. No doubt, it's the Zynt'aia Order. Ugh! We've had such a problem with them lately.
		string_id message = new string_id (c_stringFile, "s_d70603e1");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What do they want?
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_3988ce81");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 21);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
	{
		//-- NPC: We need you to--oh. You're not a miner, are you? What are you doing all the way out here?
		string_id message = new string_id (c_stringFile, "s_75040efd");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I was just looking for some work.
		boolean hasResponse0 = false;
		if (poi_tatooine_general_2_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_2613d24b");

			utils.setScriptVar (player, "conversation.poi_tatooine_general_2.branchId", 27);

			npcStartConversation (player, npc, "poi_tatooine_general_2", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "poi_tatooine_general_2")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

	if (branchId == 3 && poi_tatooine_general_2_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && poi_tatooine_general_2_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && poi_tatooine_general_2_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && poi_tatooine_general_2_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && poi_tatooine_general_2_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && poi_tatooine_general_2_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && poi_tatooine_general_2_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && poi_tatooine_general_2_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && poi_tatooine_general_2_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && poi_tatooine_general_2_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && poi_tatooine_general_2_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && poi_tatooine_general_2_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && poi_tatooine_general_2_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && poi_tatooine_general_2_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && poi_tatooine_general_2_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && poi_tatooine_general_2_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.poi_tatooine_general_2.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

