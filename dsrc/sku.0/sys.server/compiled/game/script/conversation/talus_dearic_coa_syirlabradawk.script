// ======================================================================
//
// talus_dearic_coa_syirlabradawk.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/talus_dearic_coa_syirlabradawk";

// ======================================================================
// Script Conditions
// ======================================================================

boolean talus_dearic_coa_syirlabradawk_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_rebel_faction (obj_id player, obj_id npc)
{
	// checks if player is rebel faction and has not completed the optional task yet
	return (factions.isRebel(player) && 
	groundquests.hasCompletedQuest(player, "talus_dearic_coa_medic_prisoner"));
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_accepted_medic_quest (obj_id player, obj_id npc)
{
	//checks to see if the PC has accepted the tasks from Syirlabradawk
	return groundquests.isTaskActive(player, "talus_dearic_coa_medic_prisoner", "talus_dearic_coa_help_syirlabradawk_wft");
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_used_mainframe (obj_id player, obj_id npc)
{
	//checks to see if player has accepted the deep cover assignment from Trezya
	return groundquests.isTaskActive(player, "talus_dearic_coa_medic_prisoner", "talus_dearic_coa_find_syir_wfs");
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_completed_medic_quest (obj_id player, obj_id npc)
{
	//checks to see if the medic quest has been completed
	if(factions.isRebel(player))
		if (groundquests.hasCompletedQuest(player, "talus_dearic_coa_medic_prisoner") && 
		(groundquests.hasCompletedQuest(player, "talus_dearic_coa_opt_rebel_quest") ||
		groundquests.hasCompletedQuest(player, "talus_dearic_coa_rebel_view_end")))
			return true;
		else
			return false;
	else
		return groundquests.hasCompletedQuest(player, "talus_dearic_coa_medic_prisoner");
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_reb_opt_quest_complete (obj_id player, obj_id npc)
{
	//checks to see if the optional Rebel quest has been accepted
	if(factions.isRebel(player) && 
	groundquests.isTaskActive(player, "talus_dearic_coa_opt_rebel_quest", "talus_dearic_coa_imperials_eliminated_wfs"))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_medic_tasks_complete (obj_id player, obj_id npc)
{
	//checks to see if the medic quests are complete
	return groundquests.isTaskActive(player, "talus_dearic_coa_medic_prisoner", "talus_dearic_coa_return_to_syir_wfs");
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_reb_opt_qst_active (obj_id player, obj_id npc)
{
	// checks if player has not completed the optional task yet
	return groundquests.isTaskActive(player, "talus_dearic_coa_opt_rebel_quest", "talus_dearic_coa_escort_elimination_dsm");
}

// ----------------------------------------------------------------------

boolean talus_dearic_coa_syirlabradawk_condition_reb_opt_qst_unaccepted (obj_id player, obj_id npc)
{
	if(factions.isRebel(player) && 
		!groundquests.isQuestActiveOrComplete(player, "talus_dearic_coa_opt_rebel_quest") && 
		groundquests.hasCompletedQuest(player, "talus_dearic_coa_medic_prisoner"))
		return true;
	else
		return false;
}

// ======================================================================
// Script Actions
// ======================================================================

void talus_dearic_coa_syirlabradawk_action_accept_medic_quest (obj_id player, obj_id npc)
{
	// Sends the signal that the PC has accepted the medic tasks from Syirlabradawk
	groundquests.sendSignal(player, "talus_dearic_coa_syir_found");
}

// ----------------------------------------------------------------------

void talus_dearic_coa_syirlabradawk_action_accept_opt_reb_quest (obj_id player, obj_id npc)
{
	// grant the optional Rebel quest
	groundquests.grantQuest(player, "talus_dearic_coa_opt_rebel_quest");
}

// ----------------------------------------------------------------------

void talus_dearic_coa_syirlabradawk_action_complete_opt_reb_quest (obj_id player, obj_id npc)
{
	// Sends the signal that the Syir knows the Imperial escort has been eliminated
	groundquests.sendSignal(player, "talus_dearic_coa_report_imperials_eliminated");
}

// ----------------------------------------------------------------------

void talus_dearic_coa_syirlabradawk_action_complete_medic_quest (obj_id player, obj_id npc)
{
	// Sends the signal that the PC has reported success in the deep cover assignment
	groundquests.sendSignal(player, "talus_dearic_coa_rescue_syir");
}

// ----------------------------------------------------------------------

void talus_dearic_coa_syirlabradawk_action_grant_return_quest (obj_id player, obj_id npc)
{
	// sends signal to end primary rebel quest
	groundquests.sendSignal(player, "coa_speak_with_syir");
	// grants return and report quest
	groundquests.grantQuest(player, "talus_dearic_coa_rebel_view_end");
}

// ----------------------------------------------------------------------

void talus_dearic_coa_syirlabradawk_action_grant_return_quest2 (obj_id player, obj_id npc)
{
	if(!groundquests.isQuestActiveOrComplete(player, "talus_dearic_coa_rebel_view_end"))
		groundquests.grantQuest(player, "talus_dearic_coa_rebel_view_end");
	else
		return;
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int talus_dearic_coa_syirlabradawk_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Well done.  Here, I lifted this off one of the officers while you were busy.  You might find some use for it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thanks.  You ready to go?
	if (response == "s_65")
	{
		doAnimationAction (player, "beckon");

		talus_dearic_coa_syirlabradawk_action_complete_opt_reb_quest (player, npc);

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_away");

			//-- NPC: I want to check these injured prisoners one more time.  I will make my own way out.  You've cleared the base ahead and it will be days before they regroup.
			string_id message = new string_id (c_stringFile, "s_66");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Suit yourself.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_130");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want to check these injured prisoners one more time.  I will make my own way out.  You've cleared the base ahead and it will be days before they regroup.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Suit yourself.
	if (response == "s_130")
	{
		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			talus_dearic_coa_syirlabradawk_action_grant_return_quest2 (player, npc);

			//-- NPC: May the Force be with you.
			string_id message = new string_id (c_stringFile, "s_131");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please go on ahead of me.  I can make my own way out now.  I'll find some way past that escort in the tower.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I've changed my mind.  I'm going to try to take out those stormtroopers.  Stay here till I get back.
	if (response == "s_78")
	{
		doAnimationAction (player, "explain");

		talus_dearic_coa_syirlabradawk_action_accept_opt_reb_quest (player, npc);

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Very well. I'll wait here till you have done what must be done.
			string_id message = new string_id (c_stringFile, "s_79");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Will you be alright?
	if (response == "s_83")
	{
		doAnimationAction (player, "beckon");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_away");

			//-- NPC: Yes.  I just want to check these people one more time.  I'll make my own way out.  Thanks.
			string_id message = new string_id (c_stringFile, "s_84");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Let me scout again to make sure.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm heading back to Trezya.  Be careful.
			boolean hasResponse1 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_93");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_95");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes.  I just want to check these people one more time.  I'll make my own way out.  Thanks.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Let me scout again to make sure.
	if (response == "s_93")
	{
		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			talus_dearic_coa_syirlabradawk_action_grant_return_quest2 (player, npc);

			//-- NPC: I will be right here.
			string_id message = new string_id (c_stringFile, "s_99");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm heading back to Trezya.  Be careful.
	if (response == "s_95")
	{
		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			talus_dearic_coa_syirlabradawk_action_grant_return_quest2 (player, npc);

			//-- NPC: Alright, you too.
			string_id message = new string_id (c_stringFile, "s_97");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thank you.  Please give me a moment while I stabilize these patients.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Will you be coming with me, now that you have saved them?
	if (response == "s_27")
	{
		doAnimationAction (player, "beckon");

		talus_dearic_coa_syirlabradawk_action_complete_medic_quest (player, npc);

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			//-- NPC: One more moment, please.  There!  Now, what was the question?
			string_id message = new string_id (c_stringFile, "s_89");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Will you be coming with me?
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_90");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: One more moment, please.  There!  Now, what was the question?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Will you be coming with me?
	if (response == "s_90")
	{
		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition_rebel_faction (player, npc))
		{
			doAnimationAction (npc, "explain");

			doAnimationAction (player, "listen");

			//-- NPC: I fear it would be very difficult for me to try and leave now.  One of the guards was taunting me by revealing that the Imperial transfer force had arrived early.  From what I've overheard, they are upstairs filling out the paperwork for my transfer.  There is little chance I can make it out of here with those stormtroopers in the way.
			string_id message = new string_id (c_stringFile, "s_98");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You stay here.  I'll see what I can do about those Imps.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't have the necessary firepower to take out stormtroopers.
			boolean hasResponse1 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: We'll have to chance it.  I don't have the fire power to take out a squad of stormtroopers alone.
			boolean hasResponse2 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_103");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_111");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_120");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "sigh_deeply");

			//-- NPC: Trezya would be very sad if I fell into Imperial hands. You've cleared the base for the most part.  Return to Ms. Nenei and report.  I'll stabilize these prisoners and then make my own way out.
			string_id message = new string_id (c_stringFile, "s_124");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Alright.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_126");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I fear it would be very difficult for me to try and leave now.  One of the guards was taunting me by revealing that the Imperial transfer force had arrived early.  From what I've overheard, they are upstairs filling out the paperwork for my transfer.  There is little chance I can make it out of here with those stormtroopers in the way.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You stay here.  I'll see what I can do about those Imps.
	if (response == "s_103")
	{
		doAnimationAction (player, "stop");

		talus_dearic_coa_syirlabradawk_action_accept_opt_reb_quest (player, npc);

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "goodbye");

			talus_dearic_coa_syirlabradawk_action_accept_opt_reb_quest (player, npc);

			//-- NPC: Please, be careful.
			string_id message = new string_id (c_stringFile, "s_107");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't have the necessary firepower to take out stormtroopers.
	if (response == "s_111")
	{
		doAnimationAction (player, "slump_head");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "wave_on_dismissing");

			//-- NPC: Don't worry about me then.  Get out of here and tell Trezya what happened.
			string_id message = new string_id (c_stringFile, "s_114");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can't just leave you here.  I'll go get help and come back.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_116");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We'll have to chance it.  I don't have the fire power to take out a squad of stormtroopers alone.
	if (response == "s_120")
	{
		doAnimationAction (player, "apologize");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			talus_dearic_coa_syirlabradawk_action_grant_return_quest (player, npc);

			//-- NPC: Very well then.  Report what you know to Trezya.  I'll make my own way out in a few minutes after I have finished with my patients.
			string_id message = new string_id (c_stringFile, "s_122");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Don't worry about me then.  Get out of here and tell Trezya what happened.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can't just leave you here.  I'll go get help and come back.
	if (response == "s_116")
	{
		doAnimationAction (player, "shake_head_no");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			doAnimationAction (player, "listen");

			talus_dearic_coa_syirlabradawk_action_grant_return_quest2 (player, npc);

			//-- NPC: Hurry.  I fear there isn't much time before I am transferred.  I'll look over these injured people until you return.
			string_id message = new string_id (c_stringFile, "s_118");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Trezya would be very sad if I fell into Imperial hands. You've cleared the base for the most part.  Return to Ms. Nenei and report.  I'll stabilize these prisoners and then make my own way out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Alright.
	if (response == "s_126")
	{
		doAnimationAction (player, "huh");

		talus_dearic_coa_syirlabradawk_action_complete_medic_quest (player, npc);

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			talus_dearic_coa_syirlabradawk_action_grant_return_quest (player, npc);

			//-- NPC: Please tell her to send a transport for these injured people.
			string_id message = new string_id (c_stringFile, "s_128");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please bring that equipment to me as soon as you can.  These prisoners will not last much longer.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will be swift.
	if (response == "s_91")
	{
		doAnimationAction (player, "nod_head_once");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "thank");

			//-- NPC: Thank you.
			string_id message = new string_id (c_stringFile, "s_92");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: How did you get in here?!  This is dangerous.  Talking to me will get us both killed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Trezya Nenei sent me to rescue you.
	if (response == "s_48")
	{
		doAnimationAction (player, "explain");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "sigh_deeply");

			//-- NPC: Trezya!?  That girl's heart is too big for her own good.  I'm sorry, but your efforts have been in vain.  I can not leave.  But you must before the N.S.H. guards return!
			string_id message = new string_id (c_stringFile, "s_50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Trezya said that the Empire is sending an escort group to transfer you to their facilities.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_52");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Then I'll leave you down here.
	if (response == "s_104")
	{
		doAnimationAction (player, "shrug_shoulders");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_multiple");

			//-- NPC: That is for the best.
			string_id message = new string_id (c_stringFile, "s_106");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Trezya!?  That girl's heart is too big for her own good.  I'm sorry, but your efforts have been in vain.  I can not leave.  But you must before the N.S.H. guards return!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Trezya said that the Empire is sending an escort group to transfer you to their facilities.
	if (response == "s_52")
	{
		doAnimationAction (player, "explain");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "implore");

			//-- NPC: Then I only have a little time left.  I need your help.
			string_id message = new string_id (c_stringFile, "s_54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That's why I'm here!
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then I only have a little time left.  I need your help.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's why I'm here!
	if (response == "s_56")
	{
		doAnimationAction (player, "nod_head_multiple");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			doAnimationAction (player, "listen");

			//-- NPC: Good.  I need you to retrieve my medical equipment so I can treat these other prisoners.  They were brought in recently and placed here in my cell to torment me.  Each of them is dying but treatable within a certain time frame.  But I don't have the proper tools to treat them.  You must get them for me.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: That's not exactly what I had in mind, but I don't have a choice.  Where is your equipment?
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I'm here to get you out.  If you don't want to leave, then I have no choice but to leave you.
			boolean hasResponse1 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_60");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_86");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Good.  I need you to retrieve my medical equipment so I can treat these other prisoners.  They were brought in recently and placed here in my cell to torment me.  Each of them is dying but treatable within a certain time frame.  But I don't have the proper tools to treat them.  You must get them for me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's not exactly what I had in mind, but I don't have a choice.  Where is your equipment?
	if (response == "s_60")
	{
		doAnimationAction (player, "sigh_deeply");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I need three things.  First my bio analyzer.  The N.S.H. Officer in charge of torturing prisoners has it.  A supply officer has my chemicals bag.  I don't know where my other tools are.  You might try finding a medical droid.  They usually carry an extra bag.
			string_id message = new string_id (c_stringFile, "s_68");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll see what I can scrounge up.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_70");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'm here to get you out.  If you don't want to leave, then I have no choice but to leave you.
	if (response == "s_86")
	{
		doAnimationAction (player, "wave_finger_warning");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "sigh_deeply");

			//-- NPC: As I said, you have wasted your time in coming for me.  I can not leave.  Be careful on your way back out.
			string_id message = new string_id (c_stringFile, "s_96");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you.
			boolean hasResponse0 = false;
			if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 28);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I need three things.  First my bio analyzer.  The N.S.H. Officer in charge of torturing prisoners has it.  A supply officer has my chemicals bag.  I don't know where my other tools are.  You might try finding a medical droid.  They usually carry an extra bag.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll see what I can scrounge up.
	if (response == "s_70")
	{
		doAnimationAction (player, "nod");

		talus_dearic_coa_syirlabradawk_action_accept_medic_quest (player, npc);

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "implore");

			//-- NPC: Please hurry.  These prisoners will not last much longer.
			string_id message = new string_id (c_stringFile, "s_81");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As I said, you have wasted your time in coming for me.  I can not leave.  Be careful on your way back out.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you.
	if (response == "s_100")
	{
		doAnimationAction (player, "thank");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "goodbye");

			//-- NPC: You are welcome.
			string_id message = new string_id (c_stringFile, "s_102");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int talus_dearic_coa_syirlabradawk_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: How did you get in here?  This is dangerous.  Talking to me will get us both killed.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll leave you be then.
	if (response == "s_110")
	{
		doAnimationAction (player, "dismiss");

		//-- [NOTE] 
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "goodbye");

			//-- NPC: Be careful.
			string_id message = new string_id (c_stringFile, "s_112");
			utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isTangible (self)) || (isPlayer (self)))
		detachScript(self, "conversation.talus_dearic_coa_syirlabradawk");

	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.talus_dearic_coa_syirlabradawk");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_completed_medic_quest (player, npc))
	{
		doAnimationAction (npc, "explain");

		talus_dearic_coa_syirlabradawk_action_grant_return_quest2 (player, npc);

		//-- NPC: I believe I can make my own way out now.  Thank's again.
		string_id message = new string_id (c_stringFile, "s_4");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_reb_opt_quest_complete (player, npc))
	{
		doAnimationAction (npc, "manipulate_medium");

		//-- NPC: Well done.  Here, I lifted this off one of the officers while you were busy.  You might find some use for it.
		string_id message = new string_id (c_stringFile, "s_63");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Thanks.  You ready to go?
		boolean hasResponse0 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_65");

			utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 2);

			npcStartConversation (player, npc, "talus_dearic_coa_syirlabradawk", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_reb_opt_qst_active (player, npc))
	{
		//-- NPC: Have you cleared those stormtroopers yet?
		string_id message = new string_id (c_stringFile, "s_129");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_reb_opt_qst_unaccepted (player, npc))
	{
		doAnimationAction (npc, "explain");

		//-- NPC: Please go on ahead of me.  I can make my own way out now.  I'll find some way past that escort in the tower.
		string_id message = new string_id (c_stringFile, "s_64");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I've changed my mind.  I'm going to try to take out those stormtroopers.  Stay here till I get back.
		boolean hasResponse0 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Will you be alright?
		boolean hasResponse1 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_78");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_83");

			utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 6);

			npcStartConversation (player, npc, "talus_dearic_coa_syirlabradawk", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_medic_tasks_complete (player, npc))
	{
		doAnimationAction (npc, "thank");

		doAnimationAction (player, "tap_foot");

		//-- NPC: Thank you.  Please give me a moment while I stabilize these patients.
		string_id message = new string_id (c_stringFile, "s_23");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Will you be coming with me, now that you have saved them?
		boolean hasResponse0 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_27");

			utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 11);

			npcStartConversation (player, npc, "talus_dearic_coa_syirlabradawk", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_accepted_medic_quest (player, npc))
	{
		doAnimationAction (npc, "explain");

		doAnimationAction (player, "listen");

		//-- NPC: Please bring that equipment to me as soon as you can.  These prisoners will not last much longer.
		string_id message = new string_id (c_stringFile, "s_42");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I will be swift.
		boolean hasResponse0 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_91");

			utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 20);

			npcStartConversation (player, npc, "talus_dearic_coa_syirlabradawk", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition_used_mainframe (player, npc))
	{
		doAnimationAction (npc, "whisper");

		//-- NPC: How did you get in here?!  This is dangerous.  Talking to me will get us both killed.
		string_id message = new string_id (c_stringFile, "s_46");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Trezya Nenei sent me to rescue you.
		boolean hasResponse0 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Then I'll leave you down here.
		boolean hasResponse1 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_48");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_104");

			utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 22);

			npcStartConversation (player, npc, "talus_dearic_coa_syirlabradawk", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "whisper");

		//-- NPC: How did you get in here?  This is dangerous.  Talking to me will get us both killed.
		string_id message = new string_id (c_stringFile, "s_108");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I'll leave you be then.
		boolean hasResponse0 = false;
		if (talus_dearic_coa_syirlabradawk_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_110");

			utils.setScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId", 31);

			npcStartConversation (player, npc, "talus_dearic_coa_syirlabradawk", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "talus_dearic_coa_syirlabradawk")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

	if (branchId == 2 && talus_dearic_coa_syirlabradawk_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && talus_dearic_coa_syirlabradawk_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && talus_dearic_coa_syirlabradawk_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && talus_dearic_coa_syirlabradawk_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && talus_dearic_coa_syirlabradawk_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && talus_dearic_coa_syirlabradawk_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && talus_dearic_coa_syirlabradawk_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && talus_dearic_coa_syirlabradawk_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && talus_dearic_coa_syirlabradawk_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && talus_dearic_coa_syirlabradawk_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && talus_dearic_coa_syirlabradawk_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && talus_dearic_coa_syirlabradawk_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && talus_dearic_coa_syirlabradawk_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && talus_dearic_coa_syirlabradawk_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && talus_dearic_coa_syirlabradawk_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && talus_dearic_coa_syirlabradawk_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && talus_dearic_coa_syirlabradawk_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.talus_dearic_coa_syirlabradawk.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

