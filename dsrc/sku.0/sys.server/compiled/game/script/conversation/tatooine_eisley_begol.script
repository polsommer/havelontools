// ======================================================================
//
// tatooine_eisley_begol.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/tatooine_eisley_begol";

// ======================================================================
// Script Conditions
// ======================================================================

boolean tatooine_eisley_begol_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_begol_condition_sodOnTask (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_spice_of_death");
	int tat_eisley_nikos_coins_e1 = groundquests.getTaskId(questId1, "tat_eisley_death_spice_e1"); 
	
	boolean onTask = questIsTaskActive(questId1, tat_eisley_nikos_coins_e1, player);
	
	return onTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_begol_condition_sodQuestComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_spice_of_death");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_begol_condition_blocker (obj_id player, obj_id npc)
{
	return groundquests.isQuestDisabled("tatooine_eisley_spice_of_death");
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_begol_condition_tdcQuestComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_tdc");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;
}

// ======================================================================
// Script Actions
// ======================================================================

void tatooine_eisley_begol_action_facePlayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
}

// ----------------------------------------------------------------------

void tatooine_eisley_begol_action_grantSODQuest (obj_id player, obj_id npc)
{
    int questId = questGetQuestId("quest/tatooine_eisley_spice_of_death");
    groundquests.grantQuest(questId, player, npc, true);

}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int tatooine_eisley_begol_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You really are a great person. I don't think any other soul in this city would have helped me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It was my pleasure.
	if (response == "s_66")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Let me return the favor. I know of a woman that is in need of some help. I think after what you did for me, you might be the only person willing to help her. Her name is Kashi and I have transmitted her location to your datapad. Please see her.
			string_id message = new string_id (c_stringFile, "s_67");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_85");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let me return the favor. I know of a woman that is in need of some help. I think after what you did for me, you might be the only person willing to help her. Her name is Kashi and I have transmitted her location to your datapad. Please see her.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will.
	if (response == "s_85")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thank you very much
			string_id message = new string_id (c_stringFile, "s_86");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Let me know when you are ready to get those spice crates. I can identify them through the commlink.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I went to the location you gave me, but it's just a shipping company named White Horse.
	if (response == "s_78")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't care what it looks like on the outside. Those people are spice fiends. Check inside, you'll see.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Ok, if you're sure.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 6);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch6 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't care what it looks like on the outside. Those people are spice fiends. Check inside, you'll see.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok, if you're sure.
	if (response == "s_83")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm positive.
			string_id message = new string_id (c_stringFile, "s_84");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Did Byxle send you? He really is a good friend even if he doesn't know how to cook.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, he said you needed help with something.
	if (response == "s_60")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Have you ever heard of that poison called death sticks?
			string_id message = new string_id (c_stringFile, "s_61");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes I have.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_62");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Have you ever heard of that poison called death sticks?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes I have.
	if (response == "s_62")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: I want you to kill for me. I want revenge!
			string_id message = new string_id (c_stringFile, "s_63");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Whoa there friend, revenge can be a tricky endeavor.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_64");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I want you to kill for me. I want revenge!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Whoa there friend, revenge can be a tricky endeavor.
	if (response == "s_64")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			tatooine_eisley_begol_action_facePlayer (player, npc);

			//-- NPC: I don't care. They took my beautiful Shan'ri away. I want to hurt them like they hurt me.
			string_id message = new string_id (c_stringFile, "s_24");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you mean they took her away? Who is Shan'ri?
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_26");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh, how can they let that trash destroy people? It's terrible, they leave so many damaged and destroyed lives in their wake. I know the truth now. I used to think it was ok, that you made your own choices, but now I don't care about choices. I want revenge.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Whoa there friend, revenge can be a tricky endeavor.
	if (response == "s_22")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			tatooine_eisley_begol_action_facePlayer (player, npc);

			//-- NPC: I don't care. They took my beautiful Shan'ri away. I want to hurt them like they hurt me.
			string_id message = new string_id (c_stringFile, "s_24");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you mean they took her away? Who is Shan'ri?
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_26");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't care. They took my beautiful Shan'ri away. I want to hurt them like they hurt me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you mean they took her away? Who is Shan'ri?
	if (response == "s_26")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "weeping");

			//-- NPC: My daughter, my beautiful, wonderful daughter. They killed her. They used her up and they killed her as sure as if they put a blaster to her head and pulled the trigger.
			string_id message = new string_id (c_stringFile, "s_28");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Who killed her?
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_30");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: My daughter, my beautiful, wonderful daughter. They killed her. They used her up and they killed her as sure as if they put a blaster to her head and pulled the trigger.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Who killed her?
	if (response == "s_30")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Those spice dealers. They got her hooked on death sticks. Why would you make such a thing? It's just poison.
			string_id message = new string_id (c_stringFile, "s_32");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Well, it was her choice. I don't think they forced her.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I agree, the people that push that junk need to die.
			boolean hasResponse1 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_34");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_48");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Those spice dealers. They got her hooked on death sticks. Why would you make such a thing? It's just poison.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well, it was her choice. I don't think they forced her.
	if (response == "s_34")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: It wasn't her choice, don't you understand that? You don't realize how long life can be and how easily it's damaged or even ended when you're her age. You think you're going to live forever, and whatever bad things you do to yourself will get better.
			string_id message = new string_id (c_stringFile, "s_36");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand your conviction over this, but you won't convince me.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_38");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I agree, the people that push that junk need to die.
	if (response == "s_48")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes! that's it they need to die. they must die and stand before their creator and answer for their actions.
			string_id message = new string_id (c_stringFile, "s_50");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Be sure of the path before you when you set out to kill someone.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_52");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It wasn't her choice, don't you understand that? You don't realize how long life can be and how easily it's damaged or even ended when you're her age. You think you're going to live forever, and whatever bad things you do to yourself will get better.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand your conviction over this, but you won't convince me.
	if (response == "s_38")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Then can I at least convince you to help me get revenge?
			string_id message = new string_id (c_stringFile, "s_40");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What kind of revenge? I don't think they deserve death for this.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_42");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then can I at least convince you to help me get revenge?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What kind of revenge? I don't think they deserve death for this.
	if (response == "s_42")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know. I have to do something. The nightmares are getting worse. I can't sleep. I must do something before I go crazy!
			string_id message = new string_id (c_stringFile, "s_44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: For the right price I could destroy their spice.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't know. I have to do something. The nightmares are getting worse. I can't sleep. I must do something before I go crazy!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: For the right price I could destroy their spice.
	if (response == "s_46")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: ... Destroy the spice! That's it, you can hit them where it will hurt the most; their profits. It's better than they deserve, but maybe it will save someone else before they end up like my poor Shan'ri.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: It would for a while, anyway.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_69");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes! that's it they need to die. they must die and stand before their creator and answer for their actions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Be sure of the path before you when you set out to kill someone.
	if (response == "s_52")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: But... that's what they did to her, to me. I don't think she would want me to kill though. No matter what. I can't offend her memory with blood.
			string_id message = new string_id (c_stringFile, "s_54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Then what do you want me to do?
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 19);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch19 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: But... that's what they did to her, to me. I don't think she would want me to kill though. No matter what. I can't offend her memory with blood.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Then what do you want me to do?
	if (response == "s_56")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: ... Destroy the spice! That's it, you can hit them where it will hurt the most; their profits. It's better than they deserve, but maybe it will save someone else before they end up like my poor Shan'ri.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: It would for a while, anyway.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_69");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 20);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: ... Destroy the spice! That's it, you can hit them where it will hurt the most; their profits. It's better than they deserve, but maybe it will save someone else before they end up like my poor Shan'ri.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It would for a while, anyway.
	if (response == "s_69")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes, that's true. It might even convince them to not deal in that trash anymore. I mean, if someone like you got your revenge on me, I sure wouldn't cross you again.
			string_id message = new string_id (c_stringFile, "s_71");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: If you say so.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_73");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, that's true. It might even convince them to not deal in that trash anymore. I mean, if someone like you got your revenge on me, I sure wouldn't cross you again.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: If you say so.
	if (response == "s_73")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: Will you do that for me, please? I need this. I need this for her.
			string_id message = new string_id (c_stringFile, "s_75");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Show me where this place is, and I will destroy their supply.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_80");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Will you do that for me, please? I need this. I need this for her.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Show me where this place is, and I will destroy their supply.
	if (response == "s_80")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			//-- NPC: They work out of a base near here. You'll have to get inside to destroy their crates.
			string_id message = new string_id (c_stringFile, "s_82");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No problem.
			boolean hasResponse0 = false;
			if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_88");

				utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_begol_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: They work out of a base near here. You'll have to get inside to destroy their crates.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No problem.
	if (response == "s_88")
	{
		//-- [NOTE] 
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			tatooine_eisley_begol_action_grantSODQuest (player, npc);

			//-- NPC: Oh, thank you so much! Thank you! You don't know what this means to me.
			string_id message = new string_id (c_stringFile, "s_90");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.tatooine_eisley_begol");

    setCondition (self, CONDITION_CONVERSABLE);
    setCondition (self, CONDITION_INTERESTING);
    setInvulnerable (self, true);

    setName (self, "Begol Reigle");

    ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
    setCondition (self, CONDITION_CONVERSABLE);
    setCondition (self, CONDITION_INTERESTING);
    setInvulnerable (self, true);

    setName (self, "Begol Reigle");

    ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.tatooine_eisley_begol");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (tatooine_eisley_begol_condition_blocker (player, npc))
	{
		//-- NPC: Shan'ri? Where are you?
		string_id message = new string_id (c_stringFile, "s_91");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_begol_condition_sodQuestComplete (player, npc))
	{
		tatooine_eisley_begol_action_facePlayer (player, npc);

		//-- NPC: You really are a great person. I don't think any other soul in this city would have helped me.
		string_id message = new string_id (c_stringFile, "s_65");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: It was my pleasure.
		boolean hasResponse0 = false;
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_66");

			utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 2);

			npcStartConversation (player, npc, "tatooine_eisley_begol", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_begol_condition_sodOnTask (player, npc))
	{
		//-- NPC: Let me know when you are ready to get those spice crates. I can identify them through the commlink.
		string_id message = new string_id (c_stringFile, "s_77");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I went to the location you gave me, but it's just a shipping company named White Horse.
		boolean hasResponse0 = false;
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_78");

			utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 5);

			npcStartConversation (player, npc, "tatooine_eisley_begol", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_begol_condition_tdcQuestComplete (player, npc))
	{
		tatooine_eisley_begol_action_facePlayer (player, npc);

		//-- NPC: Did Byxle send you? He really is a good friend even if he doesn't know how to cook.
		string_id message = new string_id (c_stringFile, "s_59");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, he said you needed help with something.
		boolean hasResponse0 = false;
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_60");

			utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 8);

			npcStartConversation (player, npc, "tatooine_eisley_begol", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
	{
		//-- NPC: Oh, how can they let that trash destroy people? It's terrible, they leave so many damaged and destroyed lives in their wake. I know the truth now. I used to think it was ok, that you made your own choices, but now I don't care about choices. I want revenge.
		string_id message = new string_id (c_stringFile, "s_20");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Whoa there friend, revenge can be a tricky endeavor.
		boolean hasResponse0 = false;
		if (tatooine_eisley_begol_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_22");

			utils.setScriptVar (player, "conversation.tatooine_eisley_begol.branchId", 11);

			npcStartConversation (player, npc, "tatooine_eisley_begol", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "tatooine_eisley_begol")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

	if (branchId == 2 && tatooine_eisley_begol_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && tatooine_eisley_begol_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && tatooine_eisley_begol_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 6 && tatooine_eisley_begol_handleBranch6 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && tatooine_eisley_begol_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && tatooine_eisley_begol_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && tatooine_eisley_begol_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && tatooine_eisley_begol_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && tatooine_eisley_begol_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && tatooine_eisley_begol_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && tatooine_eisley_begol_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && tatooine_eisley_begol_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && tatooine_eisley_begol_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && tatooine_eisley_begol_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && tatooine_eisley_begol_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 19 && tatooine_eisley_begol_handleBranch19 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && tatooine_eisley_begol_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && tatooine_eisley_begol_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && tatooine_eisley_begol_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && tatooine_eisley_begol_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.tatooine_eisley_begol.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

