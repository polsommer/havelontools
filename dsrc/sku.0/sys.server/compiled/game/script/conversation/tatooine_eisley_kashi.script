// ======================================================================
//
// tatooine_eisley_kashi.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.35 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/tatooine_eisley_kashi";

// ======================================================================
// Script Conditions
// ======================================================================

boolean tatooine_eisley_kashi_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_drenOnTask (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_drensjustice");
	int tat_eisley_drensjustice_e1 = groundquests.getTaskId(questId1, "tat_eisley_drensjustice_e1"); 
	
	boolean onTask = questIsTaskActive(questId1, tat_eisley_drensjustice_e1, player);
	
	return onTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_heirQuestComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_heirloom");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_sodQuestComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_spice_of_death");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_haQuestComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_hidden_agenda");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_heirTaskComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_heirloom");
	int tat_eisley_heirloom_e2 = groundquests.getTaskId(questId1, "tat_eisley_heirloom_e2"); 
	
	boolean onTask = questIsTaskActive(questId1, tat_eisley_heirloom_e2, player);
	
	return onTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_drenQuestComplete (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_eisley_drensjustice");
	
	boolean OnTask = 	(questIsQuestComplete(questId1, player));
	
	return OnTask;
}

// ----------------------------------------------------------------------

boolean tatooine_eisley_kashi_condition_blocker (obj_id player, obj_id npc)
{
	return groundquests.isQuestDisabled("tatooine_eisley_heirloom");
}

// ======================================================================
// Script Actions
// ======================================================================

void tatooine_eisley_kashi_action_grantMEDQuest (obj_id player, obj_id npc)
{
    int questId = questGetQuestId("quest/tatooine_eisley_heirloom");
    groundquests.grantQuest(questId, player, npc, true);

}

// ----------------------------------------------------------------------

void tatooine_eisley_kashi_action_facePlayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
}

// ----------------------------------------------------------------------

void tatooine_eisley_kashi_action_signalMEDReward (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "tat_eisley_heirloom_e2");
}

// ----------------------------------------------------------------------

void tatooine_eisley_kashi_action_grantDRENQuest (obj_id player, obj_id npc)
{
    int questId = questGetQuestId("quest/tatooine_eisley_drensjustice");
    groundquests.grantQuest(questId, player, npc, true);

}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int tatooine_eisley_kashi_handleBranch2 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I can't say I'm not glad Dren is dead. I just wish he wasn't able to drag so many lives down with him.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It turns out he was a puppet for someone else. He died a fool.
	if (response == "s_87")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: I'm not sure that makes me feel any better. I'm not even sure I want to hear any more. I just want to be alone.
			string_id message = new string_id (c_stringFile, "s_88");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. Take care of yourself Kashi.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_89");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 3);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I'm not sure that makes me feel any better. I'm not even sure I want to hear any more. I just want to be alone.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. Take care of yourself Kashi.
	if (response == "s_89")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: I will. Please be careful yourself.
			string_id message = new string_id (c_stringFile, "s_90");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please tell me Dren is dead.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No. I haven't done it yet.
	if (response == "s_84")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: I understand.
			string_id message = new string_id (c_stringFile, "s_85");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh my sweet Pilar. I can't belive he is gone. How did this happen?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It looks like the shipping office is a front for some terrible medical research.
	if (response == "s_79")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "weeping");

			tatooine_eisley_kashi_action_grantDRENQuest (player, npc);

			//-- NPC: Pilar died like a Womp Rat? He died not as a man, but as a medical cadaver? I know who is behind this. It's that Dren! He's in charge of that facility. He's not a shipping executive. He's a cold killer. You must help me!
			string_id message = new string_id (c_stringFile, "s_80");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I think I know where you are going with this.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_108");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Pilar died like a Womp Rat? He died not as a man, but as a medical cadaver? I know who is behind this. It's that Dren! He's in charge of that facility. He's not a shipping executive. He's a cold killer. You must help me!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I think I know where you are going with this.
	if (response == "s_108")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: He cannot be allowed to continue this abominable course of action. He must be stopped.
			string_id message = new string_id (c_stringFile, "s_109");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I agree. Someone like that is a blight. He must die.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_110");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: He cannot be allowed to continue this abominable course of action. He must be stopped.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I agree. Someone like that is a blight. He must die.
	if (response == "s_110")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. I never thought I would ever ask anyone to do something like this. I can't think about morals right now. It is the right thing to do. No question.
			string_id message = new string_id (c_stringFile, "s_111");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You don't have to ask.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_112");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 10);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch10 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes. I never thought I would ever ask anyone to do something like this. I can't think about morals right now. It is the right thing to do. No question.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You don't have to ask.
	if (response == "s_112")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			tatooine_eisley_kashi_action_grantDRENQuest (player, npc);

			//-- NPC: Oh thank you. Pilar will know peace.
			string_id message = new string_id (c_stringFile, "s_113");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thank you for answering my comm. I've seen you talking to Reimos. I was interested in why you are working for him.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: That's between him and I.
	if (response == "s_23")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Please, don't leave. It's a matter of life and death. I need your help.
			string_id message = new string_id (c_stringFile, "s_25");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What's the problem?
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Not interested in betraying Reimus, sorry.
			boolean hasResponse1 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_27");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_68");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 13);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Please, don't leave. It's a matter of life and death. I need your help.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What's the problem?
	if (response == "s_27")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: I need to make sure he isn't helping them. It's about the medical supplies going to that base. Is that what he has you working on? All I need is a yes or no. I will not betray you.
			string_id message = new string_id (c_stringFile, "s_29");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No
			boolean hasResponse1 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_42");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_64");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not interested in betraying Reimus, sorry.
	if (response == "s_68")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: I swear to you, what I need from you will not betray Reimus. I just need to know what it is he had you find out. Is the work he is having you do related to medical supplies? Just a yes or no. Please, that is all I ask.
			string_id message = new string_id (c_stringFile, "s_70");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No
			boolean hasResponse1 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_72");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_74");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I need to make sure he isn't helping them. It's about the medical supplies going to that base. Is that what he has you working on? All I need is a yes or no. I will not betray you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes
	if (response == "s_42")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thank you for trusting me. My husband has been abducted. I found some information leading me to believe he is being held in a medical facility.
			string_id message = new string_id (c_stringFile, "s_44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see, and you think it is the same one Reimus has me investigating?
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No
	if (response == "s_64")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ok. I understand. Thanks for your time.
			string_id message = new string_id (c_stringFile, "s_66");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thank you for trusting me. My husband has been abducted. I found some information leading me to believe he is being held in a medical facility.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I see, and you think it is the same one Reimus has me investigating?
	if (response == "s_46")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Yes. Please, all I need you to do is look out for someone named Pilar VanDeef. That is my husbands name. If sometime during your jobs for Reimus you come across him or information about him. I would be appreciate if you let me know.
			string_id message = new string_id (c_stringFile, "s_48");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will look out for him.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How much are you willing to pay?
			boolean hasResponse1 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_50");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_52");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 16);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch16 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes. Please, all I need you to do is look out for someone named Pilar VanDeef. That is my husbands name. If sometime during your jobs for Reimus you come across him or information about him. I would be appreciate if you let me know.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will look out for him.
	if (response == "s_50")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thank you so much! That is all I can ask.
			string_id message = new string_id (c_stringFile, "s_58");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How much are you willing to pay?
	if (response == "s_52")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Willing? All there is to give. I am only able to pay very little, however. I'm sorry, but we are not rich people.
			string_id message = new string_id (c_stringFile, "s_54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. I'll let you know if I come across him.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: My services demand a rich reward. Find a new husband.
			boolean hasResponse1 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_60");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Willing? All there is to give. I am only able to pay very little, however. I'm sorry, but we are not rich people.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. I'll let you know if I come across him.
	if (response == "s_56")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thank you so much! That is all I can ask.
			string_id message = new string_id (c_stringFile, "s_58");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: My services demand a rich reward. Find a new husband.
	if (response == "s_60")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Your actions will be rewarded.
			string_id message = new string_id (c_stringFile, "s_62");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I swear to you, what I need from you will not betray Reimus. I just need to know what it is he had you find out. Is the work he is having you do related to medical supplies? Just a yes or no. Please, that is all I ask.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes
	if (response == "s_72")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thank you for trusting me. My husband has been abducted. I found some information leading me to believe he is being held in a medical facility.
			string_id message = new string_id (c_stringFile, "s_44");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I see, and you think it is the same one Reimus has me investigating?
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No
	if (response == "s_74")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Ok. I understand. Thanks for your time.
			string_id message = new string_id (c_stringFile, "s_66");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Begol told me how you helped him out. I was wondering if you could do me a favor as well. I don't have a lot to pay you, but I am in desperate need of help.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you need?
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Begol said you came across a strange medical facility in the spice den he sent you to.
			string_id message = new string_id (c_stringFile, "s_63");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Well the spice den turned out to be a shipping company.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_67");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 23);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch23 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Begol said you came across a strange medical facility in the spice den he sent you to.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well the spice den turned out to be a shipping company.
	if (response == "s_67")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: A shipping company? I think it might be related to my husbands disappearance. I fear for his life. I need you to go back into that place and see if you can find him. His name is Pilar VanDeef. 
			string_id message = new string_id (c_stringFile, "s_71");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I saw someone by that name.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I didn't see him last time, but I'm willing to give it another shot.
			boolean hasResponse1 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_75");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_96");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A shipping company? I think it might be related to my husbands disappearance. I fear for his life. I need you to go back into that place and see if you can find him. His name is Pilar VanDeef. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I saw someone by that name.
	if (response == "s_75")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Oh my! Was he ok? Was he alive? What are they doing to him?
			string_id message = new string_id (c_stringFile, "s_77");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: He was when I left him, other than that I don't know anything else about him.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_82");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I didn't see him last time, but I'm willing to give it another shot.
	if (response == "s_96")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: That is so kind of you! You are the most beautiful diamond in this city of coal. You are my hero, thank you so much!
			string_id message = new string_id (c_stringFile, "s_98");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You're welcome , but there is still much to do.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Oh my! Was he ok? Was he alive? What are they doing to him?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: He was when I left him, other than that I don't know anything else about him.
	if (response == "s_82")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: I don't know how I can ask this. I don't have anything to give you, but could you get him for me? I miss him terribly and I really feel like they are going to do something bad to him. I can't explain it.
			string_id message = new string_id (c_stringFile, "s_92");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes. I will do my best to get him back to you.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_94");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I don't know how I can ask this. I don't have anything to give you, but could you get him for me? I miss him terribly and I really feel like they are going to do something bad to him. I can't explain it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes. I will do my best to get him back to you.
	if (response == "s_94")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: That is so kind of you! You are the most beautiful diamond in this city of coal. You are my hero, thank you so much!
			string_id message = new string_id (c_stringFile, "s_98");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You're welcome , but there is still much to do.
			boolean hasResponse0 = false;
			if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_100");

				utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 27);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

				chat.chat (npc, player, message);
				npcEndConversation (player);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch27 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is so kind of you! You are the most beautiful diamond in this city of coal. You are my hero, thank you so much!

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You're welcome , but there is still much to do.
	if (response == "s_100")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			tatooine_eisley_kashi_action_grantMEDQuest (player, npc);

			//-- NPC: Agreed. Best of luck to you!
			string_id message = new string_id (c_stringFile, "s_102");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_eisley_kashi_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am in the middle of an important investigation. Please come see me later. I will be needing someone like you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Ok, I will return later.
	if (response == "s_106")
	{
		//-- [NOTE] 
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			//-- NPC: Thank you.
			string_id message = new string_id (c_stringFile, "s_114");
			utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

			chat.chat (npc, player, message);
			npcEndConversation (player);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.tatooine_eisley_kashi");

    setCondition (self, CONDITION_CONVERSABLE);
    setCondition (self, CONDITION_INTERESTING);
    setInvulnerable (self, true);

    setName (self, "Kashi VanDeef");

    ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
    setCondition (self, CONDITION_CONVERSABLE);
    setCondition (self, CONDITION_INTERESTING);
    setInvulnerable (self, true);

    setName (self, "Kashi VanDeef");

    ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.tatooine_eisley_kashi");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition_blocker (player, npc))
	{
		//-- NPC: Please come back later.
		string_id message = new string_id (c_stringFile, "s_115");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition_drenQuestComplete (player, npc))
	{
		tatooine_eisley_kashi_action_facePlayer (player, npc);

		//-- NPC: I can't say I'm not glad Dren is dead. I just wish he wasn't able to drag so many lives down with him.
		string_id message = new string_id (c_stringFile, "s_86");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: It turns out he was a puppet for someone else. He died a fool.
		boolean hasResponse0 = false;
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_87");

			utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 2);

			npcStartConversation (player, npc, "tatooine_eisley_kashi", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition_drenOnTask (player, npc))
	{
		tatooine_eisley_kashi_action_facePlayer (player, npc);

		//-- NPC: Please tell me Dren is dead.
		string_id message = new string_id (c_stringFile, "s_83");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: No. I haven't done it yet.
		boolean hasResponse0 = false;
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_84");

			utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 5);

			npcStartConversation (player, npc, "tatooine_eisley_kashi", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition_heirQuestComplete (player, npc))
	{
		tatooine_eisley_kashi_action_facePlayer (player, npc);

		//-- NPC: Oh my sweet Pilar. I can't belive he is gone. How did this happen?
		string_id message = new string_id (c_stringFile, "s_78");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: It looks like the shipping office is a front for some terrible medical research.
		boolean hasResponse0 = false;
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_79");

			utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 7);

			npcStartConversation (player, npc, "tatooine_eisley_kashi", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition_haQuestComplete (player, npc))
	{
		tatooine_eisley_kashi_action_facePlayer (player, npc);

		//-- NPC: Thank you for answering my comm. I've seen you talking to Reimos. I was interested in why you are working for him.
		string_id message = new string_id (c_stringFile, "s_21");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: That's between him and I.
		boolean hasResponse0 = false;
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_23");

			utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 12);

			npcStartConversation (player, npc, "tatooine_eisley_kashi", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition_sodQuestComplete (player, npc))
	{
		tatooine_eisley_kashi_action_facePlayer (player, npc);

		//-- NPC: Begol told me how you helped him out. I was wondering if you could do me a favor as well. I don't have a lot to pay you, but I am in desperate need of help.
		string_id message = new string_id (c_stringFile, "s_55");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What do you need?
		boolean hasResponse0 = false;
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_59");

			utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 22);

			npcStartConversation (player, npc, "tatooine_eisley_kashi", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
	{
		tatooine_eisley_kashi_action_facePlayer (player, npc);

		//-- NPC: I am in the middle of an important investigation. Please come see me later. I will be needing someone like you.
		string_id message = new string_id (c_stringFile, "s_104");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Ok, I will return later.
		boolean hasResponse0 = false;
		if (tatooine_eisley_kashi_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_106");

			utils.setScriptVar (player, "conversation.tatooine_eisley_kashi.branchId", 29);

			npcStartConversation (player, npc, "tatooine_eisley_kashi", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "tatooine_eisley_kashi")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

	if (branchId == 2 && tatooine_eisley_kashi_handleBranch2 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 3 && tatooine_eisley_kashi_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && tatooine_eisley_kashi_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && tatooine_eisley_kashi_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && tatooine_eisley_kashi_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && tatooine_eisley_kashi_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 10 && tatooine_eisley_kashi_handleBranch10 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && tatooine_eisley_kashi_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && tatooine_eisley_kashi_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && tatooine_eisley_kashi_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && tatooine_eisley_kashi_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 16 && tatooine_eisley_kashi_handleBranch16 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && tatooine_eisley_kashi_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && tatooine_eisley_kashi_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && tatooine_eisley_kashi_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 23 && tatooine_eisley_kashi_handleBranch23 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && tatooine_eisley_kashi_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && tatooine_eisley_kashi_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && tatooine_eisley_kashi_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 27 && tatooine_eisley_kashi_handleBranch27 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && tatooine_eisley_kashi_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.tatooine_eisley_kashi.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

