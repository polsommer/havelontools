// ======================================================================
//
// rebel_master_trainer.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.factions;
include library.prose;
include library.skill;
include library.space_flags;
include library.space_quest;
include library.static_item;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/rebel_master_trainer";

// ======================================================================
// Script Conditions
// ======================================================================

boolean rebel_master_trainer_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isReadyforMasterRebel (obj_id player, obj_id npc)
{
	if (!space_flags.isRebelPilot( player ))
		return false;
		
	//if you're missing any of these skills, then you aren't ready for master
	if 	(hasSkill( player, "pilot_rebel_navy_starships_04") &&		
		hasSkill( player, "pilot_rebel_navy_procedures_04") &&
		hasSkill( player, "pilot_rebel_navy_weapons_04") &&
		hasSkill( player, "pilot_rebel_navy_droid_04" ))
			return true;
	else	
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isReadyforMasterPrivateer (obj_id player, obj_id npc)
{
	if (!space_flags.isNeutralPilot(player))
		return false;
		
	//if you're missing any of these skills, then you aren't ready for tier3
	if 	(hasSkill( player, "pilot_neutral_starships_04") &&		
		hasSkill( player, "pilot_neutral_procedures_04") &&
		hasSkill( player, "pilot_neutral_weapons_04") &&
		hasSkill( player, "pilot_neutral_droid_04" ))
			return true;
	else	
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isImperailPilot (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_imperial_navy_novice" ));
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isRSFPilot (obj_id player, obj_id npc)
{
	if (space_flags.isSpaceTrack( player, space_flags.PRIVATEER_NABOO))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isWorkingForEmpire (obj_id player, obj_id npc)
{
	if(space_flags.hasSpaceFlag(player, "master_mission_imperial"))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasWonMissionOne (obj_id player, obj_id npc)
{
	if ( space_quest.hasWonQuest( player, "destroy", "master_rebel_1" ) &&
	!space_quest.hasReceivedReward( player, "destroy", "master_rebel_1" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasWonMissionTwo (obj_id player, obj_id npc)
{
	if ( space_quest.hasWonQuest( player, "destroy", "master_rebel_2" ) &&
	!space_quest.hasReceivedReward( player, "destroy", "master_rebel_2" ) )
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasFailedMissionOne (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "destroy", "master_rebel_1" ) ||
		space_quest.hasAbortedQuest( player, "destroy", "master_rebel_1" ) )
		return true;
	else
		return false;	
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasFailedMissionTwo (obj_id player, obj_id npc)
{
	if ( space_quest.hasFailedQuest( player, "destroy", "master_rebel_2" ) ||
		space_quest.hasAbortedQuest( player, "destroy", "master_rebel_2" ) )
		return true;
	else
		return false;	
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isOnQuest (obj_id player, obj_id npc)
{
	return space_quest.hasQuest( player );
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasMasterSkill (obj_id player, obj_id npc)
{
	return hasSkill(player, "pilot_rebel_navy_master");
	
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isPrivateer (obj_id player, obj_id npc)
{
	return (hasSkill( player, "pilot_neutral_novice" ));
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasReceivedRewardOne (obj_id player, obj_id npc)
{
	if 	(space_quest.hasReceivedReward( player, "destroy", "master_rebel_1" ))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasOtherMasterSkill (obj_id player, obj_id npc)
{
	return hasSkill(player, "pilot_neutral_master");
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isCorsec (obj_id player, obj_id npc)
{
	if (space_flags.isSpaceTrack( player, space_flags.PRIVATEER_CORELLIA))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isSmuggler (obj_id player, obj_id npc)
{
	if (space_flags.isSpaceTrack( player, space_flags.PRIVATEER_TATOOINE))
		return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasReveivedRewardNeut (obj_id player, obj_id npc)
{
	if 	( 	space_quest.hasReceivedReward( player, "destroy", "master_rebel_1" ) &&
			hasSkill(player, "pilot_neutral_starships_04") )
			return true;
	else
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isOnMasterQuest (obj_id player, obj_id npc)
{
	return ( space_quest.hasQuest( player, "destroy", "master_rebel_1" ) ||
		 space_quest.hasQuest( player, "destroy", "master_rebel_2" ) );
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isNotReadyforRebelMaster (obj_id player, obj_id npc)
{
	if(!space_flags.isRebelPilot( player ))
		return false;
		
	//if you're missing any of these skills, then you aren't ready for tier3
	if 	(!hasSkill( player, "pilot_rebel_navy_starships_04") ||		
		!hasSkill( player, "pilot_rebel_navy_procedures_04") ||
		!hasSkill( player, "pilot_rebel_navy_weapons_04") ||
		!hasSkill( player, "pilot_rebel_navy_droid_04" ))
			return true;
	else	
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isNotReadyforPrivateerMaster (obj_id player, obj_id npc)
{
	if (!space_flags.isNeutralPilot(player) )
		return false;
		
	//if you're missing any of these skills, then you aren't ready for tier3
	if 	(!hasSkill( player, "pilot_neutral_starships_04") ||		
		!hasSkill( player, "pilot_neutral_procedures_04") ||
		!hasSkill( player, "pilot_neutral_weapons_04") ||
		!hasSkill( player, "pilot_neutral_droid_04" ))
			return true;
	else	
		return false;
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_isRebel (obj_id player, obj_id npc)
{
	return ( hasSkill( player, "pilot_rebel_navy_novice" ));
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasRebelMasterNoMedal (obj_id player, obj_id npc)
{
	if (hasObjVar (player, "master_rebel_medal_recieved"))
		return false;//you already got the medal
	
	return hasSkill(player, "pilot_rebel_navy_master");
}

// ----------------------------------------------------------------------

boolean rebel_master_trainer_condition_hasNeutralMasterNoMedal (obj_id player, obj_id npc)
{
	if (hasObjVar (player, "master_neutral_medal_recieved"))
		return false;//you already got the medal
	
	return hasSkill(player, "pilot_neutral_master");
}

// ======================================================================
// Script Actions
// ======================================================================

void rebel_master_trainer_action_setWorkingForRebel (obj_id player, obj_id npc)
{
	space_flags.setSpaceFlag(player, "master_mission_rebel", true);
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_grantMasterSkillBoxRebel (obj_id player, obj_id npc)
{
	skill.noisyGrantSkill( player, "pilot_rebel_navy_master");
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_grantMasterSkillBoxNeutral (obj_id player, obj_id npc)
{
	skill.noisyGrantSkill( player, "pilot_neutral_master");
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_giveRewardOneRebel (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "destroy", "master_rebel_1") )
	{
		// Animation.
		faceTo( npc, player );
		
		// Give credits.
		space_quest.giveReward( player, "destroy", "master_rebel_1", 25000, "object/tangible/wearables/jacket/jacket_ace_rebel.iff" );
		factions.addFactionStanding( player, factions.FACTION_REBEL, 200.0f );
	}
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_giveRewardTwoRebel (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "destroy", "master_rebel_2") )
	{
		// Animation.
		faceTo( npc, player );
		
		// Give credits.
		space_quest.giveReward( player, "destroy", "master_rebel_2", 50000, "object/tangible/wearables/helmet/helmet_fighter_rebel_ace.iff" );	
		factions.addFactionStanding( player, factions.FACTION_REBEL, 400.0f );
		
		if (getGender(player) == GENDER_MALE)
		{
			if (getSpecies(player) == SPECIES_ITHORIAN )
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/ith_necklace_ace_pilot_rebel_m.iff", player);
				setBioLink(medal, player);
			}
			else if (getSpecies(player) == SPECIES_WOOKIEE)
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_ace_pilot_rebel_wke_m.iff", player);
				setBioLink(medal, player);
			}
			else
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_ace_pilot_rebel_m.iff", player);
				setBioLink(medal, player);
			}
		}
		else
		{
			if (getSpecies(player) == SPECIES_ITHORIAN )
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/ith_necklace_ace_pilot_rebel_f.iff", player);
				setBioLink(medal, player);
			}
			else if (getSpecies(player) == SPECIES_WOOKIEE)
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_trando_ace_pilot_rebel_f.iff", player);
				setBioLink(medal, player);
			}
			else
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_trando_ace_pilot_rebel_f.iff", player);
				setBioLink(medal, player);
			}
		}
		space_flags.setSpaceFlag(player, "master_pilot_medal_recieved", true);
	}
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_grantMissionOne (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "master_rebel_1" );
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_grantMissionTwo (obj_id player, obj_id npc)
{
	space_quest.grantQuest( player, "destroy", "master_rebel_2" );
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_giveRewardOnePriv (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "destroy", "master_rebel_1") )
	{
		// Animation.
		faceTo( npc, player );
		
		// Give credits.
		space_quest.giveReward( player, "destroy", "master_rebel_1", 25000, "object/tangible/wearables/jacket/jacket_ace_privateer.iff" );
		factions.addFactionStanding( player, factions.FACTION_REBEL, 200.0f );
	}
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_giveRewardTwoPriv (obj_id player, obj_id npc)
{
	if (!space_quest.hasReceivedReward( player, "destroy", "master_rebel_2") )
	{
		// Animation.
		faceTo( npc, player );
		
		// Give credits.
		space_quest.giveReward( player, "destroy", "master_rebel_2", 50000, "object/tangible/wearables/helmet/helmet_fighter_privateer_ace.iff" );	
		factions.addFactionStanding( player, factions.FACTION_REBEL, 400.0f );
		
		if (getGender(player) == GENDER_MALE)
		{
			if (getSpecies(player) == SPECIES_ITHORIAN )
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/ith_necklace_ace_pilot_neutral_m.iff", player);
				setBioLink(medal, player);
			}
			else if (getSpecies(player) == SPECIES_WOOKIEE)
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_ace_pilot_neutral_wke_m.iff", player);
				setBioLink(medal, player);
			}
			else
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_ace_pilot_neutral_m.iff", player);
				setBioLink(medal, player);
			}
		}
		else
		{
			if (getSpecies(player) == SPECIES_ITHORIAN )
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/ith_necklace_ace_pilot_neutral_f.iff", player);
				setBioLink(medal, player);
			}
			else if (getSpecies(player) == SPECIES_WOOKIEE)
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_trando_ace_pilot_neutral_f.iff", player);
				setBioLink(medal, player);
			}
			else
			{
				obj_id medal = createObjectInInventoryAllowOverload("object/tangible/wearables/necklace/necklace_trando_ace_pilot_neutral_f.iff", player);
				setBioLink(medal, player);
			}
		}
		space_flags.setSpaceFlag(player, "master_pilot_medal_recieved", true);
	}
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_grantMedalNeutral (obj_id player, obj_id npc)
{
	setObjVar (player, "master_neutral_medal_recieved", 1);
	
	obj_id item = static_item.createNewItemFunction("item_quest_reward_neutral_pilot_medal_01_01", player);
	string_id name = new string_id ( "static_item_n", "item_quest_reward_neutral_pilot_medal_01_01" );
	prose_package pp = new prose_package ();
	pp = prose.setStringId(pp, new string_id( "quest/ground/system_message", "placed_in_inventory" ));
	pp = prose.setTO(pp, name);
	sendQuestSystemMessage(player, pp);
}

// ----------------------------------------------------------------------

void rebel_master_trainer_action_grantMedalRebel (obj_id player, obj_id npc)
{
	setObjVar (player, "master_rebel_medal_recieved", 1);
	
	obj_id item = static_item.createNewItemFunction("item_quest_reward_rebel_pilot_medal_01_01", player);
	string_id name = new string_id ( "static_item_n", "item_quest_reward_rebel_pilot_medal_01_01" );
	prose_package pp = new prose_package ();
	pp = prose.setStringId(pp, new string_id( "quest/ground/system_message", "placed_in_inventory" ));
	pp = prose.setTO(pp, name);
	sendQuestSystemMessage(player, pp);
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

string rebel_master_trainer_tokenTO_tokenTO0001 (obj_id player, obj_id npc)
{
	return new string();
}

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int rebel_master_trainer_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: %NU, it is always nice to stop and chat with the men, but I am afraid that I do not have time to talk right now. I am planning a very important operation and I can only use the finest pilots available to the Alliance. I suggest you gain some more flight experience and then come back to see me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir. I will do that.
	if (response == "s_a667be99")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: That's the spirit, %NU. Keep up the good work and one day maybe you will do great things for the Alliance.
			string_id message = new string_id (c_stringFile, "s_5fa0c79");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch13 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see that you failed to destroy the corvette. This is not good news. The balance of power inside of the Kessel system has shifted heavily in favor of the Empire. Unless we can destroy that vessel we could lose the entire region.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Give me another chance, sir.
	if (response == "s_d4d47c04")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I was about to suggest the same thing. I still cannot think of anyone better suited for this important mission than you. %NU, you must destroy that corvette. Unless the Empire's power in the Kessel system is diminished, they will begin exerting their influence on the entire Outer Rim.
			string_id message = new string_id (c_stringFile, "s_1c113900");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Do not worry, sir. I will not fail you again.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ce45643c");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 14);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am a good pilot, sir.
	if (response == "s_eb02d65")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shrug_hands");

			//-- NPC: You certainly have an interesting way of showing your skills then, Pilot. Normally when someone is good at something they accomplish any tasks involved. 
			string_id message = new string_id (c_stringFile, "s_fe42648c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am sorry, sir. Give me another chance. I will succeed.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c13f9a11");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I was about to suggest the same thing. I still cannot think of anyone better suited for this important mission than you. %NU, you must destroy that corvette. Unless the Empire's power in the Kessel system is diminished, they will begin exerting their influence on the entire Outer Rim.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Do not worry, sir. I will not fail you again.
	if (response == "s_ce45643c")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_to_self");

			rebel_master_trainer_action_grantMissionTwo (player, npc);

			//-- NPC: You are not fighting for me. You are fighting for yourself and those you care about. Remember that. We have lost so much already, we cannot lose here.
			string_id message = new string_id (c_stringFile, "s_becf889");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will remember that, sir.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e374b3bf");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You are not fighting for me. You are fighting for yourself and those you care about. Remember that. We have lost so much already, we cannot lose here.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will remember that, sir.
	if (response == "s_e374b3bf")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger2");

			//-- NPC: You are a brave soul, %NU. May the Force be with you.
			string_id message = new string_id (c_stringFile, "s_a2b72d37");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You certainly have an interesting way of showing your skills then, Pilot. Normally when someone is good at something they accomplish any tasks involved. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am sorry, sir. Give me another chance. I will succeed.
	if (response == "s_c13f9a11")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			rebel_master_trainer_action_grantMissionTwo (player, npc);

			//-- NPC: To show you that I am a forgiving man, I accept your apology. And I will also give you another chance to destroy the stolen Rebel corvette that is regularly patrolling the Kessel system. For your sake, do not fail me again. Are we understood?
			string_id message = new string_id (c_stringFile, "s_8c56411b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Perfectly clear, sir!
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f799f9ec");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 18);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch18 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: To show you that I am a forgiving man, I accept your apology. And I will also give you another chance to destroy the stolen Rebel corvette that is regularly patrolling the Kessel system. For your sake, do not fail me again. Are we understood?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Perfectly clear, sir!
	if (response == "s_f799f9ec")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_away");

			//-- NPC: Good. Now get to your ship before I change my mind.
			string_id message = new string_id (c_stringFile, "s_3924b90e");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch20 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: %NU, what is the status of your operation in the Kessel system?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [relate the details of the failed mission]
	if (response == "s_4c9055c9")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I see. That would explain why reports show that more Imperial vessels are moving into the system. We must find a way to reduce the number of Imperial support craft in the system for our primary objective to have any chance at success.
			string_id message = new string_id (c_stringFile, "s_77a163bd");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sir, may I suggest that you give me another chance?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e228ef89");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 21);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: It wasn't my fault, sir. The mission failed due to bad planning.
	if (response == "s_ed30fff8")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are you saying that I was wrong in my assessment of the Imperial strength in the Kessel system?
			string_id message = new string_id (c_stringFile, "s_a79ccb10");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: No, sir. Of course not, sir.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c788dadf");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 24);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch21 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I see. That would explain why reports show that more Imperial vessels are moving into the system. We must find a way to reduce the number of Imperial support craft in the system for our primary objective to have any chance at success.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sir, may I suggest that you give me another chance?
	if (response == "s_e228ef89")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am not sure. This mission is highly important and it is imperative that it succeed. The Empire cannot be allowed to gain absolute control of the Kessel system, or the Alliance will be hard pressed to maintain its forces in and around the Outer Rim.
			string_id message = new string_id (c_stringFile, "s_58559f7e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can do it, sir. I know I can.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46ecd1ec");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 22);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch22 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am not sure. This mission is highly important and it is imperative that it succeed. The Empire cannot be allowed to gain absolute control of the Kessel system, or the Alliance will be hard pressed to maintain its forces in and around the Outer Rim.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can do it, sir. I know I can.
	if (response == "s_46ecd1ec")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_away");

			rebel_master_trainer_action_grantMissionOne (player, npc);

			//-- NPC: Very well. Get back to the Kessel system and destroy the Imperial support vessels that are patrolling the region. Good luck, pilot.
			string_id message = new string_id (c_stringFile, "s_39516a4");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch24 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are you saying that I was wrong in my assessment of the Imperial strength in the Kessel system?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No, sir. Of course not, sir.
	if (response == "s_c788dadf")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_accusingly");

			rebel_master_trainer_action_grantMissionOne (player, npc);

			//-- NPC: Listen to me closely because you are walking on some very thin ice right now, Pilot. You are to return to the Kessel system and destroy the Imperial positions. My plan will not fail because of the incompetence of a lowly pilot such as yourself. Are we clear?
			string_id message = new string_id (c_stringFile, "s_cab1f8c7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Yes, sir!
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_b6b25f13");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 25);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch25 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Listen to me closely because you are walking on some very thin ice right now, Pilot. You are to return to the Kessel system and destroy the Imperial positions. My plan will not fail because of the incompetence of a lowly pilot such as yourself. Are we clear?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, sir!
	if (response == "s_b6b25f13")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Are we clear?
			string_id message = new string_id (c_stringFile, "s_1ffdcc4b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Crystal.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_87d4bfc2");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 26);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch26 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Are we clear?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Crystal.
	if (response == "s_87d4bfc2")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "point_away");

			//-- NPC: Good! Now get to your ship and take out those Imperial positions in Kessel.
			string_id message = new string_id (c_stringFile, "s_5bdc459b");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch28 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We were unable to follow your progress via long range scans due to the interference of the Maw. What do you have to report?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: [relay the destruction of the stolen Corellian Corvette]
	if (response == "s_1da9fe53")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: A glorious victory for the Alliance! You really came through when it counted, %NU. You have made a difference to millions of lives along the Outer Rim and you have proven yourself a hero of the Alliance.
			string_id message = new string_id (c_stringFile, "s_d09ace00");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, sir. I do my best.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3f6a8711");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 29);

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcSpeak (player, pp);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				prose_package pp = new prose_package ();
				pp.stringId = message;
				pp.actor.set (player);
				pp.target.set (npc);

				npcEndConversationWithMessage (player, pp);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch29 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: A glorious victory for the Alliance! You really came through when it counted, %NU. You have made a difference to millions of lives along the Outer Rim and you have proven yourself a hero of the Alliance.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir. I do my best.
	if (response == "s_3f6a8711")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: There is no need for modesty. Be proud of your accomplishments. Unfortunately this business with the Imperial corvette has allowed them to re-establish a presence in the system. Although it is not as large as it once was, it is still formidable. Alliance Command has decided to play it safe and not issue the full scale assault on the Kessel system.
			string_id message = new string_id (c_stringFile, "s_3ccc33fb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am disappointed to hear that.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8d7967cc");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 30);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch30 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There is no need for modesty. Be proud of your accomplishments. Unfortunately this business with the Imperial corvette has allowed them to re-establish a presence in the system. Although it is not as large as it once was, it is still formidable. Alliance Command has decided to play it safe and not issue the full scale assault on the Kessel system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am disappointed to hear that.
	if (response == "s_8d7967cc")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition_isRebel (player, npc))
		{
			//-- NPC: As am I. I still believe that we can take the area but Alliance Command believes that the Empire will be able to mount a Star Destroyer attack. We cannot risk a direct confrontation with one of those. Regardless, you have more than done your duty. I have been authorized on behalf of the Alliance to issue you a reward for your noble actions.
			string_id message = new string_id (c_stringFile, "s_e87785ac");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, sir. I appreciate it.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5869e64b");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 31);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (rebel_master_trainer_condition_isPrivateer (player, npc))
		{
			//-- NPC: As am I. I still believe that we can take the area but Alliance Command believes that the Empire will be able to mount a Star Destroyer attack. We cannot risk a direct confrontation with one of those. Regardless, you have more than done your duty. I have been authorized on behalf of the Alliance to issue you a reward for your noble actions. You will always have friends in the Alliance.
			string_id message = new string_id (c_stringFile, "s_583fa6fb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, sir. I appreciate it.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_499");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 34);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch31 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As am I. I still believe that we can take the area but Alliance Command believes that the Empire will be able to mount a Star Destroyer attack. We cannot risk a direct confrontation with one of those. Regardless, you have more than done your duty. I have been authorized on behalf of the Alliance to issue you a reward for your noble actions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir. I appreciate it.
	if (response == "s_5869e64b")
	{
		rebel_master_trainer_action_giveRewardTwoRebel (player, npc);

		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			rebel_master_trainer_action_grantMasterSkillBoxRebel (player, npc);

			//-- NPC: Your accomplishments have proven that you are a valued asset to the Alliance and a truly exceptional pilot. I believe that you have achieved the highest level of piloting skill that anyone can possess. I think that you might find some measure of fame waiting for you when everyone finds out what you have done.
			string_id message = new string_id (c_stringFile, "s_28d79ee3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am only one of many heroes for the Alliance.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c67e8169");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 32);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch32 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Your accomplishments have proven that you are a valued asset to the Alliance and a truly exceptional pilot. I believe that you have achieved the highest level of piloting skill that anyone can possess. I think that you might find some measure of fame waiting for you when everyone finds out what you have done.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am only one of many heroes for the Alliance.
	if (response == "s_c67e8169")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: Perhaps, but there is no need to be humble when it comes to your accomplishment. Victories like this can raise the morale of the troops across the entire galaxy. Thank you, %NU. You are dismissed.
			string_id message = new string_id (c_stringFile, "s_ef3cc459");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch34 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: As am I. I still believe that we can take the area but Alliance Command believes that the Empire will be able to mount a Star Destroyer attack. We cannot risk a direct confrontation with one of those. Regardless, you have more than done your duty. I have been authorized on behalf of the Alliance to issue you a reward for your noble actions. You will always have friends in the Alliance.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir. I appreciate it.
	if (response == "s_499")
	{
		rebel_master_trainer_action_giveRewardTwoPriv (player, npc);

		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			rebel_master_trainer_action_grantMasterSkillBoxNeutral (player, npc);

			//-- NPC: Even though you are not officially a member of the Alliance, you have proven yourself a hero for what is right. I believe that you have achieved the highest level of piloting skill that anyone can hope to accomplish. The Alliance is in your debt.
			string_id message = new string_id (c_stringFile, "s_6c42736d");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Thank you, sir. It has been an honor to be allowed to serve under you.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_377d1a96");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 35);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch35 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Even though you are not officially a member of the Alliance, you have proven yourself a hero for what is right. I believe that you have achieved the highest level of piloting skill that anyone can hope to accomplish. The Alliance is in your debt.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Thank you, sir. It has been an honor to be allowed to serve under you.
	if (response == "s_377d1a96")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			doAnimationAction (player, "salute2");

			//-- NPC: I assure you that the honor is all mine. Leading men such as yourself is a privilege. You are dismissed, %NU.
			string_id message = new string_id (c_stringFile, "s_be631237");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch37 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Welcome back, %NU. It is good to see that you managed to perform such a difficult task and return. Intelligence reports that the number of Imperial ships in the system are down. Our Corellian Corvette should be able to drive the rest of their support craft out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We brought in a Corellian Corvette?
	if (response == "s_d02bfc3b")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Yes, it is patrolling several systems right now, but with your victory we should be able to set up a command post in the Kessel system. Alliance Command believes that the time might be right for us to make our move on the Outer Rim.
			string_id message = new string_id (c_stringFile, "s_c4d08624");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: We are mobilizing on the Outer Rim?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_f00f629f");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 38);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch38 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, it is patrolling several systems right now, but with your victory we should be able to set up a command post in the Kessel system. Alliance Command believes that the time might be right for us to make our move on the Outer Rim.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: We are mobilizing on the Outer Rim?
	if (response == "s_f00f629f")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: With the Empire distracted elsewhere, we feel that this is a perfect time to strike. The attack will focus on attacking the weakened Imperial positions in the Kessel system. Then we can use it as a staging point for control of a number of systems around it.
			string_id message = new string_id (c_stringFile, "s_575c9eb2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds like a big undertaking.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7cbd5de5");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 39);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch39 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: With the Empire distracted elsewhere, we feel that this is a perfect time to strike. The attack will focus on attacking the weakened Imperial positions in the Kessel system. Then we can use it as a staging point for control of a number of systems around it.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds like a big undertaking.
	if (response == "s_7cbd5de5")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition_isPrivateer (player, npc))
		{
			rebel_master_trainer_action_giveRewardOnePriv (player, npc);

			//-- NPC: It is at that. And it is only possible because of your victory. The Alliance thanks you and I have been authorized to issue a credit reward to your account. I also have granted you a token of our appreciation for what you have accomplished. I still have some more planning to work on, but after you take some well deserved rest come and see me again. I am sure I will have a place for you in the attack plan.
			string_id message = new string_id (c_stringFile, "s_6ff4c6e1");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			rebel_master_trainer_action_giveRewardOneRebel (player, npc);

			//-- NPC: It is at that. And it is only possible because of your victory. The Alliance thanks you and I have been authorized to issue a credit reward to your account. I still have some more planning to work on, but after you take some well deserved rest come and see me again. I am sure I will have a place for you in the attack plan.
			string_id message = new string_id (c_stringFile, "s_7e8aa338");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch42 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It is a good thing that you achieved victory over the Imperial support vessels. We desperately needed that good news. Unfortunately for us we have received some very disturbing reports from Ryloth. I fear that our plans on a large scale assault on the Kessel system have been scrapped.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What happened, sir?
	if (response == "s_c68b1dd3")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: The Empire has captured and retrofitted one of our corvettes that was in the Ryloth system. Intelligence reports that it has been seen in the Kessel system. This is truly grim news. We believed that we had their star destroyer fleet tied up in several other areas so we could accomplish our tasks here, but it would seem that the Empire has learned how to improvise.
			string_id message = new string_id (c_stringFile, "s_837c0670");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The Empire has a corvette in the Kessel system?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ca1a4aa4");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Was my operation successful in pushing the Empire back?
	if (response == "s_ffeb2f4c")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Yes. Your operation did accomplish its goals. But word has come in that the Empire has managed to capture one of our corvettes in the Ryloth system. Intelligence has reported it has been seen patrolling through Kessel.
			string_id message = new string_id (c_stringFile, "s_429ad94c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The Empire has a corvette in the Kessel system?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ca1a4aa4");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 43);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch43 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Empire has captured and retrofitted one of our corvettes that was in the Ryloth system. Intelligence reports that it has been seen in the Kessel system. This is truly grim news. We believed that we had their star destroyer fleet tied up in several other areas so we could accomplish our tasks here, but it would seem that the Empire has learned how to improvise.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Empire has a corvette in the Kessel system?
	if (response == "s_ca1a4aa4")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: It would seem that this corvette is patrolling several systems, so it is not always in Kessel... but it is always close enough to be a threat. I fear that we only have one choice. You are going to have to destroy that corvette.
			string_id message = new string_id (c_stringFile, "s_74cca111");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Wouldn't it be better to try to recapture the vessel?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Destroy the corvette, sir?
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c1c7c6c");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a6fb8def");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 44);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch44 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: It would seem that this corvette is patrolling several systems, so it is not always in Kessel... but it is always close enough to be a threat. I fear that we only have one choice. You are going to have to destroy that corvette.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Wouldn't it be better to try to recapture the vessel?
	if (response == "s_c1c7c6c")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Yes, it certainly would. But we simply do not have the resources to initiate a boarding party right now. I am afraid that our only choice is to make sure that if we don't have it, neither do they.
			string_id message = new string_id (c_stringFile, "s_826f20e2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand we have a corvette in the system, couldn't we use that?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7a052bd2");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 45);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Destroy the corvette, sir?
	if (response == "s_a6fb8def")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Our lack of resources in this system makes any attempt at recapturing the vessel futile. The Empire can use that ship to tie up the Kessel system long enough to bring in their star destroyers... and at that point I cannot foresee any chance of us getting Kessel back. The key to the whole Alliance operation in the Outer Rim lies with the destruction of that corvette.
			string_id message = new string_id (c_stringFile, "s_938d38");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand we have a corvette in the system, couldn't we use that?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_7a052bd2");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 45);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch45 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes, it certainly would. But we simply do not have the resources to initiate a boarding party right now. I am afraid that our only choice is to make sure that if we don't have it, neither do they.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand we have a corvette in the system, couldn't we use that?
	if (response == "s_7a052bd2")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Yes we do have our own corvette in the system that we use as a command vessel, but after the loss of the one in the Ryloth system, we cannot risk losing another one. It would appear that we will have to send out fighters to try to combat this menace.
			string_id message = new string_id (c_stringFile, "s_9e5b1d54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand, sir. Will I have any support for this assault.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_cba67818");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch46 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes we do have our own corvette in the system that we use as a command vessel, but after the loss of the one in the Ryloth system, we cannot risk losing another one. It would appear that we will have to send out fighters to try to combat this menace.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand, sir. Will I have any support for this assault.
	if (response == "s_cba67818")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I am going to have to leave the assembly of a team up to you. Once you have your team assembled, enter the Kessel system and look for the Imperial corvette as it moves through the area. Keep in mind that it sometimes leaves the system for several hours, so you might have to hunt for a while in order to initiate attack.
			string_id message = new string_id (c_stringFile, "s_da1503ff");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Understood, sir. I will not let you down.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_5bd6bf77");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 47);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch47 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am going to have to leave the assembly of a team up to you. Once you have your team assembled, enter the Kessel system and look for the Imperial corvette as it moves through the area. Keep in mind that it sometimes leaves the system for several hours, so you might have to hunt for a while in order to initiate attack.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Understood, sir. I will not let you down.
	if (response == "s_5bd6bf77")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			doAnimationAction (player, "salute2");

			rebel_master_trainer_action_grantMissionTwo (player, npc);

			//-- NPC: You are a courageous pilot. You might be all that stands between the Empire and freedom in the Outer Rim. May the Force be with you.
			string_id message = new string_id (c_stringFile, "s_17652085");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch49 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Our lack of resources in this system makes any attempt at recapturing the vessel futile. The Empire can use that ship to tie up the Kessel system long enough to bring in their star destroyers... and at that point I cannot foresee any chance of us getting Kessel back. The key to the whole Alliance operation in the Outer Rim lies with the destruction of that corvette.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand we have a corvette in the system, couldn't we use that?
	if (response == "s_7a052bd2")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Yes we do have our own corvette in the system that we use as a command vessel, but after the loss of the one in the Ryloth system, we cannot risk losing another one. It would appear that we will have to send out fighters to try to combat this menace.
			string_id message = new string_id (c_stringFile, "s_9e5b1d54");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand, sir. Will I have any support for this assault.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_cba67818");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 46);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch50 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yes. Your operation did accomplish its goals. But word has come in that the Empire has managed to capture one of our corvettes in the Ryloth system. Intelligence has reported it has been seen patrolling through Kessel.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Empire has a corvette in the Kessel system?
	if (response == "s_ca1a4aa4")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: It would seem that this corvette is patrolling several systems, so it is not always in Kessel... but it is always close enough to be a threat. I fear that we only have one choice. You are going to have to destroy that corvette.
			string_id message = new string_id (c_stringFile, "s_74cca111");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Wouldn't it be better to try to recapture the vessel?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Destroy the corvette, sir?
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c1c7c6c");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_a6fb8def");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 44);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch51 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hello, %NU. I have been looking forward to meeting you. You are probably wondering why I asked to see you.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Yes, I was wondering that.
	if (response == "s_9a0798b3")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I have been speaking with several of your former commanding officers about an important mission that I need a talented pilot to undertake. Your name came up over and over again. I must say you really left quite an impression on your commanders.
			string_id message = new string_id (c_stringFile, "s_36256b98");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I hope it was a good impression.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am sorry, Sir. I didn't mean to.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_37157452");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_89f9ea03");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 52);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Reporting as ordered, Sir.
	if (response == "s_81f189ef")
	{
		doAnimationAction (player, "salute2");

		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			//-- NPC: At ease, Pilot. I asked you here because after speaking with several of your commanding officers, I believe that you might be perfect for a very important mission. They told me that you were one of the finest pilots they have ever seen.
			string_id message = new string_id (c_stringFile, "s_677c6a2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What can I do for you, Sir?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ad709e77");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 66);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch52 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have been speaking with several of your former commanding officers about an important mission that I need a talented pilot to undertake. Your name came up over and over again. I must say you really left quite an impression on your commanders.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I hope it was a good impression.
	if (response == "s_37157452")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: From my understanding you were one of the finest pilots they have ever dealt with. They said you were a natural, which is just the sort of pilot I need.
			string_id message = new string_id (c_stringFile, "s_7660776e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is it you need me to do?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44bd3318");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 53);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am sorry, Sir. I didn't mean to.
	if (response == "s_89f9ea03")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "laugh_titter");

			//-- NPC: So you have a sense of humor as well. That is good. You will need to keep your moral up for we are looking at some bleak times and I fear that many lives may be lost. But we have to strive on if we ever hope to drive the Empire from power. I think you are just the type of pilot I need.
			string_id message = new string_id (c_stringFile, "s_6f27454c");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is it you need me to do?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_559");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 65);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch53 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: From my understanding you were one of the finest pilots they have ever dealt with. They said you were a natural, which is just the sort of pilot I need.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is it you need me to do?
	if (response == "s_44bd3318")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I need a pilot who is willing to brave the Imperial forces stationed in the Kessel system. It will be extremely dangerous and it is highly likely that anyone who accepts this mission will not make it back alive. I will not force a pilot to accept this mission so I am asking for volunteers.
			string_id message = new string_id (c_stringFile, "s_7bf46fb2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am your pilot, sir. I volunteer.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thank you, sir. I do not wish to take this mission.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_32062da9");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4c9d51f4");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch54 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I need a pilot who is willing to brave the Imperial forces stationed in the Kessel system. It will be extremely dangerous and it is highly likely that anyone who accepts this mission will not make it back alive. I will not force a pilot to accept this mission so I am asking for volunteers.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am your pilot, sir. I volunteer.
	if (response == "s_32062da9")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: That is what I hoped you would say. The Alliance has decided that it is time to try to make a strike at the Outer Rim. We believe that the Empire is stretched too thin to adequately defend all of its positions in these systems. Our first goal is to take Kessel.
			string_id message = new string_id (c_stringFile, "s_5919485e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: The Kessel system?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_85b8ffbd");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 55);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: No thank you, sir. I do not wish to take this mission.
	if (response == "s_4c9d51f4")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I understand, %NU. If you change your mind come back and talk to me. Until then I wish you continued success in your own duties.
			string_id message = new string_id (c_stringFile, "s_69741346");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch55 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is what I hoped you would say. The Alliance has decided that it is time to try to make a strike at the Outer Rim. We believe that the Empire is stretched too thin to adequately defend all of its positions in these systems. Our first goal is to take Kessel.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The Kessel system?
	if (response == "s_85b8ffbd")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The Kessel system is strategically located between three separate systems, all of which have important shipping lanes passing through it. With control of the Kessel system it is possible to defend the surrounding systems very easily. Alliance Command has determined that we take the area for ourselves. Unfortunately, it would appear that the Empire has its own plans for Kessel.
			string_id message = new string_id (c_stringFile, "s_1668a97b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What do you mean, sir?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_22d87576");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 56);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch56 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Kessel system is strategically located between three separate systems, all of which have important shipping lanes passing through it. With control of the Kessel system it is possible to defend the surrounding systems very easily. Alliance Command has determined that we take the area for ourselves. Unfortunately, it would appear that the Empire has its own plans for Kessel.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What do you mean, sir?
	if (response == "s_22d87576")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: The Alliance has been moving ships into the system, but we have come up against heavy resistance from Imperial forces. The Empire has also been moving support vessels into the system. My only guess is that they also realize the potential value of Kessel.
			string_id message = new string_id (c_stringFile, "s_86a40b9e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Why not initialize a full scale assault?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why not organize a raid on the Imperial support vessels?
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_834a890e");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c97cb0b8");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 57);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch57 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance has been moving ships into the system, but we have come up against heavy resistance from Imperial forces. The Empire has also been moving support vessels into the system. My only guess is that they also realize the potential value of Kessel.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why not initialize a full scale assault?
	if (response == "s_834a890e")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Right now our force is roughly of equal strength to their own. I believe that we can win any such assault, but I fear it would weaken us to the point where we could not hold the system. The Empire would be able to wipe us out easily once their reinforcements arrived.
			string_id message = new string_id (c_stringFile, "s_e0c18ed4");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I understand. So what is the plan?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_47e9fbfd");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 58);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why not organize a raid on the Imperial support vessels?
	if (response == "s_c97cb0b8")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: That is exactly the plan. We cannot afford to have a large scale assault but we can use a small mobile force to strike quickly at their patrols. If we can hammer hard enough on their positions and destroy enough of their patrol craft, we can put them on their heels. Once we have them down, we will strike with everything we have.
			string_id message = new string_id (c_stringFile, "s_a21308bb");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A very good plan. And you need me for the assault team.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6d976791");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 59);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch58 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Right now our force is roughly of equal strength to their own. I believe that we can win any such assault, but I fear it would weaken us to the point where we could not hold the system. The Empire would be able to wipe us out easily once their reinforcements arrived.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I understand. So what is the plan?
	if (response == "s_47e9fbfd")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "shake_head_no");

			//-- NPC: We cannot afford a large scale assault, but we can use a small mobile force to strike quickly at their patrols. If we can hammer hard enough on their positions and destroy enough of their patrol craft, we can put them on their heels. Once we have them down, we will strike with everything we have.
			string_id message = new string_id (c_stringFile, "s_ff2c163e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: A very good plan. And you need me for the assault team.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_6d976791");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 59);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch59 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We cannot afford a large scale assault, but we can use a small mobile force to strike quickly at their patrols. If we can hammer hard enough on their positions and destroy enough of their patrol craft, we can put them on their heels. Once we have them down, we will strike with everything we have.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A very good plan. And you need me for the assault team.
	if (response == "s_6d976791")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Correct. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art ships, so this will be no walk in the park.
			string_id message = new string_id (c_stringFile, "s_63214db1");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where are the Imperials held up?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1fd64638");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 60);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch60 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Correct. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art ships, so this will be no walk in the park.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where are the Imperials held up?
	if (response == "s_1fd64638")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: This is where things get a little more tricky. Because of the Maw, long range scanners are next to useless in Kessel. Recon reports that the Imperial vessels patrol all throughout the system, so I am afraid that you will have to perform a seek and destroy style attack on them. I estimate that you will have to destroy at least thirty of these patrol ships in order for us to have an overwhelming advantage.
			string_id message = new string_id (c_stringFile, "s_875c631e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You can count on me, sir.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_2cbd4ffa");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 61);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch61 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is where things get a little more tricky. Because of the Maw, long range scanners are next to useless in Kessel. Recon reports that the Imperial vessels patrol all throughout the system, so I am afraid that you will have to perform a seek and destroy style attack on them. I estimate that you will have to destroy at least thirty of these patrol ships in order for us to have an overwhelming advantage.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You can count on me, sir.
	if (response == "s_2cbd4ffa")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "salute2");

			rebel_master_trainer_action_grantMissionOne (player, npc);

			//-- NPC: Thank you, Pilot. May the force be with you.
			string_id message = new string_id (c_stringFile, "s_3e83f2ea");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch63 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: That is exactly the plan. We cannot afford to have a large scale assault but we can use a small mobile force to strike quickly at their patrols. If we can hammer hard enough on their positions and destroy enough of their patrol craft, we can put them on their heels. Once we have them down, we will strike with everything we have.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: A very good plan. And you need me for the assault team.
	if (response == "s_6d976791")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Correct. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art ships, so this will be no walk in the park.
			string_id message = new string_id (c_stringFile, "s_63214db1");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where are the Imperials held up?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_1fd64638");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 60);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch65 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: So you have a sense of humor as well. That is good. You will need to keep your moral up for we are looking at some bleak times and I fear that many lives may be lost. But we have to strive on if we ever hope to drive the Empire from power. I think you are just the type of pilot I need.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is it you need me to do?
	if (response == "s_559")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I need a pilot who is willing to brave the Imperial forces stationed in the Kessel system. It will be extremely dangerous and it is highly likely that anyone who accepts this mission will not make it back alive. I will not force a pilot to accept this mission so I am asking for volunteers.
			string_id message = new string_id (c_stringFile, "s_7bf46fb2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am your pilot, sir. I volunteer.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thank you, sir. I do not wish to take this mission.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_32062da9");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4c9d51f4");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch66 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: At ease, Pilot. I asked you here because after speaking with several of your commanding officers, I believe that you might be perfect for a very important mission. They told me that you were one of the finest pilots they have ever seen.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What can I do for you, Sir?
	if (response == "s_ad709e77")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I need a pilot who is willing to brave the Imperial forces stationed in the Kessel system. It will be extremely dangerous and it is highly likely that anyone who accepts this mission will not make it back alive. I will not force a pilot to accept this mission so I am asking for volunteers.
			string_id message = new string_id (c_stringFile, "s_7bf46fb2");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am your pilot, sir. I volunteer.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: No thank you, sir. I do not wish to take this mission.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_32062da9");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_4c9d51f4");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 54);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch67 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Greetings, %NU. I am sure you are plenty confused as to why an Alliance Admiral asked to speak with you. To put it bluntly, we are in need of your help.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am just a simple smuggler. What could I possibly do for the Alliance?
	if (response == "s_2acaca5d")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: From what I understand, you are anything but a simple smuggler. The way I hear it you are one of the finest pilots this side of Coruscant. I am desperately in need of a fearless and skilled pilot. And I think that you are just such a pilot.
			string_id message = new string_id (c_stringFile, "s_133c89f7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am willing to hear you out.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I don't work cheap.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_26bd9f23");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_24a07bd4");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 68);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: The members of CorSec have always answered the call of the Alliance.
	if (response == "s_dc2fa6d8")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: The CorSec are important allies in our struggle against tyranny. I thank you for arriving as quickly as you did. I have a situation here that I think you can assist me with.
			string_id message = new string_id (c_stringFile, "s_d7e71a00");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am afraid that I do not understand. How can I assist you?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e8d6a9e7");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 80);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch68 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: From what I understand, you are anything but a simple smuggler. The way I hear it you are one of the finest pilots this side of Coruscant. I am desperately in need of a fearless and skilled pilot. And I think that you are just such a pilot.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am willing to hear you out.
	if (response == "s_26bd9f23")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I will assume you are familiar with the Kessel system?
			string_id message = new string_id (c_stringFile, "s_3f7dd52e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: 'Fraid I have never been there.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_52917b0d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e7f9b26f");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 69);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't work cheap.
	if (response == "s_24a07bd4")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "snap_finger2");

			//-- NPC: The Alliance will compensate you for your time and effort if you choose to assist us in this mission.
			string_id message = new string_id (c_stringFile, "s_a7be18a9");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Okay, what is it you want me to do?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_78ce5241");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 79);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch69 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I will assume you are familiar with the Kessel system?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Of course.
	if (response == "s_52917b0d")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Then you would know of its strategic value for the Outer Rim. With the three other systems' shipping lanes running through it, the Alliance could defend a large portion of Outer Rim worlds by controlling that system.
			string_id message = new string_id (c_stringFile, "s_da2cf079");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So, what does this have to do with me?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8f3f7918");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 70);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: 'Fraid I have never been there.
	if (response == "s_e7f9b26f")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The Kessel system is located deep in the Outer Rim. It has important strategic value to the Alliance, since there are three other systems with important shipping lanes running through it. With control of that system, the Alliance can defend a huge portion of the Outer Rim worlds.
			string_id message = new string_id (c_stringFile, "s_ecd272f1");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So, what does this have to do with me?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8f3f7918");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 70);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch70 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Then you would know of its strategic value for the Outer Rim. With the three other systems' shipping lanes running through it, the Alliance could defend a large portion of Outer Rim worlds by controlling that system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So, what does this have to do with me?
	if (response == "s_8f3f7918")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: The Alliance has begun moving ships into the system in order to defend it. Unfortunately, it seems that the Empire has also determined the value of the Kessel system and has begun moving their own support craft in. We need to get those Imperial vessels out of the system.
			string_id message = new string_id (c_stringFile, "s_16531693");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So you are asking me to hunt Imperials?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8964c03a");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 71);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch71 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance has begun moving ships into the system in order to defend it. Unfortunately, it seems that the Empire has also determined the value of the Kessel system and has begun moving their own support craft in. We need to get those Imperial vessels out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So you are asking me to hunt Imperials?
	if (response == "s_8964c03a")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: In a nutshell... yes. We are too evenly matched to launch an assault on their positions without being weakened to the point where we could not hold the system. The only solution that I could come up with was a series of raids on the Imperial positions.
			string_id message = new string_id (c_stringFile, "s_c5b25047");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You have pilots. Why not use one of them?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_174c76a5");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 72);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch72 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: In a nutshell... yes. We are too evenly matched to launch an assault on their positions without being weakened to the point where we could not hold the system. The only solution that I could come up with was a series of raids on the Imperial positions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have pilots. Why not use one of them?
	if (response == "s_174c76a5")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: We have a number of skilled pilots, but no one that I feel is up to this assignment. I asked around and your name came up again and again. I believe that you are the only pilot around that can pull off this mission. I am not going to force anyone to attempt this but I am asking you to volunteer.
			string_id message = new string_id (c_stringFile, "s_65a12a87");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I have no love for the Empire. You have your pilot.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I do not see the profit in getting in the middle of a fight between you and the Empire. I have to decline.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_c10e0254");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_35c0388d");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 73);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch73 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We have a number of skilled pilots, but no one that I feel is up to this assignment. I asked around and your name came up again and again. I believe that you are the only pilot around that can pull off this mission. I am not going to force anyone to attempt this but I am asking you to volunteer.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I have no love for the Empire. You have your pilot.
	if (response == "s_c10e0254")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I am glad that you agreed. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art craft, so this will be no walk in the park.
			string_id message = new string_id (c_stringFile, "s_4bdfa49b");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where are the Imperials held up?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_579");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 74);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I do not see the profit in getting in the middle of a fight between you and the Empire. I have to decline.
	if (response == "s_35c0388d")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I completely understand. If you change your mind come back and talk to me again. Good luck to you, %NU.
			string_id message = new string_id (c_stringFile, "s_4ebc69dd");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch74 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am glad that you agreed. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art craft, so this will be no walk in the park.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where are the Imperials held up?
	if (response == "s_579")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			rebel_master_trainer_action_grantMissionOne (player, npc);

			//-- NPC: This is where things get a little more tricky. Because of the Maw, long range scanners are next to useless in Kessel. Recon reports that the Imperial vessels patrol all throughout the system, so I am afraid that you will have to perform a seek and destroy style attack on them. I estimate that you will have to destroy at least thirty of these patrol ships in order for us to have an overwhelming advantage.
			string_id message = new string_id (c_stringFile, "s_581");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Don't worry much about that. I have a knack for finding what I need to.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_76d5f218");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 75);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch75 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is where things get a little more tricky. Because of the Maw, long range scanners are next to useless in Kessel. Recon reports that the Imperial vessels patrol all throughout the system, so I am afraid that you will have to perform a seek and destroy style attack on them. I estimate that you will have to destroy at least thirty of these patrol ships in order for us to have an overwhelming advantage.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Don't worry much about that. I have a knack for finding what I need to.
	if (response == "s_76d5f218")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: Thank you, pilot. May the Force be with you.
			string_id message = new string_id (c_stringFile, "s_6daab4e1");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch78 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Kessel system is located deep in the Outer Rim. It has important strategic value to the Alliance, since there are three other systems with important shipping lanes running through it. With control of that system, the Alliance can defend a huge portion of the Outer Rim worlds.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So, what does this have to do with me?
	if (response == "s_8f3f7918")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "pound_fist_palm");

			//-- NPC: The Alliance has begun moving ships into the system in order to defend it. Unfortunately, it seems that the Empire has also determined the value of the Kessel system and has begun moving their own support craft in. We need to get those Imperial vessels out of the system.
			string_id message = new string_id (c_stringFile, "s_16531693");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So you are asking me to hunt Imperials?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_8964c03a");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 71);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch79 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance will compensate you for your time and effort if you choose to assist us in this mission.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Okay, what is it you want me to do?
	if (response == "s_78ce5241")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: I will assume you are familiar with the Kessel system?
			string_id message = new string_id (c_stringFile, "s_3f7dd52e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Of course.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: 'Fraid I have never been there.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_52917b0d");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_e7f9b26f");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 69);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch80 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The CorSec are important allies in our struggle against tyranny. I thank you for arriving as quickly as you did. I have a situation here that I think you can assist me with.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am afraid that I do not understand. How can I assist you?
	if (response == "s_e8d6a9e7")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: I have an important and very dangerous mission that I need a highly skilled pilot to achieve. Unfortunately I do not think any of my pilots are up the task, so I've turned to our allies for support. Your name came up over and over again. It is my understanding you are one of the finest pilots anyone has ever seen.
			string_id message = new string_id (c_stringFile, "s_d8da45e7");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I don't know if I would go that far.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am not one of the finest. I am the finest.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_aa01a084");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_ee795f66");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 81);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch81 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I have an important and very dangerous mission that I need a highly skilled pilot to achieve. Unfortunately I do not think any of my pilots are up the task, so I've turned to our allies for support. Your name came up over and over again. It is my understanding you are one of the finest pilots anyone has ever seen.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I don't know if I would go that far.
	if (response == "s_aa01a084")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			//-- NPC: There is no need for false modesty, but it is appreciated. I am in need of someone with your skills to perform a highly dangerous mission in the Kessel system. I cannot force you to take the mission, but I ask that you hear me out before deciding.
			string_id message = new string_id (c_stringFile, "s_684ff0a");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is this mission?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3d93239d");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 82);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am not one of the finest. I am the finest.
	if (response == "s_ee795f66")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: You certainly have confidence. That is a good thing, because I am in need of someone who is confident in their abilities for a very dangerous mission in the Kessel system. I cannot force you to take the mission, but I ask that you at least hear me out before making your decision.
			string_id message = new string_id (c_stringFile, "s_84b47be3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What is this mission?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_3d93239d");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 82);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch82 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: There is no need for false modesty, but it is appreciated. I am in need of someone with your skills to perform a highly dangerous mission in the Kessel system. I cannot force you to take the mission, but I ask that you hear me out before deciding.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is this mission?
	if (response == "s_3d93239d")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The Kessel system is located deep in the Outer Rim. It has important strategic value to the Alliance, since three other systems have important shipping lanes running through Kessel. With control of that system, the Alliance can defend a huge portion of the Outer Rim worlds.
			string_id message = new string_id (c_stringFile, "s_6be5ab4e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where do I fit into this?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_92ad6ffe");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 83);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch83 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Kessel system is located deep in the Outer Rim. It has important strategic value to the Alliance, since three other systems have important shipping lanes running through Kessel. With control of that system, the Alliance can defend a huge portion of the Outer Rim worlds.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where do I fit into this?
	if (response == "s_92ad6ffe")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The Alliance has begun moving ships into the system. Unfortunately, it seems that the Empire has also determined the value of Kessel and has begun moving their own support craft in. We need to get those Imperial vessels out of the system.
			string_id message = new string_id (c_stringFile, "s_cd70bed3");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: So you are asking me to hunt Imperials?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_602");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 84);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch84 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Alliance has begun moving ships into the system. Unfortunately, it seems that the Empire has also determined the value of Kessel and has begun moving their own support craft in. We need to get those Imperial vessels out of the system.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: So you are asking me to hunt Imperials?
	if (response == "s_602")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: In a nutshell... yes. We are too evenly matched to launch an assault on their positions without being weakened to the point where we could not hold it. The only solution that I could come up with was a series of raids on the Imperial positions.
			string_id message = new string_id (c_stringFile, "s_77cd7306");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You have pilots. Why not use one of them?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_605");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 85);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch85 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: In a nutshell... yes. We are too evenly matched to launch an assault on their positions without being weakened to the point where we could not hold it. The only solution that I could come up with was a series of raids on the Imperial positions.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have pilots. Why not use one of them?
	if (response == "s_605")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: We have a number of skilled pilots, but no one that I feel is up to this assignment. I asked around and your name came up again and again. I believe that you are the only pilot around that can pull off this mission. I am not going to force anyone to attempt this, but I am asking you to volunteer.
			string_id message = new string_id (c_stringFile, "s_efc8c4f5");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You have use of me and my vessel for as long as you need them.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I am sorry but I cannot take this risk.
			boolean hasResponse1 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_647683fc");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d646c11");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 86);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch86 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We have a number of skilled pilots, but no one that I feel is up to this assignment. I asked around and your name came up again and again. I believe that you are the only pilot around that can pull off this mission. I am not going to force anyone to attempt this, but I am asking you to volunteer.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You have use of me and my vessel for as long as you need them.
	if (response == "s_647683fc")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_multiple");

			rebel_master_trainer_action_setWorkingForRebel (player, npc);

			//-- NPC: I am glad that you agreed. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art craft, so this will be no walk in the park.
			string_id message = new string_id (c_stringFile, "s_609");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where are the Imperials held up?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_611");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 87);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am sorry but I cannot take this risk.
	if (response == "s_d646c11")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "nod_head_once");

			//-- NPC: I completely understand. If you change your mind come back and talk to me again. Good luck to you, %NU.
			string_id message = new string_id (c_stringFile, "s_618");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcEndConversationWithMessage (player, pp);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch87 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: I am glad that you agreed. You will need to assemble a team of pilots who you feel are up to the challenge. The Imperial pilots in the Kessel system are some of the best in their entire fleet and they are all flying state of the art craft, so this will be no walk in the park.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Where are the Imperials held up?
	if (response == "s_611")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			rebel_master_trainer_action_grantMissionOne (player, npc);

			//-- NPC: This is where things get a little more tricky. Because of the Maw, long range scanners are next to useless in Kessel. Recon reports that the Imperial vessels patrol all throughout the system, so I am afraid that you will have to perform a seek and destroy style attack on them. I estimate that you will have to destroy at least thirty of these patrol ships in order for us to have an overwhelming advantage.
			string_id message = new string_id (c_stringFile, "s_613");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I will hunt them down. They are no match for me.
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_d1111dc8");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 88);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch88 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is where things get a little more tricky. Because of the Maw, long range scanners are next to useless in Kessel. Recon reports that the Imperial vessels patrol all throughout the system, so I am afraid that you will have to perform a seek and destroy style attack on them. I estimate that you will have to destroy at least thirty of these patrol ships in order for us to have an overwhelming advantage.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I will hunt them down. They are no match for me.
	if (response == "s_d1111dc8")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Thank you, pilot. May the force be with you.
			string_id message = new string_id (c_stringFile, "s_d41a131");
			utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int rebel_master_trainer_handleBranch91 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: You certainly have confidence. That is a good thing, because I am in need of someone who is confident in their abilities for a very dangerous mission in the Kessel system. I cannot force you to take the mission, but I ask that you at least hear me out before making your decision.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What is this mission?
	if (response == "s_3d93239d")
	{
		//-- [NOTE] 
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The Kessel system is located deep in the Outer Rim. It has important strategic value to the Alliance, since three other systems have important shipping lanes running through Kessel. With control of that system, the Alliance can defend a huge portion of the Outer Rim worlds.
			string_id message = new string_id (c_stringFile, "s_6be5ab4e");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Where do I fit into this?
			boolean hasResponse0 = false;
			if (rebel_master_trainer_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_92ad6ffe");

				utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 83);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.rebel_master_trainer");

	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	factions.setFaction( self, factions.FACTION_REBEL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setInvulnerable( self, true );
	setCondition( self, CONDITION_SPACE_INTERESTING );
	factions.setFaction( self, factions.FACTION_REBEL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);

	faceTo( self, player );
	
	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.rebel_master_trainer");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isWorkingForEmpire (player, npc))
	{
		doAnimationAction (npc, "point_accusingly");

		//-- NPC: You shouldn't be here! I have nothing to say to the likes of you. You have made your choice, now you must live with the consequences.
		string_id message = new string_id (c_stringFile, "s_dc822762");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isImperailPilot (player, npc))
	{
		doAnimationAction (npc, "point_accusingly");

		//-- NPC: You and I have nothing to say to one another. I suggest you clear out of this area and get back to your tyrant leaders. We will one day meet on the field of battle, I can promise you that.
		string_id message = new string_id (c_stringFile, "s_d6d7f7f9");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isRSFPilot (player, npc))
	{
		doAnimationAction (npc, "slow_down");

		//-- NPC: I normally do not drive off a potential ally, but I cannot trust just ANY member of the Royal Security Forces. Your group is just too tightly involved with the Empire, and I cannot risk allowing you to join our cause.
		string_id message = new string_id (c_stringFile, "s_f2bb94ef");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isNotReadyforRebelMaster (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		//-- NPC: %NU, it is always nice to stop and chat with the men, but I am afraid that I do not have time to talk right now. I am planning a very important operation and I can only use the finest pilots available to the Alliance. I suggest you gain some more flight experience and then come back to see me.
		string_id message = new string_id (c_stringFile, "s_efd059ff");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, sir. I will do that.
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_a667be99");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 4);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "rebel_master_trainer", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isNotReadyforPrivateerMaster (player, npc))
	{
		doAnimationAction (npc, "slow_down");

		//-- NPC: I am afraid that I am rather busy right now. Under normal circumstances I am always willing to speak to possible allies in our struggle against the tyranny of the Empire, but right now there just doesn't seem to be any time. Perhaps we can talk again after you have earned some more flight experience in real situations.
		string_id message = new string_id (c_stringFile, "s_7cd01fd0");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasRebelMasterNoMedal (player, npc))
	{
		doAnimationAction (npc, "salute1");

		rebel_master_trainer_action_grantMedalRebel (player, npc);

		//-- NPC: %NU, it is wonderful to see you again. I am glad you stopped by because I have just been authorized to commission you a special medal for your part in our overwhelming victory in Kessel. I am proud and honored to have been able to serve the Alliance with you.
		string_id message = new string_id (c_stringFile, "s_449");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasNeutralMasterNoMedal (player, npc))
	{
		doAnimationAction (npc, "salute1");

		rebel_master_trainer_action_grantMedalNeutral (player, npc);

		//-- NPC: %NU, it is wonderful to see you again. I am glad you stopped by because I have just been authorized to commission you a special medal for your part in our overwhelming victory in Kessel. I am proud and honored to have been able to serve with you.
		string_id message = new string_id (c_stringFile, "s_168");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasOtherMasterSkill (player, npc))
	{
		doAnimationAction (npc, "point_to_self");

		//-- NPC: %NU, you have performed brilliantly in the face of overwhelming odds. It has been my privilege to have been your commanding officer. The victory that you lead in Kessel has assured the continued freedom of the Outer Rim. Currently I do not have any new missions that I need you to perform. I trust in your ability to uphold the values of the Alliance without assistance from me.
		string_id message = new string_id (c_stringFile, "s_98d92abb");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasMasterSkill (player, npc))
	{
		doAnimationAction (npc, "point_to_self");

		//-- NPC: %NU, you have performed brilliantly in the face of overwhelming odds. It has been my privilege to have been your commanding officer. The victory that you lead in Kessel has assured the continued freedom of the Outer Rim. Currently I do not have any new missions that I need you to run. I trust in your ability to uphold the values of the Alliance without assistance from me.
		string_id message = new string_id (c_stringFile, "s_bfaef3d8");
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isOnMasterQuest (player, npc))
	{
		doAnimationAction (npc, "point_away");

		//-- NPC: You shouldn't be back here. You have a job to do in the Kessel system. Your mission is of utmost importance and the entire Alliance is counting on your success. To your ship, Pilot!
		string_id message = new string_id (c_stringFile, "s_21d9c824");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isOnQuest (player, npc))
	{
		doAnimationAction (npc, "point_away");

		//-- NPC: You have your orders, Pilot. It is imperative that you complete the mission that you have! Once you have completed the task on hand, talk to me again and we will see what needs to be done.
		string_id message = new string_id (c_stringFile, "s_fd815e48");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasFailedMissionTwo (player, npc))
	{
		doAnimationAction (npc, "shake_head_disgust");

		//-- NPC: I see that you failed to destroy the corvette. This is not good news. The balance of power inside of the Kessel system has shifted heavily in favor of the Empire. Unless we can destroy that vessel we could lose the entire region.
		string_id message = new string_id (c_stringFile, "s_7826431d");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Give me another chance, sir.
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I am a good pilot, sir.
		boolean hasResponse1 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d4d47c04");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_eb02d65");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 13);

			npcStartConversation (player, npc, "rebel_master_trainer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasFailedMissionOne (player, npc))
	{
		//-- NPC: %NU, what is the status of your operation in the Kessel system?
		string_id message = new string_id (c_stringFile, "s_7f725bea");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: [relate the details of the failed mission]
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: It wasn't my fault, sir. The mission failed due to bad planning.
		boolean hasResponse1 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_4c9055c9");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_ed30fff8");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 20);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "rebel_master_trainer", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasWonMissionTwo (player, npc))
	{
		//-- NPC: We were unable to follow your progress via long range scans due to the interference of the Maw. What do you have to report?
		string_id message = new string_id (c_stringFile, "s_e3714e1d");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: [relay the destruction of the stolen Corellian Corvette]
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_1da9fe53");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 28);

			npcStartConversation (player, npc, "rebel_master_trainer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasWonMissionOne (player, npc))
	{
		doAnimationAction (npc, "greet");

		//-- NPC: Welcome back, %NU. It is good to see that you managed to perform such a difficult task and return. Intelligence reports that the number of Imperial ships in the system are down. Our Corellian Corvette should be able to drive the rest of their support craft out of the system.
		string_id message = new string_id (c_stringFile, "s_c78b33ad");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: We brought in a Corellian Corvette?
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_d02bfc3b");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 37);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "rebel_master_trainer", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_hasReceivedRewardOne (player, npc))
	{
		doAnimationAction (npc, "explain");

		//-- NPC: It is a good thing that you achieved victory over the Imperial support vessels. We desperately needed that good news. Unfortunately for us we have received some very disturbing reports from Ryloth. I fear that our plans on a large scale assault on the Kessel system have been scrapped.
		string_id message = new string_id (c_stringFile, "s_1c9d33ed");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: What happened, sir?
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Was my operation successful in pushing the Empire back?
		boolean hasResponse1 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_c68b1dd3");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_ffeb2f4c");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 42);

			npcStartConversation (player, npc, "rebel_master_trainer", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isReadyforMasterRebel (player, npc))
	{
		doAnimationAction (npc, "greet");

		//-- NPC: Hello, %NU. I have been looking forward to meeting you. You are probably wondering why I asked to see you.
		string_id message = new string_id (c_stringFile, "s_46b27b0c");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Yes, I was wondering that.
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: Reporting as ordered, Sir.
		boolean hasResponse1 = false;
		if (rebel_master_trainer_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_9a0798b3");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_81f189ef");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 51);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "rebel_master_trainer", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition_isReadyforMasterPrivateer (player, npc))
	{
		doAnimationAction (npc, "greet");

		//-- NPC: Greetings, %NU. I am sure you are plenty confused as to why an Alliance Admiral asked to speak with you. To put it bluntly, we are in need of your help.
		string_id message = new string_id (c_stringFile, "s_41910783");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am just a simple smuggler. What could I possibly do for the Alliance?
		boolean hasResponse0 = false;
		if (rebel_master_trainer_condition_isSmuggler (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: The members of CorSec have always answered the call of the Alliance.
		boolean hasResponse1 = false;
		if (rebel_master_trainer_condition_isCorsec (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_2acaca5d");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_dc2fa6d8");

			utils.setScriptVar (player, "conversation.rebel_master_trainer.branchId", 67);

			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			npcStartConversation (player, npc, "rebel_master_trainer", null, pp, responses);
		}
		else
		{
			prose_package pp = new prose_package ();
			pp.stringId = message;
			pp.actor.set (player);
			pp.target.set (npc);

			chat.chat (npc, player, null, null, pp);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (rebel_master_trainer_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "slow_down");

		//-- NPC: I am afraid that I am too busy right now to talk to you. If you are interested in helping our cause I would suggest that you find some of our recruiters. They are located here and there but I am afraid I really don't keep track of them. Maybe try talking to J'pai Brek in Tyrena.
		string_id message = new string_id (c_stringFile, "s_c2eca562");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "rebel_master_trainer")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.rebel_master_trainer.branchId");

	if (branchId == 4 && rebel_master_trainer_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 13 && rebel_master_trainer_handleBranch13 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && rebel_master_trainer_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && rebel_master_trainer_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && rebel_master_trainer_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 18 && rebel_master_trainer_handleBranch18 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 20 && rebel_master_trainer_handleBranch20 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 21 && rebel_master_trainer_handleBranch21 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 22 && rebel_master_trainer_handleBranch22 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 24 && rebel_master_trainer_handleBranch24 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 25 && rebel_master_trainer_handleBranch25 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 26 && rebel_master_trainer_handleBranch26 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 28 && rebel_master_trainer_handleBranch28 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 29 && rebel_master_trainer_handleBranch29 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 30 && rebel_master_trainer_handleBranch30 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 31 && rebel_master_trainer_handleBranch31 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 32 && rebel_master_trainer_handleBranch32 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 34 && rebel_master_trainer_handleBranch34 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 35 && rebel_master_trainer_handleBranch35 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 37 && rebel_master_trainer_handleBranch37 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 38 && rebel_master_trainer_handleBranch38 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 39 && rebel_master_trainer_handleBranch39 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 42 && rebel_master_trainer_handleBranch42 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 43 && rebel_master_trainer_handleBranch43 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 44 && rebel_master_trainer_handleBranch44 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 45 && rebel_master_trainer_handleBranch45 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 46 && rebel_master_trainer_handleBranch46 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 47 && rebel_master_trainer_handleBranch47 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 49 && rebel_master_trainer_handleBranch49 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 50 && rebel_master_trainer_handleBranch50 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 51 && rebel_master_trainer_handleBranch51 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 52 && rebel_master_trainer_handleBranch52 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 53 && rebel_master_trainer_handleBranch53 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 54 && rebel_master_trainer_handleBranch54 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 55 && rebel_master_trainer_handleBranch55 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 56 && rebel_master_trainer_handleBranch56 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 57 && rebel_master_trainer_handleBranch57 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 58 && rebel_master_trainer_handleBranch58 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 59 && rebel_master_trainer_handleBranch59 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 60 && rebel_master_trainer_handleBranch60 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 61 && rebel_master_trainer_handleBranch61 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 63 && rebel_master_trainer_handleBranch63 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 65 && rebel_master_trainer_handleBranch65 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 66 && rebel_master_trainer_handleBranch66 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 67 && rebel_master_trainer_handleBranch67 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 68 && rebel_master_trainer_handleBranch68 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 69 && rebel_master_trainer_handleBranch69 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 70 && rebel_master_trainer_handleBranch70 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 71 && rebel_master_trainer_handleBranch71 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 72 && rebel_master_trainer_handleBranch72 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 73 && rebel_master_trainer_handleBranch73 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 74 && rebel_master_trainer_handleBranch74 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 75 && rebel_master_trainer_handleBranch75 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 78 && rebel_master_trainer_handleBranch78 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 79 && rebel_master_trainer_handleBranch79 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 80 && rebel_master_trainer_handleBranch80 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 81 && rebel_master_trainer_handleBranch81 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 82 && rebel_master_trainer_handleBranch82 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 83 && rebel_master_trainer_handleBranch83 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 84 && rebel_master_trainer_handleBranch84 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 85 && rebel_master_trainer_handleBranch85 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 86 && rebel_master_trainer_handleBranch86 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 87 && rebel_master_trainer_handleBranch87 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 88 && rebel_master_trainer_handleBranch88 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 91 && rebel_master_trainer_handleBranch91 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.rebel_master_trainer.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

