// ======================================================================
//
// tatooine_anchorjobs_ordo.script
// Copyright 2004, Sony Online Entertainment
// All Rights Reserved.
//
// Created with SwgConversationEditor 1.36 - DO NOT EDIT THIS AUTO-GENERATED FILE!
//
// ======================================================================

// ======================================================================
// Library Includes
// ======================================================================

include library.ai_lib;
include library.chat;
include library.groundquests;
include library.space_quest;
include library.utils;

// ======================================================================
// Script Constants
// ======================================================================

string c_stringFile = "conversation/tatooine_anchorjobs_ordo";

// ======================================================================
// Script Conditions
// ======================================================================

boolean tatooine_anchorjobs_ordo_condition__defaultCondition (obj_id player, obj_id npc)
{
	return true;
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_questAnchorComplete (obj_id player, obj_id npc)
{
	return (groundquests.hasCompletedQuest(player, "quest/tatooine_anchorjobs_bantha") 		&& 
			groundquests.hasCompletedQuest(player, "quest/tatooine_anchorjobs_impcodes")	&& 
			groundquests.hasCompletedQuest(player, "quest/tatooine_anchorjobs_leg")			&& 
			groundquests.hasCompletedQuest(player, "quest/tatooine_anchorjobs_legplus"));
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_questBlocked (obj_id player, obj_id npc)
{
	// The quest as a whole has been completed.
	return groundquests.isQuestDisabled ("tatooine_anchorjobs_impcodes");
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_areSmallDone (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_anchorjobs_bantha");
	int questId2 = questGetQuestId("quest/tatooine_anchorjobs_impcodes");
	
	boolean OnTask = 	questIsQuestComplete(questId1, player)&&
						questIsQuestComplete(questId2, player);
	
	return OnTask;
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_legReturn (obj_id player, obj_id npc)
{
	return groundquests.isTaskActive(player, "quest/tatooine_anchorjobs_legplus", "tatooine_anchorjobs_legplus_e4");
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_questBanthaComplete (obj_id player, obj_id npc)
{
	// The quest as a whole has been completed.
	return groundquests.hasCompletedQuest(player, "tatooine_anchorjobs_bantha");
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_questLegComplete (obj_id player, obj_id npc)
{
	// The quest as a whole has been completed.
	return groundquests.hasCompletedQuest(player, "tatooine_anchorjobs_leg");
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_questImpCodesComplete (obj_id player, obj_id npc)
{
	// The quest as a whole has been completed.
	return groundquests.hasCompletedQuest(player, "tatooine_anchorjobs_impcodes");
}

// ----------------------------------------------------------------------

boolean tatooine_anchorjobs_ordo_condition_onQuest (obj_id player, obj_id npc)
{
	int questId1 = questGetQuestId("quest/tatooine_anchorjobs_bantha");
	int questId2 = questGetQuestId("quest/tatooine_anchorjobs_impcodes");
	int questId3 = questGetQuestId("quest/tatooine_anchorjobs_leg");
	
	
	boolean OnTask =  	(questIsQuestActive(questId1, player))||
						(questIsQuestActive(questId2, player))||
						(questIsQuestActive(questId3, player));
						
	return OnTask;					
	
}

// ======================================================================
// Script Actions
// ======================================================================

void tatooine_anchorjobs_ordo_action_questLegGranted (obj_id player, obj_id npc)
{
	// grant the quest to get things started. Task 1 will now be active.
	groundquests.grantQuest(player, "tatooine_anchorjobs_leg");
}

// ----------------------------------------------------------------------

void tatooine_anchorjobs_ordo_action_signalLegPlus (obj_id player, obj_id npc)
{
	groundquests.sendSignal(player, "tatooine_anchorjobs_legplus_e4");
}

// ----------------------------------------------------------------------

void tatooine_anchorjobs_ordo_action_facePlayer (obj_id player, obj_id npc)
{
	faceTo(npc, player);
}

// ----------------------------------------------------------------------

void tatooine_anchorjobs_ordo_action_questImpcodesGranted (obj_id player, obj_id npc)
{
	// grant the quest to get things started. Task 1 will now be active.
	groundquests.grantQuest(player, "tatooine_anchorjobs_impcodes");
}

// ----------------------------------------------------------------------

void tatooine_anchorjobs_ordo_action_questBanthaGranted (obj_id player, obj_id npc)
{
	// grant the quest to get things started. Task 1 will now be active.
	groundquests.grantQuest(player, "tatooine_anchorjobs_bantha");
}

// ======================================================================
// Script %TO Tokens
// ======================================================================

// ======================================================================
// Script %DI Tokens
// ======================================================================

// ======================================================================
// Script %DF Tokens
// ======================================================================

// ======================================================================
// handleBranch<n> Functions 
// ======================================================================

int tatooine_anchorjobs_ordo_handleBranch3 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Hey, you really did a number on those mercs. I can't say I'm sorry they are gone. They've been a thorn in our side for some time now.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well they won't be causing you any more problems.
	if (response == "s_78")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_signalLegPlus (player, npc);

			//-- NPC: Thanks for the help.
			string_id message = new string_id (c_stringFile, "s_79");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: What about the other jobs?
			boolean hasResponse0 = false;
			if (!tatooine_anchorjobs_ordo_condition_areSmallDone (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_80");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 4);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch4 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Thanks for the help.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: What about the other jobs?
	if (response == "s_80")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: This is what is left to do.
			string_id message = new string_id (c_stringFile, "s_81");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can help hunting banthas.
			boolean hasResponse0 = false;
			if (!tatooine_anchorjobs_ordo_condition_questBanthaComplete (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I could retrieve those chips.
			boolean hasResponse1 = false;
			if (!tatooine_anchorjobs_ordo_condition_questImpCodesComplete (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_82");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_83");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 5);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch5 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: This is what is left to do.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can help hunting banthas.
	if (response == "s_82")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Imperials are using them to increase the number of patrols. They seem to have used up all of the dewbacks in the area. I need you to cull the local herd. 
			string_id message = new string_id (c_stringFile, "s_67");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds like a plan. 
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why are we slaughtering these beast?
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_68");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_69");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I could retrieve those chips.
	if (response == "s_83")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: We want to break the terrorists tactical code. To do that we need you to take out terrorists, collect the code chips from their comm-links and download their encryption keys. Send those keys to me.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do it.
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How am I to do that?
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Not interested.
			boolean hasResponse2 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_60");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_64");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch7 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: What do you want?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am looking to help the Rebellion
	if (response == "s_36")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "sigh_deeply");

			tatooine_anchorjobs_ordo_action_facePlayer (player, npc);

			//-- NPC: Yeah, seems to be a lot of people looking to help out once we won the battle of Yavin 4. Where were you before? Never mind. I do have some low security jobs I can farm out. Here is the list. Anything strike your fancy?
			string_id message = new string_id (c_stringFile, "s_43");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I can help hunting banthas.
			boolean hasResponse0 = false;
			if (!tatooine_anchorjobs_ordo_condition_questBanthaComplete (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I could retrieve those chips.
			boolean hasResponse1 = false;
			if (!tatooine_anchorjobs_ordo_condition_questImpCodesComplete (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Infiltrating the Valarian depot is something I can handle.
			boolean hasResponse2 = false;
			if (!tatooine_anchorjobs_ordo_condition_questLegComplete (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			//-- PLAYER: Well if you don't want my help I will leave.
			boolean hasResponse3 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse3 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_44");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_45");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_46");

				if (hasResponse3)
					responses [responseIndex++] = new string_id (c_stringFile, "s_84");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 8);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll just move along.
	if (response == "s_88")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Good decision.
			string_id message = new string_id (c_stringFile, "s_90");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch8 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Yeah, seems to be a lot of people looking to help out once we won the battle of Yavin 4. Where were you before? Never mind. I do have some low security jobs I can farm out. Here is the list. Anything strike your fancy?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I can help hunting banthas.
	if (response == "s_44")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Imperials are using them to increase the number of patrols. They seem to have used up all of the dewbacks in the area. I need you to cull the local herd. 
			string_id message = new string_id (c_stringFile, "s_67");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds like a plan. 
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why are we slaughtering these beast?
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_68");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_69");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 9);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I could retrieve those chips.
	if (response == "s_45")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: We want to break the terrorists tactical code. To do that we need you to take out terrorists, collect the code chips from their comm-links and download their encryption keys. Send those keys to me.
			string_id message = new string_id (c_stringFile, "s_58");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I'll do it.
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: How am I to do that?
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: Not interested.
			boolean hasResponse2 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_59");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_60");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_64");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 12);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Infiltrating the Valarian depot is something I can handle.
	if (response == "s_46")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: The Valarians have recovered a leg of an AT-AT and have it at their depot in the mountains. I want you to remove its RX-8 modulator, analyze its circuitry and then transmit the information to me. 
			string_id message = new string_id (c_stringFile, "s_47");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Consider it done.
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: Why the RX-8 modulator?
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			//-- PLAYER: On second thought, no. 
			boolean hasResponse2 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse2 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_48");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_54");

				if (hasResponse2)
					responses [responseIndex++] = new string_id (c_stringFile, "s_53");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 15);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Well if you don't want my help I will leave.
	if (response == "s_84")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "dismiss");

			//-- NPC: Move along.
			string_id message = new string_id (c_stringFile, "s_86");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch9 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Imperials are using them to increase the number of patrols. They seem to have used up all of the dewbacks in the area. I need you to cull the local herd. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds like a plan. 
	if (response == "s_68")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_questBanthaGranted (player, npc);

			//-- NPC: Good, here is the information that you need. Good hunting. 
			string_id message = new string_id (c_stringFile, "s_72");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why are we slaughtering these beast?
	if (response == "s_69")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: Look, I am not asking you to exterminate them as a species. Just thin out the local herds enough so that the Empire can't use them to mount additional patrols. Fewer patrols makes it safer for us to move men and materials around. Will you do it?
			string_id message = new string_id (c_stringFile, "s_70");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: Sounds a bit harsh, but I will do it.
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: I had a bantha doll when I was a kid. I will pass.
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_71");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_75");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 11);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch11 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: Look, I am not asking you to exterminate them as a species. Just thin out the local herds enough so that the Empire can't use them to mount additional patrols. Fewer patrols makes it safer for us to move men and materials around. Will you do it?

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Sounds a bit harsh, but I will do it.
	if (response == "s_71")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_questBanthaGranted (player, npc);

			//-- NPC: Good, here is the information that you need. Good hunting. 
			string_id message = new string_id (c_stringFile, "s_72");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I had a bantha doll when I was a kid. I will pass.
	if (response == "s_75")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well I expect it is a bit too much for you. Come back when you think you are up for it. 
			string_id message = new string_id (c_stringFile, "s_74");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch12 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: We want to break the terrorists tactical code. To do that we need you to take out terrorists, collect the code chips from their comm-links and download their encryption keys. Send those keys to me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I'll do it.
	if (response == "s_59")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_questImpcodesGranted (player, npc);

			//-- NPC: Here is the information of where to go and what to do. 
			string_id message = new string_id (c_stringFile, "s_62");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: How am I to do that?
	if (response == "s_60")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: With those codes we can keep a closer eye on what the terrorists are doing. Take out terrorists, collect the code chips from their comm-links and download their encryption keys. Send those keys to me.
			string_id message = new string_id (c_stringFile, "s_61");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: I am on my way.
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: On second thought, no. 
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_65");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_66");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 14);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Not interested.
	if (response == "s_64")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well I expect it is a bit too much for you. Come back when you think you are up for it. 
			string_id message = new string_id (c_stringFile, "s_74");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch14 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: With those codes we can keep a closer eye on what the terrorists are doing. Take out terrorists, collect the code chips from their comm-links and download their encryption keys. Send those keys to me.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: I am on my way.
	if (response == "s_65")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_questImpcodesGranted (player, npc);

			//-- NPC: Here is the information of where to go and what to do. 
			string_id message = new string_id (c_stringFile, "s_62");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: On second thought, no. 
	if (response == "s_66")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well I expect it is a bit too much for you. Come back when you think you are up for it. 
			string_id message = new string_id (c_stringFile, "s_74");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch15 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The Valarians have recovered a leg of an AT-AT and have it at their depot in the mountains. I want you to remove its RX-8 modulator, analyze its circuitry and then transmit the information to me. 

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Consider it done.
	if (response == "s_48")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_questLegGranted (player, npc);

			//-- NPC: Good. The location and other mission information has been uploaded to your datapad. 
			string_id message = new string_id (c_stringFile, "s_49");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: Why the RX-8 modulator?
	if (response == "s_54")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			doAnimationAction (npc, "explain");

			//-- NPC: The modulator controls the signals that make the leg move. If we can get a complete diagram of its circuitry our people might be able to come up with a device that will jam or disrupt those control signals. If we can do that ... well those things hit the ground pretty hard.
			string_id message = new string_id (c_stringFile, "s_55");
			int numberOfResponses = 0;

			boolean hasResponse = false;

			//-- PLAYER: You got it.
			boolean hasResponse0 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse0 = true;
			}

			//-- PLAYER: On second thought, no. 
			boolean hasResponse1 = false;
			if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
			{
				++numberOfResponses;
				hasResponse = true;
				hasResponse1 = true;
			}

			if (hasResponse)
			{
				int responseIndex = 0;
				string_id responses [] = new string_id [numberOfResponses];

				if (hasResponse0)
					responses [responseIndex++] = new string_id (c_stringFile, "s_56");

				if (hasResponse1)
					responses [responseIndex++] = new string_id (c_stringFile, "s_57");

				utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 17);

				npcSpeak (player, message);
				npcSetConversationResponses (player, responses);
			}
			else
			{
				utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

				npcEndConversationWithMessage (player, message);
			}

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: On second thought, no. 
	if (response == "s_53")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well I expect it is a bit too much for you. Come back when you think you are up for it. 
			string_id message = new string_id (c_stringFile, "s_74");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

int tatooine_anchorjobs_ordo_handleBranch17 (obj_id player, obj_id npc, string_id response)
{
	//-- [BRANCH NOTE] 
	//-- NPC: The modulator controls the signals that make the leg move. If we can get a complete diagram of its circuitry our people might be able to come up with a device that will jam or disrupt those control signals. If we can do that ... well those things hit the ground pretty hard.

	//-- [RESPONSE NOTE] 
	//-- PLAYER: You got it.
	if (response == "s_56")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			tatooine_anchorjobs_ordo_action_questLegGranted (player, npc);

			//-- NPC: Good. The location and other mission information has been uploaded to your datapad. 
			string_id message = new string_id (c_stringFile, "s_49");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	//-- [RESPONSE NOTE] 
	//-- PLAYER: On second thought, no. 
	if (response == "s_57")
	{
		//-- [NOTE] 
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			//-- NPC: Well I expect it is a bit too much for you. Come back when you think you are up for it. 
			string_id message = new string_id (c_stringFile, "s_74");
			utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

			npcEndConversationWithMessage (player, message);

			return SCRIPT_CONTINUE;
		}

	}

	return SCRIPT_DEFAULT;
}

// ----------------------------------------------------------------------

// ======================================================================
// User Script Triggers
// ======================================================================

trigger OnInitialize ()
{
	if ((!isMob (self)) || (isPlayer (self)))
		detachScript(self, "conversation.tatooine_anchorjobs_ordo");

	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	setInvulnerable (self, true);
	setName (self, "Droma Ordo");
	ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnAttach ()
{
	setCondition (self, CONDITION_CONVERSABLE);
	setCondition (self, CONDITION_INTERESTING);
	setInvulnerable (self, true);
	setName (self, "Droma Ordo");
	ai_lib.setDefaultCalmBehavior( self, ai_lib.BEHAVIOR_SENTINEL );

	return SCRIPT_CONTINUE;
}

trigger OnObjectMenuRequest (obj_id player, menu_info menuInfo)
{
	int menu = menuInfo.addRootMenu (menu_info_types.CONVERSE_START, null);
	menu_info_data menuInfoData = menuInfo.getMenuItemById (menu);
	menuInfoData.setServerNotify (false);
	setCondition (self, CONDITION_CONVERSABLE);

	return SCRIPT_CONTINUE;
}

trigger OnIncapacitated (obj_id killer)
{
	clearCondition (self, CONDITION_CONVERSABLE);
	detachScript (self, "conversation.tatooine_anchorjobs_ordo");

	return SCRIPT_CONTINUE;
}

// ======================================================================
// Script Triggers
// ======================================================================

//-- This function should move to base_class.java
boolean npcStartConversation(obj_id player, obj_id npc, string convoName, string_id greetingId, prose_package greetingProse, string_id[] responses)
{
	Object[] objects = new Object[responses.length];
	System.arraycopy(responses, 0, objects, 0, responses.length);
	return npcStartConversation(player, npc, convoName, greetingId, greetingProse, objects);
}

// ----------------------------------------------------------------------

trigger OnStartNpcConversation (obj_id player)
{
	obj_id npc = self;

	if (ai_lib.isInCombat (npc) || ai_lib.isInCombat (player))
		return SCRIPT_OVERRIDE;

	//-- [NOTE] 
	if (tatooine_anchorjobs_ordo_condition_questBlocked (player, npc))
	{
		doAnimationAction (npc, "listen");

		//-- NPC: I am sorry, do I know you?
		string_id message = new string_id (c_stringFile, "s_63");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_anchorjobs_ordo_condition_questAnchorComplete (player, npc))
	{
		//-- NPC: I really appreciate your help, but things are heating up with the Imps. I got to start backing off on handing out missions. I have let others know what you have done. Good luck. 
		string_id message = new string_id (c_stringFile, "s_10");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_anchorjobs_ordo_condition_legReturn (player, npc))
	{
		//-- NPC: Hey, you really did a number on those mercs. I can't say I'm sorry they are gone. They've been a thorn in our side for some time now.
		string_id message = new string_id (c_stringFile, "s_77");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: Well they won't be causing you any more problems.
		boolean hasResponse0 = false;
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_78");

			utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 3);

			npcStartConversation (player, npc, "tatooine_anchorjobs_ordo", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_anchorjobs_ordo_condition_onQuest (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		tatooine_anchorjobs_ordo_action_facePlayer (player, npc);

		//-- NPC: I need you to complete the tasks that I have assigned you. Now get to it.
		string_id message = new string_id (c_stringFile, "s_14");
		chat.chat (npc, player, message);

		return SCRIPT_CONTINUE;
	}

	//-- [NOTE] 
	if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
	{
		doAnimationAction (npc, "dismiss");

		tatooine_anchorjobs_ordo_action_facePlayer (player, npc);

		//-- NPC: What do you want?
		string_id message = new string_id (c_stringFile, "s_34");
		int numberOfResponses = 0;

		boolean hasResponse = false;

		//-- PLAYER: I am looking to help the Rebellion
		boolean hasResponse0 = false;
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse0 = true;
		}

		//-- PLAYER: I'll just move along.
		boolean hasResponse1 = false;
		if (tatooine_anchorjobs_ordo_condition__defaultCondition (player, npc))
		{
			++numberOfResponses;
			hasResponse = true;
			hasResponse1 = true;
		}

		if (hasResponse)
		{
			int responseIndex = 0;
			string_id responses [] = new string_id [numberOfResponses];

			if (hasResponse0)
				responses [responseIndex++] = new string_id (c_stringFile, "s_36");

			if (hasResponse1)
				responses [responseIndex++] = new string_id (c_stringFile, "s_88");

			utils.setScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId", 7);

			npcStartConversation (player, npc, "tatooine_anchorjobs_ordo", message, responses);
		}
		else
		{
			chat.chat (npc, player, message);
		}

		return SCRIPT_CONTINUE;
	}

	chat.chat (npc, "Error:  All conditions for OnStartNpcConversation were false.");

	return SCRIPT_CONTINUE;
}

// ----------------------------------------------------------------------

trigger OnNpcConversationResponse (string conversationId, obj_id player, string_id response)
{
	if (conversationId != "tatooine_anchorjobs_ordo")
		return SCRIPT_CONTINUE;

	obj_id npc = self;

	int branchId = utils.getIntScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

	if (branchId == 3 && tatooine_anchorjobs_ordo_handleBranch3 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 4 && tatooine_anchorjobs_ordo_handleBranch4 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 5 && tatooine_anchorjobs_ordo_handleBranch5 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 7 && tatooine_anchorjobs_ordo_handleBranch7 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 8 && tatooine_anchorjobs_ordo_handleBranch8 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 9 && tatooine_anchorjobs_ordo_handleBranch9 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 11 && tatooine_anchorjobs_ordo_handleBranch11 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 12 && tatooine_anchorjobs_ordo_handleBranch12 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 14 && tatooine_anchorjobs_ordo_handleBranch14 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 15 && tatooine_anchorjobs_ordo_handleBranch15 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	if (branchId == 17 && tatooine_anchorjobs_ordo_handleBranch17 (player, npc, response) == SCRIPT_CONTINUE)
		return SCRIPT_CONTINUE;

	chat.chat (npc, "Error:  Fell through all branches and responses for OnNpcConversationResponse.");

	utils.removeScriptVar (player, "conversation.tatooine_anchorjobs_ordo.branchId");

	return SCRIPT_CONTINUE;
}

// ======================================================================

